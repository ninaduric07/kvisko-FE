{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.deferred.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isString } from \"../../core/utils/type\";\nimport SelectionStrategy from \"./selection.strategy\";\nimport errors from \"../widget/ui.errors\";\nimport dataQuery from \"../../data/query\";\nimport { Deferred } from \"../../core/utils/deferred\";\nexport default SelectionStrategy.inherit({\n  getSelectedItems: function () {\n    return this._loadFilteredData(this.options.selectionFilter);\n  },\n  getSelectedItemKeys: function () {\n    var d = new Deferred();\n    var that = this;\n    var key = this.options.key();\n    var select = isString(key) ? [key] : key;\n    this._loadFilteredData(this.options.selectionFilter, null, select).done(function (items) {\n      var keys = items.map(function (item) {\n        return that.options.keyOf(item);\n      });\n      d.resolve(keys);\n    }).fail(d.reject);\n    return d.promise();\n  },\n  selectedItemKeys: function (keys, preserve, isDeselect, isSelectAll) {\n    if (isSelectAll) {\n      var filter = this.options.filter();\n      var needResetSelectionFilter = !filter || JSON.stringify(filter) === JSON.stringify(this.options.selectionFilter) && isDeselect;\n      if (needResetSelectionFilter) {\n        this._setOption(\"selectionFilter\", isDeselect ? [] : null);\n      } else {\n        this._addSelectionFilter(isDeselect, filter, isSelectAll);\n      }\n    } else {\n      if (!preserve) {\n        this._setOption(\"selectionFilter\", []);\n      }\n      for (var i = 0; i < keys.length; i++) {\n        if (isDeselect) {\n          this.removeSelectedItem(keys[i]);\n        } else {\n          this.addSelectedItem(keys[i], isSelectAll, !preserve);\n        }\n      }\n    }\n    this.onSelectionChanged();\n    return new Deferred().resolve();\n  },\n  setSelectedItems: function (keys) {\n    this._setOption(\"selectionFilter\", null);\n    for (var i = 0; i < keys.length; i++) {\n      this.addSelectedItem(keys[i]);\n    }\n  },\n  isItemDataSelected: function (itemData) {\n    return this.isItemKeySelected(itemData);\n  },\n  isItemKeySelected: function (itemData) {\n    var selectionFilter = this.options.selectionFilter;\n    if (!selectionFilter) {\n      return true;\n    }\n    return !!dataQuery([itemData]).filter(selectionFilter).toArray().length;\n  },\n  _getKeyExpr: function () {\n    var keyField = this.options.key();\n    if (Array.isArray(keyField) && 1 === keyField.length) {\n      return keyField[0];\n    }\n    return keyField;\n  },\n  _normalizeKey: function (key) {\n    var keyExpr = this.options.key();\n    if (Array.isArray(keyExpr) && 1 === keyExpr.length) {\n      return key[keyExpr[0]];\n    }\n    return key;\n  },\n  _getFilterByKey: function (key) {\n    var keyField = this._getKeyExpr();\n    var filter = [keyField, \"=\", this._normalizeKey(key)];\n    if (Array.isArray(keyField)) {\n      filter = [];\n      for (var i = 0; i < keyField.length; i++) {\n        filter.push([keyField[i], \"=\", key[keyField[i]]]);\n        if (i !== keyField.length - 1) {\n          filter.push(\"and\");\n        }\n      }\n    }\n    return filter;\n  },\n  addSelectedItem: function (key, isSelectAll, skipFilter) {\n    var filter = this._getFilterByKey(key);\n    this._addSelectionFilter(false, filter, isSelectAll, skipFilter);\n  },\n  removeSelectedItem: function (key) {\n    var filter = this._getFilterByKey(key);\n    this._addSelectionFilter(true, filter);\n  },\n  validate: function () {\n    var key = this.options.key;\n    if (key && void 0 === key()) {\n      throw errors.Error(\"E1042\", \"Deferred selection\");\n    }\n  },\n  _findSubFilter: function (selectionFilter, filter) {\n    if (!selectionFilter) {\n      return -1;\n    }\n    var filterString = JSON.stringify(filter);\n    for (var index = 0; index < selectionFilter.length; index++) {\n      var subFilter = selectionFilter[index];\n      if (subFilter && JSON.stringify(subFilter) === filterString) {\n        return index;\n      }\n    }\n    return -1;\n  },\n  _isLastSubFilter: function (selectionFilter, filter) {\n    if (selectionFilter && filter) {\n      return this._findSubFilter(selectionFilter, filter) === selectionFilter.length - 1 || 0 === this._findSubFilter([selectionFilter], filter);\n    }\n    return false;\n  },\n  _addFilterOperator: function (selectionFilter, filterOperator) {\n    if (selectionFilter.length > 1 && isString(selectionFilter[1]) && selectionFilter[1] !== filterOperator) {\n      selectionFilter = [selectionFilter];\n    }\n    if (selectionFilter.length) {\n      selectionFilter.push(filterOperator);\n    }\n    return selectionFilter;\n  },\n  _denormalizeFilter: function (filter) {\n    if (filter && isString(filter[0])) {\n      filter = [filter];\n    }\n    return filter;\n  },\n  _isOnlyNegativeFiltersLeft: function (filters) {\n    return filters.every((filterItem, i) => {\n      if (i % 2 === 0) {\n        return Array.isArray(filterItem) && \"!\" === filterItem[0];\n      } else {\n        return \"and\" === filterItem;\n      }\n    });\n  },\n  _addSelectionFilter: function (isDeselect, filter, isSelectAll, skipFilter) {\n    var _selectionFilter;\n    var currentFilter = isDeselect ? [\"!\", filter] : filter;\n    var currentOperation = isDeselect ? \"and\" : \"or\";\n    var needAddFilter = true;\n    var selectionFilter = this.options.selectionFilter || [];\n    selectionFilter = this._denormalizeFilter(selectionFilter);\n    if (null !== (_selectionFilter = selectionFilter) && void 0 !== _selectionFilter && _selectionFilter.length && !skipFilter) {\n      var removedIndex = this._removeSameFilter(selectionFilter, filter, isDeselect, isSelectAll);\n      var filterIndex = this._removeSameFilter(selectionFilter, filter, !isDeselect);\n      var shouldCleanFilter = isDeselect && (-1 !== removedIndex || -1 !== filterIndex) && this._isOnlyNegativeFiltersLeft(selectionFilter);\n      if (shouldCleanFilter) {\n        selectionFilter = [];\n      }\n      var isKeyOperatorsAfterRemoved = this._isKeyFilter(filter) && this._hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex);\n      needAddFilter = filter.length && !isKeyOperatorsAfterRemoved;\n    }\n    if (needAddFilter) {\n      selectionFilter = this._addFilterOperator(selectionFilter, currentOperation);\n      selectionFilter.push(currentFilter);\n    }\n    selectionFilter = this._normalizeFilter(selectionFilter);\n    this._setOption(\"selectionFilter\", !isDeselect && !selectionFilter.length ? null : selectionFilter);\n  },\n  _normalizeFilter: function (filter) {\n    if (filter && 1 === filter.length) {\n      filter = filter[0];\n    }\n    return filter;\n  },\n  _removeFilterByIndex: function (filter, filterIndex, isSelectAll) {\n    var operation = filter[1];\n    if (filterIndex > 0) {\n      filter.splice(filterIndex - 1, 2);\n    } else {\n      filter.splice(filterIndex, 2);\n    }\n    if (isSelectAll && \"and\" === operation) {\n      filter.splice(0, filter.length);\n    }\n  },\n  _isSimpleKeyFilter: function (filter, key) {\n    return 3 === filter.length && filter[0] === key && \"=\" === filter[1];\n  },\n  _isKeyFilter: function (filter) {\n    if (2 === filter.length && \"!\" === filter[0]) {\n      return this._isKeyFilter(filter[1]);\n    }\n    var keyField = this._getKeyExpr();\n    if (Array.isArray(keyField)) {\n      if (filter.length !== 2 * keyField.length - 1) {\n        return false;\n      }\n      for (var i = 0; i < keyField.length; i++) {\n        if (i > 0 && \"and\" !== filter[2 * i - 1]) {\n          return false;\n        }\n        if (!this._isSimpleKeyFilter(filter[2 * i], keyField[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return this._isSimpleKeyFilter(filter, keyField);\n  },\n  _hasKeyFiltersOnlyStartingFromIndex: function (selectionFilter, filterIndex) {\n    if (filterIndex >= 0) {\n      for (var i = filterIndex; i < selectionFilter.length; i++) {\n        if (\"string\" !== typeof selectionFilter[i] && !this._isKeyFilter(selectionFilter[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  },\n  _removeSameFilter: function (selectionFilter, filter, inverted, isSelectAll) {\n    filter = inverted ? [\"!\", filter] : filter;\n    if (JSON.stringify(filter) === JSON.stringify(selectionFilter)) {\n      selectionFilter.splice(0, selectionFilter.length);\n      return 0;\n    }\n    var filterIndex = this._findSubFilter(selectionFilter, filter);\n    if (filterIndex >= 0) {\n      this._removeFilterByIndex(selectionFilter, filterIndex, isSelectAll);\n      return filterIndex;\n    } else {\n      for (var i = 0; i < selectionFilter.length; i++) {\n        if (Array.isArray(selectionFilter[i]) && selectionFilter[i].length > 2) {\n          var _filterIndex = this._removeSameFilter(selectionFilter[i], filter, false, isSelectAll);\n          if (_filterIndex >= 0) {\n            if (!selectionFilter[i].length) {\n              this._removeFilterByIndex(selectionFilter, i, isSelectAll);\n            } else if (1 === selectionFilter[i].length) {\n              selectionFilter[i] = selectionFilter[i][0];\n            }\n            return _filterIndex;\n          }\n        }\n      }\n      return -1;\n    }\n  },\n  getSelectAllState: function () {\n    var filter = this.options.filter();\n    var selectionFilter = this.options.selectionFilter;\n    if (!selectionFilter) {\n      return true;\n    }\n    if (!selectionFilter.length) {\n      return false;\n    }\n    if (!filter || !filter.length) {\n      return;\n    }\n    selectionFilter = this._denormalizeFilter(selectionFilter);\n    if (this._isLastSubFilter(selectionFilter, filter)) {\n      return true;\n    }\n    if (this._isLastSubFilter(selectionFilter, [\"!\", filter])) {\n      return false;\n    }\n    return;\n  }\n});","map":{"version":3,"names":["isString","SelectionStrategy","errors","dataQuery","Deferred","inherit","getSelectedItems","_loadFilteredData","options","selectionFilter","getSelectedItemKeys","d","that","key","select","done","items","keys","map","item","keyOf","resolve","fail","reject","promise","selectedItemKeys","preserve","isDeselect","isSelectAll","filter","needResetSelectionFilter","JSON","stringify","_setOption","_addSelectionFilter","i","length","removeSelectedItem","addSelectedItem","onSelectionChanged","setSelectedItems","isItemDataSelected","itemData","isItemKeySelected","toArray","_getKeyExpr","keyField","Array","isArray","_normalizeKey","keyExpr","_getFilterByKey","push","skipFilter","validate","Error","_findSubFilter","filterString","index","subFilter","_isLastSubFilter","_addFilterOperator","filterOperator","_denormalizeFilter","_isOnlyNegativeFiltersLeft","filters","every","filterItem","_selectionFilter","currentFilter","currentOperation","needAddFilter","removedIndex","_removeSameFilter","filterIndex","shouldCleanFilter","isKeyOperatorsAfterRemoved","_isKeyFilter","_hasKeyFiltersOnlyStartingFromIndex","_normalizeFilter","_removeFilterByIndex","operation","splice","_isSimpleKeyFilter","inverted","_filterIndex","getSelectAllState"],"sources":["C:/Users/ninad/OneDrive/Radna povr≈°ina/zavrsni/client/node_modules/devextreme/esm/ui/selection/selection.strategy.deferred.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.deferred.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport SelectionStrategy from \"./selection.strategy\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport dataQuery from \"../../data/query\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nexport default SelectionStrategy.inherit({\r\n    getSelectedItems: function() {\r\n        return this._loadFilteredData(this.options.selectionFilter)\r\n    },\r\n    getSelectedItemKeys: function() {\r\n        var d = new Deferred;\r\n        var that = this;\r\n        var key = this.options.key();\r\n        var select = isString(key) ? [key] : key;\r\n        this._loadFilteredData(this.options.selectionFilter, null, select).done((function(items) {\r\n            var keys = items.map((function(item) {\r\n                return that.options.keyOf(item)\r\n            }));\r\n            d.resolve(keys)\r\n        })).fail(d.reject);\r\n        return d.promise()\r\n    },\r\n    selectedItemKeys: function(keys, preserve, isDeselect, isSelectAll) {\r\n        if (isSelectAll) {\r\n            var filter = this.options.filter();\r\n            var needResetSelectionFilter = !filter || JSON.stringify(filter) === JSON.stringify(this.options.selectionFilter) && isDeselect;\r\n            if (needResetSelectionFilter) {\r\n                this._setOption(\"selectionFilter\", isDeselect ? [] : null)\r\n            } else {\r\n                this._addSelectionFilter(isDeselect, filter, isSelectAll)\r\n            }\r\n        } else {\r\n            if (!preserve) {\r\n                this._setOption(\"selectionFilter\", [])\r\n            }\r\n            for (var i = 0; i < keys.length; i++) {\r\n                if (isDeselect) {\r\n                    this.removeSelectedItem(keys[i])\r\n                } else {\r\n                    this.addSelectedItem(keys[i], isSelectAll, !preserve)\r\n                }\r\n            }\r\n        }\r\n        this.onSelectionChanged();\r\n        return (new Deferred).resolve()\r\n    },\r\n    setSelectedItems: function(keys) {\r\n        this._setOption(\"selectionFilter\", null);\r\n        for (var i = 0; i < keys.length; i++) {\r\n            this.addSelectedItem(keys[i])\r\n        }\r\n    },\r\n    isItemDataSelected: function(itemData) {\r\n        return this.isItemKeySelected(itemData)\r\n    },\r\n    isItemKeySelected: function(itemData) {\r\n        var selectionFilter = this.options.selectionFilter;\r\n        if (!selectionFilter) {\r\n            return true\r\n        }\r\n        return !!dataQuery([itemData]).filter(selectionFilter).toArray().length\r\n    },\r\n    _getKeyExpr: function() {\r\n        var keyField = this.options.key();\r\n        if (Array.isArray(keyField) && 1 === keyField.length) {\r\n            return keyField[0]\r\n        }\r\n        return keyField\r\n    },\r\n    _normalizeKey: function(key) {\r\n        var keyExpr = this.options.key();\r\n        if (Array.isArray(keyExpr) && 1 === keyExpr.length) {\r\n            return key[keyExpr[0]]\r\n        }\r\n        return key\r\n    },\r\n    _getFilterByKey: function(key) {\r\n        var keyField = this._getKeyExpr();\r\n        var filter = [keyField, \"=\", this._normalizeKey(key)];\r\n        if (Array.isArray(keyField)) {\r\n            filter = [];\r\n            for (var i = 0; i < keyField.length; i++) {\r\n                filter.push([keyField[i], \"=\", key[keyField[i]]]);\r\n                if (i !== keyField.length - 1) {\r\n                    filter.push(\"and\")\r\n                }\r\n            }\r\n        }\r\n        return filter\r\n    },\r\n    addSelectedItem: function(key, isSelectAll, skipFilter) {\r\n        var filter = this._getFilterByKey(key);\r\n        this._addSelectionFilter(false, filter, isSelectAll, skipFilter)\r\n    },\r\n    removeSelectedItem: function(key) {\r\n        var filter = this._getFilterByKey(key);\r\n        this._addSelectionFilter(true, filter)\r\n    },\r\n    validate: function() {\r\n        var key = this.options.key;\r\n        if (key && void 0 === key()) {\r\n            throw errors.Error(\"E1042\", \"Deferred selection\")\r\n        }\r\n    },\r\n    _findSubFilter: function(selectionFilter, filter) {\r\n        if (!selectionFilter) {\r\n            return -1\r\n        }\r\n        var filterString = JSON.stringify(filter);\r\n        for (var index = 0; index < selectionFilter.length; index++) {\r\n            var subFilter = selectionFilter[index];\r\n            if (subFilter && JSON.stringify(subFilter) === filterString) {\r\n                return index\r\n            }\r\n        }\r\n        return -1\r\n    },\r\n    _isLastSubFilter: function(selectionFilter, filter) {\r\n        if (selectionFilter && filter) {\r\n            return this._findSubFilter(selectionFilter, filter) === selectionFilter.length - 1 || 0 === this._findSubFilter([selectionFilter], filter)\r\n        }\r\n        return false\r\n    },\r\n    _addFilterOperator: function(selectionFilter, filterOperator) {\r\n        if (selectionFilter.length > 1 && isString(selectionFilter[1]) && selectionFilter[1] !== filterOperator) {\r\n            selectionFilter = [selectionFilter]\r\n        }\r\n        if (selectionFilter.length) {\r\n            selectionFilter.push(filterOperator)\r\n        }\r\n        return selectionFilter\r\n    },\r\n    _denormalizeFilter: function(filter) {\r\n        if (filter && isString(filter[0])) {\r\n            filter = [filter]\r\n        }\r\n        return filter\r\n    },\r\n    _isOnlyNegativeFiltersLeft: function(filters) {\r\n        return filters.every((filterItem, i) => {\r\n            if (i % 2 === 0) {\r\n                return Array.isArray(filterItem) && \"!\" === filterItem[0]\r\n            } else {\r\n                return \"and\" === filterItem\r\n            }\r\n        })\r\n    },\r\n    _addSelectionFilter: function(isDeselect, filter, isSelectAll, skipFilter) {\r\n        var _selectionFilter;\r\n        var currentFilter = isDeselect ? [\"!\", filter] : filter;\r\n        var currentOperation = isDeselect ? \"and\" : \"or\";\r\n        var needAddFilter = true;\r\n        var selectionFilter = this.options.selectionFilter || [];\r\n        selectionFilter = this._denormalizeFilter(selectionFilter);\r\n        if (null !== (_selectionFilter = selectionFilter) && void 0 !== _selectionFilter && _selectionFilter.length && !skipFilter) {\r\n            var removedIndex = this._removeSameFilter(selectionFilter, filter, isDeselect, isSelectAll);\r\n            var filterIndex = this._removeSameFilter(selectionFilter, filter, !isDeselect);\r\n            var shouldCleanFilter = isDeselect && (-1 !== removedIndex || -1 !== filterIndex) && this._isOnlyNegativeFiltersLeft(selectionFilter);\r\n            if (shouldCleanFilter) {\r\n                selectionFilter = []\r\n            }\r\n            var isKeyOperatorsAfterRemoved = this._isKeyFilter(filter) && this._hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex);\r\n            needAddFilter = filter.length && !isKeyOperatorsAfterRemoved\r\n        }\r\n        if (needAddFilter) {\r\n            selectionFilter = this._addFilterOperator(selectionFilter, currentOperation);\r\n            selectionFilter.push(currentFilter)\r\n        }\r\n        selectionFilter = this._normalizeFilter(selectionFilter);\r\n        this._setOption(\"selectionFilter\", !isDeselect && !selectionFilter.length ? null : selectionFilter)\r\n    },\r\n    _normalizeFilter: function(filter) {\r\n        if (filter && 1 === filter.length) {\r\n            filter = filter[0]\r\n        }\r\n        return filter\r\n    },\r\n    _removeFilterByIndex: function(filter, filterIndex, isSelectAll) {\r\n        var operation = filter[1];\r\n        if (filterIndex > 0) {\r\n            filter.splice(filterIndex - 1, 2)\r\n        } else {\r\n            filter.splice(filterIndex, 2)\r\n        }\r\n        if (isSelectAll && \"and\" === operation) {\r\n            filter.splice(0, filter.length)\r\n        }\r\n    },\r\n    _isSimpleKeyFilter: function(filter, key) {\r\n        return 3 === filter.length && filter[0] === key && \"=\" === filter[1]\r\n    },\r\n    _isKeyFilter: function(filter) {\r\n        if (2 === filter.length && \"!\" === filter[0]) {\r\n            return this._isKeyFilter(filter[1])\r\n        }\r\n        var keyField = this._getKeyExpr();\r\n        if (Array.isArray(keyField)) {\r\n            if (filter.length !== 2 * keyField.length - 1) {\r\n                return false\r\n            }\r\n            for (var i = 0; i < keyField.length; i++) {\r\n                if (i > 0 && \"and\" !== filter[2 * i - 1]) {\r\n                    return false\r\n                }\r\n                if (!this._isSimpleKeyFilter(filter[2 * i], keyField[i])) {\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n        return this._isSimpleKeyFilter(filter, keyField)\r\n    },\r\n    _hasKeyFiltersOnlyStartingFromIndex: function(selectionFilter, filterIndex) {\r\n        if (filterIndex >= 0) {\r\n            for (var i = filterIndex; i < selectionFilter.length; i++) {\r\n                if (\"string\" !== typeof selectionFilter[i] && !this._isKeyFilter(selectionFilter[i])) {\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n    _removeSameFilter: function(selectionFilter, filter, inverted, isSelectAll) {\r\n        filter = inverted ? [\"!\", filter] : filter;\r\n        if (JSON.stringify(filter) === JSON.stringify(selectionFilter)) {\r\n            selectionFilter.splice(0, selectionFilter.length);\r\n            return 0\r\n        }\r\n        var filterIndex = this._findSubFilter(selectionFilter, filter);\r\n        if (filterIndex >= 0) {\r\n            this._removeFilterByIndex(selectionFilter, filterIndex, isSelectAll);\r\n            return filterIndex\r\n        } else {\r\n            for (var i = 0; i < selectionFilter.length; i++) {\r\n                if (Array.isArray(selectionFilter[i]) && selectionFilter[i].length > 2) {\r\n                    var _filterIndex = this._removeSameFilter(selectionFilter[i], filter, false, isSelectAll);\r\n                    if (_filterIndex >= 0) {\r\n                        if (!selectionFilter[i].length) {\r\n                            this._removeFilterByIndex(selectionFilter, i, isSelectAll)\r\n                        } else if (1 === selectionFilter[i].length) {\r\n                            selectionFilter[i] = selectionFilter[i][0]\r\n                        }\r\n                        return _filterIndex\r\n                    }\r\n                }\r\n            }\r\n            return -1\r\n        }\r\n    },\r\n    getSelectAllState: function() {\r\n        var filter = this.options.filter();\r\n        var selectionFilter = this.options.selectionFilter;\r\n        if (!selectionFilter) {\r\n            return true\r\n        }\r\n        if (!selectionFilter.length) {\r\n            return false\r\n        }\r\n        if (!filter || !filter.length) {\r\n            return\r\n        }\r\n        selectionFilter = this._denormalizeFilter(selectionFilter);\r\n        if (this._isLastSubFilter(selectionFilter, filter)) {\r\n            return true\r\n        }\r\n        if (this._isLastSubFilter(selectionFilter, [\"!\", filter])) {\r\n            return false\r\n        }\r\n        return\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}