{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/select_box.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport { noop, ensureDefined } from \"../core/utils/common\";\nimport { isDefined, isPromise } from \"../core/utils/type\";\nimport { extend } from \"../core/utils/extend\";\nimport { each } from \"../core/utils/iterator\";\nimport { Deferred, fromPromise } from \"../core/utils/deferred\";\nimport { getPublicElement } from \"../core/element\";\nimport errors from \"../core/errors\";\nimport domAdapter from \"../core/dom_adapter\";\nimport messageLocalization from \"../localization/message\";\nimport registerComponent from \"../core/component_registrator\";\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\nimport \"./list/modules/selection\";\nimport { normalizeKeyName } from \"../events/utils/index\";\nvar DISABLED_STATE_SELECTOR = \".dx-state-disabled\";\nvar SELECTBOX_CLASS = \"dx-selectbox\";\nvar SELECTBOX_POPUP_CLASS = \"dx-selectbox-popup\";\nvar SELECTBOX_CONTAINER_CLASS = \"dx-selectbox-container\";\nvar SELECTBOX_POPUP_WRAPPER_CLASS = \"dx-selectbox-popup-wrapper\";\nvar SelectBox = DropDownList.inherit({\n  _supportedKeys: function () {\n    var that = this;\n    var parent = this.callBase();\n    var clearSelectBox = function (e) {\n      var isEditable = this._isEditable();\n      if (!isEditable) {\n        if (this.option(\"showClearButton\")) {\n          e.preventDefault();\n          this.reset();\n        }\n      } else if (this._valueSubstituted()) {\n        this._preventFiltering = true;\n      }\n      this._savedTextRemoveEvent = e;\n      this._preventSubstitution = true;\n    };\n    var searchIfNeeded = function () {\n      if (that.option(\"searchEnabled\") && that._valueSubstituted()) {\n        that._searchHandler();\n      }\n    };\n    return extend({}, parent, {\n      tab: function () {\n        if (this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\")) {\n          this._resetCaretPosition(true);\n        }\n        parent.tab && parent.tab.apply(this, arguments);\n        this._cancelSearchIfNeed();\n      },\n      upArrow: function (e) {\n        if (parent.upArrow && parent.upArrow.apply(this, arguments)) {\n          if (!this.option(\"opened\")) {\n            this._setNextValue(e);\n          }\n          return true;\n        }\n      },\n      downArrow: function (e) {\n        if (parent.downArrow && parent.downArrow.apply(this, arguments)) {\n          if (!this.option(\"opened\")) {\n            this._setNextValue(e);\n          }\n          return true;\n        }\n      },\n      leftArrow: function () {\n        searchIfNeeded();\n        parent.leftArrow && parent.leftArrow.apply(this, arguments);\n      },\n      rightArrow: function () {\n        searchIfNeeded();\n        parent.rightArrow && parent.rightArrow.apply(this, arguments);\n      },\n      home: function () {\n        searchIfNeeded();\n        parent.home && parent.home.apply(this, arguments);\n      },\n      end: function () {\n        searchIfNeeded();\n        parent.end && parent.end.apply(this, arguments);\n      },\n      escape: function () {\n        var result = parent.escape && parent.escape.apply(this, arguments);\n        this._cancelEditing();\n        return null !== result && void 0 !== result ? result : true;\n      },\n      enter: function (e) {\n        var isOpened = this.option(\"opened\");\n        var inputText = this._input().val().trim();\n        var isCustomText = inputText && this._list && !this._list.option(\"focusedElement\");\n        if (!inputText && isDefined(this.option(\"value\")) && this.option(\"allowClearing\")) {\n          this._saveValueChangeEvent(e);\n          this.option({\n            selectedItem: null,\n            value: null\n          });\n          this.close();\n        } else {\n          if (this.option(\"acceptCustomValue\")) {\n            e.preventDefault();\n            if (isCustomText) {\n              if (isOpened) {\n                this._toggleOpenState();\n              }\n              this._valueChangeEventHandler(e);\n            }\n            return isOpened;\n          }\n          if (parent.enter && parent.enter.apply(this, arguments)) {\n            return isOpened;\n          }\n        }\n      },\n      space: function (e) {\n        var isOpened = this.option(\"opened\");\n        var isSearchEnabled = this.option(\"searchEnabled\");\n        var acceptCustomValue = this.option(\"acceptCustomValue\");\n        if (!isOpened || isSearchEnabled || acceptCustomValue) {\n          return;\n        }\n        e.preventDefault();\n        this._valueChangeEventHandler(e);\n        return true;\n      },\n      backspace: clearSelectBox,\n      del: clearSelectBox\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      placeholder: messageLocalization.format(\"Select\"),\n      fieldTemplate: null,\n      customItemCreateEvent: \"change\",\n      valueChangeEvent: \"change\",\n      acceptCustomValue: false,\n      onCustomItemCreating: function (e) {\n        if (!isDefined(e.customItem)) {\n          e.customItem = e.text;\n        }\n      },\n      showSelectionControls: false,\n      allowClearing: true,\n      tooltipEnabled: false,\n      openOnFieldClick: true,\n      showDropDownButton: true,\n      displayCustomValue: false,\n      useHiddenSubmitElement: true\n    });\n  },\n  _init: function () {\n    this.callBase();\n    this._initCustomItemCreatingAction();\n  },\n  _initMarkup: function () {\n    this.$element().addClass(SELECTBOX_CLASS);\n    this._renderTooltip();\n    this.callBase();\n    this._$container.addClass(SELECTBOX_CONTAINER_CLASS);\n  },\n  _createPopup: function () {\n    this.callBase();\n    this._popup.$element().addClass(SELECTBOX_POPUP_CLASS);\n    this._popup.$overlayContent().attr(\"tabindex\", -1);\n  },\n  _popupWrapperClass: function () {\n    return this.callBase() + \" \" + SELECTBOX_POPUP_WRAPPER_CLASS;\n  },\n  _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      valueChangeEvent: {\n        since: \"22.2\",\n        alias: \"customItemCreateEvent\"\n      }\n    });\n  },\n  _cancelEditing: function () {\n    if (!this.option(\"searchEnabled\") && this._list) {\n      this._focusListElement(null);\n      this._updateField(this.option(\"selectedItem\"));\n    }\n  },\n  _renderOpenedState: function () {\n    this.callBase();\n    if (this.option(\"opened\")) {\n      this._scrollToSelectedItem();\n      this._focusSelectedElement();\n    }\n  },\n  _focusSelectedElement: function () {\n    var _items$indexOf;\n    var searchValue = this._searchValue();\n    if (!searchValue) {\n      this._focusListElement(null);\n      return;\n    }\n    var {\n      items: items,\n      selectedItem: selectedItem\n    } = this.option();\n    var $listItems = this._list._itemElements();\n    var index = null !== (_items$indexOf = null === items || void 0 === items ? void 0 : items.indexOf(selectedItem)) && void 0 !== _items$indexOf ? _items$indexOf : -1;\n    var focusedElement = -1 !== index && !this._isCustomItemSelected() ? $listItems.eq(index) : null;\n    this._focusListElement(focusedElement);\n  },\n  _renderFocusedElement: function () {\n    if (!this._list) {\n      return;\n    }\n    var searchValue = this._searchValue();\n    if (!searchValue || this.option(\"acceptCustomValue\")) {\n      this._focusListElement(null);\n      return;\n    }\n    var $listItems = this._list._itemElements();\n    var focusedElement = $listItems.not(DISABLED_STATE_SELECTOR).eq(0);\n    this._focusListElement(focusedElement);\n  },\n  _focusListElement: function (element) {\n    this._preventInputValueRender = true;\n    this._list.option(\"focusedElement\", getPublicElement(element));\n    delete this._preventInputValueRender;\n  },\n  _scrollToSelectedItem: function () {\n    this._list && this._list.scrollToItem(this._list.option(\"selectedItem\"));\n  },\n  _listContentReadyHandler: function () {\n    this.callBase();\n    var isPaginate = this._dataController.paginate();\n    if (isPaginate && this._needPopupRepaint()) {\n      return;\n    }\n    this._scrollToSelectedItem();\n  },\n  _renderValue: function () {\n    this._renderInputValue();\n    this._setSubmitValue();\n    return new Deferred().resolve();\n  },\n  _renderInputValue: function () {\n    return this.callBase().always(function () {\n      this._renderInputValueAsync();\n    }.bind(this));\n  },\n  _renderInputValueAsync: function () {\n    this._renderTooltip();\n    this._renderInputValueImpl().always(function () {\n      this._refreshSelected();\n    }.bind(this));\n  },\n  _renderInputValueImpl: function () {\n    this._renderField();\n    return new Deferred().resolve();\n  },\n  _setNextItem: function (step) {\n    var item = this._calcNextItem(step);\n    var value = this._valueGetter(item);\n    this._setValue(value);\n  },\n  _setNextValue: function (e) {\n    var dataSourceIsLoaded = this._dataController.isLoaded() ? new Deferred().resolve() : this._dataController.load();\n    dataSourceIsLoaded.done(function () {\n      var selectedIndex = this._getSelectedIndex();\n      var hasPages = this._dataController.pageSize();\n      var isLastPage = this._dataController.isLastPage();\n      var isLastItem = selectedIndex === this._items().length - 1;\n      this._saveValueChangeEvent(e);\n      var step = \"downArrow\" === normalizeKeyName(e) ? 1 : -1;\n      if (hasPages && !isLastPage && isLastItem && step > 0) {\n        if (!this._popup) {\n          this._createPopup();\n        }\n        if (!this._dataController.isLoading()) {\n          this._list._loadNextPage().done(this._setNextItem.bind(this, step));\n        }\n      } else {\n        this._setNextItem(step);\n      }\n    }.bind(this));\n  },\n  _setSelectedItem: function (item) {\n    var isUnknownItem = !this._isCustomValueAllowed() && void 0 === item;\n    this.callBase(isUnknownItem ? null : item);\n    if (!isUnknownItem && (!this._isEditable() || this._isCustomItemSelected())) {\n      this._setListOption(\"selectedItem\", this.option(\"selectedItem\"));\n    }\n  },\n  _isCustomValueAllowed: function () {\n    return this.option(\"acceptCustomValue\") || this.callBase();\n  },\n  _displayValue: function (item) {\n    item = !isDefined(item) && this._isCustomValueAllowed() ? this.option(\"value\") : item;\n    return this.callBase(item);\n  },\n  _listConfig: function () {\n    var result = extend(this.callBase(), {\n      pageLoadMode: \"scrollBottom\",\n      onSelectionChanged: this._getSelectionChangeHandler(),\n      selectedItem: this.option(\"selectedItem\"),\n      onFocusedItemChanged: this._listFocusedItemChangeHandler.bind(this)\n    });\n    if (this.option(\"showSelectionControls\")) {\n      extend(result, {\n        showSelectionControls: true,\n        selectionByClick: true\n      });\n    }\n    return result;\n  },\n  _listFocusedItemChangeHandler: function (e) {\n    if (this._preventInputValueRender) {\n      return;\n    }\n    var list = e.component;\n    var focusedElement = $(list.option(\"focusedElement\"));\n    var focusedItem = list._getItemData(focusedElement);\n    this._updateField(focusedItem);\n  },\n  _updateField: function (item) {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n    if (!(fieldTemplate && this.option(\"fieldTemplate\"))) {\n      var text = this._displayGetter(item);\n      this.option(\"text\", text);\n      this._renderDisplayText(text);\n      return;\n    }\n    this._renderField();\n  },\n  _getSelectionChangeHandler: function () {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop;\n  },\n  _selectionChangeHandler: function (e) {\n    each(e.addedItems || [], function (_, addedItem) {\n      this._setValue(this._valueGetter(addedItem));\n    }.bind(this));\n  },\n  _getActualSearchValue: function () {\n    return this._dataController.searchValue();\n  },\n  _toggleOpenState: function (isVisible) {\n    if (this.option(\"disabled\")) {\n      return;\n    }\n    isVisible = arguments.length ? isVisible : !this.option(\"opened\");\n    if (!isVisible && !this._shouldClearFilter()) {\n      this._restoreInputText(true);\n    }\n    if (this._wasSearch() && isVisible) {\n      this._wasSearch(false);\n      var showDataImmediately = this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\n      if (showDataImmediately && this._dataController.getDataSource()) {\n        if (this._searchTimer) {\n          return;\n        }\n        var searchValue = this._getActualSearchValue();\n        searchValue && this._wasSearch(true);\n        this._filterDataSource(searchValue || null);\n      } else {\n        this._setListOption(\"items\", []);\n      }\n    }\n    if (isVisible) {\n      this._scrollToSelectedItem();\n    }\n    this.callBase(isVisible);\n  },\n  _renderTooltip: function () {\n    if (this.option(\"tooltipEnabled\")) {\n      this.$element().attr(\"title\", this.option(\"displayValue\"));\n    }\n  },\n  _renderDimensions: function () {\n    this.callBase();\n    this._updatePopupWidth();\n    this._updateListDimensions();\n  },\n  _isValueEqualInputText: function () {\n    var initialSelectedItem = this.option(\"selectedItem\");\n    if (null === initialSelectedItem) {\n      return false;\n    }\n    var value = this._displayGetter(initialSelectedItem);\n    var displayValue = value ? String(value) : \"\";\n    var inputText = this._searchValue();\n    return displayValue === inputText;\n  },\n  _popupHidingHandler: function () {\n    if (this._isValueEqualInputText()) {\n      this._cancelEditing();\n    }\n    this.callBase();\n  },\n  _popupHiddenHandler: function () {\n    this.callBase();\n    if (this._shouldCancelSearch()) {\n      this._wasSearch(false);\n      this._searchCanceled();\n      this._shouldCancelSearch(false);\n    }\n  },\n  _restoreInputText: function (saveEditingValue) {\n    if (this.option(\"readOnly\")) {\n      return;\n    }\n    this._loadItemDeferred && this._loadItemDeferred.always(function () {\n      var {\n        acceptCustomValue: acceptCustomValue,\n        text: text,\n        selectedItem: initialSelectedItem\n      } = this.option();\n      if (acceptCustomValue) {\n        if (!saveEditingValue && !this._isValueChanging) {\n          this._updateField(null !== initialSelectedItem && void 0 !== initialSelectedItem ? initialSelectedItem : this._createCustomItem(text));\n          this._clearFilter();\n        }\n        return;\n      }\n      if (this.option(\"searchEnabled\")) {\n        if (!this._searchValue() && this.option(\"allowClearing\")) {\n          this._clearTextValue();\n          return;\n        }\n      }\n      if (this._isValueEqualInputText()) {\n        return;\n      }\n      this._renderInputValue().always(function (selectedItem) {\n        var newSelectedItem = ensureDefined(selectedItem, initialSelectedItem);\n        this._setSelectedItem(newSelectedItem);\n        this._updateField(newSelectedItem);\n        this._clearFilter();\n      }.bind(this));\n    }.bind(this));\n  },\n  _valueChangeEventIncludesBlur: function () {\n    var valueChangeEvent = this.option(this._getValueChangeEventOptionName());\n    return valueChangeEvent.includes(\"blur\");\n  },\n  _isPreventedFocusOutEvent: function (e) {\n    return this._preventNestedFocusEvent(e) || this._valueChangeEventIncludesBlur();\n  },\n  _focusOutHandler: function (e) {\n    if (!this._isPreventedFocusOutEvent(e)) {\n      var isOverlayTarget = this._isOverlayNestedTarget(e.relatedTarget);\n      if (!isOverlayTarget) {\n        this._restoreInputText();\n        this._clearSearchTimer();\n      }\n      this._cancelSearchIfNeed(e);\n    }\n    e.target = this._input().get(0);\n    this.callBase(e);\n  },\n  _cancelSearchIfNeed: function (e) {\n    var {\n      searchEnabled: searchEnabled\n    } = this.option();\n    var isOverlayTarget = this._isOverlayNestedTarget(null === e || void 0 === e ? void 0 : e.relatedTarget);\n    var shouldCancelSearch = this._wasSearch() && searchEnabled && !isOverlayTarget;\n    if (shouldCancelSearch) {\n      var _this$_popup;\n      var isPopupVisible = null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup._hideAnimationProcessing;\n      this._clearSearchTimer();\n      if (isPopupVisible) {\n        this._shouldCancelSearch(true);\n      } else {\n        this._wasSearch(false);\n        this._searchCanceled();\n      }\n    }\n  },\n  _shouldCancelSearch: function (value) {\n    if (!arguments.length) {\n      return this._shouldCancelSearchValue;\n    }\n    this._shouldCancelSearchValue = value;\n  },\n  _isOverlayNestedTarget: function (target) {\n    return !!$(target).closest(\".\".concat(SELECTBOX_POPUP_WRAPPER_CLASS)).length;\n  },\n  _clearTextValue: function () {\n    if (this.option(\"selectedItem\")) {\n      if (this._savedTextRemoveEvent) {\n        this._saveValueChangeEvent(this._savedTextRemoveEvent);\n      }\n      this.option(\"value\", null);\n    }\n    delete this._savedTextRemoveEvent;\n  },\n  _shouldOpenPopup: function () {\n    return this._needPassDataSourceToList() && this._wasSearch();\n  },\n  _isFocused: function () {\n    var activeElement = domAdapter.getActiveElement(this.element());\n    return this.callBase() && $(activeElement).closest(this._input()).length > 0;\n  },\n  _getValueChangeEventOptionName: function () {\n    return \"customItemCreateEvent\";\n  },\n  _renderValueChangeEvent: function () {\n    if (this._isEditable()) {\n      this.callBase();\n    }\n  },\n  _fieldRenderData: function () {\n    var $listFocused = this._list && this.option(\"opened\") && $(this._list.option(\"focusedElement\"));\n    if ($listFocused && $listFocused.length) {\n      return this._list._getItemData($listFocused);\n    }\n    return this.option(\"selectedItem\");\n  },\n  _isSelectedValue: function (value) {\n    return this._isValueEquals(value, this.option(\"value\"));\n  },\n  _shouldCloseOnItemClick: function () {\n    return !(this.option(\"showSelectionControls\") && \"single\" !== this.option(\"selectionMode\"));\n  },\n  _listItemClickHandler: function (e) {\n    var previousValue = this._getCurrentValue();\n    this._focusListElement($(e.itemElement));\n    this._saveValueChangeEvent(e.event);\n    this._completeSelection(this._valueGetter(e.itemData));\n    if (this._shouldCloseOnItemClick()) {\n      this.option(\"opened\", false);\n    }\n    if (this.option(\"searchEnabled\") && previousValue === this._valueGetter(e.itemData)) {\n      this._updateField(e.itemData);\n    }\n    if (this._shouldClearFilter()) {\n      this._cancelSearchIfNeed();\n    }\n  },\n  _shouldClearFilter: function () {\n    return this._wasSearch();\n  },\n  _completeSelection: function (value) {\n    this._setValue(value);\n  },\n  _loadItem: function (value, cache) {\n    var that = this;\n    var deferred = new Deferred();\n    this.callBase(value, cache).done(function (item) {\n      deferred.resolve(item);\n    }.bind(this)).fail(function (args) {\n      if (null !== args && void 0 !== args && args.shouldSkipCallback) {\n        return;\n      }\n      var selectedItem = that.option(\"selectedItem\");\n      if (that.option(\"acceptCustomValue\") && value === that._valueGetter(selectedItem)) {\n        deferred.resolve(selectedItem);\n      } else {\n        deferred.reject();\n      }\n    }.bind(this));\n    return deferred.promise();\n  },\n  _loadInputValue: function (value, callback) {\n    this._loadItemDeferred = this._loadItem(value).always(callback);\n    return this._loadItemDeferred;\n  },\n  _isCustomItemSelected: function () {\n    var selectedItem = this.option(\"selectedItem\");\n    var searchValue = this._searchValue();\n    var selectedItemText = this._displayGetter(selectedItem);\n    return !selectedItemText || searchValue !== selectedItemText.toString();\n  },\n  _valueChangeEventHandler: function (e) {\n    if (this.option(\"acceptCustomValue\") && this._isCustomItemSelected() && !this._isValueChanging) {\n      this._isValueChanging = true;\n      this._customItemAddedHandler(e);\n    }\n  },\n  _initCustomItemCreatingAction: function () {\n    this._customItemCreatingAction = this._createActionByOption(\"onCustomItemCreating\");\n  },\n  _createCustomItem: function (text) {\n    var params = {\n      text: text\n    };\n    var actionResult = this._customItemCreatingAction(params);\n    var item = ensureDefined(actionResult, params.customItem);\n    if (isDefined(actionResult)) {\n      errors.log(\"W0015\", \"onCustomItemCreating\", \"customItem\");\n    }\n    return item;\n  },\n  _customItemAddedHandler: function (e) {\n    var searchValue = this._searchValue();\n    var item = this._createCustomItem(searchValue);\n    this._saveValueChangeEvent(e);\n    if (void 0 === item) {\n      this._renderValue();\n      throw errors.Error(\"E0121\");\n    }\n    if (isPromise(item)) {\n      fromPromise(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this, null));\n    } else {\n      this._setCustomItem(item);\n    }\n  },\n  _setCustomItem: function (item) {\n    if (this._disposed) {\n      return;\n    }\n    item = item || null;\n    this.option(\"selectedItem\", item);\n    this._cancelSearchIfNeed();\n    this._setValue(this._valueGetter(item));\n    this._renderDisplayText(this._displayGetter(item));\n    this._isValueChanging = false;\n  },\n  _clearValueHandler: function (e) {\n    this._preventFiltering = true;\n    this.callBase(e);\n    this._searchCanceled();\n    return false;\n  },\n  _wasSearch: function (value) {\n    if (!arguments.length) {\n      return !!this._wasSearchValue;\n    }\n    this._wasSearchValue = value;\n  },\n  _searchHandler: function () {\n    if (this._preventFiltering) {\n      delete this._preventFiltering;\n      return;\n    }\n    if (this._needPassDataSourceToList()) {\n      this._wasSearch(true);\n    }\n    this.callBase(arguments);\n  },\n  _dataSourceFiltered: function (searchValue) {\n    this.callBase();\n    if (null !== searchValue) {\n      this._renderInputSubstitution();\n      this._renderFocusedElement();\n    }\n  },\n  _valueSubstituted: function () {\n    var input = this._input().get(0);\n    var currentSearchLength = this._searchValue().length;\n    var isAllSelected = 0 === input.selectionStart && input.selectionEnd === currentSearchLength;\n    var inputHasSelection = input.selectionStart !== input.selectionEnd;\n    var isLastSymbolSelected = currentSearchLength === input.selectionEnd;\n    return this._wasSearch() && inputHasSelection && !isAllSelected && isLastSymbolSelected && this._shouldSubstitutionBeRendered();\n  },\n  _shouldSubstitutionBeRendered: function () {\n    return !this._preventSubstitution && this.option(\"searchEnabled\") && !this.option(\"acceptCustomValue\") && \"startswith\" === this.option(\"searchMode\");\n  },\n  _renderInputSubstitution: function () {\n    if (!this._shouldSubstitutionBeRendered()) {\n      delete this._preventSubstitution;\n      return;\n    }\n    var item = this._list && this._getPlainItems(this._list.option(\"items\"))[0];\n    if (!item) {\n      return;\n    }\n    var $input = this._input();\n    var valueLength = $input.val().length;\n    if (0 === valueLength) {\n      return;\n    }\n    var inputElement = $input.get(0);\n    var displayValue = this._displayGetter(item).toString();\n    inputElement.value = displayValue;\n    this._caret({\n      start: valueLength,\n      end: displayValue.length\n    });\n  },\n  _dispose: function () {\n    this._renderInputValueAsync = noop;\n    delete this._loadItemDeferred;\n    this.callBase();\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"customItemCreateEvent\":\n        this._refreshValueChangeEvent();\n        this._refreshFocusEvent();\n        this._refreshEvents();\n        break;\n      case \"onCustomItemCreating\":\n        this._initCustomItemCreatingAction();\n        break;\n      case \"tooltipEnabled\":\n        this._renderTooltip();\n        break;\n      case \"displayCustomValue\":\n      case \"acceptCustomValue\":\n      case \"showSelectionControls\":\n        this._invalidate();\n        break;\n      case \"allowClearing\":\n        break;\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxSelectBox\", SelectBox);\nexport default SelectBox;","map":{"version":3,"names":["$","noop","ensureDefined","isDefined","isPromise","extend","each","Deferred","fromPromise","getPublicElement","errors","domAdapter","messageLocalization","registerComponent","DropDownList","normalizeKeyName","DISABLED_STATE_SELECTOR","SELECTBOX_CLASS","SELECTBOX_POPUP_CLASS","SELECTBOX_CONTAINER_CLASS","SELECTBOX_POPUP_WRAPPER_CLASS","SelectBox","inherit","_supportedKeys","that","parent","callBase","clearSelectBox","e","isEditable","_isEditable","option","preventDefault","reset","_valueSubstituted","_preventFiltering","_savedTextRemoveEvent","_preventSubstitution","searchIfNeeded","_searchHandler","tab","_resetCaretPosition","apply","arguments","_cancelSearchIfNeed","upArrow","_setNextValue","downArrow","leftArrow","rightArrow","home","end","escape","result","_cancelEditing","enter","isOpened","inputText","_input","val","trim","isCustomText","_list","_saveValueChangeEvent","selectedItem","value","close","_toggleOpenState","_valueChangeEventHandler","space","isSearchEnabled","acceptCustomValue","backspace","del","_getDefaultOptions","placeholder","format","fieldTemplate","customItemCreateEvent","valueChangeEvent","onCustomItemCreating","customItem","text","showSelectionControls","allowClearing","tooltipEnabled","openOnFieldClick","showDropDownButton","displayCustomValue","useHiddenSubmitElement","_init","_initCustomItemCreatingAction","_initMarkup","$element","addClass","_renderTooltip","_$container","_createPopup","_popup","$overlayContent","attr","_popupWrapperClass","_setDeprecatedOptions","_deprecatedOptions","since","alias","_focusListElement","_updateField","_renderOpenedState","_scrollToSelectedItem","_focusSelectedElement","_items$indexOf","searchValue","_searchValue","items","$listItems","_itemElements","index","indexOf","focusedElement","_isCustomItemSelected","eq","_renderFocusedElement","not","element","_preventInputValueRender","scrollToItem","_listContentReadyHandler","isPaginate","_dataController","paginate","_needPopupRepaint","_renderValue","_renderInputValue","_setSubmitValue","resolve","always","_renderInputValueAsync","bind","_renderInputValueImpl","_refreshSelected","_renderField","_setNextItem","step","item","_calcNextItem","_valueGetter","_setValue","dataSourceIsLoaded","isLoaded","load","done","selectedIndex","_getSelectedIndex","hasPages","pageSize","isLastPage","isLastItem","_items","length","isLoading","_loadNextPage","_setSelectedItem","isUnknownItem","_isCustomValueAllowed","_setListOption","_displayValue","_listConfig","pageLoadMode","onSelectionChanged","_getSelectionChangeHandler","onFocusedItemChanged","_listFocusedItemChangeHandler","selectionByClick","list","component","focusedItem","_getItemData","_getTemplateByOption","_displayGetter","_renderDisplayText","_selectionChangeHandler","addedItems","_","addedItem","_getActualSearchValue","isVisible","_shouldClearFilter","_restoreInputText","_wasSearch","showDataImmediately","_isMinSearchLengthExceeded","getDataSource","_searchTimer","_filterDataSource","_renderDimensions","_updatePopupWidth","_updateListDimensions","_isValueEqualInputText","initialSelectedItem","displayValue","String","_popupHidingHandler","_popupHiddenHandler","_shouldCancelSearch","_searchCanceled","saveEditingValue","_loadItemDeferred","_isValueChanging","_createCustomItem","_clearFilter","_clearTextValue","newSelectedItem","_valueChangeEventIncludesBlur","_getValueChangeEventOptionName","includes","_isPreventedFocusOutEvent","_preventNestedFocusEvent","_focusOutHandler","isOverlayTarget","_isOverlayNestedTarget","relatedTarget","_clearSearchTimer","target","get","searchEnabled","shouldCancelSearch","_this$_popup","isPopupVisible","_hideAnimationProcessing","_shouldCancelSearchValue","closest","concat","_shouldOpenPopup","_needPassDataSourceToList","_isFocused","activeElement","getActiveElement","_renderValueChangeEvent","_fieldRenderData","$listFocused","_isSelectedValue","_isValueEquals","_shouldCloseOnItemClick","_listItemClickHandler","previousValue","_getCurrentValue","itemElement","event","_completeSelection","itemData","_loadItem","cache","deferred","fail","args","shouldSkipCallback","reject","promise","_loadInputValue","callback","selectedItemText","toString","_customItemAddedHandler","_customItemCreatingAction","_createActionByOption","params","actionResult","log","Error","_setCustomItem","_disposed","_clearValueHandler","_wasSearchValue","_dataSourceFiltered","_renderInputSubstitution","input","currentSearchLength","isAllSelected","selectionStart","selectionEnd","inputHasSelection","isLastSymbolSelected","_shouldSubstitutionBeRendered","_getPlainItems","$input","valueLength","inputElement","_caret","start","_dispose","_optionChanged","name","_refreshValueChangeEvent","_refreshFocusEvent","_refreshEvents","_invalidate"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/devextreme/esm/ui/select_box.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/select_box.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport {\r\n    noop,\r\n    ensureDefined\r\n} from \"../core/utils/common\";\r\nimport {\r\n    isDefined,\r\n    isPromise\r\n} from \"../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    Deferred,\r\n    fromPromise\r\n} from \"../core/utils/deferred\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport errors from \"../core/errors\";\r\nimport domAdapter from \"../core/dom_adapter\";\r\nimport messageLocalization from \"../localization/message\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\r\nimport \"./list/modules/selection\";\r\nimport {\r\n    normalizeKeyName\r\n} from \"../events/utils/index\";\r\nvar DISABLED_STATE_SELECTOR = \".dx-state-disabled\";\r\nvar SELECTBOX_CLASS = \"dx-selectbox\";\r\nvar SELECTBOX_POPUP_CLASS = \"dx-selectbox-popup\";\r\nvar SELECTBOX_CONTAINER_CLASS = \"dx-selectbox-container\";\r\nvar SELECTBOX_POPUP_WRAPPER_CLASS = \"dx-selectbox-popup-wrapper\";\r\nvar SelectBox = DropDownList.inherit({\r\n    _supportedKeys: function() {\r\n        var that = this;\r\n        var parent = this.callBase();\r\n        var clearSelectBox = function(e) {\r\n            var isEditable = this._isEditable();\r\n            if (!isEditable) {\r\n                if (this.option(\"showClearButton\")) {\r\n                    e.preventDefault();\r\n                    this.reset()\r\n                }\r\n            } else if (this._valueSubstituted()) {\r\n                this._preventFiltering = true\r\n            }\r\n            this._savedTextRemoveEvent = e;\r\n            this._preventSubstitution = true\r\n        };\r\n        var searchIfNeeded = function() {\r\n            if (that.option(\"searchEnabled\") && that._valueSubstituted()) {\r\n                that._searchHandler()\r\n            }\r\n        };\r\n        return extend({}, parent, {\r\n            tab: function() {\r\n                if (this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\")) {\r\n                    this._resetCaretPosition(true)\r\n                }\r\n                parent.tab && parent.tab.apply(this, arguments);\r\n                this._cancelSearchIfNeed()\r\n            },\r\n            upArrow: function(e) {\r\n                if (parent.upArrow && parent.upArrow.apply(this, arguments)) {\r\n                    if (!this.option(\"opened\")) {\r\n                        this._setNextValue(e)\r\n                    }\r\n                    return true\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                if (parent.downArrow && parent.downArrow.apply(this, arguments)) {\r\n                    if (!this.option(\"opened\")) {\r\n                        this._setNextValue(e)\r\n                    }\r\n                    return true\r\n                }\r\n            },\r\n            leftArrow: function() {\r\n                searchIfNeeded();\r\n                parent.leftArrow && parent.leftArrow.apply(this, arguments)\r\n            },\r\n            rightArrow: function() {\r\n                searchIfNeeded();\r\n                parent.rightArrow && parent.rightArrow.apply(this, arguments)\r\n            },\r\n            home: function() {\r\n                searchIfNeeded();\r\n                parent.home && parent.home.apply(this, arguments)\r\n            },\r\n            end: function() {\r\n                searchIfNeeded();\r\n                parent.end && parent.end.apply(this, arguments)\r\n            },\r\n            escape: function() {\r\n                var result = parent.escape && parent.escape.apply(this, arguments);\r\n                this._cancelEditing();\r\n                return null !== result && void 0 !== result ? result : true\r\n            },\r\n            enter: function(e) {\r\n                var isOpened = this.option(\"opened\");\r\n                var inputText = this._input().val().trim();\r\n                var isCustomText = inputText && this._list && !this._list.option(\"focusedElement\");\r\n                if (!inputText && isDefined(this.option(\"value\")) && this.option(\"allowClearing\")) {\r\n                    this._saveValueChangeEvent(e);\r\n                    this.option({\r\n                        selectedItem: null,\r\n                        value: null\r\n                    });\r\n                    this.close()\r\n                } else {\r\n                    if (this.option(\"acceptCustomValue\")) {\r\n                        e.preventDefault();\r\n                        if (isCustomText) {\r\n                            if (isOpened) {\r\n                                this._toggleOpenState()\r\n                            }\r\n                            this._valueChangeEventHandler(e)\r\n                        }\r\n                        return isOpened\r\n                    }\r\n                    if (parent.enter && parent.enter.apply(this, arguments)) {\r\n                        return isOpened\r\n                    }\r\n                }\r\n            },\r\n            space: function(e) {\r\n                var isOpened = this.option(\"opened\");\r\n                var isSearchEnabled = this.option(\"searchEnabled\");\r\n                var acceptCustomValue = this.option(\"acceptCustomValue\");\r\n                if (!isOpened || isSearchEnabled || acceptCustomValue) {\r\n                    return\r\n                }\r\n                e.preventDefault();\r\n                this._valueChangeEventHandler(e);\r\n                return true\r\n            },\r\n            backspace: clearSelectBox,\r\n            del: clearSelectBox\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            placeholder: messageLocalization.format(\"Select\"),\r\n            fieldTemplate: null,\r\n            customItemCreateEvent: \"change\",\r\n            valueChangeEvent: \"change\",\r\n            acceptCustomValue: false,\r\n            onCustomItemCreating: function(e) {\r\n                if (!isDefined(e.customItem)) {\r\n                    e.customItem = e.text\r\n                }\r\n            },\r\n            showSelectionControls: false,\r\n            allowClearing: true,\r\n            tooltipEnabled: false,\r\n            openOnFieldClick: true,\r\n            showDropDownButton: true,\r\n            displayCustomValue: false,\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initCustomItemCreatingAction()\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(SELECTBOX_CLASS);\r\n        this._renderTooltip();\r\n        this.callBase();\r\n        this._$container.addClass(SELECTBOX_CONTAINER_CLASS)\r\n    },\r\n    _createPopup: function() {\r\n        this.callBase();\r\n        this._popup.$element().addClass(SELECTBOX_POPUP_CLASS);\r\n        this._popup.$overlayContent().attr(\"tabindex\", -1)\r\n    },\r\n    _popupWrapperClass: function() {\r\n        return this.callBase() + \" \" + SELECTBOX_POPUP_WRAPPER_CLASS\r\n    },\r\n    _setDeprecatedOptions() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            valueChangeEvent: {\r\n                since: \"22.2\",\r\n                alias: \"customItemCreateEvent\"\r\n            }\r\n        })\r\n    },\r\n    _cancelEditing: function() {\r\n        if (!this.option(\"searchEnabled\") && this._list) {\r\n            this._focusListElement(null);\r\n            this._updateField(this.option(\"selectedItem\"))\r\n        }\r\n    },\r\n    _renderOpenedState: function() {\r\n        this.callBase();\r\n        if (this.option(\"opened\")) {\r\n            this._scrollToSelectedItem();\r\n            this._focusSelectedElement()\r\n        }\r\n    },\r\n    _focusSelectedElement: function() {\r\n        var _items$indexOf;\r\n        var searchValue = this._searchValue();\r\n        if (!searchValue) {\r\n            this._focusListElement(null);\r\n            return\r\n        }\r\n        var {\r\n            items: items,\r\n            selectedItem: selectedItem\r\n        } = this.option();\r\n        var $listItems = this._list._itemElements();\r\n        var index = null !== (_items$indexOf = null === items || void 0 === items ? void 0 : items.indexOf(selectedItem)) && void 0 !== _items$indexOf ? _items$indexOf : -1;\r\n        var focusedElement = -1 !== index && !this._isCustomItemSelected() ? $listItems.eq(index) : null;\r\n        this._focusListElement(focusedElement)\r\n    },\r\n    _renderFocusedElement: function() {\r\n        if (!this._list) {\r\n            return\r\n        }\r\n        var searchValue = this._searchValue();\r\n        if (!searchValue || this.option(\"acceptCustomValue\")) {\r\n            this._focusListElement(null);\r\n            return\r\n        }\r\n        var $listItems = this._list._itemElements();\r\n        var focusedElement = $listItems.not(DISABLED_STATE_SELECTOR).eq(0);\r\n        this._focusListElement(focusedElement)\r\n    },\r\n    _focusListElement: function(element) {\r\n        this._preventInputValueRender = true;\r\n        this._list.option(\"focusedElement\", getPublicElement(element));\r\n        delete this._preventInputValueRender\r\n    },\r\n    _scrollToSelectedItem: function() {\r\n        this._list && this._list.scrollToItem(this._list.option(\"selectedItem\"))\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this.callBase();\r\n        var isPaginate = this._dataController.paginate();\r\n        if (isPaginate && this._needPopupRepaint()) {\r\n            return\r\n        }\r\n        this._scrollToSelectedItem()\r\n    },\r\n    _renderValue: function() {\r\n        this._renderInputValue();\r\n        this._setSubmitValue();\r\n        return (new Deferred).resolve()\r\n    },\r\n    _renderInputValue: function() {\r\n        return this.callBase().always(function() {\r\n            this._renderInputValueAsync()\r\n        }.bind(this))\r\n    },\r\n    _renderInputValueAsync: function() {\r\n        this._renderTooltip();\r\n        this._renderInputValueImpl().always(function() {\r\n            this._refreshSelected()\r\n        }.bind(this))\r\n    },\r\n    _renderInputValueImpl: function() {\r\n        this._renderField();\r\n        return (new Deferred).resolve()\r\n    },\r\n    _setNextItem: function(step) {\r\n        var item = this._calcNextItem(step);\r\n        var value = this._valueGetter(item);\r\n        this._setValue(value)\r\n    },\r\n    _setNextValue: function(e) {\r\n        var dataSourceIsLoaded = this._dataController.isLoaded() ? (new Deferred).resolve() : this._dataController.load();\r\n        dataSourceIsLoaded.done(function() {\r\n            var selectedIndex = this._getSelectedIndex();\r\n            var hasPages = this._dataController.pageSize();\r\n            var isLastPage = this._dataController.isLastPage();\r\n            var isLastItem = selectedIndex === this._items().length - 1;\r\n            this._saveValueChangeEvent(e);\r\n            var step = \"downArrow\" === normalizeKeyName(e) ? 1 : -1;\r\n            if (hasPages && !isLastPage && isLastItem && step > 0) {\r\n                if (!this._popup) {\r\n                    this._createPopup()\r\n                }\r\n                if (!this._dataController.isLoading()) {\r\n                    this._list._loadNextPage().done(this._setNextItem.bind(this, step))\r\n                }\r\n            } else {\r\n                this._setNextItem(step)\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _setSelectedItem: function(item) {\r\n        var isUnknownItem = !this._isCustomValueAllowed() && void 0 === item;\r\n        this.callBase(isUnknownItem ? null : item);\r\n        if (!isUnknownItem && (!this._isEditable() || this._isCustomItemSelected())) {\r\n            this._setListOption(\"selectedItem\", this.option(\"selectedItem\"))\r\n        }\r\n    },\r\n    _isCustomValueAllowed: function() {\r\n        return this.option(\"acceptCustomValue\") || this.callBase()\r\n    },\r\n    _displayValue: function(item) {\r\n        item = !isDefined(item) && this._isCustomValueAllowed() ? this.option(\"value\") : item;\r\n        return this.callBase(item)\r\n    },\r\n    _listConfig: function() {\r\n        var result = extend(this.callBase(), {\r\n            pageLoadMode: \"scrollBottom\",\r\n            onSelectionChanged: this._getSelectionChangeHandler(),\r\n            selectedItem: this.option(\"selectedItem\"),\r\n            onFocusedItemChanged: this._listFocusedItemChangeHandler.bind(this)\r\n        });\r\n        if (this.option(\"showSelectionControls\")) {\r\n            extend(result, {\r\n                showSelectionControls: true,\r\n                selectionByClick: true\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _listFocusedItemChangeHandler: function(e) {\r\n        if (this._preventInputValueRender) {\r\n            return\r\n        }\r\n        var list = e.component;\r\n        var focusedElement = $(list.option(\"focusedElement\"));\r\n        var focusedItem = list._getItemData(focusedElement);\r\n        this._updateField(focusedItem)\r\n    },\r\n    _updateField: function(item) {\r\n        var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\r\n        if (!(fieldTemplate && this.option(\"fieldTemplate\"))) {\r\n            var text = this._displayGetter(item);\r\n            this.option(\"text\", text);\r\n            this._renderDisplayText(text);\r\n            return\r\n        }\r\n        this._renderField()\r\n    },\r\n    _getSelectionChangeHandler: function() {\r\n        return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop\r\n    },\r\n    _selectionChangeHandler: function(e) {\r\n        each(e.addedItems || [], function(_, addedItem) {\r\n            this._setValue(this._valueGetter(addedItem))\r\n        }.bind(this))\r\n    },\r\n    _getActualSearchValue: function() {\r\n        return this._dataController.searchValue()\r\n    },\r\n    _toggleOpenState: function(isVisible) {\r\n        if (this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        isVisible = arguments.length ? isVisible : !this.option(\"opened\");\r\n        if (!isVisible && !this._shouldClearFilter()) {\r\n            this._restoreInputText(true)\r\n        }\r\n        if (this._wasSearch() && isVisible) {\r\n            this._wasSearch(false);\r\n            var showDataImmediately = this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\r\n            if (showDataImmediately && this._dataController.getDataSource()) {\r\n                if (this._searchTimer) {\r\n                    return\r\n                }\r\n                var searchValue = this._getActualSearchValue();\r\n                searchValue && this._wasSearch(true);\r\n                this._filterDataSource(searchValue || null)\r\n            } else {\r\n                this._setListOption(\"items\", [])\r\n            }\r\n        }\r\n        if (isVisible) {\r\n            this._scrollToSelectedItem()\r\n        }\r\n        this.callBase(isVisible)\r\n    },\r\n    _renderTooltip: function() {\r\n        if (this.option(\"tooltipEnabled\")) {\r\n            this.$element().attr(\"title\", this.option(\"displayValue\"))\r\n        }\r\n    },\r\n    _renderDimensions: function() {\r\n        this.callBase();\r\n        this._updatePopupWidth();\r\n        this._updateListDimensions()\r\n    },\r\n    _isValueEqualInputText: function() {\r\n        var initialSelectedItem = this.option(\"selectedItem\");\r\n        if (null === initialSelectedItem) {\r\n            return false\r\n        }\r\n        var value = this._displayGetter(initialSelectedItem);\r\n        var displayValue = value ? String(value) : \"\";\r\n        var inputText = this._searchValue();\r\n        return displayValue === inputText\r\n    },\r\n    _popupHidingHandler: function() {\r\n        if (this._isValueEqualInputText()) {\r\n            this._cancelEditing()\r\n        }\r\n        this.callBase()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        if (this._shouldCancelSearch()) {\r\n            this._wasSearch(false);\r\n            this._searchCanceled();\r\n            this._shouldCancelSearch(false)\r\n        }\r\n    },\r\n    _restoreInputText: function(saveEditingValue) {\r\n        if (this.option(\"readOnly\")) {\r\n            return\r\n        }\r\n        this._loadItemDeferred && this._loadItemDeferred.always(function() {\r\n            var {\r\n                acceptCustomValue: acceptCustomValue,\r\n                text: text,\r\n                selectedItem: initialSelectedItem\r\n            } = this.option();\r\n            if (acceptCustomValue) {\r\n                if (!saveEditingValue && !this._isValueChanging) {\r\n                    this._updateField(null !== initialSelectedItem && void 0 !== initialSelectedItem ? initialSelectedItem : this._createCustomItem(text));\r\n                    this._clearFilter()\r\n                }\r\n                return\r\n            }\r\n            if (this.option(\"searchEnabled\")) {\r\n                if (!this._searchValue() && this.option(\"allowClearing\")) {\r\n                    this._clearTextValue();\r\n                    return\r\n                }\r\n            }\r\n            if (this._isValueEqualInputText()) {\r\n                return\r\n            }\r\n            this._renderInputValue().always(function(selectedItem) {\r\n                var newSelectedItem = ensureDefined(selectedItem, initialSelectedItem);\r\n                this._setSelectedItem(newSelectedItem);\r\n                this._updateField(newSelectedItem);\r\n                this._clearFilter()\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    _valueChangeEventIncludesBlur: function() {\r\n        var valueChangeEvent = this.option(this._getValueChangeEventOptionName());\r\n        return valueChangeEvent.includes(\"blur\")\r\n    },\r\n    _isPreventedFocusOutEvent: function(e) {\r\n        return this._preventNestedFocusEvent(e) || this._valueChangeEventIncludesBlur()\r\n    },\r\n    _focusOutHandler: function(e) {\r\n        if (!this._isPreventedFocusOutEvent(e)) {\r\n            var isOverlayTarget = this._isOverlayNestedTarget(e.relatedTarget);\r\n            if (!isOverlayTarget) {\r\n                this._restoreInputText();\r\n                this._clearSearchTimer()\r\n            }\r\n            this._cancelSearchIfNeed(e)\r\n        }\r\n        e.target = this._input().get(0);\r\n        this.callBase(e)\r\n    },\r\n    _cancelSearchIfNeed: function(e) {\r\n        var {\r\n            searchEnabled: searchEnabled\r\n        } = this.option();\r\n        var isOverlayTarget = this._isOverlayNestedTarget(null === e || void 0 === e ? void 0 : e.relatedTarget);\r\n        var shouldCancelSearch = this._wasSearch() && searchEnabled && !isOverlayTarget;\r\n        if (shouldCancelSearch) {\r\n            var _this$_popup;\r\n            var isPopupVisible = null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup._hideAnimationProcessing;\r\n            this._clearSearchTimer();\r\n            if (isPopupVisible) {\r\n                this._shouldCancelSearch(true)\r\n            } else {\r\n                this._wasSearch(false);\r\n                this._searchCanceled()\r\n            }\r\n        }\r\n    },\r\n    _shouldCancelSearch: function(value) {\r\n        if (!arguments.length) {\r\n            return this._shouldCancelSearchValue\r\n        }\r\n        this._shouldCancelSearchValue = value\r\n    },\r\n    _isOverlayNestedTarget: function(target) {\r\n        return !!$(target).closest(\".\".concat(SELECTBOX_POPUP_WRAPPER_CLASS)).length\r\n    },\r\n    _clearTextValue: function() {\r\n        if (this.option(\"selectedItem\")) {\r\n            if (this._savedTextRemoveEvent) {\r\n                this._saveValueChangeEvent(this._savedTextRemoveEvent)\r\n            }\r\n            this.option(\"value\", null)\r\n        }\r\n        delete this._savedTextRemoveEvent\r\n    },\r\n    _shouldOpenPopup: function() {\r\n        return this._needPassDataSourceToList() && this._wasSearch()\r\n    },\r\n    _isFocused: function() {\r\n        var activeElement = domAdapter.getActiveElement(this.element());\r\n        return this.callBase() && $(activeElement).closest(this._input()).length > 0\r\n    },\r\n    _getValueChangeEventOptionName: function() {\r\n        return \"customItemCreateEvent\"\r\n    },\r\n    _renderValueChangeEvent: function() {\r\n        if (this._isEditable()) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _fieldRenderData: function() {\r\n        var $listFocused = this._list && this.option(\"opened\") && $(this._list.option(\"focusedElement\"));\r\n        if ($listFocused && $listFocused.length) {\r\n            return this._list._getItemData($listFocused)\r\n        }\r\n        return this.option(\"selectedItem\")\r\n    },\r\n    _isSelectedValue: function(value) {\r\n        return this._isValueEquals(value, this.option(\"value\"))\r\n    },\r\n    _shouldCloseOnItemClick: function() {\r\n        return !(this.option(\"showSelectionControls\") && \"single\" !== this.option(\"selectionMode\"))\r\n    },\r\n    _listItemClickHandler: function(e) {\r\n        var previousValue = this._getCurrentValue();\r\n        this._focusListElement($(e.itemElement));\r\n        this._saveValueChangeEvent(e.event);\r\n        this._completeSelection(this._valueGetter(e.itemData));\r\n        if (this._shouldCloseOnItemClick()) {\r\n            this.option(\"opened\", false)\r\n        }\r\n        if (this.option(\"searchEnabled\") && previousValue === this._valueGetter(e.itemData)) {\r\n            this._updateField(e.itemData)\r\n        }\r\n        if (this._shouldClearFilter()) {\r\n            this._cancelSearchIfNeed()\r\n        }\r\n    },\r\n    _shouldClearFilter: function() {\r\n        return this._wasSearch()\r\n    },\r\n    _completeSelection: function(value) {\r\n        this._setValue(value)\r\n    },\r\n    _loadItem: function(value, cache) {\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        this.callBase(value, cache).done(function(item) {\r\n            deferred.resolve(item)\r\n        }.bind(this)).fail(function(args) {\r\n            if (null !== args && void 0 !== args && args.shouldSkipCallback) {\r\n                return\r\n            }\r\n            var selectedItem = that.option(\"selectedItem\");\r\n            if (that.option(\"acceptCustomValue\") && value === that._valueGetter(selectedItem)) {\r\n                deferred.resolve(selectedItem)\r\n            } else {\r\n                deferred.reject()\r\n            }\r\n        }.bind(this));\r\n        return deferred.promise()\r\n    },\r\n    _loadInputValue: function(value, callback) {\r\n        this._loadItemDeferred = this._loadItem(value).always(callback);\r\n        return this._loadItemDeferred\r\n    },\r\n    _isCustomItemSelected: function() {\r\n        var selectedItem = this.option(\"selectedItem\");\r\n        var searchValue = this._searchValue();\r\n        var selectedItemText = this._displayGetter(selectedItem);\r\n        return !selectedItemText || searchValue !== selectedItemText.toString()\r\n    },\r\n    _valueChangeEventHandler: function(e) {\r\n        if (this.option(\"acceptCustomValue\") && this._isCustomItemSelected() && !this._isValueChanging) {\r\n            this._isValueChanging = true;\r\n            this._customItemAddedHandler(e)\r\n        }\r\n    },\r\n    _initCustomItemCreatingAction: function() {\r\n        this._customItemCreatingAction = this._createActionByOption(\"onCustomItemCreating\")\r\n    },\r\n    _createCustomItem: function(text) {\r\n        var params = {\r\n            text: text\r\n        };\r\n        var actionResult = this._customItemCreatingAction(params);\r\n        var item = ensureDefined(actionResult, params.customItem);\r\n        if (isDefined(actionResult)) {\r\n            errors.log(\"W0015\", \"onCustomItemCreating\", \"customItem\")\r\n        }\r\n        return item\r\n    },\r\n    _customItemAddedHandler: function(e) {\r\n        var searchValue = this._searchValue();\r\n        var item = this._createCustomItem(searchValue);\r\n        this._saveValueChangeEvent(e);\r\n        if (void 0 === item) {\r\n            this._renderValue();\r\n            throw errors.Error(\"E0121\")\r\n        }\r\n        if (isPromise(item)) {\r\n            fromPromise(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this, null))\r\n        } else {\r\n            this._setCustomItem(item)\r\n        }\r\n    },\r\n    _setCustomItem: function(item) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        item = item || null;\r\n        this.option(\"selectedItem\", item);\r\n        this._cancelSearchIfNeed();\r\n        this._setValue(this._valueGetter(item));\r\n        this._renderDisplayText(this._displayGetter(item));\r\n        this._isValueChanging = false\r\n    },\r\n    _clearValueHandler: function(e) {\r\n        this._preventFiltering = true;\r\n        this.callBase(e);\r\n        this._searchCanceled();\r\n        return false\r\n    },\r\n    _wasSearch: function(value) {\r\n        if (!arguments.length) {\r\n            return !!this._wasSearchValue\r\n        }\r\n        this._wasSearchValue = value\r\n    },\r\n    _searchHandler: function() {\r\n        if (this._preventFiltering) {\r\n            delete this._preventFiltering;\r\n            return\r\n        }\r\n        if (this._needPassDataSourceToList()) {\r\n            this._wasSearch(true)\r\n        }\r\n        this.callBase(arguments)\r\n    },\r\n    _dataSourceFiltered: function(searchValue) {\r\n        this.callBase();\r\n        if (null !== searchValue) {\r\n            this._renderInputSubstitution();\r\n            this._renderFocusedElement()\r\n        }\r\n    },\r\n    _valueSubstituted: function() {\r\n        var input = this._input().get(0);\r\n        var currentSearchLength = this._searchValue().length;\r\n        var isAllSelected = 0 === input.selectionStart && input.selectionEnd === currentSearchLength;\r\n        var inputHasSelection = input.selectionStart !== input.selectionEnd;\r\n        var isLastSymbolSelected = currentSearchLength === input.selectionEnd;\r\n        return this._wasSearch() && inputHasSelection && !isAllSelected && isLastSymbolSelected && this._shouldSubstitutionBeRendered()\r\n    },\r\n    _shouldSubstitutionBeRendered: function() {\r\n        return !this._preventSubstitution && this.option(\"searchEnabled\") && !this.option(\"acceptCustomValue\") && \"startswith\" === this.option(\"searchMode\")\r\n    },\r\n    _renderInputSubstitution: function() {\r\n        if (!this._shouldSubstitutionBeRendered()) {\r\n            delete this._preventSubstitution;\r\n            return\r\n        }\r\n        var item = this._list && this._getPlainItems(this._list.option(\"items\"))[0];\r\n        if (!item) {\r\n            return\r\n        }\r\n        var $input = this._input();\r\n        var valueLength = $input.val().length;\r\n        if (0 === valueLength) {\r\n            return\r\n        }\r\n        var inputElement = $input.get(0);\r\n        var displayValue = this._displayGetter(item).toString();\r\n        inputElement.value = displayValue;\r\n        this._caret({\r\n            start: valueLength,\r\n            end: displayValue.length\r\n        })\r\n    },\r\n    _dispose: function() {\r\n        this._renderInputValueAsync = noop;\r\n        delete this._loadItemDeferred;\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"customItemCreateEvent\":\r\n                this._refreshValueChangeEvent();\r\n                this._refreshFocusEvent();\r\n                this._refreshEvents();\r\n                break;\r\n            case \"onCustomItemCreating\":\r\n                this._initCustomItemCreatingAction();\r\n                break;\r\n            case \"tooltipEnabled\":\r\n                this._renderTooltip();\r\n                break;\r\n            case \"displayCustomValue\":\r\n            case \"acceptCustomValue\":\r\n            case \"showSelectionControls\":\r\n                this._invalidate();\r\n                break;\r\n            case \"allowClearing\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxSelectBox\", SelectBox);\r\nexport default SelectBox;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}