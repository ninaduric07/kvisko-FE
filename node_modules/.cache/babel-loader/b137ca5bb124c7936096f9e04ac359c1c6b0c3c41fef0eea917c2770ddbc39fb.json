{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../renderer\";\nimport { TemplateBase } from \"./template_base\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { removeEvent } from \"../../events/remove\";\nimport { isPrimitive } from \"../utils/type\";\nvar watchChanges = function (rawData, watchMethod, fields, fieldsMap, callback) {\n  var fieldsDispose;\n  var globalDispose = ((data, watchMethod, callback) => watchMethod(() => data, callback))(rawData, watchMethod, function (dataWithRawFields) {\n    fieldsDispose && fieldsDispose();\n    if (isPrimitive(dataWithRawFields)) {\n      callback(dataWithRawFields);\n      return;\n    }\n    fieldsDispose = function (data, watchMethod, fields, fieldsMap, callback) {\n      var resolvedData = {};\n      var missedFields = fields.slice();\n      var watchHandlers = fields.map(function (name) {\n        var fieldGetter = fieldsMap[name];\n        return watchMethod(fieldGetter ? () => fieldGetter(data) : () => data[name], function (value) {\n          resolvedData[name] = value;\n          if (missedFields.length) {\n            var index = missedFields.indexOf(name);\n            if (index >= 0) {\n              missedFields.splice(index, 1);\n            }\n          }\n          if (!missedFields.length) {\n            callback(resolvedData);\n          }\n        });\n      });\n      return function () {\n        watchHandlers.forEach(dispose => dispose());\n      };\n    }(dataWithRawFields, watchMethod, fields, fieldsMap, callback);\n  });\n  return function () {\n    fieldsDispose && fieldsDispose();\n    globalDispose && globalDispose();\n  };\n};\nexport class BindableTemplate extends TemplateBase {\n  constructor(render, fields, watchMethod, fieldsMap) {\n    super();\n    this._render = render;\n    this._fields = fields;\n    this._fieldsMap = fieldsMap || {};\n    this._watchMethod = watchMethod;\n  }\n  _renderCore(options) {\n    var $container = $(options.container);\n    var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, data => {\n      $container.empty();\n      this._render($container, data, options.model);\n    });\n    eventsEngine.on($container, removeEvent, dispose);\n    return $container.contents();\n  }\n}","map":{"version":3,"names":["$","TemplateBase","eventsEngine","removeEvent","isPrimitive","watchChanges","rawData","watchMethod","fields","fieldsMap","callback","fieldsDispose","globalDispose","data","dataWithRawFields","resolvedData","missedFields","slice","watchHandlers","map","name","fieldGetter","value","length","index","indexOf","splice","forEach","dispose","BindableTemplate","constructor","render","_render","_fields","_fieldsMap","_watchMethod","_renderCore","options","$container","container","model","empty","on","contents"],"sources":["C:/Users/ninad/OneDrive/Radna povrÅ¡ina/zavrsni/client/node_modules/devextreme/esm/core/templates/bindable_template.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../renderer\";\r\nimport {\r\n    TemplateBase\r\n} from \"./template_base\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    removeEvent\r\n} from \"../../events/remove\";\r\nimport {\r\n    isPrimitive\r\n} from \"../utils/type\";\r\nvar watchChanges = function(rawData, watchMethod, fields, fieldsMap, callback) {\r\n    var fieldsDispose;\r\n    var globalDispose = ((data, watchMethod, callback) => watchMethod(() => data, callback))(rawData, watchMethod, (function(dataWithRawFields) {\r\n        fieldsDispose && fieldsDispose();\r\n        if (isPrimitive(dataWithRawFields)) {\r\n            callback(dataWithRawFields);\r\n            return\r\n        }\r\n        fieldsDispose = function(data, watchMethod, fields, fieldsMap, callback) {\r\n            var resolvedData = {};\r\n            var missedFields = fields.slice();\r\n            var watchHandlers = fields.map((function(name) {\r\n                var fieldGetter = fieldsMap[name];\r\n                return watchMethod(fieldGetter ? () => fieldGetter(data) : () => data[name], (function(value) {\r\n                    resolvedData[name] = value;\r\n                    if (missedFields.length) {\r\n                        var index = missedFields.indexOf(name);\r\n                        if (index >= 0) {\r\n                            missedFields.splice(index, 1)\r\n                        }\r\n                    }\r\n                    if (!missedFields.length) {\r\n                        callback(resolvedData)\r\n                    }\r\n                }))\r\n            }));\r\n            return function() {\r\n                watchHandlers.forEach(dispose => dispose())\r\n            }\r\n        }(dataWithRawFields, watchMethod, fields, fieldsMap, callback)\r\n    }));\r\n    return function() {\r\n        fieldsDispose && fieldsDispose();\r\n        globalDispose && globalDispose()\r\n    }\r\n};\r\nexport class BindableTemplate extends TemplateBase {\r\n    constructor(render, fields, watchMethod, fieldsMap) {\r\n        super();\r\n        this._render = render;\r\n        this._fields = fields;\r\n        this._fieldsMap = fieldsMap || {};\r\n        this._watchMethod = watchMethod\r\n    }\r\n    _renderCore(options) {\r\n        var $container = $(options.container);\r\n        var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, data => {\r\n            $container.empty();\r\n            this._render($container, data, options.model)\r\n        });\r\n        eventsEngine.on($container, removeEvent, dispose);\r\n        return $container.contents()\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}