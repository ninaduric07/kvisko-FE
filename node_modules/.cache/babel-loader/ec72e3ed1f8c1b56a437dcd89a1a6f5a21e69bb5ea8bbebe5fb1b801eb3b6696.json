{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/utils/selection_filter.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getKeyHash, equalByValue } from \"./common\";\nimport { isString, isObject } from \"./type\";\nexport var SelectionFilterCreator = function (selectedItemKeys, isSelectAll) {\n  this.getLocalFilter = function (keyGetter, equalKeys, equalByReference, keyExpr) {\n    equalKeys = void 0 === equalKeys ? equalByValue : equalKeys;\n    return functionFilter.bind(this, equalKeys, keyGetter, equalByReference, keyExpr);\n  };\n  this.getExpr = function (keyExpr) {\n    if (!keyExpr) {\n      return;\n    }\n    var filterExpr;\n    selectedItemKeys.forEach(function (key, index) {\n      filterExpr = filterExpr || [];\n      var filterExprPart;\n      if (index > 0) {\n        filterExpr.push(isSelectAll ? \"and\" : \"or\");\n      }\n      if (isString(keyExpr)) {\n        filterExprPart = getFilterForPlainKey(keyExpr, key);\n      } else {\n        filterExprPart = function (keyExpr, itemKeyValue) {\n          var filterExpr = [];\n          for (var i = 0, length = keyExpr.length; i < length; i++) {\n            var currentKeyExpr = keyExpr[i];\n            var currentKeyValue = itemKeyValue && itemKeyValue[currentKeyExpr];\n            var filterExprPart = getFilterForPlainKey(currentKeyExpr, currentKeyValue);\n            if (!filterExprPart) {\n              break;\n            }\n            if (i > 0) {\n              filterExpr.push(isSelectAll ? \"or\" : \"and\");\n            }\n            filterExpr.push(filterExprPart);\n          }\n          return filterExpr;\n        }(keyExpr, key);\n      }\n      filterExpr.push(filterExprPart);\n    });\n    if (filterExpr && 1 === filterExpr.length) {\n      filterExpr = filterExpr[0];\n    }\n    return filterExpr;\n  };\n  this.getCombinedFilter = function (keyExpr, dataSourceFilter) {\n    var filterExpr = this.getExpr(keyExpr);\n    var combinedFilter = filterExpr;\n    if (isSelectAll && dataSourceFilter) {\n      if (filterExpr) {\n        combinedFilter = [];\n        combinedFilter.push(filterExpr);\n        combinedFilter.push(dataSourceFilter);\n      } else {\n        combinedFilter = dataSourceFilter;\n      }\n    }\n    return combinedFilter;\n  };\n  var selectedItemKeyHashesMap;\n  var normalizeKeys = function (keys, keyOf, keyExpr) {\n    return Array.isArray(keyExpr) ? keys.map(key => keyOf(key)) : keys;\n  };\n  function functionFilter(equalKeys, keyOf, equalByReference, keyExpr, item) {\n    var key = keyOf(item);\n    var keyHash;\n    var i;\n    if (!equalByReference) {\n      keyHash = getKeyHash(key);\n      if (!isObject(keyHash)) {\n        var selectedKeyHashesMap = function (keyOf, keyExpr) {\n          if (!selectedItemKeyHashesMap) {\n            selectedItemKeyHashesMap = {};\n            var normalizedKeys = normalizeKeys(selectedItemKeys, keyOf, keyExpr);\n            for (var i = 0; i < normalizedKeys.length; i++) {\n              selectedItemKeyHashesMap[getKeyHash(normalizedKeys[i])] = true;\n            }\n          }\n          return selectedItemKeyHashesMap;\n        }(keyOf, keyExpr);\n        if (selectedKeyHashesMap[keyHash]) {\n          return !isSelectAll;\n        }\n        return !!isSelectAll;\n      }\n    }\n    for (i = 0; i < selectedItemKeys.length; i++) {\n      if (equalKeys(selectedItemKeys[i], key)) {\n        return !isSelectAll;\n      }\n    }\n    return !!isSelectAll;\n  }\n  function getFilterForPlainKey(keyExpr, keyValue) {\n    if (void 0 === keyValue) {\n      return;\n    }\n    return [keyExpr, isSelectAll ? \"<>\" : \"=\", keyValue];\n  }\n};","map":{"version":3,"names":["getKeyHash","equalByValue","isString","isObject","SelectionFilterCreator","selectedItemKeys","isSelectAll","getLocalFilter","keyGetter","equalKeys","equalByReference","keyExpr","functionFilter","bind","getExpr","filterExpr","forEach","key","index","filterExprPart","push","getFilterForPlainKey","itemKeyValue","i","length","currentKeyExpr","currentKeyValue","getCombinedFilter","dataSourceFilter","combinedFilter","selectedItemKeyHashesMap","normalizeKeys","keys","keyOf","Array","isArray","map","item","keyHash","selectedKeyHashesMap","normalizedKeys","keyValue"],"sources":["C:/Users/ninad/OneDrive/Radna povrÅ¡ina/zavrsni/client/node_modules/devextreme/esm/core/utils/selection_filter.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/core/utils/selection_filter.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getKeyHash,\r\n    equalByValue\r\n} from \"./common\";\r\nimport {\r\n    isString,\r\n    isObject\r\n} from \"./type\";\r\nexport var SelectionFilterCreator = function(selectedItemKeys, isSelectAll) {\r\n    this.getLocalFilter = function(keyGetter, equalKeys, equalByReference, keyExpr) {\r\n        equalKeys = void 0 === equalKeys ? equalByValue : equalKeys;\r\n        return functionFilter.bind(this, equalKeys, keyGetter, equalByReference, keyExpr)\r\n    };\r\n    this.getExpr = function(keyExpr) {\r\n        if (!keyExpr) {\r\n            return\r\n        }\r\n        var filterExpr;\r\n        selectedItemKeys.forEach((function(key, index) {\r\n            filterExpr = filterExpr || [];\r\n            var filterExprPart;\r\n            if (index > 0) {\r\n                filterExpr.push(isSelectAll ? \"and\" : \"or\")\r\n            }\r\n            if (isString(keyExpr)) {\r\n                filterExprPart = getFilterForPlainKey(keyExpr, key)\r\n            } else {\r\n                filterExprPart = function(keyExpr, itemKeyValue) {\r\n                    var filterExpr = [];\r\n                    for (var i = 0, length = keyExpr.length; i < length; i++) {\r\n                        var currentKeyExpr = keyExpr[i];\r\n                        var currentKeyValue = itemKeyValue && itemKeyValue[currentKeyExpr];\r\n                        var filterExprPart = getFilterForPlainKey(currentKeyExpr, currentKeyValue);\r\n                        if (!filterExprPart) {\r\n                            break\r\n                        }\r\n                        if (i > 0) {\r\n                            filterExpr.push(isSelectAll ? \"or\" : \"and\")\r\n                        }\r\n                        filterExpr.push(filterExprPart)\r\n                    }\r\n                    return filterExpr\r\n                }(keyExpr, key)\r\n            }\r\n            filterExpr.push(filterExprPart)\r\n        }));\r\n        if (filterExpr && 1 === filterExpr.length) {\r\n            filterExpr = filterExpr[0]\r\n        }\r\n        return filterExpr\r\n    };\r\n    this.getCombinedFilter = function(keyExpr, dataSourceFilter) {\r\n        var filterExpr = this.getExpr(keyExpr);\r\n        var combinedFilter = filterExpr;\r\n        if (isSelectAll && dataSourceFilter) {\r\n            if (filterExpr) {\r\n                combinedFilter = [];\r\n                combinedFilter.push(filterExpr);\r\n                combinedFilter.push(dataSourceFilter)\r\n            } else {\r\n                combinedFilter = dataSourceFilter\r\n            }\r\n        }\r\n        return combinedFilter\r\n    };\r\n    var selectedItemKeyHashesMap;\r\n    var normalizeKeys = function(keys, keyOf, keyExpr) {\r\n        return Array.isArray(keyExpr) ? keys.map(key => keyOf(key)) : keys\r\n    };\r\n\r\n    function functionFilter(equalKeys, keyOf, equalByReference, keyExpr, item) {\r\n        var key = keyOf(item);\r\n        var keyHash;\r\n        var i;\r\n        if (!equalByReference) {\r\n            keyHash = getKeyHash(key);\r\n            if (!isObject(keyHash)) {\r\n                var selectedKeyHashesMap = function(keyOf, keyExpr) {\r\n                    if (!selectedItemKeyHashesMap) {\r\n                        selectedItemKeyHashesMap = {};\r\n                        var normalizedKeys = normalizeKeys(selectedItemKeys, keyOf, keyExpr);\r\n                        for (var i = 0; i < normalizedKeys.length; i++) {\r\n                            selectedItemKeyHashesMap[getKeyHash(normalizedKeys[i])] = true\r\n                        }\r\n                    }\r\n                    return selectedItemKeyHashesMap\r\n                }(keyOf, keyExpr);\r\n                if (selectedKeyHashesMap[keyHash]) {\r\n                    return !isSelectAll\r\n                }\r\n                return !!isSelectAll\r\n            }\r\n        }\r\n        for (i = 0; i < selectedItemKeys.length; i++) {\r\n            if (equalKeys(selectedItemKeys[i], key)) {\r\n                return !isSelectAll\r\n            }\r\n        }\r\n        return !!isSelectAll\r\n    }\r\n\r\n    function getFilterForPlainKey(keyExpr, keyValue) {\r\n        if (void 0 === keyValue) {\r\n            return\r\n        }\r\n        return [keyExpr, isSelectAll ? \"<>\" : \"=\", keyValue]\r\n    }\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,UAAU,EACVC,YAAY,QACT,UAAU;AACjB,SACIC,QAAQ,EACRC,QAAQ,QACL,QAAQ;AACf,OAAO,IAAIC,sBAAsB,GAAG,SAAAA,CAASC,gBAAgB,EAAEC,WAAW,EAAE;EACxE,IAAI,CAACC,cAAc,GAAG,UAASC,SAAS,EAAEC,SAAS,EAAEC,gBAAgB,EAAEC,OAAO,EAAE;IAC5EF,SAAS,GAAG,KAAK,CAAC,KAAKA,SAAS,GAAGR,YAAY,GAAGQ,SAAS;IAC3D,OAAOG,cAAc,CAACC,IAAI,CAAC,IAAI,EAAEJ,SAAS,EAAED,SAAS,EAAEE,gBAAgB,EAAEC,OAAO,CAAC;EACrF,CAAC;EACD,IAAI,CAACG,OAAO,GAAG,UAASH,OAAO,EAAE;IAC7B,IAAI,CAACA,OAAO,EAAE;MACV;IACJ;IACA,IAAII,UAAU;IACdV,gBAAgB,CAACW,OAAO,CAAE,UAASC,GAAG,EAAEC,KAAK,EAAE;MAC3CH,UAAU,GAAGA,UAAU,IAAI,EAAE;MAC7B,IAAII,cAAc;MAClB,IAAID,KAAK,GAAG,CAAC,EAAE;QACXH,UAAU,CAACK,IAAI,CAACd,WAAW,GAAG,KAAK,GAAG,IAAI,CAAC;MAC/C;MACA,IAAIJ,QAAQ,CAACS,OAAO,CAAC,EAAE;QACnBQ,cAAc,GAAGE,oBAAoB,CAACV,OAAO,EAAEM,GAAG,CAAC;MACvD,CAAC,MAAM;QACHE,cAAc,GAAG,UAASR,OAAO,EAAEW,YAAY,EAAE;UAC7C,IAAIP,UAAU,GAAG,EAAE;UACnB,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEC,MAAM,GAAGb,OAAO,CAACa,MAAM,EAAED,CAAC,GAAGC,MAAM,EAAED,CAAC,EAAE,EAAE;YACtD,IAAIE,cAAc,GAAGd,OAAO,CAACY,CAAC,CAAC;YAC/B,IAAIG,eAAe,GAAGJ,YAAY,IAAIA,YAAY,CAACG,cAAc,CAAC;YAClE,IAAIN,cAAc,GAAGE,oBAAoB,CAACI,cAAc,EAAEC,eAAe,CAAC;YAC1E,IAAI,CAACP,cAAc,EAAE;cACjB;YACJ;YACA,IAAII,CAAC,GAAG,CAAC,EAAE;cACPR,UAAU,CAACK,IAAI,CAACd,WAAW,GAAG,IAAI,GAAG,KAAK,CAAC;YAC/C;YACAS,UAAU,CAACK,IAAI,CAACD,cAAc,CAAC;UACnC;UACA,OAAOJ,UAAU;QACrB,CAAC,CAACJ,OAAO,EAAEM,GAAG,CAAC;MACnB;MACAF,UAAU,CAACK,IAAI,CAACD,cAAc,CAAC;IACnC,CAAE,CAAC;IACH,IAAIJ,UAAU,IAAI,CAAC,KAAKA,UAAU,CAACS,MAAM,EAAE;MACvCT,UAAU,GAAGA,UAAU,CAAC,CAAC,CAAC;IAC9B;IACA,OAAOA,UAAU;EACrB,CAAC;EACD,IAAI,CAACY,iBAAiB,GAAG,UAAShB,OAAO,EAAEiB,gBAAgB,EAAE;IACzD,IAAIb,UAAU,GAAG,IAAI,CAACD,OAAO,CAACH,OAAO,CAAC;IACtC,IAAIkB,cAAc,GAAGd,UAAU;IAC/B,IAAIT,WAAW,IAAIsB,gBAAgB,EAAE;MACjC,IAAIb,UAAU,EAAE;QACZc,cAAc,GAAG,EAAE;QACnBA,cAAc,CAACT,IAAI,CAACL,UAAU,CAAC;QAC/Bc,cAAc,CAACT,IAAI,CAACQ,gBAAgB,CAAC;MACzC,CAAC,MAAM;QACHC,cAAc,GAAGD,gBAAgB;MACrC;IACJ;IACA,OAAOC,cAAc;EACzB,CAAC;EACD,IAAIC,wBAAwB;EAC5B,IAAIC,aAAa,GAAG,SAAAA,CAASC,IAAI,EAAEC,KAAK,EAAEtB,OAAO,EAAE;IAC/C,OAAOuB,KAAK,CAACC,OAAO,CAACxB,OAAO,CAAC,GAAGqB,IAAI,CAACI,GAAG,CAACnB,GAAG,IAAIgB,KAAK,CAAChB,GAAG,CAAC,CAAC,GAAGe,IAAI;EACtE,CAAC;EAED,SAASpB,cAAcA,CAACH,SAAS,EAAEwB,KAAK,EAAEvB,gBAAgB,EAAEC,OAAO,EAAE0B,IAAI,EAAE;IACvE,IAAIpB,GAAG,GAAGgB,KAAK,CAACI,IAAI,CAAC;IACrB,IAAIC,OAAO;IACX,IAAIf,CAAC;IACL,IAAI,CAACb,gBAAgB,EAAE;MACnB4B,OAAO,GAAGtC,UAAU,CAACiB,GAAG,CAAC;MACzB,IAAI,CAACd,QAAQ,CAACmC,OAAO,CAAC,EAAE;QACpB,IAAIC,oBAAoB,GAAG,UAASN,KAAK,EAAEtB,OAAO,EAAE;UAChD,IAAI,CAACmB,wBAAwB,EAAE;YAC3BA,wBAAwB,GAAG,CAAC,CAAC;YAC7B,IAAIU,cAAc,GAAGT,aAAa,CAAC1B,gBAAgB,EAAE4B,KAAK,EAAEtB,OAAO,CAAC;YACpE,KAAK,IAAIY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiB,cAAc,CAAChB,MAAM,EAAED,CAAC,EAAE,EAAE;cAC5CO,wBAAwB,CAAC9B,UAAU,CAACwC,cAAc,CAACjB,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;YAClE;UACJ;UACA,OAAOO,wBAAwB;QACnC,CAAC,CAACG,KAAK,EAAEtB,OAAO,CAAC;QACjB,IAAI4B,oBAAoB,CAACD,OAAO,CAAC,EAAE;UAC/B,OAAO,CAAChC,WAAW;QACvB;QACA,OAAO,CAAC,CAACA,WAAW;MACxB;IACJ;IACA,KAAKiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlB,gBAAgB,CAACmB,MAAM,EAAED,CAAC,EAAE,EAAE;MAC1C,IAAId,SAAS,CAACJ,gBAAgB,CAACkB,CAAC,CAAC,EAAEN,GAAG,CAAC,EAAE;QACrC,OAAO,CAACX,WAAW;MACvB;IACJ;IACA,OAAO,CAAC,CAACA,WAAW;EACxB;EAEA,SAASe,oBAAoBA,CAACV,OAAO,EAAE8B,QAAQ,EAAE;IAC7C,IAAI,KAAK,CAAC,KAAKA,QAAQ,EAAE;MACrB;IACJ;IACA,OAAO,CAAC9B,OAAO,EAAEL,WAAW,GAAG,IAAI,GAAG,GAAG,EAAEmC,QAAQ,CAAC;EACxD;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}