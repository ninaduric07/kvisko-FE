{"ast":null,"code":"/**\r\n * DevExtreme (esm/data/data_source/data_source.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Class from \"../../core/class\";\nimport { extend } from \"../../core/utils/extend\";\nimport { executeAsync } from \"../../core/utils/common\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isString, isNumeric, isBoolean, isDefined, isObject } from \"../../core/utils/type\";\nimport { throttleChanges } from \"../utils\";\nimport { applyBatch } from \"../array_utils\";\nimport CustomStore from \"../custom_store\";\nimport { EventsStrategy } from \"../../core/events_strategy\";\nimport { errors } from \"../errors\";\nimport { create } from \"../../core/utils/queue\";\nimport { Deferred, when } from \"../../core/utils/deferred\";\nimport OperationManager from \"./operation_manager\";\nimport { normalizeDataSourceOptions, normalizeStoreLoadOptionAccessorArguments, CANCELED_TOKEN, isPending, normalizeLoadResult, mapDataRespectingGrouping } from \"./utils\";\nexport var DataSource = Class.inherit({\n  ctor(options) {\n    var _options$reshapeOnPus;\n    options = normalizeDataSourceOptions(options);\n    this._eventsStrategy = new EventsStrategy(this, {\n      syncStrategy: true\n    });\n    this._store = options.store;\n    this._changedTime = 0;\n    var needThrottling = 0 !== options.pushAggregationTimeout;\n    if (needThrottling) {\n      var throttlingTimeout = void 0 === options.pushAggregationTimeout ? () => 5 * this._changedTime : options.pushAggregationTimeout;\n      var pushDeferred;\n      var lastPushWaiters;\n      var throttlingPushHandler = throttleChanges(changes => {\n        pushDeferred.resolve();\n        var storePushPending = when(...lastPushWaiters);\n        storePushPending.done(() => this._onPush(changes));\n        lastPushWaiters = void 0;\n        pushDeferred = void 0;\n      }, throttlingTimeout);\n      this._onPushHandler = args => {\n        this._aggregationTimeoutId = throttlingPushHandler(args.changes);\n        if (!pushDeferred) {\n          pushDeferred = new Deferred();\n        }\n        lastPushWaiters = args.waitFor;\n        args.waitFor.push(pushDeferred.promise());\n      };\n      this._store.on(\"beforePush\", this._onPushHandler);\n    } else {\n      this._onPushHandler = changes => this._onPush(changes);\n      this._store.on(\"push\", this._onPushHandler);\n    }\n    this._storeLoadOptions = this._extractLoadOptions(options);\n    this._mapFunc = options.map;\n    this._postProcessFunc = options.postProcess;\n    this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\n    this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\n    this._loadingCount = 0;\n    this._loadQueue = this._createLoadQueue();\n    this._searchValue = \"searchValue\" in options ? options.searchValue : null;\n    this._searchOperation = options.searchOperation || \"contains\";\n    this._searchExpr = options.searchExpr;\n    this._paginate = options.paginate;\n    this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\n    each([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], (_, optionName) => {\n      if (optionName in options) {\n        this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName]);\n      }\n    });\n    this._operationManager = new OperationManager();\n    this._init();\n  },\n  _init() {\n    this._items = [];\n    this._userData = {};\n    this._totalCount = -1;\n    this._isLoaded = false;\n    if (!isDefined(this._paginate)) {\n      this._paginate = !this.group();\n    }\n    this._isLastPage = !this._paginate;\n  },\n  dispose() {\n    var _this$_delayedLoadTas;\n    this._store.off(\"beforePush\", this._onPushHandler);\n    this._store.off(\"push\", this._onPushHandler);\n    this._eventsStrategy.dispose();\n    clearTimeout(this._aggregationTimeoutId);\n    null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\n    this._operationManager.cancelAll();\n    delete this._store;\n    delete this._items;\n    delete this._delayedLoadTask;\n    this._disposed = true;\n  },\n  _extractLoadOptions(options) {\n    var result = {};\n    var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\n    var customNames = this._store._customLoadOptions();\n    if (customNames) {\n      names = names.concat(customNames);\n    }\n    each(names, function () {\n      result[this] = options[this];\n    });\n    return result;\n  },\n  loadOptions() {\n    return this._storeLoadOptions;\n  },\n  items() {\n    return this._items;\n  },\n  pageIndex(newIndex) {\n    if (!isNumeric(newIndex)) {\n      return this._pageIndex;\n    }\n    this._pageIndex = newIndex;\n    this._isLastPage = !this._paginate;\n  },\n  paginate(value) {\n    if (!isBoolean(value)) {\n      return this._paginate;\n    }\n    if (this._paginate !== value) {\n      this._paginate = value;\n      this.pageIndex(0);\n    }\n  },\n  pageSize(value) {\n    if (!isNumeric(value)) {\n      return this._pageSize;\n    }\n    this._pageSize = value;\n  },\n  isLastPage() {\n    return this._isLastPage;\n  },\n  generateStoreLoadOptionAccessor(optionName) {\n    return args => {\n      var normalizedArgs = normalizeStoreLoadOptionAccessorArguments(args);\n      if (void 0 === normalizedArgs) {\n        return this._storeLoadOptions[optionName];\n      }\n      this._storeLoadOptions[optionName] = normalizedArgs;\n    };\n  },\n  sort() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.generateStoreLoadOptionAccessor(\"sort\")(args);\n  },\n  filter() {\n    var newFilter = normalizeStoreLoadOptionAccessorArguments(arguments);\n    if (void 0 === newFilter) {\n      return this._storeLoadOptions.filter;\n    }\n    this._storeLoadOptions.filter = newFilter;\n    this.pageIndex(0);\n  },\n  group() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.generateStoreLoadOptionAccessor(\"group\")(args);\n  },\n  select() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.generateStoreLoadOptionAccessor(\"select\")(args);\n  },\n  requireTotalCount(value) {\n    if (!isBoolean(value)) {\n      return this._storeLoadOptions.requireTotalCount;\n    }\n    this._storeLoadOptions.requireTotalCount = value;\n  },\n  searchValue(value) {\n    if (arguments.length < 1) {\n      return this._searchValue;\n    }\n    this._searchValue = value;\n    this.pageIndex(0);\n  },\n  searchOperation(op) {\n    if (!isString(op)) {\n      return this._searchOperation;\n    }\n    this._searchOperation = op;\n    this.pageIndex(0);\n  },\n  searchExpr(expr) {\n    var argc = arguments.length;\n    if (0 === argc) {\n      return this._searchExpr;\n    }\n    if (argc > 1) {\n      expr = [].slice.call(arguments);\n    }\n    this._searchExpr = expr;\n    this.pageIndex(0);\n  },\n  store() {\n    return this._store;\n  },\n  key() {\n    var _this$_store;\n    return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key();\n  },\n  totalCount() {\n    return this._totalCount;\n  },\n  isLoaded() {\n    return this._isLoaded;\n  },\n  isLoading() {\n    return this._loadingCount > 0;\n  },\n  beginLoading() {\n    this._changeLoadingCount(1);\n  },\n  endLoading() {\n    this._changeLoadingCount(-1);\n  },\n  _createLoadQueue: () => create(),\n  _changeLoadingCount(increment) {\n    var oldLoading = this.isLoading();\n    this._loadingCount += increment;\n    var newLoading = this.isLoading();\n    if (oldLoading ^ newLoading) {\n      this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading]);\n    }\n  },\n  _scheduleLoadCallbacks(deferred) {\n    this.beginLoading();\n    deferred.always(() => {\n      this.endLoading();\n    });\n  },\n  _scheduleFailCallbacks(deferred) {\n    var _this = this;\n    deferred.fail(function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      if (args[0] === CANCELED_TOKEN) {\n        return;\n      }\n      _this._eventsStrategy.fireEvent(\"loadError\", args);\n    });\n  },\n  _fireChanged(args) {\n    var date = new Date();\n    this._eventsStrategy.fireEvent(\"changed\", args);\n    this._changedTime = new Date() - date;\n  },\n  _scheduleChangedCallbacks(deferred) {\n    deferred.done(() => this._fireChanged());\n  },\n  loadSingle(propName, propValue) {\n    var d = new Deferred();\n    var key = this.key();\n    var store = this._store;\n    var options = this._createStoreLoadOptions();\n    this._scheduleFailCallbacks(d);\n    if (arguments.length < 2) {\n      propValue = propName;\n      propName = key;\n    }\n    delete options.skip;\n    delete options.group;\n    delete options.refresh;\n    delete options.pageIndex;\n    delete options.searchString;\n    (() => {\n      if (propName === key || store instanceof CustomStore && !store._byKeyViaLoad()) {\n        return store.byKey(propValue, options);\n      }\n      options.take = 1;\n      options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\n      return store.load(options);\n    })().fail(d.reject).done(data => {\n      var isEmptyArray = Array.isArray(data) && !data.length;\n      if (!isDefined(data) || isEmptyArray) {\n        d.reject(new errors.Error(\"E4009\"));\n      } else {\n        if (!Array.isArray(data)) {\n          data = [data];\n        }\n        d.resolve(this._applyMapFunction(data)[0]);\n      }\n    });\n    return d.promise();\n  },\n  load() {\n    var d = new Deferred();\n    var loadTask = () => {\n      if (this._disposed) {\n        return;\n      }\n      if (!isPending(d)) {\n        return;\n      }\n      return this._loadFromStore(loadOperation, d);\n    };\n    this._scheduleLoadCallbacks(d);\n    this._scheduleFailCallbacks(d);\n    this._scheduleChangedCallbacks(d);\n    var loadOperation = this._createLoadOperation(d);\n    this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\n    this._loadQueue.add(() => {\n      if (\"number\" === typeof loadOperation.delay) {\n        this._delayedLoadTask = executeAsync(loadTask, loadOperation.delay);\n      } else {\n        loadTask();\n      }\n      return d.promise();\n    });\n    return d.promise({\n      operationId: loadOperation.operationId\n    });\n  },\n  _onPush(changes) {\n    if (this._reshapeOnPush) {\n      this.load();\n    } else {\n      var changingArgs = {\n        changes: changes\n      };\n      this._eventsStrategy.fireEvent(\"changing\", [changingArgs]);\n      var group = this.group();\n      var items = this.items();\n      var groupLevel = 0;\n      var dataSourceChanges = this.paginate() || group ? changes.filter(item => \"update\" === item.type) : changes;\n      if (group) {\n        groupLevel = Array.isArray(group) ? group.length : 1;\n      }\n      if (this._mapFunc) {\n        dataSourceChanges.forEach(item => {\n          if (\"insert\" === item.type) {\n            item.data = this._mapFunc(item.data);\n          }\n        });\n      }\n      if (changingArgs.postProcessChanges) {\n        dataSourceChanges = changingArgs.postProcessChanges(dataSourceChanges);\n      }\n      applyBatch({\n        keyInfo: this.store(),\n        data: items,\n        changes: dataSourceChanges,\n        groupCount: groupLevel,\n        useInsertIndex: true\n      });\n      this._fireChanged([{\n        changes: changes\n      }]);\n    }\n  },\n  _createLoadOperation(deferred) {\n    var operationId = this._operationManager.add(deferred);\n    var storeLoadOptions = this._createStoreLoadOptions();\n    deferred.always(() => this._operationManager.remove(operationId));\n    return {\n      operationId: operationId,\n      storeLoadOptions: storeLoadOptions\n    };\n  },\n  reload() {\n    var store = this.store();\n    store._clearCache();\n    this._init();\n    return this.load();\n  },\n  cancel(operationId) {\n    return this._operationManager.cancel(operationId);\n  },\n  cancelAll() {\n    return this._operationManager.cancelAll();\n  },\n  _addSearchOptions(storeLoadOptions) {\n    if (this._disposed) {\n      return;\n    }\n    if (this.store()._useDefaultSearch) {\n      this._addSearchFilter(storeLoadOptions);\n    } else {\n      storeLoadOptions.searchOperation = this._searchOperation;\n      storeLoadOptions.searchValue = this._searchValue;\n      storeLoadOptions.searchExpr = this._searchExpr;\n    }\n  },\n  _createStoreLoadOptions() {\n    var result = extend({}, this._storeLoadOptions);\n    this._addSearchOptions(result);\n    if (this._paginate) {\n      if (this._pageSize) {\n        result.skip = this._pageIndex * this._pageSize;\n        result.take = this._pageSize;\n      }\n    }\n    result.userData = this._userData;\n    return result;\n  },\n  _addSearchFilter(storeLoadOptions) {\n    var value = this._searchValue;\n    var op = this._searchOperation;\n    var selector = this._searchExpr;\n    var searchFilter = [];\n    if (!value) {\n      return;\n    }\n    if (!selector) {\n      selector = \"this\";\n    }\n    if (!Array.isArray(selector)) {\n      selector = [selector];\n    }\n    each(selector, function (i, item) {\n      if (searchFilter.length) {\n        searchFilter.push(\"or\");\n      }\n      searchFilter.push([item, op, value]);\n    });\n    if (storeLoadOptions.filter) {\n      storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter];\n    } else {\n      storeLoadOptions.filter = searchFilter;\n    }\n  },\n  _loadFromStore(loadOptions, pendingDeferred) {\n    var handleSuccess = (data, extra) => {\n      if (this._disposed) {\n        return;\n      }\n      if (!isPending(pendingDeferred)) {\n        return;\n      }\n      var loadResult = extend(normalizeLoadResult(data, extra), loadOptions);\n      this._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\n      when(loadResult.data).done(data => {\n        loadResult.data = data;\n        this._processStoreLoadResult(loadResult, pendingDeferred);\n      }).fail(pendingDeferred.reject);\n    };\n    if (loadOptions.data) {\n      return new Deferred().resolve(loadOptions.data).done(handleSuccess);\n    }\n    return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject);\n  },\n  _processStoreLoadResult(loadResult, pendingDeferred) {\n    var data = loadResult.data;\n    var extra = loadResult.extra;\n    var storeLoadOptions = loadResult.storeLoadOptions;\n    var resolvePendingDeferred = () => {\n      this._isLoaded = true;\n      this._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\n      return pendingDeferred.resolve(data, extra);\n    };\n    if (this._disposed) {\n      return;\n    }\n    data = this._applyPostProcessFunction(this._applyMapFunction(data));\n    if (!isObject(extra)) {\n      extra = {};\n    }\n    this._items = data;\n    if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\n      this._isLastPage = true;\n    }\n    if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\n      (() => {\n        this.store().totalCount(storeLoadOptions).done(function (count) {\n          extra.totalCount = count;\n          resolvePendingDeferred();\n        }).fail(pendingDeferred.reject);\n      })();\n    } else {\n      resolvePendingDeferred();\n    }\n  },\n  _applyMapFunction(data) {\n    if (this._mapFunc) {\n      return mapDataRespectingGrouping(data, this._mapFunc, this.group());\n    }\n    return data;\n  },\n  _applyPostProcessFunction(data) {\n    if (this._postProcessFunc) {\n      return this._postProcessFunc(data);\n    }\n    return data;\n  },\n  on(eventName, eventHandler) {\n    this._eventsStrategy.on(eventName, eventHandler);\n    return this;\n  },\n  off(eventName, eventHandler) {\n    this._eventsStrategy.off(eventName, eventHandler);\n    return this;\n  }\n});","map":{"version":3,"names":["Class","extend","executeAsync","each","isString","isNumeric","isBoolean","isDefined","isObject","throttleChanges","applyBatch","CustomStore","EventsStrategy","errors","create","Deferred","when","OperationManager","normalizeDataSourceOptions","normalizeStoreLoadOptionAccessorArguments","CANCELED_TOKEN","isPending","normalizeLoadResult","mapDataRespectingGrouping","DataSource","inherit","ctor","options","_options$reshapeOnPus","_eventsStrategy","syncStrategy","_store","store","_changedTime","needThrottling","pushAggregationTimeout","throttlingTimeout","pushDeferred","lastPushWaiters","throttlingPushHandler","changes","resolve","storePushPending","done","_onPush","_onPushHandler","args","_aggregationTimeoutId","waitFor","push","promise","on","_storeLoadOptions","_extractLoadOptions","_mapFunc","map","_postProcessFunc","postProcess","_pageIndex","pageIndex","_pageSize","pageSize","_loadingCount","_loadQueue","_createLoadQueue","_searchValue","searchValue","_searchOperation","searchOperation","_searchExpr","searchExpr","_paginate","paginate","_reshapeOnPush","reshapeOnPush","_","optionName","substr","toLowerCase","_operationManager","_init","_items","_userData","_totalCount","_isLoaded","group","_isLastPage","dispose","_this$_delayedLoadTas","off","clearTimeout","_delayedLoadTask","abort","cancelAll","_disposed","result","names","customNames","_customLoadOptions","concat","loadOptions","items","newIndex","value","isLastPage","generateStoreLoadOptionAccessor","normalizedArgs","sort","_len","arguments","length","Array","_key","filter","newFilter","_len2","_key2","select","_len3","_key3","requireTotalCount","op","expr","argc","slice","call","key","_this$_store","totalCount","isLoaded","isLoading","beginLoading","_changeLoadingCount","endLoading","increment","oldLoading","newLoading","fireEvent","_scheduleLoadCallbacks","deferred","always","_scheduleFailCallbacks","_this","fail","_len4","_key4","_fireChanged","date","Date","_scheduleChangedCallbacks","loadSingle","propName","propValue","d","_createStoreLoadOptions","skip","refresh","searchString","_byKeyViaLoad","byKey","take","load","reject","data","isEmptyArray","isArray","Error","_applyMapFunction","loadTask","_loadFromStore","loadOperation","_createLoadOperation","add","delay","operationId","changingArgs","groupLevel","dataSourceChanges","item","type","forEach","postProcessChanges","keyInfo","groupCount","useInsertIndex","storeLoadOptions","remove","reload","_clearCache","cancel","_addSearchOptions","_useDefaultSearch","_addSearchFilter","userData","selector","searchFilter","i","pendingDeferred","handleSuccess","extra","loadResult","_processStoreLoadResult","resolvePendingDeferred","isFinite","_applyPostProcessFunction","count","eventName","eventHandler"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/devextreme/esm/data/data_source/data_source.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/data/data_source/data_source.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    executeAsync\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isString,\r\n    isNumeric,\r\n    isBoolean,\r\n    isDefined,\r\n    isObject\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    throttleChanges\r\n} from \"../utils\";\r\nimport {\r\n    applyBatch\r\n} from \"../array_utils\";\r\nimport CustomStore from \"../custom_store\";\r\nimport {\r\n    EventsStrategy\r\n} from \"../../core/events_strategy\";\r\nimport {\r\n    errors\r\n} from \"../errors\";\r\nimport {\r\n    create\r\n} from \"../../core/utils/queue\";\r\nimport {\r\n    Deferred,\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport OperationManager from \"./operation_manager\";\r\nimport {\r\n    normalizeDataSourceOptions,\r\n    normalizeStoreLoadOptionAccessorArguments,\r\n    CANCELED_TOKEN,\r\n    isPending,\r\n    normalizeLoadResult,\r\n    mapDataRespectingGrouping\r\n} from \"./utils\";\r\nexport var DataSource = Class.inherit({\r\n    ctor(options) {\r\n        var _options$reshapeOnPus;\r\n        options = normalizeDataSourceOptions(options);\r\n        this._eventsStrategy = new EventsStrategy(this, {\r\n            syncStrategy: true\r\n        });\r\n        this._store = options.store;\r\n        this._changedTime = 0;\r\n        var needThrottling = 0 !== options.pushAggregationTimeout;\r\n        if (needThrottling) {\r\n            var throttlingTimeout = void 0 === options.pushAggregationTimeout ? () => 5 * this._changedTime : options.pushAggregationTimeout;\r\n            var pushDeferred;\r\n            var lastPushWaiters;\r\n            var throttlingPushHandler = throttleChanges(changes => {\r\n                pushDeferred.resolve();\r\n                var storePushPending = when(...lastPushWaiters);\r\n                storePushPending.done(() => this._onPush(changes));\r\n                lastPushWaiters = void 0;\r\n                pushDeferred = void 0\r\n            }, throttlingTimeout);\r\n            this._onPushHandler = args => {\r\n                this._aggregationTimeoutId = throttlingPushHandler(args.changes);\r\n                if (!pushDeferred) {\r\n                    pushDeferred = new Deferred\r\n                }\r\n                lastPushWaiters = args.waitFor;\r\n                args.waitFor.push(pushDeferred.promise())\r\n            };\r\n            this._store.on(\"beforePush\", this._onPushHandler)\r\n        } else {\r\n            this._onPushHandler = changes => this._onPush(changes);\r\n            this._store.on(\"push\", this._onPushHandler)\r\n        }\r\n        this._storeLoadOptions = this._extractLoadOptions(options);\r\n        this._mapFunc = options.map;\r\n        this._postProcessFunc = options.postProcess;\r\n        this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\r\n        this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\r\n        this._loadingCount = 0;\r\n        this._loadQueue = this._createLoadQueue();\r\n        this._searchValue = \"searchValue\" in options ? options.searchValue : null;\r\n        this._searchOperation = options.searchOperation || \"contains\";\r\n        this._searchExpr = options.searchExpr;\r\n        this._paginate = options.paginate;\r\n        this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\r\n        each([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], (_, optionName) => {\r\n            if (optionName in options) {\r\n                this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName])\r\n            }\r\n        });\r\n        this._operationManager = new OperationManager;\r\n        this._init()\r\n    },\r\n    _init() {\r\n        this._items = [];\r\n        this._userData = {};\r\n        this._totalCount = -1;\r\n        this._isLoaded = false;\r\n        if (!isDefined(this._paginate)) {\r\n            this._paginate = !this.group()\r\n        }\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    dispose() {\r\n        var _this$_delayedLoadTas;\r\n        this._store.off(\"beforePush\", this._onPushHandler);\r\n        this._store.off(\"push\", this._onPushHandler);\r\n        this._eventsStrategy.dispose();\r\n        clearTimeout(this._aggregationTimeoutId);\r\n        null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\r\n        this._operationManager.cancelAll();\r\n        delete this._store;\r\n        delete this._items;\r\n        delete this._delayedLoadTask;\r\n        this._disposed = true\r\n    },\r\n    _extractLoadOptions(options) {\r\n        var result = {};\r\n        var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\r\n        var customNames = this._store._customLoadOptions();\r\n        if (customNames) {\r\n            names = names.concat(customNames)\r\n        }\r\n        each(names, (function() {\r\n            result[this] = options[this]\r\n        }));\r\n        return result\r\n    },\r\n    loadOptions() {\r\n        return this._storeLoadOptions\r\n    },\r\n    items() {\r\n        return this._items\r\n    },\r\n    pageIndex(newIndex) {\r\n        if (!isNumeric(newIndex)) {\r\n            return this._pageIndex\r\n        }\r\n        this._pageIndex = newIndex;\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    paginate(value) {\r\n        if (!isBoolean(value)) {\r\n            return this._paginate\r\n        }\r\n        if (this._paginate !== value) {\r\n            this._paginate = value;\r\n            this.pageIndex(0)\r\n        }\r\n    },\r\n    pageSize(value) {\r\n        if (!isNumeric(value)) {\r\n            return this._pageSize\r\n        }\r\n        this._pageSize = value\r\n    },\r\n    isLastPage() {\r\n        return this._isLastPage\r\n    },\r\n    generateStoreLoadOptionAccessor(optionName) {\r\n        return args => {\r\n            var normalizedArgs = normalizeStoreLoadOptionAccessorArguments(args);\r\n            if (void 0 === normalizedArgs) {\r\n                return this._storeLoadOptions[optionName]\r\n            }\r\n            this._storeLoadOptions[optionName] = normalizedArgs\r\n        }\r\n    },\r\n    sort() {\r\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n            args[_key] = arguments[_key]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"sort\")(args)\r\n    },\r\n    filter() {\r\n        var newFilter = normalizeStoreLoadOptionAccessorArguments(arguments);\r\n        if (void 0 === newFilter) {\r\n            return this._storeLoadOptions.filter\r\n        }\r\n        this._storeLoadOptions.filter = newFilter;\r\n        this.pageIndex(0)\r\n    },\r\n    group() {\r\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n            args[_key2] = arguments[_key2]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"group\")(args)\r\n    },\r\n    select() {\r\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n            args[_key3] = arguments[_key3]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"select\")(args)\r\n    },\r\n    requireTotalCount(value) {\r\n        if (!isBoolean(value)) {\r\n            return this._storeLoadOptions.requireTotalCount\r\n        }\r\n        this._storeLoadOptions.requireTotalCount = value\r\n    },\r\n    searchValue(value) {\r\n        if (arguments.length < 1) {\r\n            return this._searchValue\r\n        }\r\n        this._searchValue = value;\r\n        this.pageIndex(0)\r\n    },\r\n    searchOperation(op) {\r\n        if (!isString(op)) {\r\n            return this._searchOperation\r\n        }\r\n        this._searchOperation = op;\r\n        this.pageIndex(0)\r\n    },\r\n    searchExpr(expr) {\r\n        var argc = arguments.length;\r\n        if (0 === argc) {\r\n            return this._searchExpr\r\n        }\r\n        if (argc > 1) {\r\n            expr = [].slice.call(arguments)\r\n        }\r\n        this._searchExpr = expr;\r\n        this.pageIndex(0)\r\n    },\r\n    store() {\r\n        return this._store\r\n    },\r\n    key() {\r\n        var _this$_store;\r\n        return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key()\r\n    },\r\n    totalCount() {\r\n        return this._totalCount\r\n    },\r\n    isLoaded() {\r\n        return this._isLoaded\r\n    },\r\n    isLoading() {\r\n        return this._loadingCount > 0\r\n    },\r\n    beginLoading() {\r\n        this._changeLoadingCount(1)\r\n    },\r\n    endLoading() {\r\n        this._changeLoadingCount(-1)\r\n    },\r\n    _createLoadQueue: () => create(),\r\n    _changeLoadingCount(increment) {\r\n        var oldLoading = this.isLoading();\r\n        this._loadingCount += increment;\r\n        var newLoading = this.isLoading();\r\n        if (oldLoading ^ newLoading) {\r\n            this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading])\r\n        }\r\n    },\r\n    _scheduleLoadCallbacks(deferred) {\r\n        this.beginLoading();\r\n        deferred.always(() => {\r\n            this.endLoading()\r\n        })\r\n    },\r\n    _scheduleFailCallbacks(deferred) {\r\n        var _this = this;\r\n        deferred.fail((function() {\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            if (args[0] === CANCELED_TOKEN) {\r\n                return\r\n            }\r\n            _this._eventsStrategy.fireEvent(\"loadError\", args)\r\n        }))\r\n    },\r\n    _fireChanged(args) {\r\n        var date = new Date;\r\n        this._eventsStrategy.fireEvent(\"changed\", args);\r\n        this._changedTime = new Date - date\r\n    },\r\n    _scheduleChangedCallbacks(deferred) {\r\n        deferred.done(() => this._fireChanged())\r\n    },\r\n    loadSingle(propName, propValue) {\r\n        var d = new Deferred;\r\n        var key = this.key();\r\n        var store = this._store;\r\n        var options = this._createStoreLoadOptions();\r\n        this._scheduleFailCallbacks(d);\r\n        if (arguments.length < 2) {\r\n            propValue = propName;\r\n            propName = key\r\n        }\r\n        delete options.skip;\r\n        delete options.group;\r\n        delete options.refresh;\r\n        delete options.pageIndex;\r\n        delete options.searchString;\r\n        (() => {\r\n            if (propName === key || store instanceof CustomStore && !store._byKeyViaLoad()) {\r\n                return store.byKey(propValue, options)\r\n            }\r\n            options.take = 1;\r\n            options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\r\n            return store.load(options)\r\n        })().fail(d.reject).done(data => {\r\n            var isEmptyArray = Array.isArray(data) && !data.length;\r\n            if (!isDefined(data) || isEmptyArray) {\r\n                d.reject(new errors.Error(\"E4009\"))\r\n            } else {\r\n                if (!Array.isArray(data)) {\r\n                    data = [data]\r\n                }\r\n                d.resolve(this._applyMapFunction(data)[0])\r\n            }\r\n        });\r\n        return d.promise()\r\n    },\r\n    load() {\r\n        var d = new Deferred;\r\n        var loadTask = () => {\r\n            if (this._disposed) {\r\n                return\r\n            }\r\n            if (!isPending(d)) {\r\n                return\r\n            }\r\n            return this._loadFromStore(loadOperation, d)\r\n        };\r\n        this._scheduleLoadCallbacks(d);\r\n        this._scheduleFailCallbacks(d);\r\n        this._scheduleChangedCallbacks(d);\r\n        var loadOperation = this._createLoadOperation(d);\r\n        this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\r\n        this._loadQueue.add(() => {\r\n            if (\"number\" === typeof loadOperation.delay) {\r\n                this._delayedLoadTask = executeAsync(loadTask, loadOperation.delay)\r\n            } else {\r\n                loadTask()\r\n            }\r\n            return d.promise()\r\n        });\r\n        return d.promise({\r\n            operationId: loadOperation.operationId\r\n        })\r\n    },\r\n    _onPush(changes) {\r\n        if (this._reshapeOnPush) {\r\n            this.load()\r\n        } else {\r\n            var changingArgs = {\r\n                changes: changes\r\n            };\r\n            this._eventsStrategy.fireEvent(\"changing\", [changingArgs]);\r\n            var group = this.group();\r\n            var items = this.items();\r\n            var groupLevel = 0;\r\n            var dataSourceChanges = this.paginate() || group ? changes.filter(item => \"update\" === item.type) : changes;\r\n            if (group) {\r\n                groupLevel = Array.isArray(group) ? group.length : 1\r\n            }\r\n            if (this._mapFunc) {\r\n                dataSourceChanges.forEach(item => {\r\n                    if (\"insert\" === item.type) {\r\n                        item.data = this._mapFunc(item.data)\r\n                    }\r\n                })\r\n            }\r\n            if (changingArgs.postProcessChanges) {\r\n                dataSourceChanges = changingArgs.postProcessChanges(dataSourceChanges)\r\n            }\r\n            applyBatch({\r\n                keyInfo: this.store(),\r\n                data: items,\r\n                changes: dataSourceChanges,\r\n                groupCount: groupLevel,\r\n                useInsertIndex: true\r\n            });\r\n            this._fireChanged([{\r\n                changes: changes\r\n            }])\r\n        }\r\n    },\r\n    _createLoadOperation(deferred) {\r\n        var operationId = this._operationManager.add(deferred);\r\n        var storeLoadOptions = this._createStoreLoadOptions();\r\n        deferred.always(() => this._operationManager.remove(operationId));\r\n        return {\r\n            operationId: operationId,\r\n            storeLoadOptions: storeLoadOptions\r\n        }\r\n    },\r\n    reload() {\r\n        var store = this.store();\r\n        store._clearCache();\r\n        this._init();\r\n        return this.load()\r\n    },\r\n    cancel(operationId) {\r\n        return this._operationManager.cancel(operationId)\r\n    },\r\n    cancelAll() {\r\n        return this._operationManager.cancelAll()\r\n    },\r\n    _addSearchOptions(storeLoadOptions) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        if (this.store()._useDefaultSearch) {\r\n            this._addSearchFilter(storeLoadOptions)\r\n        } else {\r\n            storeLoadOptions.searchOperation = this._searchOperation;\r\n            storeLoadOptions.searchValue = this._searchValue;\r\n            storeLoadOptions.searchExpr = this._searchExpr\r\n        }\r\n    },\r\n    _createStoreLoadOptions() {\r\n        var result = extend({}, this._storeLoadOptions);\r\n        this._addSearchOptions(result);\r\n        if (this._paginate) {\r\n            if (this._pageSize) {\r\n                result.skip = this._pageIndex * this._pageSize;\r\n                result.take = this._pageSize\r\n            }\r\n        }\r\n        result.userData = this._userData;\r\n        return result\r\n    },\r\n    _addSearchFilter(storeLoadOptions) {\r\n        var value = this._searchValue;\r\n        var op = this._searchOperation;\r\n        var selector = this._searchExpr;\r\n        var searchFilter = [];\r\n        if (!value) {\r\n            return\r\n        }\r\n        if (!selector) {\r\n            selector = \"this\"\r\n        }\r\n        if (!Array.isArray(selector)) {\r\n            selector = [selector]\r\n        }\r\n        each(selector, (function(i, item) {\r\n            if (searchFilter.length) {\r\n                searchFilter.push(\"or\")\r\n            }\r\n            searchFilter.push([item, op, value])\r\n        }));\r\n        if (storeLoadOptions.filter) {\r\n            storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter]\r\n        } else {\r\n            storeLoadOptions.filter = searchFilter\r\n        }\r\n    },\r\n    _loadFromStore(loadOptions, pendingDeferred) {\r\n        var handleSuccess = (data, extra) => {\r\n            if (this._disposed) {\r\n                return\r\n            }\r\n            if (!isPending(pendingDeferred)) {\r\n                return\r\n            }\r\n            var loadResult = extend(normalizeLoadResult(data, extra), loadOptions);\r\n            this._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\r\n            when(loadResult.data).done(data => {\r\n                loadResult.data = data;\r\n                this._processStoreLoadResult(loadResult, pendingDeferred)\r\n            }).fail(pendingDeferred.reject)\r\n        };\r\n        if (loadOptions.data) {\r\n            return (new Deferred).resolve(loadOptions.data).done(handleSuccess)\r\n        }\r\n        return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject)\r\n    },\r\n    _processStoreLoadResult(loadResult, pendingDeferred) {\r\n        var data = loadResult.data;\r\n        var extra = loadResult.extra;\r\n        var storeLoadOptions = loadResult.storeLoadOptions;\r\n        var resolvePendingDeferred = () => {\r\n            this._isLoaded = true;\r\n            this._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\r\n            return pendingDeferred.resolve(data, extra)\r\n        };\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        data = this._applyPostProcessFunction(this._applyMapFunction(data));\r\n        if (!isObject(extra)) {\r\n            extra = {}\r\n        }\r\n        this._items = data;\r\n        if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\r\n            this._isLastPage = true\r\n        }\r\n        if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\r\n            (() => {\r\n                this.store().totalCount(storeLoadOptions).done((function(count) {\r\n                    extra.totalCount = count;\r\n                    resolvePendingDeferred()\r\n                })).fail(pendingDeferred.reject)\r\n            })()\r\n        } else {\r\n            resolvePendingDeferred()\r\n        }\r\n    },\r\n    _applyMapFunction(data) {\r\n        if (this._mapFunc) {\r\n            return mapDataRespectingGrouping(data, this._mapFunc, this.group())\r\n        }\r\n        return data\r\n    },\r\n    _applyPostProcessFunction(data) {\r\n        if (this._postProcessFunc) {\r\n            return this._postProcessFunc(data)\r\n        }\r\n        return data\r\n    },\r\n    on(eventName, eventHandler) {\r\n        this._eventsStrategy.on(eventName, eventHandler);\r\n        return this\r\n    },\r\n    off(eventName, eventHandler) {\r\n        this._eventsStrategy.off(eventName, eventHandler);\r\n        return this\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}