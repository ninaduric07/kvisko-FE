{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ninad/zavrsni/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/ninad/zavrsni/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/ninad/zavrsni/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ninad/zavrsni/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from\"axios\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import LoginPage from'./pages/LoginPage.js';import RegisterPage from'./pages/RegisterPage.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),isBackendData=_useState2[0],setBackendData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isSession=_useState4[0],setSession=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var refreshSession=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get(\"\".concat(import.meta.env.VITE_API,\"/auth/session\"),{withCredentials:true});case 4:res=_context.sent;if(res.data){setSession(_objectSpread(_objectSpread({exists:true},res.data),{},{refresh:refreshSession}));}else{setSession({exists:false,refresh:refreshSession});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setSession({exists:false});case 11:_context.prev=11;setIsLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,8,11,14]]);}));return function refreshSession(){return _ref.apply(this,arguments);};}();useEffect(function(){// First session load\nrefreshSession();},[]);//////////////////////////////////////////////////////////////////////////////////\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterPage,{})})]})})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","BrowserRouter","Routes","Route","LoginPage","RegisterPage","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isBackendData","setBackendData","_useState3","_useState4","isSession","setSession","_useState5","_useState6","isLoading","setIsLoading","refreshSession","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","import","meta","env","VITE_API","withCredentials","sent","data","_objectSpread","exists","refresh","t0","finish","stop","apply","arguments","children","path","element"],"sources":["C:/Users/ninad/zavrsni/client/src/App.js"],"sourcesContent":["\nimport React, { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport LoginPage from './pages/LoginPage.js';\nimport RegisterPage from './pages/RegisterPage.js';\n\nfunction App() {\n\n    const [ isBackendData, setBackendData] = useState([{}]);\n    const [isSession, setSession] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n\n    const refreshSession = async () => {\n        setIsLoading(true);\n\n        try {\n            const res = await axios.get(\n                `${import.meta.env.VITE_API}/auth/session`,\n                { withCredentials: true }\n            );\n            if (res.data) {\n                setSession({\n                    exists: true,\n                    ...res.data,\n                    refresh: refreshSession,\n                });\n            } else {\n                setSession({ exists: false, refresh: refreshSession });\n            }\n        } catch (err) {\n            setSession({ exists: false });\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n    // First session load\n        refreshSession();\n    }, []);\n\n    //////////////////////////////////////////////////////////////////////////////////\n\n\n\n\n    return ( \n        <div>\n            <BrowserRouter>\n                <Routes>\n                    <Route path=\"/login\" element={<LoginPage />} />\n                    <Route path=\"/register\" element={<RegisterPage />} />\n                </Routes>\n            </ BrowserRouter>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}