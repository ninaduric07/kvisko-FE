{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/filter_builder/filter_builder.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport Class from \"../../core/class\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Widget from \"../widget/ui.widget\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { extend } from \"../../core/utils/extend\";\nimport messageLocalization from \"../../localization/message\";\nimport { when } from \"../../core/utils/deferred\";\nimport { isDefined } from \"../../core/utils/type\";\nimport TreeView from \"../tree_view\";\nimport Popup from \"../popup/ui.popup\";\nimport { getElementMaxHeightByWindow } from \"../overlay/utils\";\nimport EditorFactoryMixin from \"../shared/ui.editor_factory_mixin\";\nimport { normalizeKeyName } from \"../../events/utils/index\";\nimport { renderValueText, getFilterExpression as _getFilterExpression, getNormalizedFilter, getNormalizedFields, getMergedOperations, convertToInnerStructure, getGroupCriteria, isGroup, isCondition, removeItem, createEmptyGroup, addItem, createCondition, getGroupMenuItem, setGroupValue, getCustomOperation, getAvailableOperations, getOperationFromAvailable, getOperationValue, updateConditionByOperation, getItems, getField, getCaptionWithParents, getDefaultOperation, getGroupValue, getCurrentLookupValueText, getCurrentValueText } from \"./utils\";\nvar FILTER_BUILDER_CLASS = \"dx-filterbuilder\";\nvar FILTER_BUILDER_GROUP_CLASS = FILTER_BUILDER_CLASS + \"-group\";\nvar FILTER_BUILDER_GROUP_ITEM_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-item\";\nvar FILTER_BUILDER_GROUP_CONTENT_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-content\";\nvar FILTER_BUILDER_GROUP_OPERATIONS_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-operations\";\nvar FILTER_BUILDER_GROUP_OPERATION_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-operation\";\nvar FILTER_BUILDER_ACTION_CLASS = FILTER_BUILDER_CLASS + \"-action\";\nvar FILTER_BUILDER_IMAGE_CLASS = FILTER_BUILDER_ACTION_CLASS + \"-icon\";\nvar FILTER_BUILDER_IMAGE_ADD_CLASS = \"dx-icon-plus\";\nvar FILTER_BUILDER_IMAGE_REMOVE_CLASS = \"dx-icon-remove\";\nvar FILTER_BUILDER_ITEM_TEXT_CLASS = FILTER_BUILDER_CLASS + \"-text\";\nvar FILTER_BUILDER_ITEM_FIELD_CLASS = FILTER_BUILDER_CLASS + \"-item-field\";\nvar FILTER_BUILDER_ITEM_OPERATION_CLASS = FILTER_BUILDER_CLASS + \"-item-operation\";\nvar FILTER_BUILDER_ITEM_VALUE_CLASS = FILTER_BUILDER_CLASS + \"-item-value\";\nvar FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS = FILTER_BUILDER_CLASS + \"-item-value-text\";\nvar FILTER_BUILDER_OVERLAY_CLASS = FILTER_BUILDER_CLASS + \"-overlay\";\nvar FILTER_BUILDER_FILTER_OPERATIONS_CLASS = FILTER_BUILDER_CLASS + \"-operations\";\nvar FILTER_BUILDER_FIELDS_CLASS = FILTER_BUILDER_CLASS + \"-fields\";\nvar FILTER_BUILDER_ADD_CONDITION_CLASS = FILTER_BUILDER_CLASS + \"-add-condition\";\nvar ACTIVE_CLASS = \"dx-state-active\";\nvar FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS = FILTER_BUILDER_CLASS + \"-menu-custom-operation\";\nvar SOURCE = \"filterBuilder\";\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\nvar TAB_KEY = \"tab\";\nvar ENTER_KEY = \"enter\";\nvar ESCAPE_KEY = \"escape\";\nvar ACTIONS = [{\n  name: \"onEditorPreparing\",\n  config: {\n    excludeValidators: [\"disabled\", \"readOnly\"],\n    category: \"rendering\"\n  }\n}, {\n  name: \"onEditorPrepared\",\n  config: {\n    excludeValidators: [\"disabled\", \"readOnly\"],\n    category: \"rendering\"\n  }\n}, {\n  name: \"onValueChanged\",\n  config: {\n    excludeValidators: [\"disabled\", \"readOnly\"]\n  }\n}];\nvar OPERATORS = {\n  and: \"and\",\n  or: \"or\",\n  notAnd: \"!and\",\n  notOr: \"!or\"\n};\nvar EditorFactory = Class.inherit(EditorFactoryMixin);\nvar FilterBuilder = Widget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      onEditorPreparing: null,\n      onEditorPrepared: null,\n      onValueChanged: null,\n      fields: [],\n      groupOperations: [\"and\", \"or\", \"notAnd\", \"notOr\"],\n      maxGroupLevel: void 0,\n      value: null,\n      allowHierarchicalFields: false,\n      groupOperationDescriptions: {\n        and: messageLocalization.format(\"dxFilterBuilder-and\"),\n        or: messageLocalization.format(\"dxFilterBuilder-or\"),\n        notAnd: messageLocalization.format(\"dxFilterBuilder-notAnd\"),\n        notOr: messageLocalization.format(\"dxFilterBuilder-notOr\")\n      },\n      customOperations: [],\n      closePopupOnTargetScroll: true,\n      filterOperationDescriptions: {\n        between: messageLocalization.format(\"dxFilterBuilder-filterOperationBetween\"),\n        equal: messageLocalization.format(\"dxFilterBuilder-filterOperationEquals\"),\n        notEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationNotEquals\"),\n        lessThan: messageLocalization.format(\"dxFilterBuilder-filterOperationLess\"),\n        lessThanOrEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationLessOrEquals\"),\n        greaterThan: messageLocalization.format(\"dxFilterBuilder-filterOperationGreater\"),\n        greaterThanOrEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationGreaterOrEquals\"),\n        startsWith: messageLocalization.format(\"dxFilterBuilder-filterOperationStartsWith\"),\n        contains: messageLocalization.format(\"dxFilterBuilder-filterOperationContains\"),\n        notContains: messageLocalization.format(\"dxFilterBuilder-filterOperationNotContains\"),\n        endsWith: messageLocalization.format(\"dxFilterBuilder-filterOperationEndsWith\"),\n        isBlank: messageLocalization.format(\"dxFilterBuilder-filterOperationIsBlank\"),\n        isNotBlank: messageLocalization.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\n      }\n    });\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"closePopupOnTargetScroll\":\n        break;\n      case \"onEditorPreparing\":\n      case \"onEditorPrepared\":\n      case \"onValueChanged\":\n        this._initActions();\n        break;\n      case \"customOperations\":\n        this._initCustomOperations();\n        this._invalidate();\n        break;\n      case \"fields\":\n      case \"maxGroupLevel\":\n      case \"groupOperations\":\n      case \"allowHierarchicalFields\":\n      case \"groupOperationDescriptions\":\n      case \"filterOperationDescriptions\":\n        this._invalidate();\n        break;\n      case \"value\":\n        if (args.value !== args.previousValue) {\n          var disableInvalidateForValue = this._disableInvalidateForValue;\n          if (!disableInvalidateForValue) {\n            this._initModel();\n            this._invalidate();\n          }\n          this._disableInvalidateForValue = false;\n          this.executeAction(\"onValueChanged\", {\n            value: args.value,\n            previousValue: args.previousValue\n          });\n          this._disableInvalidateForValue = disableInvalidateForValue;\n        }\n        break;\n      default:\n        this.callBase(args);\n    }\n  },\n  getFilterExpression: function () {\n    var fields = this._getNormalizedFields();\n    var value = extend(true, [], this._model);\n    return _getFilterExpression(getNormalizedFilter(value), fields, this._customOperations, SOURCE);\n  },\n  _getNormalizedFields: function () {\n    return getNormalizedFields(this.option(\"fields\"));\n  },\n  _updateFilter: function () {\n    this._disableInvalidateForValue = true;\n    var value = extend(true, [], this._model);\n    var normalizedValue = getNormalizedFilter(value);\n    var oldValue = getNormalizedFilter(this._getModel(this.option(\"value\")));\n    if (JSON.stringify(oldValue) !== JSON.stringify(normalizedValue)) {\n      this.option(\"value\", normalizedValue);\n    }\n    this._disableInvalidateForValue = false;\n    this._fireContentReadyAction();\n  },\n  _init: function () {\n    this._initCustomOperations();\n    this._initModel();\n    this._initEditorFactory();\n    this._initActions();\n    this.callBase();\n  },\n  _initEditorFactory: function () {\n    this._editorFactory = new EditorFactory();\n  },\n  _initCustomOperations: function () {\n    this._customOperations = getMergedOperations(this.option(\"customOperations\"), this.option(\"filterOperationDescriptions.between\"), this);\n  },\n  _getDefaultGroupOperation: function () {\n    var _this$option$, _this$option;\n    return null !== (_this$option$ = null === (_this$option = this.option(\"groupOperations\")) || void 0 === _this$option ? void 0 : _this$option[0]) && void 0 !== _this$option$ ? _this$option$ : OPERATORS.and;\n  },\n  _getModel: function (value) {\n    return convertToInnerStructure(value, this._customOperations, this._getDefaultGroupOperation());\n  },\n  _initModel: function () {\n    this._model = this._getModel(this.option(\"value\"));\n  },\n  _initActions: function () {\n    var that = this;\n    that._actions = {};\n    ACTIONS.forEach(function (action) {\n      var actionConfig = extend({}, action.config);\n      that._actions[action.name] = that._createActionByOption(action.name, actionConfig);\n    });\n  },\n  executeAction: function (actionName, options) {\n    var action = this._actions[actionName];\n    return action && action(options);\n  },\n  _initMarkup: function () {\n    this.$element().addClass(FILTER_BUILDER_CLASS);\n    this.callBase();\n    this._createGroupElementByCriteria(this._model).appendTo(this.$element());\n  },\n  _createConditionElement: function (condition, parent) {\n    return $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CLASS).append(this._createConditionItem(condition, parent));\n  },\n  _createGroupElementByCriteria: function (criteria, parent) {\n    var groupLevel = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;\n    var $group = this._createGroupElement(criteria, parent, groupLevel);\n    var $groupContent = $group.find(\".\" + FILTER_BUILDER_GROUP_CONTENT_CLASS);\n    var groupCriteria = getGroupCriteria(criteria);\n    for (var i = 0; i < groupCriteria.length; i++) {\n      var innerCriteria = groupCriteria[i];\n      if (isGroup(innerCriteria)) {\n        this._createGroupElementByCriteria(innerCriteria, criteria, groupLevel + 1).appendTo($groupContent);\n      } else if (isCondition(innerCriteria)) {\n        this._createConditionElement(innerCriteria, criteria).appendTo($groupContent);\n      }\n    }\n    return $group;\n  },\n  _createGroupElement: function (criteria, parent, groupLevel) {\n    var $groupItem = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);\n    var $groupContent = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CONTENT_CLASS);\n    var $group = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CLASS).append($groupItem).append($groupContent);\n    if (null != parent) {\n      this._createRemoveButton(() => {\n        removeItem(parent, criteria);\n        $group.remove();\n        this._updateFilter();\n      }).appendTo($groupItem);\n    }\n    this._createGroupOperationButton(criteria).appendTo($groupItem);\n    this._createAddButton(() => {\n      var newGroup = createEmptyGroup(this._getDefaultGroupOperation());\n      addItem(newGroup, criteria);\n      this._createGroupElement(newGroup, criteria, groupLevel + 1).appendTo($groupContent);\n      this._updateFilter();\n    }, () => {\n      var field = this.option(\"fields\")[0];\n      var newCondition = createCondition(field, this._customOperations);\n      addItem(newCondition, criteria);\n      this._createConditionElement(newCondition, criteria).appendTo($groupContent);\n      this._updateFilter();\n    }, groupLevel).appendTo($groupItem);\n    return $group;\n  },\n  _createButton: function (caption) {\n    return $(\"<div>\").text(caption);\n  },\n  _createGroupOperationButton: function (criteria) {\n    var groupOperations = this._getGroupOperations(criteria);\n    var groupMenuItem = getGroupMenuItem(criteria, groupOperations);\n    var caption = groupMenuItem.text;\n    var $operationButton = groupOperations && groupOperations.length < 2 ? this._createButton(caption).addClass(DISABLED_STATE_CLASS) : this._createButtonWithMenu({\n      caption: caption,\n      menu: {\n        items: groupOperations,\n        displayExpr: \"text\",\n        keyExpr: \"value\",\n        onItemClick: e => {\n          if (groupMenuItem !== e.itemData) {\n            setGroupValue(criteria, e.itemData.value);\n            $operationButton.text(e.itemData.text);\n            groupMenuItem = e.itemData;\n            this._updateFilter();\n          }\n        },\n        onContentReady: function (e) {\n          e.component.selectItem(groupMenuItem);\n        },\n        cssClass: FILTER_BUILDER_GROUP_OPERATIONS_CLASS\n      }\n    });\n    return $operationButton.addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_GROUP_OPERATION_CLASS).attr(\"tabindex\", 0);\n  },\n  _createButtonWithMenu: function (options) {\n    var that = this;\n    var removeMenu = function () {\n      that.$element().find(\".\" + ACTIVE_CLASS).removeClass(ACTIVE_CLASS);\n      that.$element().find(\".dx-overlay .dx-treeview\").remove();\n      that.$element().find(\".dx-overlay\").remove();\n    };\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var position = rtlEnabled ? \"right\" : \"left\";\n    var $button = this._createButton(options.caption);\n    extend(options.menu, {\n      focusStateEnabled: true,\n      selectionMode: \"single\",\n      onItemClick: (handler = options.menu.onItemClick, function (e) {\n        handler(e);\n        if (\"dxclick\" === e.event.type) {\n          removeMenu();\n        }\n      }),\n      onHiding: function (e) {\n        $button.removeClass(ACTIVE_CLASS);\n      },\n      position: {\n        my: position + \" top\",\n        at: position + \" bottom\",\n        offset: \"0 1\",\n        of: $button,\n        collision: \"flip\"\n      },\n      animation: null,\n      onHidden: function () {\n        removeMenu();\n      },\n      cssClass: FILTER_BUILDER_OVERLAY_CLASS + \" \" + options.menu.cssClass,\n      rtlEnabled: rtlEnabled\n    });\n    var handler;\n    options.popup = {\n      onShown: function (info) {\n        var treeViewElement = $(info.component.content()).find(\".dx-treeview\");\n        var treeView = treeViewElement.dxTreeView(\"instance\");\n        eventsEngine.on(treeViewElement, \"keyup keydown\", function (e) {\n          var keyName = normalizeKeyName(e);\n          if (\"keydown\" === e.type && keyName === TAB_KEY || \"keyup\" === e.type && (keyName === ESCAPE_KEY || keyName === ENTER_KEY)) {\n            info.component.hide();\n            eventsEngine.trigger(options.menu.position.of, \"focus\");\n          }\n        });\n        treeView.focus();\n        treeView.option(\"focusedElement\", null);\n      }\n    };\n    this._subscribeOnClickAndEnterKey($button, function () {\n      removeMenu();\n      that._createPopupWithTreeView(options, that.$element());\n      $button.addClass(ACTIVE_CLASS);\n    });\n    return $button;\n  },\n  _hasValueButton: function (condition) {\n    var customOperation = getCustomOperation(this._customOperations, condition[1]);\n    return customOperation ? false !== customOperation.hasValue : null !== condition[2];\n  },\n  _createOperationButtonWithMenu: function (condition, field) {\n    var that = this;\n    var availableOperations = getAvailableOperations(field, this.option(\"filterOperationDescriptions\"), this._customOperations);\n    var currentOperation = getOperationFromAvailable(getOperationValue(condition), availableOperations);\n    var $operationButton = this._createButtonWithMenu({\n      caption: currentOperation.text,\n      menu: {\n        items: availableOperations,\n        displayExpr: \"text\",\n        onItemRendered: function (e) {\n          e.itemData.isCustom && $(e.itemElement).addClass(FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS);\n        },\n        onContentReady: function (e) {\n          e.component.selectItem(currentOperation);\n        },\n        onItemClick: e => {\n          if (currentOperation !== e.itemData) {\n            currentOperation = e.itemData;\n            updateConditionByOperation(condition, currentOperation.value, that._customOperations);\n            var $valueButton = $operationButton.siblings().filter(\".\" + FILTER_BUILDER_ITEM_VALUE_CLASS);\n            if (that._hasValueButton(condition)) {\n              if (0 !== $valueButton.length) {\n                $valueButton.remove();\n              }\n              that._createValueButton(condition, field).appendTo($operationButton.parent());\n            } else {\n              $valueButton.remove();\n            }\n            $operationButton.html(currentOperation.text);\n            this._updateFilter();\n          }\n        },\n        cssClass: FILTER_BUILDER_FILTER_OPERATIONS_CLASS\n      }\n    }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_OPERATION_CLASS).attr(\"tabindex\", 0);\n    return $operationButton;\n  },\n  _createOperationAndValueButtons: function (condition, field, $item) {\n    this._createOperationButtonWithMenu(condition, field).appendTo($item);\n    if (this._hasValueButton(condition)) {\n      this._createValueButton(condition, field).appendTo($item);\n    }\n  },\n  _createFieldButtonWithMenu: function (fields, condition, field) {\n    var that = this;\n    var allowHierarchicalFields = this.option(\"allowHierarchicalFields\");\n    var items = getItems(fields, allowHierarchicalFields);\n    var item = getField(field.name || field.dataField, items);\n    var getFullCaption = function (item, items) {\n      return allowHierarchicalFields ? getCaptionWithParents(item, items) : item.caption;\n    };\n    var $fieldButton = this._createButtonWithMenu({\n      caption: getFullCaption(item, items),\n      menu: {\n        items: items,\n        dataStructure: \"plain\",\n        keyExpr: \"id\",\n        parentId: \"parentId\",\n        displayExpr: \"caption\",\n        onItemClick: e => {\n          if (item !== e.itemData) {\n            item = e.itemData;\n            condition[0] = item.name || item.dataField;\n            condition[2] = \"object\" === item.dataType ? null : \"\";\n            updateConditionByOperation(condition, getDefaultOperation(item), that._customOperations);\n            $fieldButton.siblings().filter(\".\" + FILTER_BUILDER_ITEM_TEXT_CLASS).remove();\n            that._createOperationAndValueButtons(condition, item, $fieldButton.parent());\n            var caption = getFullCaption(item, e.component.option(\"items\"));\n            $fieldButton.html(caption);\n            this._updateFilter();\n          }\n        },\n        onContentReady: function (e) {\n          e.component.selectItem(item);\n        },\n        cssClass: FILTER_BUILDER_FIELDS_CLASS\n      }\n    }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_FIELD_CLASS).attr(\"tabindex\", 0);\n    return $fieldButton;\n  },\n  _createConditionItem: function (condition, parent) {\n    var $item = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);\n    var fields = this._getNormalizedFields();\n    var field = getField(condition[0], fields);\n    this._createRemoveButton(() => {\n      removeItem(parent, condition);\n      var isSingleChild = 1 === $item.parent().children().length;\n      if (isSingleChild) {\n        $item.parent().remove();\n      } else {\n        $item.remove();\n      }\n      this._updateFilter();\n    }).appendTo($item);\n    this._createFieldButtonWithMenu(fields, condition, field).appendTo($item);\n    this._createOperationAndValueButtons(condition, field, $item);\n    return $item;\n  },\n  _getGroupOperations: function (criteria) {\n    var groupOperations = this.option(\"groupOperations\");\n    var groupOperationDescriptions = this.option(\"groupOperationDescriptions\");\n    if (!groupOperations || !groupOperations.length) {\n      groupOperations = [getGroupValue(criteria).replace(\"!\", \"not\")];\n    }\n    return groupOperations.map(operation => ({\n      text: groupOperationDescriptions[operation],\n      value: OPERATORS[operation]\n    }));\n  },\n  _createRemoveButton: function (handler) {\n    var $removeButton = $(\"<div>\").addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_REMOVE_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr(\"tabindex\", 0);\n    this._subscribeOnClickAndEnterKey($removeButton, handler);\n    return $removeButton;\n  },\n  _createAddButton: function (addGroupHandler, addConditionHandler, groupLevel) {\n    var $button;\n    var maxGroupLevel = this.option(\"maxGroupLevel\");\n    if (isDefined(maxGroupLevel) && groupLevel >= maxGroupLevel) {\n      $button = this._createButton();\n      this._subscribeOnClickAndEnterKey($button, addConditionHandler);\n    } else {\n      $button = this._createButtonWithMenu({\n        menu: {\n          items: [{\n            caption: messageLocalization.format(\"dxFilterBuilder-addCondition\"),\n            click: addConditionHandler\n          }, {\n            caption: messageLocalization.format(\"dxFilterBuilder-addGroup\"),\n            click: addGroupHandler\n          }],\n          displayExpr: \"caption\",\n          onItemClick: function (e) {\n            e.itemData.click();\n          },\n          cssClass: FILTER_BUILDER_ADD_CONDITION_CLASS\n        }\n      });\n    }\n    return $button.addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_ADD_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr(\"tabindex\", 0);\n  },\n  _createValueText: function (item, field, $container) {\n    var that = this;\n    var $text = $(\"<div>\").html(\"&nbsp;\").addClass(FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS).attr(\"tabindex\", 0).appendTo($container);\n    var value = item[2];\n    var customOperation = getCustomOperation(that._customOperations, item[1]);\n    if (!customOperation && field.lookup) {\n      getCurrentLookupValueText(field, value, function (result) {\n        renderValueText($text, result);\n      });\n    } else {\n      when(getCurrentValueText(field, value, customOperation)).done(result => {\n        renderValueText($text, result, customOperation);\n      });\n    }\n    that._subscribeOnClickAndEnterKey($text, function (e) {\n      if (\"keyup\" === e.type) {\n        e.stopPropagation();\n      }\n      that._createValueEditorWithEvents(item, field, $container);\n    });\n    return $text;\n  },\n  _updateConditionValue: function (item, value, callback) {\n    var areValuesDifferent = item[2] !== value;\n    if (areValuesDifferent) {\n      item[2] = value;\n    }\n    callback();\n    this._updateFilter();\n  },\n  _addDocumentKeyUp: function ($editor, handler) {\n    var isComposing = false;\n    var hasCompositionJustEnded = false;\n    var document = domAdapter.getDocument();\n    var documentKeyUpHandler = e => {\n      if (isComposing || hasCompositionJustEnded) {\n        hasCompositionJustEnded = false;\n        return;\n      }\n      handler(e);\n    };\n    eventsEngine.on(document, \"keyup\", documentKeyUpHandler);\n    var input = $editor.find(\"input\");\n    eventsEngine.on(input, \"compositionstart\", () => {\n      isComposing = true;\n    });\n    eventsEngine.on(input, \"compositionend\", () => {\n      isComposing = false;\n      hasCompositionJustEnded = true;\n    });\n    eventsEngine.on(input, \"keydown\", event => {\n      if (229 !== event.which) {\n        hasCompositionJustEnded = false;\n      }\n    });\n    this._documentKeyUpHandler = documentKeyUpHandler;\n  },\n  _addDocumentClick: function ($editor, closeEditorFunc) {\n    var document = domAdapter.getDocument();\n    var documentClickHandler = e => {\n      if (!this._isFocusOnEditorParts($editor, e.target)) {\n        eventsEngine.trigger($editor.find(\"input\"), \"change\");\n        closeEditorFunc();\n      }\n    };\n    eventsEngine.on(document, \"dxpointerdown\", documentClickHandler);\n    this._documentClickHandler = documentClickHandler;\n  },\n  _isFocusOnEditorParts: function ($editor, target) {\n    var activeElement = target || domAdapter.getActiveElement();\n    return $(activeElement).closest($editor.children()).length || $(activeElement).closest(\".dx-dropdowneditor-overlay\").length;\n  },\n  _removeEvents: function () {\n    var document = domAdapter.getDocument();\n    isDefined(this._documentKeyUpHandler) && eventsEngine.off(document, \"keyup\", this._documentKeyUpHandler);\n    isDefined(this._documentClickHandler) && eventsEngine.off(document, \"dxpointerdown\", this._documentClickHandler);\n  },\n  _dispose: function () {\n    this._removeEvents();\n    this.callBase();\n  },\n  _createValueEditorWithEvents: function (item, field, $container) {\n    var value = item[2];\n    var createValueText = () => {\n      $container.empty();\n      this._removeEvents();\n      return this._createValueText(item, field, $container);\n    };\n    var closeEditor = () => {\n      this._updateConditionValue(item, value, function () {\n        createValueText();\n      });\n    };\n    var options = {\n      value: \"\" === value ? null : value,\n      filterOperation: getOperationValue(item),\n      setValue: function (data) {\n        value = null === data ? \"\" : data;\n      },\n      closeEditor: closeEditor,\n      text: $container.text()\n    };\n    $container.empty();\n    var $editor = this._createValueEditor($container, field, options);\n    eventsEngine.trigger($editor.find(\"input\").not(\":hidden\").eq(0), \"focus\");\n    this._removeEvents();\n    this._addDocumentClick($editor, closeEditor);\n    this._addDocumentKeyUp($editor, e => {\n      var keyName = normalizeKeyName(e);\n      if (keyName === TAB_KEY) {\n        if (this._isFocusOnEditorParts($editor)) {\n          return;\n        }\n        this._updateConditionValue(item, value, function () {\n          createValueText();\n          if (e.shiftKey) {\n            eventsEngine.trigger($container.prev(), \"focus\");\n          }\n        });\n      }\n      if (keyName === ESCAPE_KEY) {\n        eventsEngine.trigger(createValueText(), \"focus\");\n      }\n      if (keyName === ENTER_KEY) {\n        this._updateConditionValue(item, value, function () {\n          eventsEngine.trigger(createValueText(), \"focus\");\n        });\n      }\n    });\n    this._fireContentReadyAction();\n  },\n  _createValueButton: function (item, field) {\n    var $valueButton = $(\"<div>\").addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_VALUE_CLASS);\n    this._createValueText(item, field, $valueButton);\n    return $valueButton;\n  },\n  _createValueEditor: function ($container, field, options) {\n    var $editor = $(\"<div>\").attr(\"tabindex\", 0).appendTo($container);\n    var customOperation = getCustomOperation(this._customOperations, options.filterOperation);\n    var editorTemplate = customOperation && customOperation.editorTemplate ? customOperation.editorTemplate : field.editorTemplate;\n    if (editorTemplate) {\n      var template = this._getTemplate(editorTemplate);\n      template.render({\n        model: extend({\n          field: field\n        }, options),\n        container: $editor\n      });\n    } else {\n      this._editorFactory.createEditor.call(this, $editor, extend({}, field, options, {\n        parentType: SOURCE\n      }));\n    }\n    return $editor;\n  },\n  _createPopupWithTreeView: function (options, $container) {\n    var that = this;\n    var $popup = $(\"<div>\").addClass(options.menu.cssClass).appendTo($container);\n    this._createComponent($popup, Popup, {\n      onHiding: options.menu.onHiding,\n      onHidden: options.menu.onHidden,\n      rtlEnabled: options.menu.rtlEnabled,\n      position: options.menu.position,\n      animation: options.menu.animation,\n      contentTemplate: function (contentElement) {\n        var $menuContainer = $(\"<div>\").appendTo(contentElement);\n        that._createComponent($menuContainer, TreeView, options.menu);\n        this.repaint();\n      },\n      _ignoreFunctionValueDeprecation: true,\n      maxHeight: function () {\n        return getElementMaxHeightByWindow(options.menu.position.of);\n      },\n      visible: true,\n      focusStateEnabled: false,\n      hideOnParentScroll: this.option(\"closePopupOnTargetScroll\"),\n      hideOnOutsideClick: true,\n      onShown: options.popup.onShown,\n      shading: false,\n      width: \"auto\",\n      height: \"auto\",\n      showTitle: false,\n      _wrapperClassExternal: options.menu.cssClass\n    });\n  },\n  _subscribeOnClickAndEnterKey: function ($button, handler) {\n    eventsEngine.on($button, \"dxclick\", handler);\n    eventsEngine.on($button, \"keyup\", function (e) {\n      if (normalizeKeyName(e) === ENTER_KEY) {\n        handler(e);\n      }\n    });\n  }\n});\nregisterComponent(\"dxFilterBuilder\", FilterBuilder);\nexport default FilterBuilder;","map":{"version":3,"names":["$","domAdapter","Class","eventsEngine","Widget","registerComponent","extend","messageLocalization","when","isDefined","TreeView","Popup","getElementMaxHeightByWindow","EditorFactoryMixin","normalizeKeyName","renderValueText","getFilterExpression","_getFilterExpression","getNormalizedFilter","getNormalizedFields","getMergedOperations","convertToInnerStructure","getGroupCriteria","isGroup","isCondition","removeItem","createEmptyGroup","addItem","createCondition","getGroupMenuItem","setGroupValue","getCustomOperation","getAvailableOperations","getOperationFromAvailable","getOperationValue","updateConditionByOperation","getItems","getField","getCaptionWithParents","getDefaultOperation","getGroupValue","getCurrentLookupValueText","getCurrentValueText","FILTER_BUILDER_CLASS","FILTER_BUILDER_GROUP_CLASS","FILTER_BUILDER_GROUP_ITEM_CLASS","FILTER_BUILDER_GROUP_CONTENT_CLASS","FILTER_BUILDER_GROUP_OPERATIONS_CLASS","FILTER_BUILDER_GROUP_OPERATION_CLASS","FILTER_BUILDER_ACTION_CLASS","FILTER_BUILDER_IMAGE_CLASS","FILTER_BUILDER_IMAGE_ADD_CLASS","FILTER_BUILDER_IMAGE_REMOVE_CLASS","FILTER_BUILDER_ITEM_TEXT_CLASS","FILTER_BUILDER_ITEM_FIELD_CLASS","FILTER_BUILDER_ITEM_OPERATION_CLASS","FILTER_BUILDER_ITEM_VALUE_CLASS","FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS","FILTER_BUILDER_OVERLAY_CLASS","FILTER_BUILDER_FILTER_OPERATIONS_CLASS","FILTER_BUILDER_FIELDS_CLASS","FILTER_BUILDER_ADD_CONDITION_CLASS","ACTIVE_CLASS","FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS","SOURCE","DISABLED_STATE_CLASS","TAB_KEY","ENTER_KEY","ESCAPE_KEY","ACTIONS","name","config","excludeValidators","category","OPERATORS","and","or","notAnd","notOr","EditorFactory","inherit","FilterBuilder","_getDefaultOptions","callBase","onEditorPreparing","onEditorPrepared","onValueChanged","fields","groupOperations","maxGroupLevel","value","allowHierarchicalFields","groupOperationDescriptions","format","customOperations","closePopupOnTargetScroll","filterOperationDescriptions","between","equal","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","startsWith","contains","notContains","endsWith","isBlank","isNotBlank","_optionChanged","args","_initActions","_initCustomOperations","_invalidate","previousValue","disableInvalidateForValue","_disableInvalidateForValue","_initModel","executeAction","_getNormalizedFields","_model","_customOperations","option","_updateFilter","normalizedValue","oldValue","_getModel","JSON","stringify","_fireContentReadyAction","_init","_initEditorFactory","_editorFactory","_getDefaultGroupOperation","_this$option$","_this$option","that","_actions","forEach","action","actionConfig","_createActionByOption","actionName","options","_initMarkup","$element","addClass","_createGroupElementByCriteria","appendTo","_createConditionElement","condition","parent","append","_createConditionItem","criteria","groupLevel","arguments","length","$group","_createGroupElement","$groupContent","find","groupCriteria","i","innerCriteria","$groupItem","_createRemoveButton","remove","_createGroupOperationButton","_createAddButton","newGroup","field","newCondition","_createButton","caption","text","_getGroupOperations","groupMenuItem","$operationButton","_createButtonWithMenu","menu","items","displayExpr","keyExpr","onItemClick","e","itemData","onContentReady","component","selectItem","cssClass","attr","removeMenu","removeClass","rtlEnabled","position","$button","focusStateEnabled","selectionMode","handler","event","type","onHiding","my","at","offset","of","collision","animation","onHidden","popup","onShown","info","treeViewElement","content","treeView","dxTreeView","on","keyName","hide","trigger","focus","_subscribeOnClickAndEnterKey","_createPopupWithTreeView","_hasValueButton","customOperation","hasValue","_createOperationButtonWithMenu","availableOperations","currentOperation","onItemRendered","isCustom","itemElement","$valueButton","siblings","filter","_createValueButton","html","_createOperationAndValueButtons","$item","_createFieldButtonWithMenu","item","dataField","getFullCaption","$fieldButton","dataStructure","parentId","dataType","isSingleChild","children","replace","map","operation","$removeButton","addGroupHandler","addConditionHandler","click","_createValueText","$container","$text","lookup","result","done","stopPropagation","_createValueEditorWithEvents","_updateConditionValue","callback","areValuesDifferent","_addDocumentKeyUp","$editor","isComposing","hasCompositionJustEnded","document","getDocument","documentKeyUpHandler","input","which","_documentKeyUpHandler","_addDocumentClick","closeEditorFunc","documentClickHandler","_isFocusOnEditorParts","target","_documentClickHandler","activeElement","getActiveElement","closest","_removeEvents","off","_dispose","createValueText","empty","closeEditor","filterOperation","setValue","data","_createValueEditor","not","eq","shiftKey","prev","editorTemplate","template","_getTemplate","render","model","container","createEditor","call","parentType","$popup","_createComponent","contentTemplate","contentElement","$menuContainer","repaint","_ignoreFunctionValueDeprecation","maxHeight","visible","hideOnParentScroll","hideOnOutsideClick","shading","width","height","showTitle","_wrapperClassExternal"],"sources":["C:/Users/ninad/OneDrive/Radna povr≈°ina/zavrsni/client/node_modules/devextreme/esm/ui/filter_builder/filter_builder.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/filter_builder/filter_builder.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport Class from \"../../core/class\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport TreeView from \"../tree_view\";\r\nimport Popup from \"../popup/ui.popup\";\r\nimport {\r\n    getElementMaxHeightByWindow\r\n} from \"../overlay/utils\";\r\nimport EditorFactoryMixin from \"../shared/ui.editor_factory_mixin\";\r\nimport {\r\n    normalizeKeyName\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    renderValueText,\r\n    getFilterExpression as _getFilterExpression,\r\n    getNormalizedFilter,\r\n    getNormalizedFields,\r\n    getMergedOperations,\r\n    convertToInnerStructure,\r\n    getGroupCriteria,\r\n    isGroup,\r\n    isCondition,\r\n    removeItem,\r\n    createEmptyGroup,\r\n    addItem,\r\n    createCondition,\r\n    getGroupMenuItem,\r\n    setGroupValue,\r\n    getCustomOperation,\r\n    getAvailableOperations,\r\n    getOperationFromAvailable,\r\n    getOperationValue,\r\n    updateConditionByOperation,\r\n    getItems,\r\n    getField,\r\n    getCaptionWithParents,\r\n    getDefaultOperation,\r\n    getGroupValue,\r\n    getCurrentLookupValueText,\r\n    getCurrentValueText\r\n} from \"./utils\";\r\nvar FILTER_BUILDER_CLASS = \"dx-filterbuilder\";\r\nvar FILTER_BUILDER_GROUP_CLASS = FILTER_BUILDER_CLASS + \"-group\";\r\nvar FILTER_BUILDER_GROUP_ITEM_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-item\";\r\nvar FILTER_BUILDER_GROUP_CONTENT_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-content\";\r\nvar FILTER_BUILDER_GROUP_OPERATIONS_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-operations\";\r\nvar FILTER_BUILDER_GROUP_OPERATION_CLASS = FILTER_BUILDER_GROUP_CLASS + \"-operation\";\r\nvar FILTER_BUILDER_ACTION_CLASS = FILTER_BUILDER_CLASS + \"-action\";\r\nvar FILTER_BUILDER_IMAGE_CLASS = FILTER_BUILDER_ACTION_CLASS + \"-icon\";\r\nvar FILTER_BUILDER_IMAGE_ADD_CLASS = \"dx-icon-plus\";\r\nvar FILTER_BUILDER_IMAGE_REMOVE_CLASS = \"dx-icon-remove\";\r\nvar FILTER_BUILDER_ITEM_TEXT_CLASS = FILTER_BUILDER_CLASS + \"-text\";\r\nvar FILTER_BUILDER_ITEM_FIELD_CLASS = FILTER_BUILDER_CLASS + \"-item-field\";\r\nvar FILTER_BUILDER_ITEM_OPERATION_CLASS = FILTER_BUILDER_CLASS + \"-item-operation\";\r\nvar FILTER_BUILDER_ITEM_VALUE_CLASS = FILTER_BUILDER_CLASS + \"-item-value\";\r\nvar FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS = FILTER_BUILDER_CLASS + \"-item-value-text\";\r\nvar FILTER_BUILDER_OVERLAY_CLASS = FILTER_BUILDER_CLASS + \"-overlay\";\r\nvar FILTER_BUILDER_FILTER_OPERATIONS_CLASS = FILTER_BUILDER_CLASS + \"-operations\";\r\nvar FILTER_BUILDER_FIELDS_CLASS = FILTER_BUILDER_CLASS + \"-fields\";\r\nvar FILTER_BUILDER_ADD_CONDITION_CLASS = FILTER_BUILDER_CLASS + \"-add-condition\";\r\nvar ACTIVE_CLASS = \"dx-state-active\";\r\nvar FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS = FILTER_BUILDER_CLASS + \"-menu-custom-operation\";\r\nvar SOURCE = \"filterBuilder\";\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar TAB_KEY = \"tab\";\r\nvar ENTER_KEY = \"enter\";\r\nvar ESCAPE_KEY = \"escape\";\r\nvar ACTIONS = [{\r\n    name: \"onEditorPreparing\",\r\n    config: {\r\n        excludeValidators: [\"disabled\", \"readOnly\"],\r\n        category: \"rendering\"\r\n    }\r\n}, {\r\n    name: \"onEditorPrepared\",\r\n    config: {\r\n        excludeValidators: [\"disabled\", \"readOnly\"],\r\n        category: \"rendering\"\r\n    }\r\n}, {\r\n    name: \"onValueChanged\",\r\n    config: {\r\n        excludeValidators: [\"disabled\", \"readOnly\"]\r\n    }\r\n}];\r\nvar OPERATORS = {\r\n    and: \"and\",\r\n    or: \"or\",\r\n    notAnd: \"!and\",\r\n    notOr: \"!or\"\r\n};\r\nvar EditorFactory = Class.inherit(EditorFactoryMixin);\r\nvar FilterBuilder = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            onEditorPreparing: null,\r\n            onEditorPrepared: null,\r\n            onValueChanged: null,\r\n            fields: [],\r\n            groupOperations: [\"and\", \"or\", \"notAnd\", \"notOr\"],\r\n            maxGroupLevel: void 0,\r\n            value: null,\r\n            allowHierarchicalFields: false,\r\n            groupOperationDescriptions: {\r\n                and: messageLocalization.format(\"dxFilterBuilder-and\"),\r\n                or: messageLocalization.format(\"dxFilterBuilder-or\"),\r\n                notAnd: messageLocalization.format(\"dxFilterBuilder-notAnd\"),\r\n                notOr: messageLocalization.format(\"dxFilterBuilder-notOr\")\r\n            },\r\n            customOperations: [],\r\n            closePopupOnTargetScroll: true,\r\n            filterOperationDescriptions: {\r\n                between: messageLocalization.format(\"dxFilterBuilder-filterOperationBetween\"),\r\n                equal: messageLocalization.format(\"dxFilterBuilder-filterOperationEquals\"),\r\n                notEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationNotEquals\"),\r\n                lessThan: messageLocalization.format(\"dxFilterBuilder-filterOperationLess\"),\r\n                lessThanOrEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationLessOrEquals\"),\r\n                greaterThan: messageLocalization.format(\"dxFilterBuilder-filterOperationGreater\"),\r\n                greaterThanOrEqual: messageLocalization.format(\"dxFilterBuilder-filterOperationGreaterOrEquals\"),\r\n                startsWith: messageLocalization.format(\"dxFilterBuilder-filterOperationStartsWith\"),\r\n                contains: messageLocalization.format(\"dxFilterBuilder-filterOperationContains\"),\r\n                notContains: messageLocalization.format(\"dxFilterBuilder-filterOperationNotContains\"),\r\n                endsWith: messageLocalization.format(\"dxFilterBuilder-filterOperationEndsWith\"),\r\n                isBlank: messageLocalization.format(\"dxFilterBuilder-filterOperationIsBlank\"),\r\n                isNotBlank: messageLocalization.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"closePopupOnTargetScroll\":\r\n                break;\r\n            case \"onEditorPreparing\":\r\n            case \"onEditorPrepared\":\r\n            case \"onValueChanged\":\r\n                this._initActions();\r\n                break;\r\n            case \"customOperations\":\r\n                this._initCustomOperations();\r\n                this._invalidate();\r\n                break;\r\n            case \"fields\":\r\n            case \"maxGroupLevel\":\r\n            case \"groupOperations\":\r\n            case \"allowHierarchicalFields\":\r\n            case \"groupOperationDescriptions\":\r\n            case \"filterOperationDescriptions\":\r\n                this._invalidate();\r\n                break;\r\n            case \"value\":\r\n                if (args.value !== args.previousValue) {\r\n                    var disableInvalidateForValue = this._disableInvalidateForValue;\r\n                    if (!disableInvalidateForValue) {\r\n                        this._initModel();\r\n                        this._invalidate()\r\n                    }\r\n                    this._disableInvalidateForValue = false;\r\n                    this.executeAction(\"onValueChanged\", {\r\n                        value: args.value,\r\n                        previousValue: args.previousValue\r\n                    });\r\n                    this._disableInvalidateForValue = disableInvalidateForValue\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    getFilterExpression: function() {\r\n        var fields = this._getNormalizedFields();\r\n        var value = extend(true, [], this._model);\r\n        return _getFilterExpression(getNormalizedFilter(value), fields, this._customOperations, SOURCE)\r\n    },\r\n    _getNormalizedFields: function() {\r\n        return getNormalizedFields(this.option(\"fields\"))\r\n    },\r\n    _updateFilter: function() {\r\n        this._disableInvalidateForValue = true;\r\n        var value = extend(true, [], this._model);\r\n        var normalizedValue = getNormalizedFilter(value);\r\n        var oldValue = getNormalizedFilter(this._getModel(this.option(\"value\")));\r\n        if (JSON.stringify(oldValue) !== JSON.stringify(normalizedValue)) {\r\n            this.option(\"value\", normalizedValue)\r\n        }\r\n        this._disableInvalidateForValue = false;\r\n        this._fireContentReadyAction()\r\n    },\r\n    _init: function() {\r\n        this._initCustomOperations();\r\n        this._initModel();\r\n        this._initEditorFactory();\r\n        this._initActions();\r\n        this.callBase()\r\n    },\r\n    _initEditorFactory: function() {\r\n        this._editorFactory = new EditorFactory\r\n    },\r\n    _initCustomOperations: function() {\r\n        this._customOperations = getMergedOperations(this.option(\"customOperations\"), this.option(\"filterOperationDescriptions.between\"), this)\r\n    },\r\n    _getDefaultGroupOperation: function() {\r\n        var _this$option$, _this$option;\r\n        return null !== (_this$option$ = null === (_this$option = this.option(\"groupOperations\")) || void 0 === _this$option ? void 0 : _this$option[0]) && void 0 !== _this$option$ ? _this$option$ : OPERATORS.and\r\n    },\r\n    _getModel: function(value) {\r\n        return convertToInnerStructure(value, this._customOperations, this._getDefaultGroupOperation())\r\n    },\r\n    _initModel: function() {\r\n        this._model = this._getModel(this.option(\"value\"))\r\n    },\r\n    _initActions: function() {\r\n        var that = this;\r\n        that._actions = {};\r\n        ACTIONS.forEach((function(action) {\r\n            var actionConfig = extend({}, action.config);\r\n            that._actions[action.name] = that._createActionByOption(action.name, actionConfig)\r\n        }))\r\n    },\r\n    executeAction: function(actionName, options) {\r\n        var action = this._actions[actionName];\r\n        return action && action(options)\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(FILTER_BUILDER_CLASS);\r\n        this.callBase();\r\n        this._createGroupElementByCriteria(this._model).appendTo(this.$element())\r\n    },\r\n    _createConditionElement: function(condition, parent) {\r\n        return $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CLASS).append(this._createConditionItem(condition, parent))\r\n    },\r\n    _createGroupElementByCriteria: function(criteria, parent) {\r\n        var groupLevel = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;\r\n        var $group = this._createGroupElement(criteria, parent, groupLevel);\r\n        var $groupContent = $group.find(\".\" + FILTER_BUILDER_GROUP_CONTENT_CLASS);\r\n        var groupCriteria = getGroupCriteria(criteria);\r\n        for (var i = 0; i < groupCriteria.length; i++) {\r\n            var innerCriteria = groupCriteria[i];\r\n            if (isGroup(innerCriteria)) {\r\n                this._createGroupElementByCriteria(innerCriteria, criteria, groupLevel + 1).appendTo($groupContent)\r\n            } else if (isCondition(innerCriteria)) {\r\n                this._createConditionElement(innerCriteria, criteria).appendTo($groupContent)\r\n            }\r\n        }\r\n        return $group\r\n    },\r\n    _createGroupElement: function(criteria, parent, groupLevel) {\r\n        var $groupItem = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);\r\n        var $groupContent = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CONTENT_CLASS);\r\n        var $group = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_CLASS).append($groupItem).append($groupContent);\r\n        if (null != parent) {\r\n            this._createRemoveButton(() => {\r\n                removeItem(parent, criteria);\r\n                $group.remove();\r\n                this._updateFilter()\r\n            }).appendTo($groupItem)\r\n        }\r\n        this._createGroupOperationButton(criteria).appendTo($groupItem);\r\n        this._createAddButton(() => {\r\n            var newGroup = createEmptyGroup(this._getDefaultGroupOperation());\r\n            addItem(newGroup, criteria);\r\n            this._createGroupElement(newGroup, criteria, groupLevel + 1).appendTo($groupContent);\r\n            this._updateFilter()\r\n        }, () => {\r\n            var field = this.option(\"fields\")[0];\r\n            var newCondition = createCondition(field, this._customOperations);\r\n            addItem(newCondition, criteria);\r\n            this._createConditionElement(newCondition, criteria).appendTo($groupContent);\r\n            this._updateFilter()\r\n        }, groupLevel).appendTo($groupItem);\r\n        return $group\r\n    },\r\n    _createButton: function(caption) {\r\n        return $(\"<div>\").text(caption)\r\n    },\r\n    _createGroupOperationButton: function(criteria) {\r\n        var groupOperations = this._getGroupOperations(criteria);\r\n        var groupMenuItem = getGroupMenuItem(criteria, groupOperations);\r\n        var caption = groupMenuItem.text;\r\n        var $operationButton = groupOperations && groupOperations.length < 2 ? this._createButton(caption).addClass(DISABLED_STATE_CLASS) : this._createButtonWithMenu({\r\n            caption: caption,\r\n            menu: {\r\n                items: groupOperations,\r\n                displayExpr: \"text\",\r\n                keyExpr: \"value\",\r\n                onItemClick: e => {\r\n                    if (groupMenuItem !== e.itemData) {\r\n                        setGroupValue(criteria, e.itemData.value);\r\n                        $operationButton.text(e.itemData.text);\r\n                        groupMenuItem = e.itemData;\r\n                        this._updateFilter()\r\n                    }\r\n                },\r\n                onContentReady: function(e) {\r\n                    e.component.selectItem(groupMenuItem)\r\n                },\r\n                cssClass: FILTER_BUILDER_GROUP_OPERATIONS_CLASS\r\n            }\r\n        });\r\n        return $operationButton.addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_GROUP_OPERATION_CLASS).attr(\"tabindex\", 0)\r\n    },\r\n    _createButtonWithMenu: function(options) {\r\n        var that = this;\r\n        var removeMenu = function() {\r\n            that.$element().find(\".\" + ACTIVE_CLASS).removeClass(ACTIVE_CLASS);\r\n            that.$element().find(\".dx-overlay .dx-treeview\").remove();\r\n            that.$element().find(\".dx-overlay\").remove()\r\n        };\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var position = rtlEnabled ? \"right\" : \"left\";\r\n        var $button = this._createButton(options.caption);\r\n        extend(options.menu, {\r\n            focusStateEnabled: true,\r\n            selectionMode: \"single\",\r\n            onItemClick: (handler = options.menu.onItemClick, function(e) {\r\n                handler(e);\r\n                if (\"dxclick\" === e.event.type) {\r\n                    removeMenu()\r\n                }\r\n            }),\r\n            onHiding: function(e) {\r\n                $button.removeClass(ACTIVE_CLASS)\r\n            },\r\n            position: {\r\n                my: position + \" top\",\r\n                at: position + \" bottom\",\r\n                offset: \"0 1\",\r\n                of: $button,\r\n                collision: \"flip\"\r\n            },\r\n            animation: null,\r\n            onHidden: function() {\r\n                removeMenu()\r\n            },\r\n            cssClass: FILTER_BUILDER_OVERLAY_CLASS + \" \" + options.menu.cssClass,\r\n            rtlEnabled: rtlEnabled\r\n        });\r\n        var handler;\r\n        options.popup = {\r\n            onShown: function(info) {\r\n                var treeViewElement = $(info.component.content()).find(\".dx-treeview\");\r\n                var treeView = treeViewElement.dxTreeView(\"instance\");\r\n                eventsEngine.on(treeViewElement, \"keyup keydown\", (function(e) {\r\n                    var keyName = normalizeKeyName(e);\r\n                    if (\"keydown\" === e.type && keyName === TAB_KEY || \"keyup\" === e.type && (keyName === ESCAPE_KEY || keyName === ENTER_KEY)) {\r\n                        info.component.hide();\r\n                        eventsEngine.trigger(options.menu.position.of, \"focus\")\r\n                    }\r\n                }));\r\n                treeView.focus();\r\n                treeView.option(\"focusedElement\", null)\r\n            }\r\n        };\r\n        this._subscribeOnClickAndEnterKey($button, (function() {\r\n            removeMenu();\r\n            that._createPopupWithTreeView(options, that.$element());\r\n            $button.addClass(ACTIVE_CLASS)\r\n        }));\r\n        return $button\r\n    },\r\n    _hasValueButton: function(condition) {\r\n        var customOperation = getCustomOperation(this._customOperations, condition[1]);\r\n        return customOperation ? false !== customOperation.hasValue : null !== condition[2]\r\n    },\r\n    _createOperationButtonWithMenu: function(condition, field) {\r\n        var that = this;\r\n        var availableOperations = getAvailableOperations(field, this.option(\"filterOperationDescriptions\"), this._customOperations);\r\n        var currentOperation = getOperationFromAvailable(getOperationValue(condition), availableOperations);\r\n        var $operationButton = this._createButtonWithMenu({\r\n            caption: currentOperation.text,\r\n            menu: {\r\n                items: availableOperations,\r\n                displayExpr: \"text\",\r\n                onItemRendered: function(e) {\r\n                    e.itemData.isCustom && $(e.itemElement).addClass(FILTER_BUILDER_MENU_CUSTOM_OPERATION_CLASS)\r\n                },\r\n                onContentReady: function(e) {\r\n                    e.component.selectItem(currentOperation)\r\n                },\r\n                onItemClick: e => {\r\n                    if (currentOperation !== e.itemData) {\r\n                        currentOperation = e.itemData;\r\n                        updateConditionByOperation(condition, currentOperation.value, that._customOperations);\r\n                        var $valueButton = $operationButton.siblings().filter(\".\" + FILTER_BUILDER_ITEM_VALUE_CLASS);\r\n                        if (that._hasValueButton(condition)) {\r\n                            if (0 !== $valueButton.length) {\r\n                                $valueButton.remove()\r\n                            }\r\n                            that._createValueButton(condition, field).appendTo($operationButton.parent())\r\n                        } else {\r\n                            $valueButton.remove()\r\n                        }\r\n                        $operationButton.html(currentOperation.text);\r\n                        this._updateFilter()\r\n                    }\r\n                },\r\n                cssClass: FILTER_BUILDER_FILTER_OPERATIONS_CLASS\r\n            }\r\n        }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_OPERATION_CLASS).attr(\"tabindex\", 0);\r\n        return $operationButton\r\n    },\r\n    _createOperationAndValueButtons: function(condition, field, $item) {\r\n        this._createOperationButtonWithMenu(condition, field).appendTo($item);\r\n        if (this._hasValueButton(condition)) {\r\n            this._createValueButton(condition, field).appendTo($item)\r\n        }\r\n    },\r\n    _createFieldButtonWithMenu: function(fields, condition, field) {\r\n        var that = this;\r\n        var allowHierarchicalFields = this.option(\"allowHierarchicalFields\");\r\n        var items = getItems(fields, allowHierarchicalFields);\r\n        var item = getField(field.name || field.dataField, items);\r\n        var getFullCaption = function(item, items) {\r\n            return allowHierarchicalFields ? getCaptionWithParents(item, items) : item.caption\r\n        };\r\n        var $fieldButton = this._createButtonWithMenu({\r\n            caption: getFullCaption(item, items),\r\n            menu: {\r\n                items: items,\r\n                dataStructure: \"plain\",\r\n                keyExpr: \"id\",\r\n                parentId: \"parentId\",\r\n                displayExpr: \"caption\",\r\n                onItemClick: e => {\r\n                    if (item !== e.itemData) {\r\n                        item = e.itemData;\r\n                        condition[0] = item.name || item.dataField;\r\n                        condition[2] = \"object\" === item.dataType ? null : \"\";\r\n                        updateConditionByOperation(condition, getDefaultOperation(item), that._customOperations);\r\n                        $fieldButton.siblings().filter(\".\" + FILTER_BUILDER_ITEM_TEXT_CLASS).remove();\r\n                        that._createOperationAndValueButtons(condition, item, $fieldButton.parent());\r\n                        var caption = getFullCaption(item, e.component.option(\"items\"));\r\n                        $fieldButton.html(caption);\r\n                        this._updateFilter()\r\n                    }\r\n                },\r\n                onContentReady: function(e) {\r\n                    e.component.selectItem(item)\r\n                },\r\n                cssClass: FILTER_BUILDER_FIELDS_CLASS\r\n            }\r\n        }).addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_FIELD_CLASS).attr(\"tabindex\", 0);\r\n        return $fieldButton\r\n    },\r\n    _createConditionItem: function(condition, parent) {\r\n        var $item = $(\"<div>\").addClass(FILTER_BUILDER_GROUP_ITEM_CLASS);\r\n        var fields = this._getNormalizedFields();\r\n        var field = getField(condition[0], fields);\r\n        this._createRemoveButton(() => {\r\n            removeItem(parent, condition);\r\n            var isSingleChild = 1 === $item.parent().children().length;\r\n            if (isSingleChild) {\r\n                $item.parent().remove()\r\n            } else {\r\n                $item.remove()\r\n            }\r\n            this._updateFilter()\r\n        }).appendTo($item);\r\n        this._createFieldButtonWithMenu(fields, condition, field).appendTo($item);\r\n        this._createOperationAndValueButtons(condition, field, $item);\r\n        return $item\r\n    },\r\n    _getGroupOperations: function(criteria) {\r\n        var groupOperations = this.option(\"groupOperations\");\r\n        var groupOperationDescriptions = this.option(\"groupOperationDescriptions\");\r\n        if (!groupOperations || !groupOperations.length) {\r\n            groupOperations = [getGroupValue(criteria).replace(\"!\", \"not\")]\r\n        }\r\n        return groupOperations.map(operation => ({\r\n            text: groupOperationDescriptions[operation],\r\n            value: OPERATORS[operation]\r\n        }))\r\n    },\r\n    _createRemoveButton: function(handler) {\r\n        var $removeButton = $(\"<div>\").addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_REMOVE_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr(\"tabindex\", 0);\r\n        this._subscribeOnClickAndEnterKey($removeButton, handler);\r\n        return $removeButton\r\n    },\r\n    _createAddButton: function(addGroupHandler, addConditionHandler, groupLevel) {\r\n        var $button;\r\n        var maxGroupLevel = this.option(\"maxGroupLevel\");\r\n        if (isDefined(maxGroupLevel) && groupLevel >= maxGroupLevel) {\r\n            $button = this._createButton();\r\n            this._subscribeOnClickAndEnterKey($button, addConditionHandler)\r\n        } else {\r\n            $button = this._createButtonWithMenu({\r\n                menu: {\r\n                    items: [{\r\n                        caption: messageLocalization.format(\"dxFilterBuilder-addCondition\"),\r\n                        click: addConditionHandler\r\n                    }, {\r\n                        caption: messageLocalization.format(\"dxFilterBuilder-addGroup\"),\r\n                        click: addGroupHandler\r\n                    }],\r\n                    displayExpr: \"caption\",\r\n                    onItemClick: function(e) {\r\n                        e.itemData.click()\r\n                    },\r\n                    cssClass: FILTER_BUILDER_ADD_CONDITION_CLASS\r\n                }\r\n            })\r\n        }\r\n        return $button.addClass(FILTER_BUILDER_IMAGE_CLASS).addClass(FILTER_BUILDER_IMAGE_ADD_CLASS).addClass(FILTER_BUILDER_ACTION_CLASS).attr(\"tabindex\", 0)\r\n    },\r\n    _createValueText: function(item, field, $container) {\r\n        var that = this;\r\n        var $text = $(\"<div>\").html(\"&nbsp;\").addClass(FILTER_BUILDER_ITEM_VALUE_TEXT_CLASS).attr(\"tabindex\", 0).appendTo($container);\r\n        var value = item[2];\r\n        var customOperation = getCustomOperation(that._customOperations, item[1]);\r\n        if (!customOperation && field.lookup) {\r\n            getCurrentLookupValueText(field, value, (function(result) {\r\n                renderValueText($text, result)\r\n            }))\r\n        } else {\r\n            when(getCurrentValueText(field, value, customOperation)).done(result => {\r\n                renderValueText($text, result, customOperation)\r\n            })\r\n        }\r\n        that._subscribeOnClickAndEnterKey($text, (function(e) {\r\n            if (\"keyup\" === e.type) {\r\n                e.stopPropagation()\r\n            }\r\n            that._createValueEditorWithEvents(item, field, $container)\r\n        }));\r\n        return $text\r\n    },\r\n    _updateConditionValue: function(item, value, callback) {\r\n        var areValuesDifferent = item[2] !== value;\r\n        if (areValuesDifferent) {\r\n            item[2] = value\r\n        }\r\n        callback();\r\n        this._updateFilter()\r\n    },\r\n    _addDocumentKeyUp: function($editor, handler) {\r\n        var isComposing = false;\r\n        var hasCompositionJustEnded = false;\r\n        var document = domAdapter.getDocument();\r\n        var documentKeyUpHandler = e => {\r\n            if (isComposing || hasCompositionJustEnded) {\r\n                hasCompositionJustEnded = false;\r\n                return\r\n            }\r\n            handler(e)\r\n        };\r\n        eventsEngine.on(document, \"keyup\", documentKeyUpHandler);\r\n        var input = $editor.find(\"input\");\r\n        eventsEngine.on(input, \"compositionstart\", () => {\r\n            isComposing = true\r\n        });\r\n        eventsEngine.on(input, \"compositionend\", () => {\r\n            isComposing = false;\r\n            hasCompositionJustEnded = true\r\n        });\r\n        eventsEngine.on(input, \"keydown\", event => {\r\n            if (229 !== event.which) {\r\n                hasCompositionJustEnded = false\r\n            }\r\n        });\r\n        this._documentKeyUpHandler = documentKeyUpHandler\r\n    },\r\n    _addDocumentClick: function($editor, closeEditorFunc) {\r\n        var document = domAdapter.getDocument();\r\n        var documentClickHandler = e => {\r\n            if (!this._isFocusOnEditorParts($editor, e.target)) {\r\n                eventsEngine.trigger($editor.find(\"input\"), \"change\");\r\n                closeEditorFunc()\r\n            }\r\n        };\r\n        eventsEngine.on(document, \"dxpointerdown\", documentClickHandler);\r\n        this._documentClickHandler = documentClickHandler\r\n    },\r\n    _isFocusOnEditorParts: function($editor, target) {\r\n        var activeElement = target || domAdapter.getActiveElement();\r\n        return $(activeElement).closest($editor.children()).length || $(activeElement).closest(\".dx-dropdowneditor-overlay\").length\r\n    },\r\n    _removeEvents: function() {\r\n        var document = domAdapter.getDocument();\r\n        isDefined(this._documentKeyUpHandler) && eventsEngine.off(document, \"keyup\", this._documentKeyUpHandler);\r\n        isDefined(this._documentClickHandler) && eventsEngine.off(document, \"dxpointerdown\", this._documentClickHandler)\r\n    },\r\n    _dispose: function() {\r\n        this._removeEvents();\r\n        this.callBase()\r\n    },\r\n    _createValueEditorWithEvents: function(item, field, $container) {\r\n        var value = item[2];\r\n        var createValueText = () => {\r\n            $container.empty();\r\n            this._removeEvents();\r\n            return this._createValueText(item, field, $container)\r\n        };\r\n        var closeEditor = () => {\r\n            this._updateConditionValue(item, value, (function() {\r\n                createValueText()\r\n            }))\r\n        };\r\n        var options = {\r\n            value: \"\" === value ? null : value,\r\n            filterOperation: getOperationValue(item),\r\n            setValue: function(data) {\r\n                value = null === data ? \"\" : data\r\n            },\r\n            closeEditor: closeEditor,\r\n            text: $container.text()\r\n        };\r\n        $container.empty();\r\n        var $editor = this._createValueEditor($container, field, options);\r\n        eventsEngine.trigger($editor.find(\"input\").not(\":hidden\").eq(0), \"focus\");\r\n        this._removeEvents();\r\n        this._addDocumentClick($editor, closeEditor);\r\n        this._addDocumentKeyUp($editor, e => {\r\n            var keyName = normalizeKeyName(e);\r\n            if (keyName === TAB_KEY) {\r\n                if (this._isFocusOnEditorParts($editor)) {\r\n                    return\r\n                }\r\n                this._updateConditionValue(item, value, (function() {\r\n                    createValueText();\r\n                    if (e.shiftKey) {\r\n                        eventsEngine.trigger($container.prev(), \"focus\")\r\n                    }\r\n                }))\r\n            }\r\n            if (keyName === ESCAPE_KEY) {\r\n                eventsEngine.trigger(createValueText(), \"focus\")\r\n            }\r\n            if (keyName === ENTER_KEY) {\r\n                this._updateConditionValue(item, value, (function() {\r\n                    eventsEngine.trigger(createValueText(), \"focus\")\r\n                }))\r\n            }\r\n        });\r\n        this._fireContentReadyAction()\r\n    },\r\n    _createValueButton: function(item, field) {\r\n        var $valueButton = $(\"<div>\").addClass(FILTER_BUILDER_ITEM_TEXT_CLASS).addClass(FILTER_BUILDER_ITEM_VALUE_CLASS);\r\n        this._createValueText(item, field, $valueButton);\r\n        return $valueButton\r\n    },\r\n    _createValueEditor: function($container, field, options) {\r\n        var $editor = $(\"<div>\").attr(\"tabindex\", 0).appendTo($container);\r\n        var customOperation = getCustomOperation(this._customOperations, options.filterOperation);\r\n        var editorTemplate = customOperation && customOperation.editorTemplate ? customOperation.editorTemplate : field.editorTemplate;\r\n        if (editorTemplate) {\r\n            var template = this._getTemplate(editorTemplate);\r\n            template.render({\r\n                model: extend({\r\n                    field: field\r\n                }, options),\r\n                container: $editor\r\n            })\r\n        } else {\r\n            this._editorFactory.createEditor.call(this, $editor, extend({}, field, options, {\r\n                parentType: SOURCE\r\n            }))\r\n        }\r\n        return $editor\r\n    },\r\n    _createPopupWithTreeView: function(options, $container) {\r\n        var that = this;\r\n        var $popup = $(\"<div>\").addClass(options.menu.cssClass).appendTo($container);\r\n        this._createComponent($popup, Popup, {\r\n            onHiding: options.menu.onHiding,\r\n            onHidden: options.menu.onHidden,\r\n            rtlEnabled: options.menu.rtlEnabled,\r\n            position: options.menu.position,\r\n            animation: options.menu.animation,\r\n            contentTemplate: function(contentElement) {\r\n                var $menuContainer = $(\"<div>\").appendTo(contentElement);\r\n                that._createComponent($menuContainer, TreeView, options.menu);\r\n                this.repaint()\r\n            },\r\n            _ignoreFunctionValueDeprecation: true,\r\n            maxHeight: function() {\r\n                return getElementMaxHeightByWindow(options.menu.position.of)\r\n            },\r\n            visible: true,\r\n            focusStateEnabled: false,\r\n            hideOnParentScroll: this.option(\"closePopupOnTargetScroll\"),\r\n            hideOnOutsideClick: true,\r\n            onShown: options.popup.onShown,\r\n            shading: false,\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            showTitle: false,\r\n            _wrapperClassExternal: options.menu.cssClass\r\n        })\r\n    },\r\n    _subscribeOnClickAndEnterKey: function($button, handler) {\r\n        eventsEngine.on($button, \"dxclick\", handler);\r\n        eventsEngine.on($button, \"keyup\", (function(e) {\r\n            if (normalizeKeyName(e) === ENTER_KEY) {\r\n                handler(e)\r\n            }\r\n        }))\r\n    }\r\n});\r\nregisterComponent(\"dxFilterBuilder\", FilterBuilder);\r\nexport default FilterBuilder;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}