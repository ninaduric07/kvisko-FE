{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/calendar/ui.calendar.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport Guid from \"../../core/guid\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { noop } from \"../../core/utils/common\";\nimport { isNumeric, isString, isFunction, isDefined } from \"../../core/utils/type\";\nimport { inRange } from \"../../core/utils/math\";\nimport { extend } from \"../../core/utils/extend\";\nimport Button from \"../button\";\nimport Editor from \"../editor/editor\";\nimport Swipeable from \"../../events/gesture/swipeable\";\nimport Navigator from \"./ui.calendar.navigator\";\nimport Views from \"./ui.calendar.views\";\nimport { move } from \"../../animation/translator\";\nimport dateUtils from \"../../core/utils/date\";\nimport dateSerialization from \"../../core/utils/date_serialization\";\nimport devices from \"../../core/devices\";\nimport fx from \"../../animation/fx\";\nimport { hasWindow } from \"../../core/utils/window\";\nimport messageLocalization from \"../../localization/message\";\nimport dateLocalization from \"../../localization/date\";\nimport { FunctionTemplate } from \"../../core/templates/function_template\";\nimport { isCommandKeyPressed } from \"../../events/utils/index\";\nvar CALENDAR_CLASS = \"dx-calendar\";\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\nvar POP_ANIMATION_FROM = .6;\nvar POP_ANIMATION_TO = 1;\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\nvar LEVEL_COMPARE_MAP = {\n  month: 3,\n  year: 2,\n  decade: 1,\n  century: 0\n};\nvar ZOOM_LEVEL = {\n  MONTH: \"month\",\n  YEAR: \"year\",\n  DECADE: \"decade\",\n  CENTURY: \"century\"\n};\nfunction elementHasFocus(element) {\n  return element.hasClass(FOCUSED_STATE_CLASS);\n}\nvar Calendar = Editor.inherit({\n  _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      hoverStateEnabled: true,\n      activeStateEnabled: true,\n      currentDate: new Date(),\n      value: null,\n      dateSerializationFormat: void 0,\n      min: new Date(1e3, 0),\n      max: new Date(3e3, 0),\n      firstDayOfWeek: void 0,\n      zoomLevel: ZOOM_LEVEL.MONTH,\n      maxZoomLevel: ZOOM_LEVEL.MONTH,\n      minZoomLevel: ZOOM_LEVEL.CENTURY,\n      showTodayButton: false,\n      showWeekNumbers: false,\n      weekNumberRule: \"auto\",\n      cellTemplate: \"cell\",\n      disabledDates: null,\n      onCellClick: null,\n      onContouredChanged: null,\n      skipFocusCheck: false,\n      _todayDate: () => new Date()\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _supportedKeys: function () {\n    return extend(this.callBase(), {\n      rightArrow: function (e) {\n        e.preventDefault();\n        if (isCommandKeyPressed(e)) {\n          this._waitRenderView(1);\n        } else {\n          this._moveCurrentDateByOffset(1 * this._getRtlCorrection());\n        }\n      },\n      leftArrow: function (e) {\n        e.preventDefault();\n        if (isCommandKeyPressed(e)) {\n          this._waitRenderView(-1);\n        } else {\n          this._moveCurrentDateByOffset(-1 * this._getRtlCorrection());\n        }\n      },\n      upArrow: function (e) {\n        e.preventDefault();\n        if (isCommandKeyPressed(e)) {\n          this._navigateUp();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n          this._moveCurrentDateByOffset(-1 * this._view.option(\"colCount\"));\n        }\n      },\n      downArrow: function (e) {\n        e.preventDefault();\n        if (isCommandKeyPressed(e)) {\n          this._navigateDown();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n          this._moveCurrentDateByOffset(1 * this._view.option(\"colCount\"));\n        }\n      },\n      home: function (e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n        var min = this._dateOption(\"min\");\n        if (this._view.isDateDisabled(currentDate)) {\n          return;\n        }\n        var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\n        this._moveToClosestAvailableDate(date);\n      },\n      end: function (e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n        var max = this._dateOption(\"max\");\n        if (this._view.isDateDisabled(currentDate)) {\n          return;\n        }\n        var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\n        this._moveToClosestAvailableDate(date);\n      },\n      pageUp: function (e) {\n        e.preventDefault();\n        this._waitRenderView(-1 * this._getRtlCorrection());\n      },\n      pageDown: function (e) {\n        e.preventDefault();\n        this._waitRenderView(1 * this._getRtlCorrection());\n      },\n      tab: noop,\n      enter: function (e) {\n        if (!this._isMaxZoomLevel()) {\n          this._navigateDown();\n        } else if (!this._view.isDateDisabled(this.option(\"currentDate\"))) {\n          var value = this._updateTimeComponent(this.option(\"currentDate\"));\n          this._dateValue(value, e);\n        }\n      }\n    });\n  },\n  _getSerializationFormat: function (optionName) {\n    var value = this.option(optionName || \"value\");\n    if (this.option(\"dateSerializationFormat\")) {\n      return this.option(\"dateSerializationFormat\");\n    }\n    if (isNumeric(value)) {\n      return \"number\";\n    }\n    if (!isString(value)) {\n      return;\n    }\n    return dateSerialization.getDateSerializationFormat(value);\n  },\n  _convertToDate: function (value, optionName) {\n    return dateSerialization.deserializeDate(value);\n  },\n  _dateValue: function (value, event) {\n    if (event) {\n      if (\"keydown\" === event.type) {\n        var cellElement = this._view._getContouredCell().get(0);\n        event.target = cellElement;\n      }\n      this._saveValueChangeEvent(event);\n    }\n    this._dateOption(\"value\", value);\n  },\n  _dateOption: function (optionName, optionValue) {\n    if (1 === arguments.length) {\n      return this._convertToDate(this.option(optionName), optionName);\n    }\n    var serializationFormat = this._getSerializationFormat(optionName);\n    this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat));\n  },\n  _shiftDate: function (zoomLevel, date, offset, reverse) {\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        date.setDate(date.getDate() + offset * reverse);\n        break;\n      case ZOOM_LEVEL.YEAR:\n        date.setMonth(date.getMonth() + offset * reverse);\n        break;\n      case ZOOM_LEVEL.DECADE:\n        date.setFullYear(date.getFullYear() + offset * reverse);\n        break;\n      case ZOOM_LEVEL.CENTURY:\n        date.setFullYear(date.getFullYear() + 10 * offset * reverse);\n    }\n  },\n  _moveCurrentDateByOffset: function (offset) {\n    var baseDate = this.option(\"currentDate\");\n    var currentDate = new Date(baseDate);\n    var zoomLevel = this.option(\"zoomLevel\");\n    this._shiftDate(zoomLevel, currentDate, offset, 1);\n    var maxDate = this._getMaxDate();\n    var minDate = this._getMinDate();\n    var isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, currentDate, baseDate);\n    var isDateForwardInRange = inRange(currentDate, minDate, maxDate) && isDateForwardInNeighborView;\n    var dateForward = new Date(currentDate);\n    while (isDateForwardInRange) {\n      if (!this._view.isDateDisabled(dateForward)) {\n        currentDate = dateForward;\n        break;\n      }\n      this._shiftDate(zoomLevel, dateForward, offset, 1);\n      isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, dateForward, baseDate);\n      isDateForwardInRange = inRange(dateForward, minDate, maxDate) && isDateForwardInNeighborView;\n    }\n    if (this._view.isDateDisabled(baseDate) || this._view.isDateDisabled(currentDate)) {\n      this._waitRenderView(offset > 0 ? 1 : -1);\n    } else {\n      this.option(\"currentDate\", currentDate);\n    }\n  },\n  _areDatesInSameView(zoomLevel, date1, date2) {\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        return date1.getMonth() === date2.getMonth();\n      case ZOOM_LEVEL.YEAR:\n        return date1.getYear() === date2.getYear();\n      case ZOOM_LEVEL.DECADE:\n        return parseInt(date1.getYear() / 10) === parseInt(date2.getYear() / 10);\n      case ZOOM_LEVEL.CENTURY:\n        return parseInt(date1.getYear() / 100) === parseInt(date2.getYear() / 100);\n    }\n  },\n  _areDatesInNeighborView(zoomLevel, date1, date2) {\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        return (a = date1.getMonth(), b = date2.getMonth(), abs = Math.abs(a - b), Math.min(abs, 12 - abs)) <= 1;\n      case ZOOM_LEVEL.YEAR:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 1;\n      case ZOOM_LEVEL.DECADE:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 10;\n      case ZOOM_LEVEL.CENTURY:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 100;\n    }\n    var a, b, abs;\n  },\n  _moveToClosestAvailableDate: function () {\n    var baseDate = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.option(\"currentDate\");\n    var currentDate = new Date(baseDate);\n    var zoomLevel = this.option(\"zoomLevel\");\n    var isCurrentDateAvailable = !this._isDateNotAvailable(currentDate);\n    var isDateForwardAvailable = isCurrentDateAvailable;\n    var isDateBackwardAvailable = isCurrentDateAvailable;\n    var isDateForwardInStartView;\n    var isDateBackwardInStartView;\n    var dateForward = new Date(currentDate);\n    var dateBackward = new Date(currentDate);\n    do {\n      if (isDateForwardAvailable) {\n        currentDate = dateForward;\n        break;\n      }\n      if (isDateBackwardAvailable) {\n        currentDate = dateBackward;\n        break;\n      }\n      this._shiftDate(zoomLevel, dateForward, 1, 1);\n      this._shiftDate(zoomLevel, dateBackward, 1, -1);\n      isDateForwardInStartView = this._areDatesInSameView(zoomLevel, dateForward, baseDate);\n      isDateBackwardInStartView = this._areDatesInSameView(zoomLevel, dateBackward, baseDate);\n      isDateForwardAvailable = isDateForwardInStartView && !this._isDateNotAvailable(dateForward);\n      isDateBackwardAvailable = isDateBackwardInStartView && !this._isDateNotAvailable(dateBackward);\n    } while (isDateForwardInStartView || isDateBackwardInStartView);\n    this.option(\"currentDate\", currentDate);\n  },\n  _isDateNotAvailable: function (date) {\n    var maxDate = this._getMaxDate();\n    var minDate = this._getMinDate();\n    return !inRange(date, minDate, maxDate) || this._view.isDateDisabled(date);\n  },\n  _init: function () {\n    this.callBase();\n    this._correctZoomLevel();\n    this._initCurrentDate();\n    this._initActions();\n  },\n  _correctZoomLevel: function () {\n    var minZoomLevel = this.option(\"minZoomLevel\");\n    var maxZoomLevel = this.option(\"maxZoomLevel\");\n    var zoomLevel = this.option(\"zoomLevel\");\n    if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n      return;\n    }\n    if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\n      this.option(\"zoomLevel\", maxZoomLevel);\n    } else if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n      this.option(\"zoomLevel\", minZoomLevel);\n    }\n  },\n  _initCurrentDate: function () {\n    var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\n    this.option(\"currentDate\", currentDate);\n  },\n  _getNormalizedDate: function (date) {\n    date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\n    return isDefined(date) ? this._getDate(date) : date;\n  },\n  _initActions: function () {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\");\n    this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      cell: new FunctionTemplate(function (options) {\n        var data = options.model;\n        $(options.container).append($(\"<span>\").text(data && data.text || String(data)));\n      })\n    });\n    this.callBase();\n  },\n  _updateCurrentDate: function (date) {\n    if (fx.isAnimating(this._$viewsWrapper)) {\n      fx.stop(this._$viewsWrapper, true);\n    }\n    var min = this._getMinDate();\n    var max = this._getMaxDate();\n    if (min > max) {\n      this.option(\"currentDate\", new Date());\n      return;\n    }\n    var normalizedDate = this._getNormalizedDate(date);\n    if (date.getTime() !== normalizedDate.getTime()) {\n      this.option(\"currentDate\", new Date(normalizedDate));\n      return;\n    }\n    var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\n    if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\n      offset = 0;\n    }\n    if (this._view && 0 !== offset && !this._suppressNavigation) {\n      this._navigate(offset, normalizedDate);\n    } else {\n      this._renderNavigator();\n      this._setViewContoured(normalizedDate);\n      this._updateAriaId(normalizedDate);\n    }\n  },\n  _setViewContoured: function (date) {\n    if (this.option(\"skipFocusCheck\") || elementHasFocus(this._focusTarget())) {\n      this._view.option(\"contouredDate\", date);\n    }\n  },\n  _getMinDate: function () {\n    if (this.min) {\n      return this.min;\n    }\n    this.min = this._dateOption(\"min\") || new Date(1e3, 0);\n    return this.min;\n  },\n  _getMaxDate: function () {\n    if (this.max) {\n      return this.max;\n    }\n    this.max = this._dateOption(\"max\") || new Date(3e3, 0);\n    return this.max;\n  },\n  _getViewsOffset: function (startDate, endDate) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    if (zoomLevel === ZOOM_LEVEL.MONTH) {\n      return this._getMonthsOffset(startDate, endDate);\n    }\n    var zoomCorrection;\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.CENTURY:\n        zoomCorrection = 100;\n        break;\n      case ZOOM_LEVEL.DECADE:\n        zoomCorrection = 10;\n        break;\n      default:\n        zoomCorrection = 1;\n    }\n    return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection);\n  },\n  _getMonthsOffset: function (startDate, endDate) {\n    var yearOffset = endDate.getFullYear() - startDate.getFullYear();\n    var monthOffset = endDate.getMonth() - startDate.getMonth();\n    return 12 * yearOffset + monthOffset;\n  },\n  _waitRenderView: function (offset) {\n    if (this._alreadyViewRender) {\n      return;\n    }\n    this._alreadyViewRender = true;\n    var date = this._getDateByOffset(offset * this._getRtlCorrection());\n    this._moveToClosestAvailableDate(date);\n    this._waitRenderViewTimeout = setTimeout(() => {\n      this._alreadyViewRender = false;\n    });\n  },\n  _getRtlCorrection: function () {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _getDateByOffset: function (offset, date) {\n    var _date;\n    date = this._getDate(null !== (_date = date) && void 0 !== _date ? _date : this.option(\"currentDate\"));\n    var currentDay = date.getDate();\n    var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\n    date.setDate(1);\n    date.setMonth(date.getMonth() + difference);\n    var lastDay = dateUtils.getLastMonthDate(date).getDate();\n    date.setDate(currentDay > lastDay ? lastDay : currentDay);\n    return date;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _initMarkup: function () {\n    this._renderSubmitElement();\n    this.callBase();\n    var $element = this.$element();\n    $element.addClass(CALENDAR_CLASS);\n    this._renderBody();\n    $element.append(this.$body);\n    this._renderViews();\n    this._renderNavigator();\n    $element.append(this._navigator.$element());\n    this._renderSwipeable();\n    this._renderFooter();\n    this._updateAriaSelected();\n    this._updateAriaId();\n    this._moveToClosestAvailableDate();\n  },\n  _render: function () {\n    this.callBase();\n    this._setViewContoured(this.option(\"currentDate\"));\n  },\n  _renderBody: function () {\n    if (!this._$viewsWrapper) {\n      this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\n      this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\n      this.$body.append(this._$viewsWrapper);\n    }\n  },\n  _getKeyboardListeners() {\n    return this.callBase().concat([this._view]);\n  },\n  _renderViews: function () {\n    this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\n    var currentDate = this.option(\"currentDate\");\n    this._view = this._renderSpecificView(currentDate);\n    if (hasWindow()) {\n      var beforeDate = this._getDateByOffset(-1, currentDate);\n      this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\n      var afterDate = this._getDateByOffset(1, currentDate);\n      afterDate.setDate(1);\n      this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null;\n    }\n    this._translateViews();\n  },\n  _renderSpecificView: function (date) {\n    var specificView = Views[this.option(\"zoomLevel\")];\n    var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\n    var config = this._viewConfig(date);\n    return this._createComponent($view, specificView, config);\n  },\n  _viewConfig: function (date) {\n    var _this$option;\n    var disabledDates = this.option(\"disabledDates\");\n    disabledDates = isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\n    return {\n      date: date,\n      min: this._getMinDate(),\n      max: this._getMaxDate(),\n      firstDayOfWeek: null !== (_this$option = this.option(\"firstDayOfWeek\")) && void 0 !== _this$option ? _this$option : dateLocalization.firstDayOfWeekIndex(),\n      showWeekNumbers: this.option(\"showWeekNumbers\"),\n      weekNumberRule: this.option(\"weekNumberRule\"),\n      zoomLevel: this.option(\"zoomLevel\"),\n      value: this._dateOption(\"value\"),\n      tabIndex: void 0,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      disabledDates: disabledDates,\n      onCellClick: this._cellClickHandler.bind(this),\n      cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\n      allowValueSelection: this._isMaxZoomLevel(),\n      _todayDate: this.option(\"_todayDate\")\n    };\n  },\n  _injectComponent: function (func) {\n    var that = this;\n    return function (params) {\n      extend(params, {\n        component: that\n      });\n      return func(params);\n    };\n  },\n  _isViewAvailable: function (date) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\n    var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\n    return dateUtils.dateInRange(date, min, max);\n  },\n  _translateViews: function () {\n    move(this._view.$element(), {\n      left: 0,\n      top: 0\n    });\n    this._beforeView && move(this._beforeView.$element(), {\n      left: this._getViewPosition(-1),\n      top: 0\n    });\n    this._afterView && move(this._afterView.$element(), {\n      left: this._getViewPosition(1),\n      top: 0\n    });\n  },\n  _getViewPosition: function (coefficient) {\n    var rtlCorrection = this.option(\"rtlEnabled\") ? -1 : 1;\n    return 100 * coefficient * rtlCorrection + \"%\";\n  },\n  _cellClickHandler: function (e) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewDown(zoomLevel);\n    var isMaxZoomLevel = this._isMaxZoomLevel();\n    if (nextView && !isMaxZoomLevel) {\n      this._navigateDown(e.event.currentTarget);\n    } else {\n      var newValue = this._updateTimeComponent(e.value);\n      this._dateValue(newValue, e.event);\n      this._cellClickAction(e);\n    }\n  },\n  _updateTimeComponent: function (date) {\n    var result = new Date(date);\n    var currentValue = this._dateOption(\"value\");\n    if (currentValue) {\n      result.setHours(currentValue.getHours());\n      result.setMinutes(currentValue.getMinutes());\n      result.setSeconds(currentValue.getSeconds());\n      result.setMilliseconds(currentValue.getMilliseconds());\n    }\n    return result;\n  },\n  _isMaxZoomLevel: function () {\n    return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\");\n  },\n  _navigateDown: function (cell) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    if (this._isMaxZoomLevel()) {\n      return;\n    }\n    var nextView = dateUtils.getViewDown(zoomLevel);\n    if (!nextView) {\n      return;\n    }\n    var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\n    if (cell) {\n      newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY);\n    }\n    this._isOtherViewCellClicked = true;\n    this.option(\"currentDate\", newCurrentDate);\n    this.option(\"zoomLevel\", nextView);\n    this._isOtherViewCellClicked = false;\n    this._renderNavigator();\n    this._animateShowView();\n    this._moveToClosestAvailableDate();\n    this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")));\n  },\n  _renderNavigator: function () {\n    if (!this._navigator) {\n      this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig());\n    }\n    this._navigator.option(\"text\", this._view.getNavigatorCaption());\n    this._updateButtonsVisibility();\n  },\n  _navigatorConfig: function () {\n    return {\n      text: this._view.getNavigatorCaption(),\n      onClick: this._navigatorClickHandler.bind(this),\n      onCaptionClick: this._navigateUp.bind(this),\n      rtlEnabled: this.option(\"rtlEnabled\")\n    };\n  },\n  _navigatorClickHandler: function (e) {\n    var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\n    this._moveToClosestAvailableDate(currentDate);\n  },\n  _navigateUp: function () {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewUp(zoomLevel);\n    if (!nextView || this._isMinZoomLevel(zoomLevel)) {\n      return;\n    }\n    this.option(\"zoomLevel\", nextView);\n    this._renderNavigator();\n    this._animateShowView();\n    this._moveToClosestAvailableDate();\n    this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")));\n  },\n  _isMinZoomLevel: function (zoomLevel) {\n    var min = this._getMinDate();\n    var max = this._getMaxDate();\n    return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel;\n  },\n  _updateButtonsVisibility: function () {\n    this._navigator.toggleButton(\"next\", !isDefined(this._getRequiredView(\"next\")));\n    this._navigator.toggleButton(\"prev\", !isDefined(this._getRequiredView(\"prev\")));\n  },\n  _renderSwipeable: function () {\n    if (!this._swipeable) {\n      this._swipeable = this._createComponent(this.$element(), Swipeable, {\n        onStart: this._swipeStartHandler.bind(this),\n        onUpdated: this._swipeUpdateHandler.bind(this),\n        onEnd: this._swipeEndHandler.bind(this),\n        itemSizeFunc: this._viewWidth.bind(this)\n      });\n    }\n  },\n  _swipeStartHandler: function (e) {\n    fx.stop(this._$viewsWrapper, true);\n    e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\n    e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0;\n  },\n  _getRequiredView: function (name) {\n    var view;\n    var isRtl = this.option(\"rtlEnabled\");\n    if (\"next\" === name) {\n      view = isRtl ? this._beforeView : this._afterView;\n    } else if (\"prev\" === name) {\n      view = isRtl ? this._afterView : this._beforeView;\n    }\n    return view;\n  },\n  _swipeUpdateHandler: function (e) {\n    var offset = e.event.offset;\n    move(this._$viewsWrapper, {\n      left: offset * this._viewWidth(),\n      top: 0\n    });\n    this._updateNavigatorCaption(offset);\n  },\n  _swipeEndHandler: function (e) {\n    var targetOffset = e.event.targetOffset;\n    var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\n    if (0 === moveOffset) {\n      this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\n      return;\n    }\n    var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\n    if (this._isDateInInvalidRange(date)) {\n      if (moveOffset >= 0) {\n        date = new Date(this._getMinDate());\n      } else {\n        date = new Date(this._getMaxDate());\n      }\n    }\n    this.option(\"currentDate\", date);\n  },\n  _viewWidth: function () {\n    if (!this._viewWidthValue) {\n      this._viewWidthValue = getWidth(this.$element());\n    }\n    return this._viewWidthValue;\n  },\n  _updateNavigatorCaption: function (offset) {\n    offset *= this._getRtlCorrection();\n    var view = this._view;\n    if (offset > .5 && this._beforeView) {\n      view = this._beforeView;\n    } else if (offset < -.5 && this._afterView) {\n      view = this._afterView;\n    }\n    this._navigator.option(\"text\", view.getNavigatorCaption());\n  },\n  _isDateInInvalidRange: function (date) {\n    if (this._view.isBoundary(date)) {\n      return;\n    }\n    var min = this._getMinDate();\n    var max = this._getMaxDate();\n    var normalizedDate = dateUtils.normalizeDate(date, min, max);\n    return normalizedDate === min || normalizedDate === max;\n  },\n  _renderFooter: function () {\n    var showTodayButton = this.option(\"showTodayButton\");\n    if (showTodayButton) {\n      var $todayButton = this._createComponent($(\"<a>\"), Button, {\n        focusStateEnabled: false,\n        text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\n        onClick: function (args) {\n          this._toTodayView(args);\n        }.bind(this),\n        integrationOptions: {}\n      }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\n      this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\n      this.$element().append(this._$footer);\n    }\n    this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton);\n  },\n  _renderSubmitElement: function () {\n    this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function (value) {\n    var dateValue = this._convertToDate(value);\n    this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN));\n  },\n  _getSubmitElement: function () {\n    return this._$submitElement;\n  },\n  _animateShowView: function () {\n    fx.stop(this._view.$element(), true);\n    return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise();\n  },\n  _popAnimationView: function (view, from, to, duration) {\n    return fx.animate(view.$element(), {\n      type: \"pop\",\n      from: {\n        scale: from,\n        opacity: from\n      },\n      to: {\n        scale: to,\n        opacity: to\n      },\n      duration: duration\n    });\n  },\n  _navigate: function (offset, value) {\n    if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\n      var newView = this._renderSpecificView(value);\n      if (offset > 0) {\n        this._afterView && this._afterView.$element().remove();\n        this._afterView = newView;\n      } else {\n        this._beforeView && this._beforeView.$element().remove();\n        this._beforeView = newView;\n      }\n      this._translateViews();\n    }\n    var rtlCorrection = this._getRtlCorrection();\n    var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\n    var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\n    var viewsWrapperPosition = this._$viewsWrapper.position().left;\n    if (viewsWrapperPosition !== endPosition) {\n      if (this._preventViewChangeAnimation) {\n        this._wrapperAnimationEndHandler(offset, value);\n      } else {\n        this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value));\n      }\n    }\n  },\n  _animateWrapper: function (to, duration) {\n    return fx.animate(this._$viewsWrapper, {\n      type: \"slide\",\n      from: {\n        left: this._$viewsWrapper.position().left\n      },\n      to: {\n        left: to\n      },\n      duration: duration\n    });\n  },\n  _getDate: value => new Date(value),\n  _toTodayView: function (args) {\n    this._saveValueChangeEvent(args.event);\n    var today = new Date();\n    if (this._isMaxZoomLevel()) {\n      this._dateOption(\"value\", today);\n      return;\n    }\n    this._preventViewChangeAnimation = true;\n    this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\n    this._dateOption(\"value\", today);\n    this._animateShowView();\n    this._preventViewChangeAnimation = false;\n  },\n  _wrapperAnimationEndHandler: function (offset, newDate) {\n    this._rearrangeViews(offset);\n    this._translateViews();\n    this._resetLocation();\n    this._renderNavigator();\n    this._setViewContoured(newDate);\n    this._updateAriaId(newDate);\n    this._updateAriaSelected();\n  },\n  _rearrangeViews: function (offset) {\n    if (0 === offset) {\n      return;\n    }\n    var viewOffset;\n    var viewToCreateKey;\n    var viewToRemoveKey;\n    if (offset < 0) {\n      viewOffset = 1;\n      viewToCreateKey = \"_beforeView\";\n      viewToRemoveKey = \"_afterView\";\n    } else {\n      viewOffset = -1;\n      viewToCreateKey = \"_afterView\";\n      viewToRemoveKey = \"_beforeView\";\n    }\n    if (!this[viewToCreateKey]) {\n      return;\n    }\n    var destinationDate = this[viewToCreateKey].option(\"date\");\n    if (this[viewToRemoveKey]) {\n      this[viewToRemoveKey].$element().remove();\n    }\n    if (offset === viewOffset) {\n      this[viewToRemoveKey] = this._view;\n    } else {\n      this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\n      this._view.$element().remove();\n    }\n    this._view = this[viewToCreateKey];\n    var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\n    this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null;\n  },\n  _resetLocation: function () {\n    move(this._$viewsWrapper, {\n      left: 0,\n      top: 0\n    });\n  },\n  _clean: function () {\n    this.callBase();\n    this._clearViewWidthCache();\n    delete this._$viewsWrapper;\n    delete this._navigator;\n    delete this._$footer;\n  },\n  _clearViewWidthCache: function () {\n    delete this._viewWidthValue;\n  },\n  _disposeViews: function () {\n    this._view.$element().remove();\n    this._beforeView && this._beforeView.$element().remove();\n    this._afterView && this._afterView.$element().remove();\n    delete this._view;\n    delete this._beforeView;\n    delete this._afterView;\n  },\n  _dispose: function () {\n    clearTimeout(this._waitRenderViewTimeout);\n    this.callBase();\n  },\n  _refreshViews: function () {\n    this._disposeViews();\n    this._renderViews();\n  },\n  _visibilityChanged: function () {\n    this._translateViews();\n  },\n  _focusInHandler: function () {\n    this.callBase.apply(this, arguments);\n    this._view.option(\"contouredDate\", this.option(\"currentDate\"));\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    this._view.option(\"contouredDate\", null);\n  },\n  _updateViewsValue: function (value) {\n    var newValue = value ? new Date(value) : null;\n    this._view.option(\"value\", newValue);\n    this._beforeView && this._beforeView.option(\"value\", newValue);\n    this._afterView && this._afterView.option(\"value\", newValue);\n  },\n  _updateAriaSelected: function (value, previousValue) {\n    var _value;\n    value = null !== (_value = value) && void 0 !== _value ? _value : this._dateOption(\"value\");\n    var $prevSelectedCell = this._view._getCellByDate(previousValue);\n    var $selectedCell = this._view._getCellByDate(value);\n    this.setAria(\"selected\", void 0, $prevSelectedCell);\n    this.setAria(\"selected\", true, $selectedCell);\n    if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\n      this._updateAriaId(value);\n    }\n  },\n  _updateAriaId: function (value) {\n    var _value2;\n    value = null !== (_value2 = value) && void 0 !== _value2 ? _value2 : this.option(\"currentDate\");\n    var ariaId = \"dx-\" + new Guid();\n    var $newCell = this._view._getCellByDate(value);\n    this.setAria(\"id\", ariaId, $newCell);\n    this.setAria(\"activedescendant\", ariaId);\n    this._onContouredChanged(ariaId);\n  },\n  _suppressingNavigation: function (callback, args) {\n    this._suppressNavigation = true;\n    callback.apply(this, args);\n    delete this._suppressNavigation;\n  },\n  _optionChanged: function (args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n    switch (args.name) {\n      case \"width\":\n        this.callBase(args);\n        this._clearViewWidthCache();\n        break;\n      case \"min\":\n      case \"max\":\n        this.min = void 0;\n        this.max = void 0;\n        this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\n        this._refreshViews();\n        this._renderNavigator();\n        break;\n      case \"firstDayOfWeek\":\n        this._refreshViews();\n        this._updateButtonsVisibility();\n        break;\n      case \"currentDate\":\n        this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\n        this._updateCurrentDate(value);\n        break;\n      case \"zoomLevel\":\n        this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\n        this._correctZoomLevel();\n        this._refreshViews();\n        this._renderNavigator();\n        this._updateAriaId();\n        break;\n      case \"minZoomLevel\":\n      case \"maxZoomLevel\":\n        this._correctZoomLevel();\n        this._updateButtonsVisibility();\n        break;\n      case \"value\":\n        value = this._convertToDate(value);\n        previousValue = this._convertToDate(previousValue);\n        this._updateAriaSelected(value, previousValue);\n        this.option(\"currentDate\", isDefined(value) ? new Date(value) : new Date());\n        this._updateViewsValue(value);\n        this._setSubmitValue(value);\n        this.callBase(args);\n        break;\n      case \"onCellClick\":\n        this._view.option(\"onCellClick\", value);\n        break;\n      case \"onContouredChanged\":\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n        break;\n      case \"disabledDates\":\n      case \"dateSerializationFormat\":\n      case \"cellTemplate\":\n      case \"showTodayButton\":\n        this._invalidate();\n        break;\n      case \"skipFocusCheck\":\n        break;\n      case \"_todayDate\":\n      case \"showWeekNumbers\":\n      case \"weekNumberRule\":\n        this._refreshViews();\n        break;\n      default:\n        this.callBase(args);\n    }\n  },\n  getContouredDate: function () {\n    return this._view.option(\"contouredDate\");\n  }\n});\nregisterComponent(\"dxCalendar\", Calendar);\nexport default Calendar;","map":{"version":3,"names":["getWidth","$","Guid","registerComponent","noop","isNumeric","isString","isFunction","isDefined","inRange","extend","Button","Editor","Swipeable","Navigator","Views","move","dateUtils","dateSerialization","devices","fx","hasWindow","messageLocalization","dateLocalization","FunctionTemplate","isCommandKeyPressed","CALENDAR_CLASS","CALENDAR_BODY_CLASS","CALENDAR_CELL_CLASS","CALENDAR_FOOTER_CLASS","CALENDAR_TODAY_BUTTON_CLASS","CALENDAR_HAS_FOOTER_CLASS","CALENDAR_VIEWS_WRAPPER_CLASS","CALENDAR_VIEW_CLASS","FOCUSED_STATE_CLASS","ANIMATION_DURATION_SHOW_VIEW","POP_ANIMATION_FROM","POP_ANIMATION_TO","CALENDAR_INPUT_STANDARD_PATTERN","CALENDAR_DATE_VALUE_KEY","LEVEL_COMPARE_MAP","month","year","decade","century","ZOOM_LEVEL","MONTH","YEAR","DECADE","CENTURY","elementHasFocus","element","hasClass","Calendar","inherit","_activeStateUnit","_getDefaultOptions","callBase","hoverStateEnabled","activeStateEnabled","currentDate","Date","value","dateSerializationFormat","min","max","firstDayOfWeek","zoomLevel","maxZoomLevel","minZoomLevel","showTodayButton","showWeekNumbers","weekNumberRule","cellTemplate","disabledDates","onCellClick","onContouredChanged","skipFocusCheck","_todayDate","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_supportedKeys","rightArrow","e","preventDefault","_waitRenderView","_moveCurrentDateByOffset","_getRtlCorrection","leftArrow","upArrow","_navigateUp","isAnimating","_view","$element","option","downArrow","_navigateDown","home","_dateOption","isDateDisabled","date","sameView","getViewFirstCellDate","_moveToClosestAvailableDate","end","getViewLastCellDate","pageUp","pageDown","tab","enter","_isMaxZoomLevel","_updateTimeComponent","_dateValue","_getSerializationFormat","optionName","getDateSerializationFormat","_convertToDate","deserializeDate","event","type","cellElement","_getContouredCell","get","target","_saveValueChangeEvent","optionValue","arguments","length","serializationFormat","serializeDate","_shiftDate","offset","reverse","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","baseDate","maxDate","_getMaxDate","minDate","_getMinDate","isDateForwardInNeighborView","_areDatesInNeighborView","isDateForwardInRange","dateForward","_areDatesInSameView","date1","date2","getYear","parseInt","a","b","abs","Math","isCurrentDateAvailable","_isDateNotAvailable","isDateForwardAvailable","isDateBackwardAvailable","isDateForwardInStartView","isDateBackwardInStartView","dateBackward","_init","_correctZoomLevel","_initCurrentDate","_initActions","_getNormalizedDate","normalizeDate","_getDate","_cellClickAction","_createActionByOption","_onContouredChanged","_initTemplates","_templateManager","addDefaultTemplates","cell","data","model","container","append","text","String","_updateCurrentDate","_$viewsWrapper","stop","normalizedDate","getTime","_getViewsOffset","_isOtherViewCellClicked","_suppressNavigation","_navigate","_renderNavigator","_setViewContoured","_updateAriaId","_focusTarget","startDate","endDate","_getMonthsOffset","zoomCorrection","yearOffset","monthOffset","_alreadyViewRender","_getDateByOffset","_waitRenderViewTimeout","setTimeout","_date","currentDay","difference","getDifferenceInMonth","lastDay","getLastMonthDate","_initMarkup","_renderSubmitElement","addClass","_renderBody","$body","_renderViews","_navigator","_renderSwipeable","_renderFooter","_updateAriaSelected","_render","_getKeyboardListeners","_renderSpecificView","beforeDate","_beforeView","_isViewAvailable","afterDate","_afterView","_translateViews","specificView","$view","appendTo","config","_viewConfig","_createComponent","_this$option","_injectComponent","bind","firstDayOfWeekIndex","tabIndex","_cellClickHandler","_getTemplateByOption","allowValueSelection","func","that","params","component","getViewMinBoundaryDate","getViewMaxBoundaryDate","dateInRange","left","top","_getViewPosition","coefficient","rtlCorrection","nextView","getViewDown","isMaxZoomLevel","currentTarget","newValue","result","currentValue","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","newCurrentDate","_animateShowView","_navigatorConfig","getNavigatorCaption","_updateButtonsVisibility","onClick","_navigatorClickHandler","onCaptionClick","rtlEnabled","direction","getViewUp","_isMinZoomLevel","toggleButton","_getRequiredView","_swipeable","onStart","_swipeStartHandler","onUpdated","_swipeUpdateHandler","onEnd","_swipeEndHandler","itemSizeFunc","_viewWidth","maxLeftOffset","maxRightOffset","name","view","isRtl","_updateNavigatorCaption","targetOffset","moveOffset","_animateWrapper","_isDateInInvalidRange","_viewWidthValue","isBoundary","$todayButton","format","args","_toTodayView","integrationOptions","_$footer","toggleClass","_$submitElement","attr","_setSubmitValue","dateValue","_getSubmitElement","val","_popAnimationView","promise","from","to","duration","animate","scale","opacity","newView","remove","offsetSign","endPosition","viewsWrapperPosition","position","_preventViewChangeAnimation","_wrapperAnimationEndHandler","done","today","newDate","_rearrangeViews","_resetLocation","viewOffset","viewToCreateKey","viewToRemoveKey","destinationDate","dateByOffset","_clean","_clearViewWidthCache","_disposeViews","_dispose","clearTimeout","_refreshViews","_visibilityChanged","_focusInHandler","apply","_focusOutHandler","_updateViewsValue","previousValue","_value","$prevSelectedCell","_getCellByDate","$selectedCell","setAria","_value2","ariaId","$newCell","_suppressingNavigation","callback","_optionChanged","removeClass","_invalidate","getContouredDate"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/devextreme/esm/ui/calendar/ui.calendar.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/calendar/ui.calendar.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport Guid from \"../../core/guid\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isNumeric,\r\n    isString,\r\n    isFunction,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    inRange\r\n} from \"../../core/utils/math\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport Button from \"../button\";\r\nimport Editor from \"../editor/editor\";\r\nimport Swipeable from \"../../events/gesture/swipeable\";\r\nimport Navigator from \"./ui.calendar.navigator\";\r\nimport Views from \"./ui.calendar.views\";\r\nimport {\r\n    move\r\n} from \"../../animation/translator\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nimport dateSerialization from \"../../core/utils/date_serialization\";\r\nimport devices from \"../../core/devices\";\r\nimport fx from \"../../animation/fx\";\r\nimport {\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport dateLocalization from \"../../localization/date\";\r\nimport {\r\n    FunctionTemplate\r\n} from \"../../core/templates/function_template\";\r\nimport {\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nvar CALENDAR_CLASS = \"dx-calendar\";\r\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\r\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\r\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\r\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\r\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\r\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\r\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\r\nvar POP_ANIMATION_FROM = .6;\r\nvar POP_ANIMATION_TO = 1;\r\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\r\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\r\nvar LEVEL_COMPARE_MAP = {\r\n    month: 3,\r\n    year: 2,\r\n    decade: 1,\r\n    century: 0\r\n};\r\nvar ZOOM_LEVEL = {\r\n    MONTH: \"month\",\r\n    YEAR: \"year\",\r\n    DECADE: \"decade\",\r\n    CENTURY: \"century\"\r\n};\r\n\r\nfunction elementHasFocus(element) {\r\n    return element.hasClass(FOCUSED_STATE_CLASS)\r\n}\r\nvar Calendar = Editor.inherit({\r\n    _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true,\r\n            currentDate: new Date,\r\n            value: null,\r\n            dateSerializationFormat: void 0,\r\n            min: new Date(1e3, 0),\r\n            max: new Date(3e3, 0),\r\n            firstDayOfWeek: void 0,\r\n            zoomLevel: ZOOM_LEVEL.MONTH,\r\n            maxZoomLevel: ZOOM_LEVEL.MONTH,\r\n            minZoomLevel: ZOOM_LEVEL.CENTURY,\r\n            showTodayButton: false,\r\n            showWeekNumbers: false,\r\n            weekNumberRule: \"auto\",\r\n            cellTemplate: \"cell\",\r\n            disabledDates: null,\r\n            onCellClick: null,\r\n            onContouredChanged: null,\r\n            skipFocusCheck: false,\r\n            _todayDate: () => new Date\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            rightArrow: function(e) {\r\n                e.preventDefault();\r\n                if (isCommandKeyPressed(e)) {\r\n                    this._waitRenderView(1)\r\n                } else {\r\n                    this._moveCurrentDateByOffset(1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            leftArrow: function(e) {\r\n                e.preventDefault();\r\n                if (isCommandKeyPressed(e)) {\r\n                    this._waitRenderView(-1)\r\n                } else {\r\n                    this._moveCurrentDateByOffset(-1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                if (isCommandKeyPressed(e)) {\r\n                    this._navigateUp()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDateByOffset(-1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                if (isCommandKeyPressed(e)) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDateByOffset(1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            home: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var min = this._dateOption(\"min\");\r\n                if (this._view.isDateDisabled(currentDate)) {\r\n                    return\r\n                }\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date)\r\n            },\r\n            end: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var max = this._dateOption(\"max\");\r\n                if (this._view.isDateDisabled(currentDate)) {\r\n                    return\r\n                }\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date)\r\n            },\r\n            pageUp: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(-1 * this._getRtlCorrection())\r\n            },\r\n            pageDown: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(1 * this._getRtlCorrection())\r\n            },\r\n            tab: noop,\r\n            enter: function(e) {\r\n                if (!this._isMaxZoomLevel()) {\r\n                    this._navigateDown()\r\n                } else if (!this._view.isDateDisabled(this.option(\"currentDate\"))) {\r\n                    var value = this._updateTimeComponent(this.option(\"currentDate\"));\r\n                    this._dateValue(value, e)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this.option(optionName || \"value\");\r\n        if (this.option(\"dateSerializationFormat\")) {\r\n            return this.option(\"dateSerializationFormat\")\r\n        }\r\n        if (isNumeric(value)) {\r\n            return \"number\"\r\n        }\r\n        if (!isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    },\r\n    _convertToDate: function(value, optionName) {\r\n        return dateSerialization.deserializeDate(value)\r\n    },\r\n    _dateValue: function(value, event) {\r\n        if (event) {\r\n            if (\"keydown\" === event.type) {\r\n                var cellElement = this._view._getContouredCell().get(0);\r\n                event.target = cellElement\r\n            }\r\n            this._saveValueChangeEvent(event)\r\n        }\r\n        this._dateOption(\"value\", value)\r\n    },\r\n    _dateOption: function(optionName, optionValue) {\r\n        if (1 === arguments.length) {\r\n            return this._convertToDate(this.option(optionName), optionName)\r\n        }\r\n        var serializationFormat = this._getSerializationFormat(optionName);\r\n        this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat))\r\n    },\r\n    _shiftDate: function(zoomLevel, date, offset, reverse) {\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                date.setDate(date.getDate() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.YEAR:\r\n                date.setMonth(date.getMonth() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                date.setFullYear(date.getFullYear() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.CENTURY:\r\n                date.setFullYear(date.getFullYear() + 10 * offset * reverse)\r\n        }\r\n    },\r\n    _moveCurrentDateByOffset: function(offset) {\r\n        var baseDate = this.option(\"currentDate\");\r\n        var currentDate = new Date(baseDate);\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        this._shiftDate(zoomLevel, currentDate, offset, 1);\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        var isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, currentDate, baseDate);\r\n        var isDateForwardInRange = inRange(currentDate, minDate, maxDate) && isDateForwardInNeighborView;\r\n        var dateForward = new Date(currentDate);\r\n        while (isDateForwardInRange) {\r\n            if (!this._view.isDateDisabled(dateForward)) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            this._shiftDate(zoomLevel, dateForward, offset, 1);\r\n            isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, dateForward, baseDate);\r\n            isDateForwardInRange = inRange(dateForward, minDate, maxDate) && isDateForwardInNeighborView\r\n        }\r\n        if (this._view.isDateDisabled(baseDate) || this._view.isDateDisabled(currentDate)) {\r\n            this._waitRenderView(offset > 0 ? 1 : -1)\r\n        } else {\r\n            this.option(\"currentDate\", currentDate)\r\n        }\r\n    },\r\n    _areDatesInSameView(zoomLevel, date1, date2) {\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                return date1.getMonth() === date2.getMonth();\r\n            case ZOOM_LEVEL.YEAR:\r\n                return date1.getYear() === date2.getYear();\r\n            case ZOOM_LEVEL.DECADE:\r\n                return parseInt(date1.getYear() / 10) === parseInt(date2.getYear() / 10);\r\n            case ZOOM_LEVEL.CENTURY:\r\n                return parseInt(date1.getYear() / 100) === parseInt(date2.getYear() / 100)\r\n        }\r\n    },\r\n    _areDatesInNeighborView(zoomLevel, date1, date2) {\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                return (a = date1.getMonth(), b = date2.getMonth(), abs = Math.abs(a - b), Math.min(abs, 12 - abs)) <= 1;\r\n            case ZOOM_LEVEL.YEAR:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 1;\r\n            case ZOOM_LEVEL.DECADE:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 10;\r\n            case ZOOM_LEVEL.CENTURY:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 100\r\n        }\r\n        var a, b, abs\r\n    },\r\n    _moveToClosestAvailableDate: function() {\r\n        var baseDate = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.option(\"currentDate\");\r\n        var currentDate = new Date(baseDate);\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var isCurrentDateAvailable = !this._isDateNotAvailable(currentDate);\r\n        var isDateForwardAvailable = isCurrentDateAvailable;\r\n        var isDateBackwardAvailable = isCurrentDateAvailable;\r\n        var isDateForwardInStartView;\r\n        var isDateBackwardInStartView;\r\n        var dateForward = new Date(currentDate);\r\n        var dateBackward = new Date(currentDate);\r\n        do {\r\n            if (isDateForwardAvailable) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            if (isDateBackwardAvailable) {\r\n                currentDate = dateBackward;\r\n                break\r\n            }\r\n            this._shiftDate(zoomLevel, dateForward, 1, 1);\r\n            this._shiftDate(zoomLevel, dateBackward, 1, -1);\r\n            isDateForwardInStartView = this._areDatesInSameView(zoomLevel, dateForward, baseDate);\r\n            isDateBackwardInStartView = this._areDatesInSameView(zoomLevel, dateBackward, baseDate);\r\n            isDateForwardAvailable = isDateForwardInStartView && !this._isDateNotAvailable(dateForward);\r\n            isDateBackwardAvailable = isDateBackwardInStartView && !this._isDateNotAvailable(dateBackward)\r\n        } while (isDateForwardInStartView || isDateBackwardInStartView);\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _isDateNotAvailable: function(date) {\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        return !inRange(date, minDate, maxDate) || this._view.isDateDisabled(date)\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._correctZoomLevel();\r\n        this._initCurrentDate();\r\n        this._initActions()\r\n    },\r\n    _correctZoomLevel: function() {\r\n        var minZoomLevel = this.option(\"minZoomLevel\");\r\n        var maxZoomLevel = this.option(\"maxZoomLevel\");\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n            return\r\n        }\r\n        if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\r\n            this.option(\"zoomLevel\", maxZoomLevel)\r\n        } else if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n            this.option(\"zoomLevel\", minZoomLevel)\r\n        }\r\n    },\r\n    _initCurrentDate: function() {\r\n        var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _getNormalizedDate: function(date) {\r\n        date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\r\n        return isDefined(date) ? this._getDate(date) : date\r\n    },\r\n    _initActions: function() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\");\r\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\")\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            cell: new FunctionTemplate((function(options) {\r\n                var data = options.model;\r\n                $(options.container).append($(\"<span>\").text(data && data.text || String(data)))\r\n            }))\r\n        });\r\n        this.callBase()\r\n    },\r\n    _updateCurrentDate: function(date) {\r\n        if (fx.isAnimating(this._$viewsWrapper)) {\r\n            fx.stop(this._$viewsWrapper, true)\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        if (min > max) {\r\n            this.option(\"currentDate\", new Date);\r\n            return\r\n        }\r\n        var normalizedDate = this._getNormalizedDate(date);\r\n        if (date.getTime() !== normalizedDate.getTime()) {\r\n            this.option(\"currentDate\", new Date(normalizedDate));\r\n            return\r\n        }\r\n        var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\r\n        if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\r\n            offset = 0\r\n        }\r\n        if (this._view && 0 !== offset && !this._suppressNavigation) {\r\n            this._navigate(offset, normalizedDate)\r\n        } else {\r\n            this._renderNavigator();\r\n            this._setViewContoured(normalizedDate);\r\n            this._updateAriaId(normalizedDate)\r\n        }\r\n    },\r\n    _setViewContoured: function(date) {\r\n        if (this.option(\"skipFocusCheck\") || elementHasFocus(this._focusTarget())) {\r\n            this._view.option(\"contouredDate\", date)\r\n        }\r\n    },\r\n    _getMinDate: function() {\r\n        if (this.min) {\r\n            return this.min\r\n        }\r\n        this.min = this._dateOption(\"min\") || new Date(1e3, 0);\r\n        return this.min\r\n    },\r\n    _getMaxDate: function() {\r\n        if (this.max) {\r\n            return this.max\r\n        }\r\n        this.max = this._dateOption(\"max\") || new Date(3e3, 0);\r\n        return this.max\r\n    },\r\n    _getViewsOffset: function(startDate, endDate) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (zoomLevel === ZOOM_LEVEL.MONTH) {\r\n            return this._getMonthsOffset(startDate, endDate)\r\n        }\r\n        var zoomCorrection;\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.CENTURY:\r\n                zoomCorrection = 100;\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                zoomCorrection = 10;\r\n                break;\r\n            default:\r\n                zoomCorrection = 1\r\n        }\r\n        return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection)\r\n    },\r\n    _getMonthsOffset: function(startDate, endDate) {\r\n        var yearOffset = endDate.getFullYear() - startDate.getFullYear();\r\n        var monthOffset = endDate.getMonth() - startDate.getMonth();\r\n        return 12 * yearOffset + monthOffset\r\n    },\r\n    _waitRenderView: function(offset) {\r\n        if (this._alreadyViewRender) {\r\n            return\r\n        }\r\n        this._alreadyViewRender = true;\r\n        var date = this._getDateByOffset(offset * this._getRtlCorrection());\r\n        this._moveToClosestAvailableDate(date);\r\n        this._waitRenderViewTimeout = setTimeout(() => {\r\n            this._alreadyViewRender = false\r\n        })\r\n    },\r\n    _getRtlCorrection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _getDateByOffset: function(offset, date) {\r\n        var _date;\r\n        date = this._getDate(null !== (_date = date) && void 0 !== _date ? _date : this.option(\"currentDate\"));\r\n        var currentDay = date.getDate();\r\n        var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\r\n        date.setDate(1);\r\n        date.setMonth(date.getMonth() + difference);\r\n        var lastDay = dateUtils.getLastMonthDate(date).getDate();\r\n        date.setDate(currentDay > lastDay ? lastDay : currentDay);\r\n        return date\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        var $element = this.$element();\r\n        $element.addClass(CALENDAR_CLASS);\r\n        this._renderBody();\r\n        $element.append(this.$body);\r\n        this._renderViews();\r\n        this._renderNavigator();\r\n        $element.append(this._navigator.$element());\r\n        this._renderSwipeable();\r\n        this._renderFooter();\r\n        this._updateAriaSelected();\r\n        this._updateAriaId();\r\n        this._moveToClosestAvailableDate()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._setViewContoured(this.option(\"currentDate\"))\r\n    },\r\n    _renderBody: function() {\r\n        if (!this._$viewsWrapper) {\r\n            this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\r\n            this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\r\n            this.$body.append(this._$viewsWrapper)\r\n        }\r\n    },\r\n    _getKeyboardListeners() {\r\n        return this.callBase().concat([this._view])\r\n    },\r\n    _renderViews: function() {\r\n        this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\r\n        var currentDate = this.option(\"currentDate\");\r\n        this._view = this._renderSpecificView(currentDate);\r\n        if (hasWindow()) {\r\n            var beforeDate = this._getDateByOffset(-1, currentDate);\r\n            this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\r\n            var afterDate = this._getDateByOffset(1, currentDate);\r\n            afterDate.setDate(1);\r\n            this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null\r\n        }\r\n        this._translateViews()\r\n    },\r\n    _renderSpecificView: function(date) {\r\n        var specificView = Views[this.option(\"zoomLevel\")];\r\n        var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\r\n        var config = this._viewConfig(date);\r\n        return this._createComponent($view, specificView, config)\r\n    },\r\n    _viewConfig: function(date) {\r\n        var _this$option;\r\n        var disabledDates = this.option(\"disabledDates\");\r\n        disabledDates = isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\r\n        return {\r\n            date: date,\r\n            min: this._getMinDate(),\r\n            max: this._getMaxDate(),\r\n            firstDayOfWeek: null !== (_this$option = this.option(\"firstDayOfWeek\")) && void 0 !== _this$option ? _this$option : dateLocalization.firstDayOfWeekIndex(),\r\n            showWeekNumbers: this.option(\"showWeekNumbers\"),\r\n            weekNumberRule: this.option(\"weekNumberRule\"),\r\n            zoomLevel: this.option(\"zoomLevel\"),\r\n            value: this._dateOption(\"value\"),\r\n            tabIndex: void 0,\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            disabledDates: disabledDates,\r\n            onCellClick: this._cellClickHandler.bind(this),\r\n            cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\r\n            allowValueSelection: this._isMaxZoomLevel(),\r\n            _todayDate: this.option(\"_todayDate\")\r\n        }\r\n    },\r\n    _injectComponent: function(func) {\r\n        var that = this;\r\n        return function(params) {\r\n            extend(params, {\r\n                component: that\r\n            });\r\n            return func(params)\r\n        }\r\n    },\r\n    _isViewAvailable: function(date) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\r\n        var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\r\n        return dateUtils.dateInRange(date, min, max)\r\n    },\r\n    _translateViews: function() {\r\n        move(this._view.$element(), {\r\n            left: 0,\r\n            top: 0\r\n        });\r\n        this._beforeView && move(this._beforeView.$element(), {\r\n            left: this._getViewPosition(-1),\r\n            top: 0\r\n        });\r\n        this._afterView && move(this._afterView.$element(), {\r\n            left: this._getViewPosition(1),\r\n            top: 0\r\n        })\r\n    },\r\n    _getViewPosition: function(coefficient) {\r\n        var rtlCorrection = this.option(\"rtlEnabled\") ? -1 : 1;\r\n        return 100 * coefficient * rtlCorrection + \"%\"\r\n    },\r\n    _cellClickHandler: function(e) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        var isMaxZoomLevel = this._isMaxZoomLevel();\r\n        if (nextView && !isMaxZoomLevel) {\r\n            this._navigateDown(e.event.currentTarget)\r\n        } else {\r\n            var newValue = this._updateTimeComponent(e.value);\r\n            this._dateValue(newValue, e.event);\r\n            this._cellClickAction(e)\r\n        }\r\n    },\r\n    _updateTimeComponent: function(date) {\r\n        var result = new Date(date);\r\n        var currentValue = this._dateOption(\"value\");\r\n        if (currentValue) {\r\n            result.setHours(currentValue.getHours());\r\n            result.setMinutes(currentValue.getMinutes());\r\n            result.setSeconds(currentValue.getSeconds());\r\n            result.setMilliseconds(currentValue.getMilliseconds())\r\n        }\r\n        return result\r\n    },\r\n    _isMaxZoomLevel: function() {\r\n        return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\")\r\n    },\r\n    _navigateDown: function(cell) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (this._isMaxZoomLevel()) {\r\n            return\r\n        }\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        if (!nextView) {\r\n            return\r\n        }\r\n        var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\r\n        if (cell) {\r\n            newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY)\r\n        }\r\n        this._isOtherViewCellClicked = true;\r\n        this.option(\"currentDate\", newCurrentDate);\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._isOtherViewCellClicked = false;\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._moveToClosestAvailableDate();\r\n        this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")))\r\n    },\r\n    _renderNavigator: function() {\r\n        if (!this._navigator) {\r\n            this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig())\r\n        }\r\n        this._navigator.option(\"text\", this._view.getNavigatorCaption());\r\n        this._updateButtonsVisibility()\r\n    },\r\n    _navigatorConfig: function() {\r\n        return {\r\n            text: this._view.getNavigatorCaption(),\r\n            onClick: this._navigatorClickHandler.bind(this),\r\n            onCaptionClick: this._navigateUp.bind(this),\r\n            rtlEnabled: this.option(\"rtlEnabled\")\r\n        }\r\n    },\r\n    _navigatorClickHandler: function(e) {\r\n        var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\r\n        this._moveToClosestAvailableDate(currentDate)\r\n    },\r\n    _navigateUp: function() {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewUp(zoomLevel);\r\n        if (!nextView || this._isMinZoomLevel(zoomLevel)) {\r\n            return\r\n        }\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._moveToClosestAvailableDate();\r\n        this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")))\r\n    },\r\n    _isMinZoomLevel: function(zoomLevel) {\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel\r\n    },\r\n    _updateButtonsVisibility: function() {\r\n        this._navigator.toggleButton(\"next\", !isDefined(this._getRequiredView(\"next\")));\r\n        this._navigator.toggleButton(\"prev\", !isDefined(this._getRequiredView(\"prev\")))\r\n    },\r\n    _renderSwipeable: function() {\r\n        if (!this._swipeable) {\r\n            this._swipeable = this._createComponent(this.$element(), Swipeable, {\r\n                onStart: this._swipeStartHandler.bind(this),\r\n                onUpdated: this._swipeUpdateHandler.bind(this),\r\n                onEnd: this._swipeEndHandler.bind(this),\r\n                itemSizeFunc: this._viewWidth.bind(this)\r\n            })\r\n        }\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        fx.stop(this._$viewsWrapper, true);\r\n        e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\r\n        e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0\r\n    },\r\n    _getRequiredView: function(name) {\r\n        var view;\r\n        var isRtl = this.option(\"rtlEnabled\");\r\n        if (\"next\" === name) {\r\n            view = isRtl ? this._beforeView : this._afterView\r\n        } else if (\"prev\" === name) {\r\n            view = isRtl ? this._afterView : this._beforeView\r\n        }\r\n        return view\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var offset = e.event.offset;\r\n        move(this._$viewsWrapper, {\r\n            left: offset * this._viewWidth(),\r\n            top: 0\r\n        });\r\n        this._updateNavigatorCaption(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset;\r\n        var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\r\n        if (0 === moveOffset) {\r\n            this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\r\n            return\r\n        }\r\n        var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\r\n        if (this._isDateInInvalidRange(date)) {\r\n            if (moveOffset >= 0) {\r\n                date = new Date(this._getMinDate())\r\n            } else {\r\n                date = new Date(this._getMaxDate())\r\n            }\r\n        }\r\n        this.option(\"currentDate\", date)\r\n    },\r\n    _viewWidth: function() {\r\n        if (!this._viewWidthValue) {\r\n            this._viewWidthValue = getWidth(this.$element())\r\n        }\r\n        return this._viewWidthValue\r\n    },\r\n    _updateNavigatorCaption: function(offset) {\r\n        offset *= this._getRtlCorrection();\r\n        var view = this._view;\r\n        if (offset > .5 && this._beforeView) {\r\n            view = this._beforeView\r\n        } else if (offset < -.5 && this._afterView) {\r\n            view = this._afterView\r\n        }\r\n        this._navigator.option(\"text\", view.getNavigatorCaption())\r\n    },\r\n    _isDateInInvalidRange: function(date) {\r\n        if (this._view.isBoundary(date)) {\r\n            return\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        var normalizedDate = dateUtils.normalizeDate(date, min, max);\r\n        return normalizedDate === min || normalizedDate === max\r\n    },\r\n    _renderFooter: function() {\r\n        var showTodayButton = this.option(\"showTodayButton\");\r\n        if (showTodayButton) {\r\n            var $todayButton = this._createComponent($(\"<a>\"), Button, {\r\n                focusStateEnabled: false,\r\n                text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\r\n                onClick: function(args) {\r\n                    this._toTodayView(args)\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\r\n            this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\r\n            this.$element().append(this._$footer)\r\n        }\r\n        this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton)\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        var dateValue = this._convertToDate(value);\r\n        this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN))\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _animateShowView: function() {\r\n        fx.stop(this._view.$element(), true);\r\n        return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise()\r\n    },\r\n    _popAnimationView: function(view, from, to, duration) {\r\n        return fx.animate(view.$element(), {\r\n            type: \"pop\",\r\n            from: {\r\n                scale: from,\r\n                opacity: from\r\n            },\r\n            to: {\r\n                scale: to,\r\n                opacity: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _navigate: function(offset, value) {\r\n        if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\r\n            var newView = this._renderSpecificView(value);\r\n            if (offset > 0) {\r\n                this._afterView && this._afterView.$element().remove();\r\n                this._afterView = newView\r\n            } else {\r\n                this._beforeView && this._beforeView.$element().remove();\r\n                this._beforeView = newView\r\n            }\r\n            this._translateViews()\r\n        }\r\n        var rtlCorrection = this._getRtlCorrection();\r\n        var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\r\n        var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\r\n        var viewsWrapperPosition = this._$viewsWrapper.position().left;\r\n        if (viewsWrapperPosition !== endPosition) {\r\n            if (this._preventViewChangeAnimation) {\r\n                this._wrapperAnimationEndHandler(offset, value)\r\n            } else {\r\n                this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value))\r\n            }\r\n        }\r\n    },\r\n    _animateWrapper: function(to, duration) {\r\n        return fx.animate(this._$viewsWrapper, {\r\n            type: \"slide\",\r\n            from: {\r\n                left: this._$viewsWrapper.position().left\r\n            },\r\n            to: {\r\n                left: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _getDate: value => new Date(value),\r\n    _toTodayView: function(args) {\r\n        this._saveValueChangeEvent(args.event);\r\n        var today = new Date;\r\n        if (this._isMaxZoomLevel()) {\r\n            this._dateOption(\"value\", today);\r\n            return\r\n        }\r\n        this._preventViewChangeAnimation = true;\r\n        this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\r\n        this._dateOption(\"value\", today);\r\n        this._animateShowView();\r\n        this._preventViewChangeAnimation = false\r\n    },\r\n    _wrapperAnimationEndHandler: function(offset, newDate) {\r\n        this._rearrangeViews(offset);\r\n        this._translateViews();\r\n        this._resetLocation();\r\n        this._renderNavigator();\r\n        this._setViewContoured(newDate);\r\n        this._updateAriaId(newDate);\r\n        this._updateAriaSelected()\r\n    },\r\n    _rearrangeViews: function(offset) {\r\n        if (0 === offset) {\r\n            return\r\n        }\r\n        var viewOffset;\r\n        var viewToCreateKey;\r\n        var viewToRemoveKey;\r\n        if (offset < 0) {\r\n            viewOffset = 1;\r\n            viewToCreateKey = \"_beforeView\";\r\n            viewToRemoveKey = \"_afterView\"\r\n        } else {\r\n            viewOffset = -1;\r\n            viewToCreateKey = \"_afterView\";\r\n            viewToRemoveKey = \"_beforeView\"\r\n        }\r\n        if (!this[viewToCreateKey]) {\r\n            return\r\n        }\r\n        var destinationDate = this[viewToCreateKey].option(\"date\");\r\n        if (this[viewToRemoveKey]) {\r\n            this[viewToRemoveKey].$element().remove()\r\n        }\r\n        if (offset === viewOffset) {\r\n            this[viewToRemoveKey] = this._view\r\n        } else {\r\n            this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\r\n            this._view.$element().remove()\r\n        }\r\n        this._view = this[viewToCreateKey];\r\n        var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\r\n        this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null\r\n    },\r\n    _resetLocation: function() {\r\n        move(this._$viewsWrapper, {\r\n            left: 0,\r\n            top: 0\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._clearViewWidthCache();\r\n        delete this._$viewsWrapper;\r\n        delete this._navigator;\r\n        delete this._$footer\r\n    },\r\n    _clearViewWidthCache: function() {\r\n        delete this._viewWidthValue\r\n    },\r\n    _disposeViews: function() {\r\n        this._view.$element().remove();\r\n        this._beforeView && this._beforeView.$element().remove();\r\n        this._afterView && this._afterView.$element().remove();\r\n        delete this._view;\r\n        delete this._beforeView;\r\n        delete this._afterView\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._waitRenderViewTimeout);\r\n        this.callBase()\r\n    },\r\n    _refreshViews: function() {\r\n        this._disposeViews();\r\n        this._renderViews()\r\n    },\r\n    _visibilityChanged: function() {\r\n        this._translateViews()\r\n    },\r\n    _focusInHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", this.option(\"currentDate\"))\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", null)\r\n    },\r\n    _updateViewsValue: function(value) {\r\n        var newValue = value ? new Date(value) : null;\r\n        this._view.option(\"value\", newValue);\r\n        this._beforeView && this._beforeView.option(\"value\", newValue);\r\n        this._afterView && this._afterView.option(\"value\", newValue)\r\n    },\r\n    _updateAriaSelected: function(value, previousValue) {\r\n        var _value;\r\n        value = null !== (_value = value) && void 0 !== _value ? _value : this._dateOption(\"value\");\r\n        var $prevSelectedCell = this._view._getCellByDate(previousValue);\r\n        var $selectedCell = this._view._getCellByDate(value);\r\n        this.setAria(\"selected\", void 0, $prevSelectedCell);\r\n        this.setAria(\"selected\", true, $selectedCell);\r\n        if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\r\n            this._updateAriaId(value)\r\n        }\r\n    },\r\n    _updateAriaId: function(value) {\r\n        var _value2;\r\n        value = null !== (_value2 = value) && void 0 !== _value2 ? _value2 : this.option(\"currentDate\");\r\n        var ariaId = \"dx-\" + new Guid;\r\n        var $newCell = this._view._getCellByDate(value);\r\n        this.setAria(\"id\", ariaId, $newCell);\r\n        this.setAria(\"activedescendant\", ariaId);\r\n        this._onContouredChanged(ariaId)\r\n    },\r\n    _suppressingNavigation: function(callback, args) {\r\n        this._suppressNavigation = true;\r\n        callback.apply(this, args);\r\n        delete this._suppressNavigation\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._clearViewWidthCache();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this.min = void 0;\r\n                this.max = void 0;\r\n                this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._refreshViews();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"currentDate\":\r\n                this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\r\n                this._updateCurrentDate(value);\r\n                break;\r\n            case \"zoomLevel\":\r\n                this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\r\n                this._correctZoomLevel();\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                this._updateAriaId();\r\n                break;\r\n            case \"minZoomLevel\":\r\n            case \"maxZoomLevel\":\r\n                this._correctZoomLevel();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"value\":\r\n                value = this._convertToDate(value);\r\n                previousValue = this._convertToDate(previousValue);\r\n                this._updateAriaSelected(value, previousValue);\r\n                this.option(\"currentDate\", isDefined(value) ? new Date(value) : new Date);\r\n                this._updateViewsValue(value);\r\n                this._setSubmitValue(value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"onCellClick\":\r\n                this._view.option(\"onCellClick\", value);\r\n                break;\r\n            case \"onContouredChanged\":\r\n                this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\r\n                break;\r\n            case \"disabledDates\":\r\n            case \"dateSerializationFormat\":\r\n            case \"cellTemplate\":\r\n            case \"showTodayButton\":\r\n                this._invalidate();\r\n                break;\r\n            case \"skipFocusCheck\":\r\n                break;\r\n            case \"_todayDate\":\r\n            case \"showWeekNumbers\":\r\n            case \"weekNumberRule\":\r\n                this._refreshViews();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    getContouredDate: function() {\r\n        return this._view.option(\"contouredDate\")\r\n    }\r\n});\r\nregisterComponent(\"dxCalendar\", Calendar);\r\nexport default Calendar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}