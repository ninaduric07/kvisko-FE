{"ast":null,"code":"/**\r\n * DevExtreme (esm/exporter/svg_creator.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport ajax from \"../core/utils/ajax\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport { isFunction } from \"../core/utils/type\";\nimport { each } from \"../core/utils/iterator\";\nimport { getSvgElement, getSvgMarkup, HIDDEN_FOR_EXPORT } from \"../core/utils/svg\";\nimport { when, Deferred } from \"../core/utils/deferred\";\nexport var svgCreator = {\n  _markup: \"\",\n  _imageArray: {},\n  _imageDeferreds: [],\n  _getBinaryFile: function (src, callback) {\n    ajax.sendRequest({\n      url: src,\n      method: \"GET\",\n      responseType: \"arraybuffer\"\n    }).done(callback).fail(function () {\n      callback(false);\n    });\n  },\n  _loadImages: function () {\n    var that = this;\n    each(that._imageArray, function (src) {\n      var deferred = new Deferred();\n      that._imageDeferreds.push(deferred);\n      that._getBinaryFile(src, function (response) {\n        if (!response) {\n          delete that._imageArray[src];\n          deferred.resolve();\n          return;\n        }\n        var i;\n        var binary = \"\";\n        var bytes = new Uint8Array(response);\n        var length = bytes.byteLength;\n        for (i = 0; i < length; i++) {\n          binary += String.fromCharCode(bytes[i]);\n        }\n        that._imageArray[src] = \"data:image/png;base64,\" + window.btoa(binary);\n        deferred.resolve();\n      });\n    });\n  },\n  _parseImages: function (element) {\n    var href;\n    var that = this;\n    if (\"image\" === element.tagName) {\n      href = $(element).attr(\"href\") || $(element).attr(\"xlink:href\");\n      if (!that._imageArray[href]) {\n        that._imageArray[href] = \"\";\n      }\n    }\n    each(element.childNodes, function (_, element) {\n      that._parseImages(element);\n    });\n  },\n  _prepareImages: function (svgElem) {\n    this._parseImages(svgElem);\n    this._loadImages();\n    return when.apply($, this._imageDeferreds);\n  },\n  getData: function (data, options) {\n    var markup;\n    var that = this;\n    var svgElem = getSvgElement(data);\n    var $svgObject = $(svgElem);\n    $svgObject.find(\"[\".concat(HIDDEN_FOR_EXPORT, \"]\")).remove();\n    markup = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>' + getSvgMarkup($svgObject.get(0), options.backgroundColor);\n    return that._prepareImages(svgElem).then(() => {\n      each(that._imageArray, function (href, dataURI) {\n        var regexpString = \"href=['|\\\"]\".concat(href, \"['|\\\"]\");\n        markup = markup.replace(new RegExp(regexpString, \"gi\"), 'href=\"'.concat(dataURI, '\"'));\n      });\n      return isFunction(window.Blob) ? that._getBlob(markup) : that._getBase64(markup);\n    });\n  },\n  _getBlob: function (markup) {\n    return new window.Blob([markup], {\n      type: \"image/svg+xml\"\n    });\n  },\n  _getBase64: function (markup) {\n    return window.btoa(markup);\n  }\n};\nexport function getData(data, options) {\n  return svgCreator.getData(data, options);\n}","map":{"version":3,"names":["$","ajax","getWindow","window","isFunction","each","getSvgElement","getSvgMarkup","HIDDEN_FOR_EXPORT","when","Deferred","svgCreator","_markup","_imageArray","_imageDeferreds","_getBinaryFile","src","callback","sendRequest","url","method","responseType","done","fail","_loadImages","that","deferred","push","response","resolve","i","binary","bytes","Uint8Array","length","byteLength","String","fromCharCode","btoa","_parseImages","element","href","tagName","attr","childNodes","_","_prepareImages","svgElem","apply","getData","data","options","markup","$svgObject","find","concat","remove","get","backgroundColor","then","dataURI","regexpString","replace","RegExp","Blob","_getBlob","_getBase64","type"],"sources":["C:/Users/ninad/OneDrive/Radna povr≈°ina/zavrsni/client/node_modules/devextreme/esm/exporter/svg_creator.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/exporter/svg_creator.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport ajax from \"../core/utils/ajax\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport {\r\n    isFunction\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    getSvgElement,\r\n    getSvgMarkup,\r\n    HIDDEN_FOR_EXPORT\r\n} from \"../core/utils/svg\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nexport var svgCreator = {\r\n    _markup: \"\",\r\n    _imageArray: {},\r\n    _imageDeferreds: [],\r\n    _getBinaryFile: function(src, callback) {\r\n        ajax.sendRequest({\r\n            url: src,\r\n            method: \"GET\",\r\n            responseType: \"arraybuffer\"\r\n        }).done(callback).fail((function() {\r\n            callback(false)\r\n        }))\r\n    },\r\n    _loadImages: function() {\r\n        var that = this;\r\n        each(that._imageArray, (function(src) {\r\n            var deferred = new Deferred;\r\n            that._imageDeferreds.push(deferred);\r\n            that._getBinaryFile(src, (function(response) {\r\n                if (!response) {\r\n                    delete that._imageArray[src];\r\n                    deferred.resolve();\r\n                    return\r\n                }\r\n                var i;\r\n                var binary = \"\";\r\n                var bytes = new Uint8Array(response);\r\n                var length = bytes.byteLength;\r\n                for (i = 0; i < length; i++) {\r\n                    binary += String.fromCharCode(bytes[i])\r\n                }\r\n                that._imageArray[src] = \"data:image/png;base64,\" + window.btoa(binary);\r\n                deferred.resolve()\r\n            }))\r\n        }))\r\n    },\r\n    _parseImages: function(element) {\r\n        var href;\r\n        var that = this;\r\n        if (\"image\" === element.tagName) {\r\n            href = $(element).attr(\"href\") || $(element).attr(\"xlink:href\");\r\n            if (!that._imageArray[href]) {\r\n                that._imageArray[href] = \"\"\r\n            }\r\n        }\r\n        each(element.childNodes, (function(_, element) {\r\n            that._parseImages(element)\r\n        }))\r\n    },\r\n    _prepareImages: function(svgElem) {\r\n        this._parseImages(svgElem);\r\n        this._loadImages();\r\n        return when.apply($, this._imageDeferreds)\r\n    },\r\n    getData: function(data, options) {\r\n        var markup;\r\n        var that = this;\r\n        var svgElem = getSvgElement(data);\r\n        var $svgObject = $(svgElem);\r\n        $svgObject.find(\"[\".concat(HIDDEN_FOR_EXPORT, \"]\")).remove();\r\n        markup = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>' + getSvgMarkup($svgObject.get(0), options.backgroundColor);\r\n        return that._prepareImages(svgElem).then(() => {\r\n            each(that._imageArray, (function(href, dataURI) {\r\n                var regexpString = \"href=['|\\\"]\".concat(href, \"['|\\\"]\");\r\n                markup = markup.replace(new RegExp(regexpString, \"gi\"), 'href=\"'.concat(dataURI, '\"'))\r\n            }));\r\n            return isFunction(window.Blob) ? that._getBlob(markup) : that._getBase64(markup)\r\n        })\r\n    },\r\n    _getBlob: function(markup) {\r\n        return new window.Blob([markup], {\r\n            type: \"image/svg+xml\"\r\n        })\r\n    },\r\n    _getBase64: function(markup) {\r\n        return window.btoa(markup)\r\n    }\r\n};\r\nexport function getData(data, options) {\r\n    return svgCreator.getData(data, options)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}