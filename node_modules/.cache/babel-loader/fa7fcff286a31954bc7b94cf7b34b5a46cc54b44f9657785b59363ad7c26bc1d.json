{"ast":null,"code":"/**\r\n * DevExtreme (esm/data/store_helper.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { grep } from \"../core/utils/common\";\nimport { extend } from \"../core/utils/extend\";\nimport { each } from \"../core/utils/iterator\";\nimport arrayQuery from \"./array_query\";\nimport { normalizeSortingInfo } from \"./utils\";\nfunction multiLevelGroup(query, groupInfo) {\n  query = query.groupBy(groupInfo[0].selector);\n  if (groupInfo.length > 1) {\n    query = query.select(function (g) {\n      return extend({}, g, {\n        items: multiLevelGroup(arrayQuery(g.items), groupInfo.slice(1)).toArray()\n      });\n    });\n  }\n  return query;\n}\nfunction arrangeSortingInfo(groupInfo, sortInfo) {\n  var filteredGroup = [];\n  each(groupInfo, function (_, group) {\n    var collision = grep(sortInfo, function (sort) {\n      return group.selector === sort.selector;\n    });\n    if (collision.length < 1) {\n      filteredGroup.push(group);\n    }\n  });\n  return filteredGroup.concat(sortInfo);\n}\nfunction queryByOptions(query, options, isCountQuery) {\n  options = options || {};\n  var filter = options.filter;\n  if (filter) {\n    query = query.filter(filter);\n  }\n  if (isCountQuery) {\n    return query;\n  }\n  var sort = options.sort;\n  var select = options.select;\n  var group = options.group;\n  var skip = options.skip;\n  var take = options.take;\n  if (group) {\n    group = normalizeSortingInfo(group);\n    group.keepInitialKeyOrder = !!options.group.keepInitialKeyOrder;\n  }\n  if (sort || group) {\n    sort = normalizeSortingInfo(sort || []);\n    if (group && !group.keepInitialKeyOrder) {\n      sort = arrangeSortingInfo(group, sort);\n    }\n    each(sort, function (index) {\n      query = query[index ? \"thenBy\" : \"sortBy\"](this.selector, this.desc, this.compare);\n    });\n  }\n  if (select) {\n    query = query.select(select);\n  }\n  if (group) {\n    query = multiLevelGroup(query, group);\n  }\n  if (take || skip) {\n    query = query.slice(skip || 0, take);\n  }\n  return query;\n}\nexport default {\n  multiLevelGroup: multiLevelGroup,\n  arrangeSortingInfo: arrangeSortingInfo,\n  queryByOptions: queryByOptions\n};","map":{"version":3,"names":["grep","extend","each","arrayQuery","normalizeSortingInfo","multiLevelGroup","query","groupInfo","groupBy","selector","length","select","g","items","slice","toArray","arrangeSortingInfo","sortInfo","filteredGroup","_","group","collision","sort","push","concat","queryByOptions","options","isCountQuery","filter","skip","take","keepInitialKeyOrder","index","desc","compare"],"sources":["C:/Users/ninad/OneDrive/Radna povrÅ¡ina/zavrsni/client/node_modules/devextreme/esm/data/store_helper.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/data/store_helper.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    grep\r\n} from \"../core/utils/common\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport arrayQuery from \"./array_query\";\r\nimport {\r\n    normalizeSortingInfo\r\n} from \"./utils\";\r\n\r\nfunction multiLevelGroup(query, groupInfo) {\r\n    query = query.groupBy(groupInfo[0].selector);\r\n    if (groupInfo.length > 1) {\r\n        query = query.select((function(g) {\r\n            return extend({}, g, {\r\n                items: multiLevelGroup(arrayQuery(g.items), groupInfo.slice(1)).toArray()\r\n            })\r\n        }))\r\n    }\r\n    return query\r\n}\r\n\r\nfunction arrangeSortingInfo(groupInfo, sortInfo) {\r\n    var filteredGroup = [];\r\n    each(groupInfo, (function(_, group) {\r\n        var collision = grep(sortInfo, (function(sort) {\r\n            return group.selector === sort.selector\r\n        }));\r\n        if (collision.length < 1) {\r\n            filteredGroup.push(group)\r\n        }\r\n    }));\r\n    return filteredGroup.concat(sortInfo)\r\n}\r\n\r\nfunction queryByOptions(query, options, isCountQuery) {\r\n    options = options || {};\r\n    var filter = options.filter;\r\n    if (filter) {\r\n        query = query.filter(filter)\r\n    }\r\n    if (isCountQuery) {\r\n        return query\r\n    }\r\n    var sort = options.sort;\r\n    var select = options.select;\r\n    var group = options.group;\r\n    var skip = options.skip;\r\n    var take = options.take;\r\n    if (group) {\r\n        group = normalizeSortingInfo(group);\r\n        group.keepInitialKeyOrder = !!options.group.keepInitialKeyOrder\r\n    }\r\n    if (sort || group) {\r\n        sort = normalizeSortingInfo(sort || []);\r\n        if (group && !group.keepInitialKeyOrder) {\r\n            sort = arrangeSortingInfo(group, sort)\r\n        }\r\n        each(sort, (function(index) {\r\n            query = query[index ? \"thenBy\" : \"sortBy\"](this.selector, this.desc, this.compare)\r\n        }))\r\n    }\r\n    if (select) {\r\n        query = query.select(select)\r\n    }\r\n    if (group) {\r\n        query = multiLevelGroup(query, group)\r\n    }\r\n    if (take || skip) {\r\n        query = query.slice(skip || 0, take)\r\n    }\r\n    return query\r\n}\r\nexport default {\r\n    multiLevelGroup: multiLevelGroup,\r\n    arrangeSortingInfo: arrangeSortingInfo,\r\n    queryByOptions: queryByOptions\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}