{"ast":null,"code":"/**\r\n * DevExtreme (esm/exporter/image_creator.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport Color from \"../color\";\nimport { isFunction, isPromise, isDefined } from \"../core/utils/type\";\nimport { getSvgElement, HIDDEN_FOR_EXPORT } from \"../core/utils/svg\";\nimport { each as _each, map as _map } from \"../core/utils/iterator\";\nimport { extend } from \"../core/utils/extend\";\nimport domAdapter from \"../core/dom_adapter\";\nimport { contains } from \"../core/utils/dom\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport { camelize } from \"../core/utils/inflector\";\nimport { Deferred, fromPromise } from \"../core/utils/deferred\";\nvar _math = Math;\nvar PI = _math.PI;\nvar _min = _math.min;\nvar _abs = _math.abs;\nvar _sqrt = _math.sqrt;\nvar _pow = _math.pow;\nvar _atan2 = _math.atan2;\nvar _cos = _math.cos;\nvar _sin = _math.sin;\nvar _number = Number;\nvar IMAGE_QUALITY = 1;\nvar TEXT_DECORATION_LINE_WIDTH_COEFF = .05;\nvar DEFAULT_FONT_SIZE = \"10px\";\nvar DEFAULT_FONT_FAMILY = \"sans-serif\";\nvar DEFAULT_TEXT_COLOR = \"#000\";\nvar parseAttributes;\nfunction getStringFromCanvas(canvas, mimeType) {\n  var dataURL = canvas.toDataURL(mimeType, IMAGE_QUALITY);\n  var imageData = window.atob(dataURL.substring((\"data:\" + mimeType + \";base64,\").length));\n  return imageData;\n}\nfunction arcTo(x1, y1, x2, y2, radius, largeArcFlag, clockwise, context) {\n  var cBx = (x1 + x2) / 2;\n  var cBy = (y1 + y2) / 2;\n  var aB = _atan2(y1 - y2, x1 - x2);\n  var k = largeArcFlag ? 1 : -1;\n  aB += PI / 180 * 90 * (clockwise ? 1 : -1);\n  var opSide = _sqrt(_pow(x2 - x1, 2) + _pow(y2 - y1, 2)) / 2;\n  var adjSide = _sqrt(_abs(_pow(radius, 2) - _pow(opSide, 2)));\n  var centerX = cBx + k * (adjSide * _cos(aB));\n  var centerY = cBy + k * (adjSide * _sin(aB));\n  var startAngle = _atan2(y1 - centerY, x1 - centerX);\n  var endAngle = _atan2(y2 - centerY, x2 - centerX);\n  context.arc(centerX, centerY, radius, startAngle, endAngle, !clockwise);\n}\nfunction getElementOptions(element, rootAppended) {\n  var attr = parseAttributes(element.attributes || {});\n  var options = extend({}, attr, {\n    text: element.textContent.replace(/\\s+/g, \" \"),\n    textAlign: \"middle\" === attr[\"text-anchor\"] ? \"center\" : attr[\"text-anchor\"]\n  });\n  var transform = attr.transform;\n  var coords;\n  if (transform) {\n    coords = transform.match(/translate\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*)*/);\n    if (coords) {\n      coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\n      options.translateX = _number(coords[0]);\n      options.translateY = coords[1] ? _number(coords[1]) : 0;\n    }\n    coords = transform.match(/rotate\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*,*\\s*-*\\d+([.]\\d+)*)*/);\n    if (coords) {\n      coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\n      options.rotationAngle = _number(coords[0]);\n      options.rotationX = coords[1] && _number(coords[1]);\n      options.rotationY = coords[2] && _number(coords[2]);\n    }\n    coords = transform.match(/scale\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*)*/);\n    if (coords) {\n      coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\n      options.scaleX = _number(coords[0]);\n      if (coords.length > 1) {\n        options.scaleY = _number(coords[1]);\n      } else {\n        options.scaleY = options.scaleX;\n      }\n    }\n  }\n  parseStyles(element, options, rootAppended);\n  return options;\n}\nfunction drawRect(context, options) {\n  var x = options.x;\n  var y = options.y;\n  var width = options.width;\n  var height = options.height;\n  var cornerRadius = options.rx;\n  if (!cornerRadius) {\n    context.rect(x, y, width, height);\n  } else {\n    cornerRadius = _min(cornerRadius, width / 2, height / 2);\n    context.save();\n    context.translate(x, y);\n    context.moveTo(width / 2, 0);\n    context.arcTo(width, 0, width, height, cornerRadius);\n    context.arcTo(width, height, 0, height, cornerRadius);\n    context.arcTo(0, height, 0, 0, cornerRadius);\n    context.arcTo(0, 0, cornerRadius, 0, cornerRadius);\n    context.lineTo(width / 2, 0);\n    context.restore();\n  }\n}\nfunction drawImage(context, options, shared) {\n  var d = new Deferred();\n  var image = new window.Image();\n  image.onload = function () {\n    context.save();\n    context.globalAlpha = options.globalAlpha;\n    transformElement(context, options);\n    clipElement(context, options, shared);\n    context.drawImage(image, options.x || 0, options.y || 0, options.width, options.height);\n    context.restore();\n    d.resolve();\n  };\n  image.onerror = function () {\n    d.resolve();\n  };\n  image.setAttribute(\"crossOrigin\", \"anonymous\");\n  image.src = options.href || options[\"xlink:href\"];\n  return d;\n}\nfunction drawPath(context, dAttr) {\n  var dArray = dAttr.replace(/,/g, \" \").split(/([A-Z])/i).filter(item => \"\" !== item.trim());\n  var i = 0;\n  var params;\n  var prevParams;\n  var prevParamsLen;\n  do {\n    params = (dArray[i + 1] || \"\").trim().split(\" \");\n    switch (dArray[i]) {\n      case \"M\":\n        context.moveTo(_number(params[0]), _number(params[1]));\n        i += 2;\n        break;\n      case \"L\":\n        for (var j = 0; j < params.length / 2; j++) {\n          context.lineTo(_number(params[2 * j]), _number(params[2 * j + 1]));\n        }\n        i += 2;\n        break;\n      case \"C\":\n        context.bezierCurveTo(_number(params[0]), _number(params[1]), _number(params[2]), _number(params[3]), _number(params[4]), _number(params[5]));\n        i += 2;\n        break;\n      case \"a\":\n        prevParams = dArray[i - 1].trim().split(\" \");\n        prevParamsLen = prevParams.length - 1;\n        arcTo(_number(prevParams[prevParamsLen - 1]), _number(prevParams[prevParamsLen]), _number(prevParams[prevParamsLen - 1]) + _number(params[5]), _number(prevParams[prevParamsLen]) + _number(params[6]), _number(params[0]), _number(params[3]), _number(params[4]), context);\n        i += 2;\n        break;\n      case \"A\":\n        prevParams = dArray[i - 1].trim().split(\" \");\n        prevParamsLen = prevParams.length - 1;\n        arcTo(_number(prevParams[prevParamsLen - 1]), _number(prevParams[prevParamsLen]), _number(params[5]), _number(params[6]), _number(params[0]), _number(params[3]), _number(params[4]), context);\n        i += 2;\n        break;\n      case \"Z\":\n        context.closePath();\n        i += 1;\n        break;\n      default:\n        i++;\n    }\n  } while (i < dArray.length);\n}\nfunction parseStyles(element, options, rootAppended) {\n  var style = element.style || {};\n  var field;\n  for (field in style) {\n    if (\"\" !== style[field]) {\n      options[camelize(field)] = style[field];\n    }\n  }\n  if (rootAppended && domAdapter.isElementNode(element)) {\n    style = window.getComputedStyle(element);\n    [\"fill\", \"stroke\", \"stroke-width\", \"font-family\", \"font-size\", \"font-style\", \"font-weight\"].forEach(function (prop) {\n      if (prop in style && \"\" !== style[prop]) {\n        options[camelize(prop)] = style[prop];\n      }\n    });\n    [\"opacity\", \"fill-opacity\", \"stroke-opacity\"].forEach(function (prop) {\n      if (prop in style && \"\" !== style[prop] && \"1\" !== style[prop]) {\n        options[prop] = _number(style[prop]);\n      }\n    });\n  }\n  options.textDecoration = options.textDecoration || options.textDecorationLine;\n  options.globalAlpha = isDefined(options.opacity) ? options.opacity : options.globalAlpha;\n}\nfunction parseUrl(urlString) {\n  var matches = urlString && urlString.match(/url\\(.*#(.*?)[\"']?\\)/i);\n  return matches && matches[1];\n}\nfunction setFontStyle(context, options) {\n  var fontParams = [];\n  options.fontSize = options.fontSize || DEFAULT_FONT_SIZE;\n  options.fontFamily = options.fontFamily || DEFAULT_FONT_FAMILY;\n  options.fill = options.fill || DEFAULT_TEXT_COLOR;\n  options.fontStyle && fontParams.push(options.fontStyle);\n  options.fontWeight && fontParams.push(options.fontWeight);\n  fontParams.push(options.fontSize);\n  fontParams.push(options.fontFamily);\n  context.font = fontParams.join(\" \");\n  context.textAlign = options.textAlign;\n  context.fillStyle = options.fill;\n  context.globalAlpha = options.globalAlpha;\n}\nfunction drawText(context, options, shared) {\n  setFontStyle(context, options);\n  applyFilter(context, options, shared);\n  options.text && context.fillText(options.text, options.x || 0, options.y || 0);\n  strokeElement(context, options, true);\n  drawTextDecoration(context, options, shared);\n}\nfunction drawTextDecoration(context, options, shared) {\n  if (!options.textDecoration || \"none\" === options.textDecoration) {\n    return;\n  }\n  var x = options.x;\n  var textWidth = context.measureText(options.text).width;\n  var textHeight = parseInt(options.fontSize, 10);\n  var lineHeight = textHeight * TEXT_DECORATION_LINE_WIDTH_COEFF < 1 ? 1 : textHeight * TEXT_DECORATION_LINE_WIDTH_COEFF;\n  var y = options.y;\n  switch (options.textDecoration) {\n    case \"line-through\":\n      y -= textHeight / 3 + lineHeight / 2;\n      break;\n    case \"overline\":\n      y -= textHeight - lineHeight;\n      break;\n    case \"underline\":\n      y += lineHeight;\n  }\n  context.rect(x, y, textWidth, lineHeight);\n  fillElement(context, options, shared);\n  strokeElement(context, options);\n}\nfunction aggregateOpacity(options) {\n  options.strokeOpacity = void 0 !== options[\"stroke-opacity\"] ? options[\"stroke-opacity\"] : 1;\n  options.fillOpacity = void 0 !== options[\"fill-opacity\"] ? options[\"fill-opacity\"] : 1;\n  if (void 0 !== options.opacity) {\n    options.strokeOpacity *= options.opacity;\n    options.fillOpacity *= options.opacity;\n  }\n}\nfunction hasTspan(element) {\n  var nodes = element.childNodes;\n  for (var i = 0; i < nodes.length; i++) {\n    if (\"tspan\" === nodes[i].tagName) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction drawTextElement(childNodes, context, options, shared) {\n  var lines = [];\n  var line;\n  var offset = 0;\n  for (var i = 0; i < childNodes.length; i++) {\n    var element = childNodes[i];\n    if (void 0 === element.tagName) {\n      drawElement(element, context, options, shared);\n    } else if (\"tspan\" === element.tagName || \"text\" === element.tagName) {\n      var elementOptions = getElementOptions(element, shared.rootAppended);\n      var mergedOptions = extend({}, options, elementOptions);\n      if (\"tspan\" === element.tagName && hasTspan(element)) {\n        drawTextElement(element.childNodes, context, mergedOptions, shared);\n        continue;\n      }\n      mergedOptions.textAlign = \"start\";\n      if (!line || void 0 !== elementOptions.x) {\n        line = {\n          elements: [],\n          options: [],\n          widths: [],\n          offsets: []\n        };\n        lines.push(line);\n      }\n      if (void 0 !== elementOptions.y) {\n        offset = 0;\n      }\n      if (void 0 !== elementOptions.dy) {\n        offset += parseFloat(elementOptions.dy);\n      }\n      line.elements.push(element);\n      line.options.push(mergedOptions);\n      line.offsets.push(offset);\n      setFontStyle(context, mergedOptions);\n      line.widths.push(context.measureText(mergedOptions.text).width);\n    }\n  }\n  lines.forEach(function (line) {\n    var commonWidth = line.widths.reduce(function (commonWidth, width) {\n      return commonWidth + width;\n    }, 0);\n    var xDiff = 0;\n    var currentOffset = 0;\n    if (\"center\" === options.textAlign) {\n      xDiff = commonWidth / 2;\n    }\n    if (\"end\" === options.textAlign) {\n      xDiff = commonWidth;\n    }\n    line.options.forEach(function (o, index) {\n      var width = line.widths[index];\n      o.x = o.x - xDiff + currentOffset;\n      o.y += line.offsets[index];\n      currentOffset += width;\n    });\n    line.elements.forEach(function (element, index) {\n      drawTextElement(element.childNodes, context, line.options[index], shared);\n    });\n  });\n}\nfunction drawElement(element, context, parentOptions, shared) {\n  var tagName = element.tagName;\n  var isText = \"text\" === tagName || \"tspan\" === tagName || void 0 === tagName;\n  var isImage = \"image\" === tagName;\n  var options = extend({}, parentOptions, getElementOptions(element, shared.rootAppended));\n  if (\"hidden\" === options.visibility || options[HIDDEN_FOR_EXPORT]) {\n    return;\n  }\n  context.save();\n  !isImage && transformElement(context, options);\n  clipElement(context, options, shared);\n  aggregateOpacity(options);\n  var promise;\n  context.beginPath();\n  switch (element.tagName) {\n    case void 0:\n      drawText(context, options, shared);\n      break;\n    case \"text\":\n    case \"tspan\":\n      drawTextElement(element.childNodes, context, options, shared);\n      break;\n    case \"image\":\n      promise = drawImage(context, options, shared);\n      break;\n    case \"path\":\n      drawPath(context, options.d);\n      break;\n    case \"rect\":\n      drawRect(context, options);\n      context.closePath();\n      break;\n    case \"circle\":\n      context.arc(options.cx, options.cy, options.r, 0, 2 * PI, 1);\n  }\n  if (!isText) {\n    applyFilter(context, options, shared);\n    fillElement(context, options, shared);\n    strokeElement(context, options);\n  }\n  applyGradient(context, options, shared, element);\n  context.restore();\n  return promise;\n}\nfunction applyGradient(context, options, _ref, element) {\n  var {\n    gradients: gradients\n  } = _ref;\n  if (0 === gradients.length) {\n    return;\n  }\n  var id = parseUrl(options.fill);\n  if (id && gradients[id]) {\n    var box = element.getBBox();\n    var gradient = context.createLinearGradient(box.x, 0, box.x + box.width, 0);\n    gradients[id].forEach(opt => {\n      var offset = parseInt(opt.offset.replace(/%/, \"\"));\n      gradient.addColorStop(offset / 100, opt.stopColor);\n    });\n    context.globalAlpha = options.opacity;\n    context.fillStyle = gradient;\n    context.fill();\n  }\n}\nfunction applyFilter(context, options, shared) {\n  var filterOptions;\n  var id = parseUrl(options.filter);\n  if (id) {\n    filterOptions = shared.filters[id];\n    if (!filterOptions) {\n      filterOptions = {\n        offsetX: 0,\n        offsetY: 0,\n        blur: 0,\n        color: \"#000\"\n      };\n    }\n    context.shadowOffsetX = filterOptions.offsetX;\n    context.shadowOffsetY = filterOptions.offsetY;\n    context.shadowColor = filterOptions.color;\n    context.shadowBlur = filterOptions.blur;\n  }\n}\nfunction transformElement(context, options) {\n  context.translate(options.translateX || 0, options.translateY || 0);\n  options.translateX = void 0;\n  options.translateY = void 0;\n  if (options.rotationAngle) {\n    context.translate(options.rotationX || 0, options.rotationY || 0);\n    context.rotate(options.rotationAngle * PI / 180);\n    context.translate(-(options.rotationX || 0), -(options.rotationY || 0));\n    options.rotationAngle = void 0;\n    options.rotationX = void 0;\n    options.rotationY = void 0;\n  }\n  if (isFinite(options.scaleX)) {\n    context.scale(options.scaleX, options.scaleY);\n    options.scaleX = void 0;\n    options.scaleY = void 0;\n  }\n}\nfunction clipElement(context, options, shared) {\n  if (options[\"clip-path\"]) {\n    drawElement(shared.clipPaths[parseUrl(options[\"clip-path\"])], context, {}, shared);\n    context.clip();\n    options[\"clip-path\"] = void 0;\n  }\n}\nfunction hex2rgba(hexColor, alpha) {\n  var color = new Color(hexColor);\n  return \"rgba(\" + color.r + \",\" + color.g + \",\" + color.b + \",\" + alpha + \")\";\n}\nfunction createGradient(element) {\n  var options = [];\n  _each(element.childNodes, (_, _ref2) => {\n    var {\n      attributes: attributes\n    } = _ref2;\n    options.push({\n      offset: attributes.offset.value,\n      stopColor: attributes[\"stop-color\"].value\n    });\n  });\n  return options;\n}\nfunction createFilter(element) {\n  var color;\n  var opacity;\n  var filterOptions = {};\n  _each(element.childNodes, function (_, node) {\n    var attr = node.attributes;\n    if (!attr.result) {\n      return;\n    }\n    switch (attr.result.value) {\n      case \"gaussianBlurResult\":\n        filterOptions.blur = _number(attr.stdDeviation.value);\n        break;\n      case \"offsetResult\":\n        filterOptions.offsetX = _number(attr.dx.value);\n        filterOptions.offsetY = _number(attr.dy.value);\n        break;\n      case \"floodResult\":\n        color = attr[\"flood-color\"] ? attr[\"flood-color\"].value : \"#000\";\n        opacity = attr[\"flood-opacity\"] ? attr[\"flood-opacity\"].value : 1;\n        filterOptions.color = hex2rgba(color, opacity);\n    }\n  });\n  return filterOptions;\n}\nfunction asyncEach(array, callback) {\n  var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Deferred();\n  var i = 0;\n  for (; i < array.length; i++) {\n    var result = callback(array[i]);\n    if (isPromise(result)) {\n      result.then(() => {\n        asyncEach(Array.prototype.slice.call(array, i + 1), callback, d);\n      });\n      break;\n    }\n  }\n  if (i === array.length) {\n    d.resolve();\n  }\n  return d;\n}\nfunction drawCanvasElements(elements, context, parentOptions, shared) {\n  return asyncEach(elements, function (element) {\n    switch (element.tagName && element.tagName.toLowerCase()) {\n      case \"g\":\n      case \"svg\":\n        var options = extend({}, parentOptions, getElementOptions(element, shared.rootAppended));\n        context.save();\n        transformElement(context, options);\n        clipElement(context, options, shared);\n        var onDone = () => {\n          context.restore();\n        };\n        var d = drawCanvasElements(element.childNodes, context, options, shared);\n        if (isPromise(d)) {\n          d.then(onDone);\n        } else {\n          onDone();\n        }\n        return d;\n      case \"defs\":\n        return drawCanvasElements(element.childNodes, context, {}, shared);\n      case \"clippath\":\n        shared.clipPaths[element.attributes.id.textContent] = element.childNodes[0];\n        break;\n      case \"pattern\":\n        shared.patterns[element.attributes.id.textContent] = element;\n        break;\n      case \"filter\":\n        shared.filters[element.id] = createFilter(element);\n        break;\n      case \"lineargradient\":\n        shared.gradients[element.attributes.id.textContent] = createGradient(element);\n        break;\n      default:\n        return drawElement(element, context, parentOptions, shared);\n    }\n  });\n}\nfunction setLineDash(context, options) {\n  var matches = options[\"stroke-dasharray\"] && options[\"stroke-dasharray\"].match(/(\\d+)/g);\n  if (matches && matches.length) {\n    matches = _map(matches, function (item) {\n      return _number(item);\n    });\n    context.setLineDash(matches);\n  }\n}\nfunction strokeElement(context, options, isText) {\n  var stroke = options.stroke;\n  if (stroke && \"none\" !== stroke && 0 !== options[\"stroke-width\"]) {\n    setLineDash(context, options);\n    context.lineJoin = options[\"stroke-linejoin\"];\n    context.lineWidth = options[\"stroke-width\"];\n    context.globalAlpha = options.strokeOpacity;\n    context.strokeStyle = stroke;\n    isText ? context.strokeText(options.text, options.x, options.y) : context.stroke();\n    context.globalAlpha = 1;\n  }\n}\nfunction getPattern(context, pattern, shared) {\n  var options = getElementOptions(pattern, shared.rootAppended);\n  var patternCanvas = imageCreator._createCanvas(options.width, options.height, 0);\n  var patternContext = patternCanvas.getContext(\"2d\");\n  drawCanvasElements(pattern.childNodes, patternContext, options, shared);\n  return context.createPattern(patternCanvas, \"repeat\");\n}\nfunction fillElement(context, options, shared) {\n  var fill = options.fill;\n  if (fill && \"none\" !== fill) {\n    if (-1 === fill.search(/url/)) {\n      context.fillStyle = fill;\n    } else {\n      var pattern = shared.patterns[parseUrl(fill)];\n      if (!pattern) {\n        return;\n      }\n      context.fillStyle = getPattern(context, pattern, shared);\n    }\n    context.globalAlpha = options.fillOpacity;\n    context.fill();\n    context.globalAlpha = 1;\n  }\n}\nparseAttributes = function (attributes) {\n  var newAttributes = {};\n  var attr;\n  _each(attributes, function (index, item) {\n    attr = item.textContent;\n    if (isFinite(attr)) {\n      attr = _number(attr);\n    }\n    newAttributes[item.name.toLowerCase()] = attr;\n  });\n  return newAttributes;\n};\nfunction drawBackground(context, width, height, backgroundColor, margin) {\n  context.fillStyle = backgroundColor || \"#ffffff\";\n  context.fillRect(-margin, -margin, width + 2 * margin, height + 2 * margin);\n}\nfunction createInvisibleDiv() {\n  var invisibleDiv = domAdapter.createElement(\"div\");\n  invisibleDiv.style.left = \"-9999px\";\n  invisibleDiv.style.position = \"absolute\";\n  return invisibleDiv;\n}\nfunction convertSvgToCanvas(svg, canvas, rootAppended) {\n  return drawCanvasElements(svg.childNodes, canvas.getContext(\"2d\"), {}, {\n    clipPaths: {},\n    patterns: {},\n    filters: {},\n    gradients: {},\n    rootAppended: rootAppended\n  });\n}\nfunction getCanvasFromSvg(markup, _ref3) {\n  var {\n    width: width,\n    height: height,\n    backgroundColor: backgroundColor,\n    margin: margin,\n    svgToCanvas = convertSvgToCanvas\n  } = _ref3;\n  var scaledScreenInfo = calcScaledInfo(width, height);\n  var canvas = imageCreator._createCanvas(scaledScreenInfo.width, scaledScreenInfo.height, margin);\n  var context = canvas.getContext(\"2d\");\n  context.setTransform(scaledScreenInfo.pixelRatio, 0, 0, scaledScreenInfo.pixelRatio, 0, 0);\n  var svgElem = getSvgElement(markup);\n  var invisibleDiv;\n  var markupIsDomElement = domAdapter.isElementNode(markup);\n  context.translate(margin, margin);\n  domAdapter.getBody().appendChild(canvas);\n  if (!markupIsDomElement) {\n    invisibleDiv = createInvisibleDiv();\n    invisibleDiv.appendChild(svgElem);\n    domAdapter.getBody().appendChild(invisibleDiv);\n  }\n  if (svgElem.attributes.direction) {\n    canvas.dir = svgElem.attributes.direction.textContent;\n  }\n  drawBackground(context, width, height, backgroundColor, margin);\n  return fromPromise(svgToCanvas(svgElem, canvas, markupIsDomElement && contains(domAdapter.getBody(), markup))).then(() => canvas).always(() => {\n    invisibleDiv && domAdapter.getBody().removeChild(invisibleDiv);\n    domAdapter.getBody().removeChild(canvas);\n  });\n}\nexport var imageCreator = {\n  getImageData: function (markup, options) {\n    var mimeType = \"image/\" + options.format;\n    if (isFunction(options.__parseAttributesFn)) {\n      parseAttributes = options.__parseAttributesFn;\n    }\n    return getCanvasFromSvg(markup, options).then(canvas => getStringFromCanvas(canvas, mimeType));\n  },\n  getData: function (markup, options) {\n    var that = this;\n    return imageCreator.getImageData(markup, options).then(binaryData => {\n      var mimeType = \"image/\" + options.format;\n      var data = isFunction(window.Blob) && !options.useBase64 ? that._getBlob(binaryData, mimeType) : that._getBase64(binaryData);\n      return data;\n    });\n  },\n  _getBlob: function (binaryData, mimeType) {\n    var i;\n    var dataArray = new Uint8Array(binaryData.length);\n    for (i = 0; i < binaryData.length; i++) {\n      dataArray[i] = binaryData.charCodeAt(i);\n    }\n    return new window.Blob([dataArray.buffer], {\n      type: mimeType\n    });\n  },\n  _getBase64: function (binaryData) {\n    return window.btoa(binaryData);\n  },\n  _createCanvas(width, height, margin) {\n    var canvas = $(\"<canvas>\")[0];\n    canvas.width = width + 2 * margin;\n    canvas.height = height + 2 * margin;\n    canvas.hidden = true;\n    return canvas;\n  }\n};\nexport function getData(data, options) {\n  return imageCreator.getData(data, options);\n}\nexport function testFormats(formats) {\n  var canvas = imageCreator._createCanvas(100, 100, 0);\n  return formats.reduce(function (r, f) {\n    var mimeType = (\"image/\" + f).toLowerCase();\n    if (-1 !== canvas.toDataURL(mimeType).indexOf(mimeType)) {\n      r.supported.push(f);\n    } else {\n      r.unsupported.push(f);\n    }\n    return r;\n  }, {\n    supported: [],\n    unsupported: []\n  });\n}\nexport function calcScaledInfo(width, height) {\n  var pixelRatio = window.devicePixelRatio || 1;\n  return {\n    pixelRatio: pixelRatio,\n    width: width * pixelRatio,\n    height: height * pixelRatio\n  };\n}","map":{"version":3,"names":["$","Color","isFunction","isPromise","isDefined","getSvgElement","HIDDEN_FOR_EXPORT","each","_each","map","_map","extend","domAdapter","contains","getWindow","window","camelize","Deferred","fromPromise","_math","Math","PI","_min","min","_abs","abs","_sqrt","sqrt","_pow","pow","_atan2","atan2","_cos","cos","_sin","sin","_number","Number","IMAGE_QUALITY","TEXT_DECORATION_LINE_WIDTH_COEFF","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_TEXT_COLOR","parseAttributes","getStringFromCanvas","canvas","mimeType","dataURL","toDataURL","imageData","atob","substring","length","arcTo","x1","y1","x2","y2","radius","largeArcFlag","clockwise","context","cBx","cBy","aB","k","opSide","adjSide","centerX","centerY","startAngle","endAngle","arc","getElementOptions","element","rootAppended","attr","attributes","options","text","textContent","replace","textAlign","transform","coords","match","translateX","translateY","rotationAngle","rotationX","rotationY","scaleX","scaleY","parseStyles","drawRect","x","y","width","height","cornerRadius","rx","rect","save","translate","moveTo","lineTo","restore","drawImage","shared","d","image","Image","onload","globalAlpha","transformElement","clipElement","resolve","onerror","setAttribute","src","href","drawPath","dAttr","dArray","split","filter","item","trim","i","params","prevParams","prevParamsLen","j","bezierCurveTo","closePath","style","field","isElementNode","getComputedStyle","forEach","prop","textDecoration","textDecorationLine","opacity","parseUrl","urlString","matches","setFontStyle","fontParams","fontSize","fontFamily","fill","fontStyle","push","fontWeight","font","join","fillStyle","drawText","applyFilter","fillText","strokeElement","drawTextDecoration","textWidth","measureText","textHeight","parseInt","lineHeight","fillElement","aggregateOpacity","strokeOpacity","fillOpacity","hasTspan","nodes","childNodes","tagName","drawTextElement","lines","line","offset","drawElement","elementOptions","mergedOptions","elements","widths","offsets","dy","parseFloat","commonWidth","reduce","xDiff","currentOffset","o","index","parentOptions","isText","isImage","visibility","promise","beginPath","cx","cy","r","applyGradient","_ref","gradients","id","box","getBBox","gradient","createLinearGradient","opt","addColorStop","stopColor","filterOptions","filters","offsetX","offsetY","blur","color","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","rotate","isFinite","scale","clipPaths","clip","hex2rgba","hexColor","alpha","g","b","createGradient","_","_ref2","value","createFilter","node","result","stdDeviation","dx","asyncEach","array","callback","arguments","then","Array","prototype","slice","call","drawCanvasElements","toLowerCase","onDone","patterns","setLineDash","stroke","lineJoin","lineWidth","strokeStyle","strokeText","getPattern","pattern","patternCanvas","imageCreator","_createCanvas","patternContext","getContext","createPattern","search","newAttributes","name","drawBackground","backgroundColor","margin","fillRect","createInvisibleDiv","invisibleDiv","createElement","left","position","convertSvgToCanvas","svg","getCanvasFromSvg","markup","_ref3","svgToCanvas","scaledScreenInfo","calcScaledInfo","setTransform","pixelRatio","svgElem","markupIsDomElement","getBody","appendChild","direction","dir","always","removeChild","getImageData","format","__parseAttributesFn","getData","that","binaryData","data","Blob","useBase64","_getBlob","_getBase64","dataArray","Uint8Array","charCodeAt","buffer","type","btoa","hidden","testFormats","formats","f","indexOf","supported","unsupported","devicePixelRatio"],"sources":["C:/Users/ninad/OneDrive/Radna povrÅ¡ina/zavrsni/client/node_modules/devextreme/esm/exporter/image_creator.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/exporter/image_creator.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport Color from \"../color\";\r\nimport {\r\n    isFunction,\r\n    isPromise,\r\n    isDefined\r\n} from \"../core/utils/type\";\r\nimport {\r\n    getSvgElement,\r\n    HIDDEN_FOR_EXPORT\r\n} from \"../core/utils/svg\";\r\nimport {\r\n    each as _each,\r\n    map as _map\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport domAdapter from \"../core/dom_adapter\";\r\nimport {\r\n    contains\r\n} from \"../core/utils/dom\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport {\r\n    camelize\r\n} from \"../core/utils/inflector\";\r\nimport {\r\n    Deferred,\r\n    fromPromise\r\n} from \"../core/utils/deferred\";\r\nvar _math = Math;\r\nvar PI = _math.PI;\r\nvar _min = _math.min;\r\nvar _abs = _math.abs;\r\nvar _sqrt = _math.sqrt;\r\nvar _pow = _math.pow;\r\nvar _atan2 = _math.atan2;\r\nvar _cos = _math.cos;\r\nvar _sin = _math.sin;\r\nvar _number = Number;\r\nvar IMAGE_QUALITY = 1;\r\nvar TEXT_DECORATION_LINE_WIDTH_COEFF = .05;\r\nvar DEFAULT_FONT_SIZE = \"10px\";\r\nvar DEFAULT_FONT_FAMILY = \"sans-serif\";\r\nvar DEFAULT_TEXT_COLOR = \"#000\";\r\nvar parseAttributes;\r\n\r\nfunction getStringFromCanvas(canvas, mimeType) {\r\n    var dataURL = canvas.toDataURL(mimeType, IMAGE_QUALITY);\r\n    var imageData = window.atob(dataURL.substring((\"data:\" + mimeType + \";base64,\").length));\r\n    return imageData\r\n}\r\n\r\nfunction arcTo(x1, y1, x2, y2, radius, largeArcFlag, clockwise, context) {\r\n    var cBx = (x1 + x2) / 2;\r\n    var cBy = (y1 + y2) / 2;\r\n    var aB = _atan2(y1 - y2, x1 - x2);\r\n    var k = largeArcFlag ? 1 : -1;\r\n    aB += PI / 180 * 90 * (clockwise ? 1 : -1);\r\n    var opSide = _sqrt(_pow(x2 - x1, 2) + _pow(y2 - y1, 2)) / 2;\r\n    var adjSide = _sqrt(_abs(_pow(radius, 2) - _pow(opSide, 2)));\r\n    var centerX = cBx + k * (adjSide * _cos(aB));\r\n    var centerY = cBy + k * (adjSide * _sin(aB));\r\n    var startAngle = _atan2(y1 - centerY, x1 - centerX);\r\n    var endAngle = _atan2(y2 - centerY, x2 - centerX);\r\n    context.arc(centerX, centerY, radius, startAngle, endAngle, !clockwise)\r\n}\r\n\r\nfunction getElementOptions(element, rootAppended) {\r\n    var attr = parseAttributes(element.attributes || {});\r\n    var options = extend({}, attr, {\r\n        text: element.textContent.replace(/\\s+/g, \" \"),\r\n        textAlign: \"middle\" === attr[\"text-anchor\"] ? \"center\" : attr[\"text-anchor\"]\r\n    });\r\n    var transform = attr.transform;\r\n    var coords;\r\n    if (transform) {\r\n        coords = transform.match(/translate\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*)*/);\r\n        if (coords) {\r\n            coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\r\n            options.translateX = _number(coords[0]);\r\n            options.translateY = coords[1] ? _number(coords[1]) : 0\r\n        }\r\n        coords = transform.match(/rotate\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*,*\\s*-*\\d+([.]\\d+)*)*/);\r\n        if (coords) {\r\n            coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\r\n            options.rotationAngle = _number(coords[0]);\r\n            options.rotationX = coords[1] && _number(coords[1]);\r\n            options.rotationY = coords[2] && _number(coords[2])\r\n        }\r\n        coords = transform.match(/scale\\(-*\\d+([.]\\d+)*(,*\\s*-*\\d+([.]\\d+)*)*/);\r\n        if (coords) {\r\n            coords = coords[0].match(/-*\\d+([.]\\d+)*/g);\r\n            options.scaleX = _number(coords[0]);\r\n            if (coords.length > 1) {\r\n                options.scaleY = _number(coords[1])\r\n            } else {\r\n                options.scaleY = options.scaleX\r\n            }\r\n        }\r\n    }\r\n    parseStyles(element, options, rootAppended);\r\n    return options\r\n}\r\n\r\nfunction drawRect(context, options) {\r\n    var x = options.x;\r\n    var y = options.y;\r\n    var width = options.width;\r\n    var height = options.height;\r\n    var cornerRadius = options.rx;\r\n    if (!cornerRadius) {\r\n        context.rect(x, y, width, height)\r\n    } else {\r\n        cornerRadius = _min(cornerRadius, width / 2, height / 2);\r\n        context.save();\r\n        context.translate(x, y);\r\n        context.moveTo(width / 2, 0);\r\n        context.arcTo(width, 0, width, height, cornerRadius);\r\n        context.arcTo(width, height, 0, height, cornerRadius);\r\n        context.arcTo(0, height, 0, 0, cornerRadius);\r\n        context.arcTo(0, 0, cornerRadius, 0, cornerRadius);\r\n        context.lineTo(width / 2, 0);\r\n        context.restore()\r\n    }\r\n}\r\n\r\nfunction drawImage(context, options, shared) {\r\n    var d = new Deferred;\r\n    var image = new window.Image;\r\n    image.onload = function() {\r\n        context.save();\r\n        context.globalAlpha = options.globalAlpha;\r\n        transformElement(context, options);\r\n        clipElement(context, options, shared);\r\n        context.drawImage(image, options.x || 0, options.y || 0, options.width, options.height);\r\n        context.restore();\r\n        d.resolve()\r\n    };\r\n    image.onerror = function() {\r\n        d.resolve()\r\n    };\r\n    image.setAttribute(\"crossOrigin\", \"anonymous\");\r\n    image.src = options.href || options[\"xlink:href\"];\r\n    return d\r\n}\r\n\r\nfunction drawPath(context, dAttr) {\r\n    var dArray = dAttr.replace(/,/g, \" \").split(/([A-Z])/i).filter(item => \"\" !== item.trim());\r\n    var i = 0;\r\n    var params;\r\n    var prevParams;\r\n    var prevParamsLen;\r\n    do {\r\n        params = (dArray[i + 1] || \"\").trim().split(\" \");\r\n        switch (dArray[i]) {\r\n            case \"M\":\r\n                context.moveTo(_number(params[0]), _number(params[1]));\r\n                i += 2;\r\n                break;\r\n            case \"L\":\r\n                for (var j = 0; j < params.length / 2; j++) {\r\n                    context.lineTo(_number(params[2 * j]), _number(params[2 * j + 1]))\r\n                }\r\n                i += 2;\r\n                break;\r\n            case \"C\":\r\n                context.bezierCurveTo(_number(params[0]), _number(params[1]), _number(params[2]), _number(params[3]), _number(params[4]), _number(params[5]));\r\n                i += 2;\r\n                break;\r\n            case \"a\":\r\n                prevParams = dArray[i - 1].trim().split(\" \");\r\n                prevParamsLen = prevParams.length - 1;\r\n                arcTo(_number(prevParams[prevParamsLen - 1]), _number(prevParams[prevParamsLen]), _number(prevParams[prevParamsLen - 1]) + _number(params[5]), _number(prevParams[prevParamsLen]) + _number(params[6]), _number(params[0]), _number(params[3]), _number(params[4]), context);\r\n                i += 2;\r\n                break;\r\n            case \"A\":\r\n                prevParams = dArray[i - 1].trim().split(\" \");\r\n                prevParamsLen = prevParams.length - 1;\r\n                arcTo(_number(prevParams[prevParamsLen - 1]), _number(prevParams[prevParamsLen]), _number(params[5]), _number(params[6]), _number(params[0]), _number(params[3]), _number(params[4]), context);\r\n                i += 2;\r\n                break;\r\n            case \"Z\":\r\n                context.closePath();\r\n                i += 1;\r\n                break;\r\n            default:\r\n                i++\r\n        }\r\n    } while (i < dArray.length)\r\n}\r\n\r\nfunction parseStyles(element, options, rootAppended) {\r\n    var style = element.style || {};\r\n    var field;\r\n    for (field in style) {\r\n        if (\"\" !== style[field]) {\r\n            options[camelize(field)] = style[field]\r\n        }\r\n    }\r\n    if (rootAppended && domAdapter.isElementNode(element)) {\r\n        style = window.getComputedStyle(element);\r\n        [\"fill\", \"stroke\", \"stroke-width\", \"font-family\", \"font-size\", \"font-style\", \"font-weight\"].forEach((function(prop) {\r\n            if (prop in style && \"\" !== style[prop]) {\r\n                options[camelize(prop)] = style[prop]\r\n            }\r\n        }));\r\n        [\"opacity\", \"fill-opacity\", \"stroke-opacity\"].forEach((function(prop) {\r\n            if (prop in style && \"\" !== style[prop] && \"1\" !== style[prop]) {\r\n                options[prop] = _number(style[prop])\r\n            }\r\n        }))\r\n    }\r\n    options.textDecoration = options.textDecoration || options.textDecorationLine;\r\n    options.globalAlpha = isDefined(options.opacity) ? options.opacity : options.globalAlpha\r\n}\r\n\r\nfunction parseUrl(urlString) {\r\n    var matches = urlString && urlString.match(/url\\(.*#(.*?)[\"']?\\)/i);\r\n    return matches && matches[1]\r\n}\r\n\r\nfunction setFontStyle(context, options) {\r\n    var fontParams = [];\r\n    options.fontSize = options.fontSize || DEFAULT_FONT_SIZE;\r\n    options.fontFamily = options.fontFamily || DEFAULT_FONT_FAMILY;\r\n    options.fill = options.fill || DEFAULT_TEXT_COLOR;\r\n    options.fontStyle && fontParams.push(options.fontStyle);\r\n    options.fontWeight && fontParams.push(options.fontWeight);\r\n    fontParams.push(options.fontSize);\r\n    fontParams.push(options.fontFamily);\r\n    context.font = fontParams.join(\" \");\r\n    context.textAlign = options.textAlign;\r\n    context.fillStyle = options.fill;\r\n    context.globalAlpha = options.globalAlpha\r\n}\r\n\r\nfunction drawText(context, options, shared) {\r\n    setFontStyle(context, options);\r\n    applyFilter(context, options, shared);\r\n    options.text && context.fillText(options.text, options.x || 0, options.y || 0);\r\n    strokeElement(context, options, true);\r\n    drawTextDecoration(context, options, shared)\r\n}\r\n\r\nfunction drawTextDecoration(context, options, shared) {\r\n    if (!options.textDecoration || \"none\" === options.textDecoration) {\r\n        return\r\n    }\r\n    var x = options.x;\r\n    var textWidth = context.measureText(options.text).width;\r\n    var textHeight = parseInt(options.fontSize, 10);\r\n    var lineHeight = textHeight * TEXT_DECORATION_LINE_WIDTH_COEFF < 1 ? 1 : textHeight * TEXT_DECORATION_LINE_WIDTH_COEFF;\r\n    var y = options.y;\r\n    switch (options.textDecoration) {\r\n        case \"line-through\":\r\n            y -= textHeight / 3 + lineHeight / 2;\r\n            break;\r\n        case \"overline\":\r\n            y -= textHeight - lineHeight;\r\n            break;\r\n        case \"underline\":\r\n            y += lineHeight\r\n    }\r\n    context.rect(x, y, textWidth, lineHeight);\r\n    fillElement(context, options, shared);\r\n    strokeElement(context, options)\r\n}\r\n\r\nfunction aggregateOpacity(options) {\r\n    options.strokeOpacity = void 0 !== options[\"stroke-opacity\"] ? options[\"stroke-opacity\"] : 1;\r\n    options.fillOpacity = void 0 !== options[\"fill-opacity\"] ? options[\"fill-opacity\"] : 1;\r\n    if (void 0 !== options.opacity) {\r\n        options.strokeOpacity *= options.opacity;\r\n        options.fillOpacity *= options.opacity\r\n    }\r\n}\r\n\r\nfunction hasTspan(element) {\r\n    var nodes = element.childNodes;\r\n    for (var i = 0; i < nodes.length; i++) {\r\n        if (\"tspan\" === nodes[i].tagName) {\r\n            return true\r\n        }\r\n    }\r\n    return false\r\n}\r\n\r\nfunction drawTextElement(childNodes, context, options, shared) {\r\n    var lines = [];\r\n    var line;\r\n    var offset = 0;\r\n    for (var i = 0; i < childNodes.length; i++) {\r\n        var element = childNodes[i];\r\n        if (void 0 === element.tagName) {\r\n            drawElement(element, context, options, shared)\r\n        } else if (\"tspan\" === element.tagName || \"text\" === element.tagName) {\r\n            var elementOptions = getElementOptions(element, shared.rootAppended);\r\n            var mergedOptions = extend({}, options, elementOptions);\r\n            if (\"tspan\" === element.tagName && hasTspan(element)) {\r\n                drawTextElement(element.childNodes, context, mergedOptions, shared);\r\n                continue\r\n            }\r\n            mergedOptions.textAlign = \"start\";\r\n            if (!line || void 0 !== elementOptions.x) {\r\n                line = {\r\n                    elements: [],\r\n                    options: [],\r\n                    widths: [],\r\n                    offsets: []\r\n                };\r\n                lines.push(line)\r\n            }\r\n            if (void 0 !== elementOptions.y) {\r\n                offset = 0\r\n            }\r\n            if (void 0 !== elementOptions.dy) {\r\n                offset += parseFloat(elementOptions.dy)\r\n            }\r\n            line.elements.push(element);\r\n            line.options.push(mergedOptions);\r\n            line.offsets.push(offset);\r\n            setFontStyle(context, mergedOptions);\r\n            line.widths.push(context.measureText(mergedOptions.text).width)\r\n        }\r\n    }\r\n    lines.forEach((function(line) {\r\n        var commonWidth = line.widths.reduce((function(commonWidth, width) {\r\n            return commonWidth + width\r\n        }), 0);\r\n        var xDiff = 0;\r\n        var currentOffset = 0;\r\n        if (\"center\" === options.textAlign) {\r\n            xDiff = commonWidth / 2\r\n        }\r\n        if (\"end\" === options.textAlign) {\r\n            xDiff = commonWidth\r\n        }\r\n        line.options.forEach((function(o, index) {\r\n            var width = line.widths[index];\r\n            o.x = o.x - xDiff + currentOffset;\r\n            o.y += line.offsets[index];\r\n            currentOffset += width\r\n        }));\r\n        line.elements.forEach((function(element, index) {\r\n            drawTextElement(element.childNodes, context, line.options[index], shared)\r\n        }))\r\n    }))\r\n}\r\n\r\nfunction drawElement(element, context, parentOptions, shared) {\r\n    var tagName = element.tagName;\r\n    var isText = \"text\" === tagName || \"tspan\" === tagName || void 0 === tagName;\r\n    var isImage = \"image\" === tagName;\r\n    var options = extend({}, parentOptions, getElementOptions(element, shared.rootAppended));\r\n    if (\"hidden\" === options.visibility || options[HIDDEN_FOR_EXPORT]) {\r\n        return\r\n    }\r\n    context.save();\r\n    !isImage && transformElement(context, options);\r\n    clipElement(context, options, shared);\r\n    aggregateOpacity(options);\r\n    var promise;\r\n    context.beginPath();\r\n    switch (element.tagName) {\r\n        case void 0:\r\n            drawText(context, options, shared);\r\n            break;\r\n        case \"text\":\r\n        case \"tspan\":\r\n            drawTextElement(element.childNodes, context, options, shared);\r\n            break;\r\n        case \"image\":\r\n            promise = drawImage(context, options, shared);\r\n            break;\r\n        case \"path\":\r\n            drawPath(context, options.d);\r\n            break;\r\n        case \"rect\":\r\n            drawRect(context, options);\r\n            context.closePath();\r\n            break;\r\n        case \"circle\":\r\n            context.arc(options.cx, options.cy, options.r, 0, 2 * PI, 1)\r\n    }\r\n    if (!isText) {\r\n        applyFilter(context, options, shared);\r\n        fillElement(context, options, shared);\r\n        strokeElement(context, options)\r\n    }\r\n    applyGradient(context, options, shared, element);\r\n    context.restore();\r\n    return promise\r\n}\r\n\r\nfunction applyGradient(context, options, _ref, element) {\r\n    var {\r\n        gradients: gradients\r\n    } = _ref;\r\n    if (0 === gradients.length) {\r\n        return\r\n    }\r\n    var id = parseUrl(options.fill);\r\n    if (id && gradients[id]) {\r\n        var box = element.getBBox();\r\n        var gradient = context.createLinearGradient(box.x, 0, box.x + box.width, 0);\r\n        gradients[id].forEach(opt => {\r\n            var offset = parseInt(opt.offset.replace(/%/, \"\"));\r\n            gradient.addColorStop(offset / 100, opt.stopColor)\r\n        });\r\n        context.globalAlpha = options.opacity;\r\n        context.fillStyle = gradient;\r\n        context.fill()\r\n    }\r\n}\r\n\r\nfunction applyFilter(context, options, shared) {\r\n    var filterOptions;\r\n    var id = parseUrl(options.filter);\r\n    if (id) {\r\n        filterOptions = shared.filters[id];\r\n        if (!filterOptions) {\r\n            filterOptions = {\r\n                offsetX: 0,\r\n                offsetY: 0,\r\n                blur: 0,\r\n                color: \"#000\"\r\n            }\r\n        }\r\n        context.shadowOffsetX = filterOptions.offsetX;\r\n        context.shadowOffsetY = filterOptions.offsetY;\r\n        context.shadowColor = filterOptions.color;\r\n        context.shadowBlur = filterOptions.blur\r\n    }\r\n}\r\n\r\nfunction transformElement(context, options) {\r\n    context.translate(options.translateX || 0, options.translateY || 0);\r\n    options.translateX = void 0;\r\n    options.translateY = void 0;\r\n    if (options.rotationAngle) {\r\n        context.translate(options.rotationX || 0, options.rotationY || 0);\r\n        context.rotate(options.rotationAngle * PI / 180);\r\n        context.translate(-(options.rotationX || 0), -(options.rotationY || 0));\r\n        options.rotationAngle = void 0;\r\n        options.rotationX = void 0;\r\n        options.rotationY = void 0\r\n    }\r\n    if (isFinite(options.scaleX)) {\r\n        context.scale(options.scaleX, options.scaleY);\r\n        options.scaleX = void 0;\r\n        options.scaleY = void 0\r\n    }\r\n}\r\n\r\nfunction clipElement(context, options, shared) {\r\n    if (options[\"clip-path\"]) {\r\n        drawElement(shared.clipPaths[parseUrl(options[\"clip-path\"])], context, {}, shared);\r\n        context.clip();\r\n        options[\"clip-path\"] = void 0\r\n    }\r\n}\r\n\r\nfunction hex2rgba(hexColor, alpha) {\r\n    var color = new Color(hexColor);\r\n    return \"rgba(\" + color.r + \",\" + color.g + \",\" + color.b + \",\" + alpha + \")\"\r\n}\r\n\r\nfunction createGradient(element) {\r\n    var options = [];\r\n    _each(element.childNodes, (_, _ref2) => {\r\n        var {\r\n            attributes: attributes\r\n        } = _ref2;\r\n        options.push({\r\n            offset: attributes.offset.value,\r\n            stopColor: attributes[\"stop-color\"].value\r\n        })\r\n    });\r\n    return options\r\n}\r\n\r\nfunction createFilter(element) {\r\n    var color;\r\n    var opacity;\r\n    var filterOptions = {};\r\n    _each(element.childNodes, (function(_, node) {\r\n        var attr = node.attributes;\r\n        if (!attr.result) {\r\n            return\r\n        }\r\n        switch (attr.result.value) {\r\n            case \"gaussianBlurResult\":\r\n                filterOptions.blur = _number(attr.stdDeviation.value);\r\n                break;\r\n            case \"offsetResult\":\r\n                filterOptions.offsetX = _number(attr.dx.value);\r\n                filterOptions.offsetY = _number(attr.dy.value);\r\n                break;\r\n            case \"floodResult\":\r\n                color = attr[\"flood-color\"] ? attr[\"flood-color\"].value : \"#000\";\r\n                opacity = attr[\"flood-opacity\"] ? attr[\"flood-opacity\"].value : 1;\r\n                filterOptions.color = hex2rgba(color, opacity)\r\n        }\r\n    }));\r\n    return filterOptions\r\n}\r\n\r\nfunction asyncEach(array, callback) {\r\n    var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Deferred;\r\n    var i = 0;\r\n    for (; i < array.length; i++) {\r\n        var result = callback(array[i]);\r\n        if (isPromise(result)) {\r\n            result.then(() => {\r\n                asyncEach(Array.prototype.slice.call(array, i + 1), callback, d)\r\n            });\r\n            break\r\n        }\r\n    }\r\n    if (i === array.length) {\r\n        d.resolve()\r\n    }\r\n    return d\r\n}\r\n\r\nfunction drawCanvasElements(elements, context, parentOptions, shared) {\r\n    return asyncEach(elements, (function(element) {\r\n        switch (element.tagName && element.tagName.toLowerCase()) {\r\n            case \"g\":\r\n            case \"svg\":\r\n                var options = extend({}, parentOptions, getElementOptions(element, shared.rootAppended));\r\n                context.save();\r\n                transformElement(context, options);\r\n                clipElement(context, options, shared);\r\n                var onDone = () => {\r\n                    context.restore()\r\n                };\r\n                var d = drawCanvasElements(element.childNodes, context, options, shared);\r\n                if (isPromise(d)) {\r\n                    d.then(onDone)\r\n                } else {\r\n                    onDone()\r\n                }\r\n                return d;\r\n            case \"defs\":\r\n                return drawCanvasElements(element.childNodes, context, {}, shared);\r\n            case \"clippath\":\r\n                shared.clipPaths[element.attributes.id.textContent] = element.childNodes[0];\r\n                break;\r\n            case \"pattern\":\r\n                shared.patterns[element.attributes.id.textContent] = element;\r\n                break;\r\n            case \"filter\":\r\n                shared.filters[element.id] = createFilter(element);\r\n                break;\r\n            case \"lineargradient\":\r\n                shared.gradients[element.attributes.id.textContent] = createGradient(element);\r\n                break;\r\n            default:\r\n                return drawElement(element, context, parentOptions, shared)\r\n        }\r\n    }))\r\n}\r\n\r\nfunction setLineDash(context, options) {\r\n    var matches = options[\"stroke-dasharray\"] && options[\"stroke-dasharray\"].match(/(\\d+)/g);\r\n    if (matches && matches.length) {\r\n        matches = _map(matches, (function(item) {\r\n            return _number(item)\r\n        }));\r\n        context.setLineDash(matches)\r\n    }\r\n}\r\n\r\nfunction strokeElement(context, options, isText) {\r\n    var stroke = options.stroke;\r\n    if (stroke && \"none\" !== stroke && 0 !== options[\"stroke-width\"]) {\r\n        setLineDash(context, options);\r\n        context.lineJoin = options[\"stroke-linejoin\"];\r\n        context.lineWidth = options[\"stroke-width\"];\r\n        context.globalAlpha = options.strokeOpacity;\r\n        context.strokeStyle = stroke;\r\n        isText ? context.strokeText(options.text, options.x, options.y) : context.stroke();\r\n        context.globalAlpha = 1\r\n    }\r\n}\r\n\r\nfunction getPattern(context, pattern, shared) {\r\n    var options = getElementOptions(pattern, shared.rootAppended);\r\n    var patternCanvas = imageCreator._createCanvas(options.width, options.height, 0);\r\n    var patternContext = patternCanvas.getContext(\"2d\");\r\n    drawCanvasElements(pattern.childNodes, patternContext, options, shared);\r\n    return context.createPattern(patternCanvas, \"repeat\")\r\n}\r\n\r\nfunction fillElement(context, options, shared) {\r\n    var fill = options.fill;\r\n    if (fill && \"none\" !== fill) {\r\n        if (-1 === fill.search(/url/)) {\r\n            context.fillStyle = fill\r\n        } else {\r\n            var pattern = shared.patterns[parseUrl(fill)];\r\n            if (!pattern) {\r\n                return\r\n            }\r\n            context.fillStyle = getPattern(context, pattern, shared)\r\n        }\r\n        context.globalAlpha = options.fillOpacity;\r\n        context.fill();\r\n        context.globalAlpha = 1\r\n    }\r\n}\r\nparseAttributes = function(attributes) {\r\n    var newAttributes = {};\r\n    var attr;\r\n    _each(attributes, (function(index, item) {\r\n        attr = item.textContent;\r\n        if (isFinite(attr)) {\r\n            attr = _number(attr)\r\n        }\r\n        newAttributes[item.name.toLowerCase()] = attr\r\n    }));\r\n    return newAttributes\r\n};\r\n\r\nfunction drawBackground(context, width, height, backgroundColor, margin) {\r\n    context.fillStyle = backgroundColor || \"#ffffff\";\r\n    context.fillRect(-margin, -margin, width + 2 * margin, height + 2 * margin)\r\n}\r\n\r\nfunction createInvisibleDiv() {\r\n    var invisibleDiv = domAdapter.createElement(\"div\");\r\n    invisibleDiv.style.left = \"-9999px\";\r\n    invisibleDiv.style.position = \"absolute\";\r\n    return invisibleDiv\r\n}\r\n\r\nfunction convertSvgToCanvas(svg, canvas, rootAppended) {\r\n    return drawCanvasElements(svg.childNodes, canvas.getContext(\"2d\"), {}, {\r\n        clipPaths: {},\r\n        patterns: {},\r\n        filters: {},\r\n        gradients: {},\r\n        rootAppended: rootAppended\r\n    })\r\n}\r\n\r\nfunction getCanvasFromSvg(markup, _ref3) {\r\n    var {\r\n        width: width,\r\n        height: height,\r\n        backgroundColor: backgroundColor,\r\n        margin: margin,\r\n        svgToCanvas: svgToCanvas = convertSvgToCanvas\r\n    } = _ref3;\r\n    var scaledScreenInfo = calcScaledInfo(width, height);\r\n    var canvas = imageCreator._createCanvas(scaledScreenInfo.width, scaledScreenInfo.height, margin);\r\n    var context = canvas.getContext(\"2d\");\r\n    context.setTransform(scaledScreenInfo.pixelRatio, 0, 0, scaledScreenInfo.pixelRatio, 0, 0);\r\n    var svgElem = getSvgElement(markup);\r\n    var invisibleDiv;\r\n    var markupIsDomElement = domAdapter.isElementNode(markup);\r\n    context.translate(margin, margin);\r\n    domAdapter.getBody().appendChild(canvas);\r\n    if (!markupIsDomElement) {\r\n        invisibleDiv = createInvisibleDiv();\r\n        invisibleDiv.appendChild(svgElem);\r\n        domAdapter.getBody().appendChild(invisibleDiv)\r\n    }\r\n    if (svgElem.attributes.direction) {\r\n        canvas.dir = svgElem.attributes.direction.textContent\r\n    }\r\n    drawBackground(context, width, height, backgroundColor, margin);\r\n    return fromPromise(svgToCanvas(svgElem, canvas, markupIsDomElement && contains(domAdapter.getBody(), markup))).then(() => canvas).always(() => {\r\n        invisibleDiv && domAdapter.getBody().removeChild(invisibleDiv);\r\n        domAdapter.getBody().removeChild(canvas)\r\n    })\r\n}\r\nexport var imageCreator = {\r\n    getImageData: function(markup, options) {\r\n        var mimeType = \"image/\" + options.format;\r\n        if (isFunction(options.__parseAttributesFn)) {\r\n            parseAttributes = options.__parseAttributesFn\r\n        }\r\n        return getCanvasFromSvg(markup, options).then(canvas => getStringFromCanvas(canvas, mimeType))\r\n    },\r\n    getData: function(markup, options) {\r\n        var that = this;\r\n        return imageCreator.getImageData(markup, options).then(binaryData => {\r\n            var mimeType = \"image/\" + options.format;\r\n            var data = isFunction(window.Blob) && !options.useBase64 ? that._getBlob(binaryData, mimeType) : that._getBase64(binaryData);\r\n            return data\r\n        })\r\n    },\r\n    _getBlob: function(binaryData, mimeType) {\r\n        var i;\r\n        var dataArray = new Uint8Array(binaryData.length);\r\n        for (i = 0; i < binaryData.length; i++) {\r\n            dataArray[i] = binaryData.charCodeAt(i)\r\n        }\r\n        return new window.Blob([dataArray.buffer], {\r\n            type: mimeType\r\n        })\r\n    },\r\n    _getBase64: function(binaryData) {\r\n        return window.btoa(binaryData)\r\n    },\r\n    _createCanvas(width, height, margin) {\r\n        var canvas = $(\"<canvas>\")[0];\r\n        canvas.width = width + 2 * margin;\r\n        canvas.height = height + 2 * margin;\r\n        canvas.hidden = true;\r\n        return canvas\r\n    }\r\n};\r\nexport function getData(data, options) {\r\n    return imageCreator.getData(data, options)\r\n}\r\nexport function testFormats(formats) {\r\n    var canvas = imageCreator._createCanvas(100, 100, 0);\r\n    return formats.reduce((function(r, f) {\r\n        var mimeType = (\"image/\" + f).toLowerCase();\r\n        if (-1 !== canvas.toDataURL(mimeType).indexOf(mimeType)) {\r\n            r.supported.push(f)\r\n        } else {\r\n            r.unsupported.push(f)\r\n        }\r\n        return r\r\n    }), {\r\n        supported: [],\r\n        unsupported: []\r\n    })\r\n}\r\nexport function calcScaledInfo(width, height) {\r\n    var pixelRatio = window.devicePixelRatio || 1;\r\n    return {\r\n        pixelRatio: pixelRatio,\r\n        width: width * pixelRatio,\r\n        height: height * pixelRatio\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}