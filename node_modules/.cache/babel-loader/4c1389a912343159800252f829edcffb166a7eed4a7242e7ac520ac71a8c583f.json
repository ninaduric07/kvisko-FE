{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/menu/ui.menu.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { noop } from \"../../core/utils/common\";\nimport { getPublicElement } from \"../../core/element\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isPlainObject, isObject, isDefined } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getElementMaxHeightByWindow } from \"../overlay/utils\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport { end as hoverEventEnd } from \"../../events/hover\";\nimport MenuBase from \"../context_menu/ui.menu_base\";\nimport Overlay from \"../overlay/ui.overlay\";\nimport Submenu from \"./ui.submenu\";\nimport Button from \"../button\";\nimport TreeView from \"../tree_view\";\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\nvar NEXTITEM_OPERATION = \"nextItem\";\nvar PREVITEM_OPERATION = \"prevItem\";\nvar DEFAULT_DELAY = {\n  show: 50,\n  hide: 300\n};\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\nclass Menu extends MenuBase {\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      orientation: \"horizontal\",\n      submenuDirection: \"auto\",\n      showFirstSubmenuMode: {\n        name: \"onClick\",\n        delay: {\n          show: 50,\n          hide: 300\n        }\n      },\n      hideSubmenuOnMouseLeave: false,\n      onSubmenuShowing: null,\n      onSubmenuShown: null,\n      onSubmenuHiding: null,\n      onSubmenuHidden: null,\n      adaptivityEnabled: false\n    });\n  }\n  _setOptionsByReference() {\n    super._setOptionsByReference();\n    extend(this._optionsByReference, {\n      animation: true,\n      selectedItem: true\n    });\n  }\n  _itemElements() {\n    var rootMenuElements = super._itemElements();\n    var submenuElements = this._submenuItemElements();\n    return rootMenuElements.add(submenuElements);\n  }\n  _submenuItemElements() {\n    var elements = [];\n    var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\n    var currentSubmenu = this._submenus.length && this._submenus[0];\n    if (currentSubmenu && currentSubmenu.itemsContainer()) {\n      elements = currentSubmenu.itemsContainer().find(itemSelector);\n    }\n    return elements;\n  }\n  _focusTarget() {\n    return this.$element();\n  }\n  _isMenuHorizontal() {\n    return \"horizontal\" === this.option(\"orientation\");\n  }\n  _moveFocus(location) {\n    var $items = this._getAvailableItems();\n    var isMenuHorizontal = this._isMenuHorizontal();\n    var $activeItem = this._getActiveItem(true);\n    var argument;\n    var operation;\n    var navigationAction;\n    var $newTarget;\n    switch (location) {\n      case FOCUS_UP:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n      case FOCUS_DOWN:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n      case FOCUS_RIGHT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n      case FOCUS_LEFT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n      default:\n        return super._moveFocus(location);\n    }\n    if ($newTarget && 0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  }\n  _getItemsNavigationOperation(operation) {\n    var navOperation = operation;\n    if (this.option(\"rtlEnabled\")) {\n      navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION;\n    }\n    return navOperation;\n  }\n  _getKeyboardNavigationAction(operation, argument) {\n    var action = noop;\n    switch (operation) {\n      case SHOW_SUBMENU_OPERATION:\n        if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\n          action = this._showSubmenu.bind(this, argument);\n        }\n        break;\n      case NEXTITEM_OPERATION:\n        action = this._nextItem.bind(this, argument);\n        break;\n      case PREVITEM_OPERATION:\n        action = this._prevItem.bind(this, argument);\n    }\n    return action;\n  }\n  _clean() {\n    super._clean();\n    this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer);\n  }\n  _visibilityChanged(visible) {\n    if (visible) {\n      if (!this._menuItemsWidth) {\n        this._updateItemsWidthCache();\n      }\n      this._dimensionChanged();\n    }\n  }\n  _isAdaptivityEnabled() {\n    return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\");\n  }\n  _updateItemsWidthCache() {\n    var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\n    this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true);\n  }\n  _dimensionChanged() {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n    var containerWidth = getOuterWidth(this.$element());\n    this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth);\n  }\n  _init() {\n    super._init();\n    this._submenus = [];\n  }\n  _initActions() {\n    this._actions = {};\n    each(ACTIONS, (index, action) => {\n      this._actions[action] = this._createActionByOption(action);\n    });\n  }\n  _initMarkup() {\n    this._visibleSubmenu = null;\n    this.$element().addClass(DX_MENU_CLASS);\n    super._initMarkup();\n    this._addCustomCssClass(this.$element());\n    this.setAria(\"role\", \"menubar\");\n  }\n  _render() {\n    super._render();\n    this._initAdaptivity();\n  }\n  _renderHamburgerButton() {\n    this._hamburger = new Button($(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\n      icon: \"menu\",\n      activeStateEnabled: false,\n      onClick: this._toggleTreeView.bind(this)\n    });\n    return this._hamburger.$element();\n  }\n  _toggleTreeView(state) {\n    if (isPlainObject(state)) {\n      state = !this._overlay.option(\"visible\");\n    }\n    this._overlay.option(\"visible\", state);\n    this._toggleHamburgerActiveState(state);\n  }\n  _toggleHamburgerActiveState(state) {\n    this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state);\n  }\n  _toggleAdaptiveMode(state) {\n    var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\n    var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\n    if (state) {\n      this._hideVisibleSubmenu();\n    } else {\n      this._treeView && this._treeView.collapseAll();\n      this._overlay && this._toggleTreeView(state);\n    }\n    $menuItemsContainer.toggle(!state);\n    $adaptiveElements.toggle(state);\n  }\n  _removeAdaptivity() {\n    if (!this._$adaptiveContainer) {\n      return;\n    }\n    this._toggleAdaptiveMode(false);\n    this._$adaptiveContainer.remove();\n    this._$adaptiveContainer = null;\n    this._treeView = null;\n    this._hamburger = null;\n    this._overlay = null;\n  }\n  _treeviewItemClickHandler(e) {\n    this._actions.onItemClick(e);\n    if (!e.node.children.length) {\n      this._toggleTreeView(false);\n    }\n  }\n  _getAdaptiveOverlayOptions() {\n    var rtl = this.option(\"rtlEnabled\");\n    var position = rtl ? \"right\" : \"left\";\n    return {\n      _ignoreFunctionValueDeprecation: true,\n      maxHeight: () => getElementMaxHeightByWindow(this.$element()),\n      deferRendering: false,\n      shading: false,\n      animation: false,\n      hideOnParentScroll: true,\n      onHidden: () => {\n        this._toggleHamburgerActiveState(false);\n      },\n      height: \"auto\",\n      hideOnOutsideClick: e => !$(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length,\n      position: {\n        collision: \"flipfit\",\n        at: \"bottom \" + position,\n        my: \"top \" + position,\n        of: this._hamburger.$element()\n      }\n    };\n  }\n  _getTreeViewOptions() {\n    var menuOptions = {};\n    each([\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"], (_, option) => {\n      menuOptions[option] = this.option(option);\n    });\n    each([\"onItemContextMenu\", \"onSelectionChanged\", \"onItemRendered\"], (_, actionName) => {\n      menuOptions[actionName] = e => {\n        this._actions[actionName](e);\n      };\n    });\n    return extend(menuOptions, {\n      dataSource: this.getDataSource(),\n      animationEnabled: !!this.option(\"animation\"),\n      onItemClick: this._treeviewItemClickHandler.bind(this),\n      onItemExpanded: e => {\n        this._overlay.repaint();\n        this._actions.onSubmenuShown(e);\n      },\n      onItemCollapsed: e => {\n        this._overlay.repaint();\n        this._actions.onSubmenuHidden(e);\n      },\n      selectNodesRecursive: false,\n      selectByClick: this.option(\"selectByClick\"),\n      expandEvent: \"click\"\n    });\n  }\n  _initAdaptivity() {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n    this._$adaptiveContainer = $(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\n    var $hamburger = this._renderHamburgerButton();\n    this._treeView = this._createComponent($(\"<div>\"), TreeView, this._getTreeViewOptions());\n    this._overlay = this._createComponent($(\"<div>\"), Overlay, this._getAdaptiveOverlayOptions());\n    this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\n    this._overlay.$wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\n    this._$adaptiveContainer.append($hamburger);\n    this._$adaptiveContainer.append(this._overlay.$element());\n    this.$element().append(this._$adaptiveContainer);\n    this._updateItemsWidthCache();\n    this._dimensionChanged();\n  }\n  _getDelay(delayType) {\n    var delay = this.option(\"showFirstSubmenuMode\").delay;\n    if (!isDefined(delay)) {\n      return DEFAULT_DELAY[delayType];\n    } else {\n      return isObject(delay) ? delay[delayType] : delay;\n    }\n  }\n  _keyboardHandler(e) {\n    return super._keyboardHandler(e, !!this._visibleSubmenu);\n  }\n  _renderContainer() {\n    var $wrapper = $(\"<div>\");\n    $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\n    return super._renderContainer($wrapper);\n  }\n  _renderSubmenuItems(node, $itemFrame) {\n    var submenu = this._createSubmenu(node, $itemFrame);\n    this._submenus.push(submenu);\n    this._renderBorderElement($itemFrame);\n    return submenu;\n  }\n  _getKeyboardListeners() {\n    return super._getKeyboardListeners().concat(this._visibleSubmenu);\n  }\n  _createSubmenu(node, $rootItem) {\n    var $submenuContainer = $(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\n    var items = this._getChildNodes(node);\n    var subMenu = this._createComponent($submenuContainer, Submenu, extend(this._getSubmenuOptions(), {\n      _dataAdapter: this._dataAdapter,\n      _parentKey: node.internalFields.key,\n      items: items,\n      onHoverStart: this._clearTimeouts.bind(this),\n      position: this.getSubmenuPosition($rootItem)\n    }));\n    this._attachSubmenuHandlers($rootItem, subMenu);\n    return subMenu;\n  }\n  _getSubmenuOptions() {\n    var $submenuTarget = $(\"<div>\");\n    var isMenuHorizontal = this._isMenuHorizontal();\n    return {\n      itemTemplate: this.option(\"itemTemplate\"),\n      target: $submenuTarget,\n      orientation: this.option(\"orientation\"),\n      selectionMode: this.option(\"selectionMode\"),\n      cssClass: this.option(\"cssClass\"),\n      selectByClick: this.option(\"selectByClick\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      activeStateEnabled: this.option(\"activeStateEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      animation: this.option(\"animation\"),\n      showSubmenuMode: this.option(\"showSubmenuMode\"),\n      displayExpr: this.option(\"displayExpr\"),\n      disabledExpr: this.option(\"disabledExpr\"),\n      selectedExpr: this.option(\"selectedExpr\"),\n      itemsExpr: this.option(\"itemsExpr\"),\n      onFocusedItemChanged: e => {\n        if (!e.component.option(\"visible\")) {\n          return;\n        }\n        this.option(\"focusedElement\", e.component.option(\"focusedElement\"));\n      },\n      onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\n      onItemClick: this._nestedItemOnItemClickHandler.bind(this),\n      onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\n      onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\n      onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\n      onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\n      onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\n    };\n  }\n  _getShowFirstSubmenuMode() {\n    if (!this._isDesktopDevice()) {\n      return \"onClick\";\n    }\n    var optionValue = this.option(\"showFirstSubmenuMode\");\n    return isObject(optionValue) ? optionValue.name : optionValue;\n  }\n  _moveMainMenuFocus(direction) {\n    var $items = this._getAvailableItems();\n    var itemCount = $items.length;\n    var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\n    var itemIndex = $items.index($currentItem);\n    this._hideSubmenu(this._visibleSubmenu);\n    itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\n    if (itemIndex >= itemCount) {\n      itemIndex = 0;\n    } else if (itemIndex < 0) {\n      itemIndex = itemCount - 1;\n    }\n    var $newItem = $items.eq(itemIndex);\n    this.option(\"focusedElement\", getPublicElement($newItem));\n  }\n  _nestedItemOnSelectionChangedHandler(args) {\n    var selectedItem = args.addedItems.length && args.addedItems[0];\n    var submenu = Submenu.getInstance(args.element);\n    var onSelectionChanged = this._actions.onSelectionChanged;\n    onSelectionChanged(args);\n    selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\n    this._clearRootSelection();\n    this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\n  }\n  _clearSelectionInSubmenus(item, targetSubmenu) {\n    var cleanAllSubmenus = !arguments.length;\n    each(this._submenus, (index, submenu) => {\n      var $submenu = submenu._itemContainer();\n      var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\n      var $selectedItem = $submenu.find(\".\".concat(this._selectedItemClass()));\n      if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\n        $selectedItem.removeClass(this._selectedItemClass());\n        var selectedItemData = this._getItemData($selectedItem);\n        if (selectedItemData) {\n          selectedItemData.selected = false;\n        }\n        submenu._clearSelectedItems();\n      }\n    });\n  }\n  _clearRootSelection() {\n    var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\n    if ($prevSelectedItem.length) {\n      var prevSelectedItemData = this._getItemData($prevSelectedItem);\n      prevSelectedItemData.selected = false;\n      $prevSelectedItem.removeClass(this._selectedItemClass());\n    }\n  }\n  _nestedItemOnItemClickHandler(e) {\n    this._actions.onItemClick(e);\n  }\n  _nestedItemOnItemRenderedHandler(e) {\n    this._actions.onItemRendered(e);\n  }\n  _attachSubmenuHandlers($rootItem, submenu) {\n    var $submenuOverlayContent = submenu.getOverlayContent();\n    var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\n    var submenuMouseLeaveName = addNamespace(hoverEventEnd, this.NAME + \"_submenu\");\n    submenu.option({\n      onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\n      onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\n      onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\n      onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\n    });\n    each(submenus, (index, submenu) => {\n      eventsEngine.off(submenu, submenuMouseLeaveName);\n      eventsEngine.on(submenu, submenuMouseLeaveName, null, this._submenuMouseLeaveHandler.bind(this, $rootItem));\n    });\n  }\n  _submenuOnShowingHandler($rootItem, submenu) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n    this._actions.onSubmenuShowing({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n    $border.show();\n    $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS);\n  }\n  _submenuOnShownHandler($rootItem, submenu) {\n    this._actions.onSubmenuShown({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n  }\n  _submenuOnHidingHandler($rootItem, submenu, eventArgs) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n    var args = eventArgs;\n    args.rootItem = getPublicElement($rootItem);\n    args.submenu = submenu;\n    this._actions.onSubmenuHiding(args);\n    eventArgs = args;\n    if (!eventArgs.cancel) {\n      if (this._visibleSubmenu === submenu) {\n        this._visibleSubmenu = null;\n      }\n      $border.hide();\n      $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n    }\n  }\n  _submenuOnHiddenHandler($rootItem, submenu) {\n    this._actions.onSubmenuHidden({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n  }\n  _submenuMouseLeaveHandler($rootItem, eventArgs) {\n    var target = $(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\n    var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\n    if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\n      this._clearTimeouts();\n      setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n    }\n  }\n  _hideSubmenuAfterTimeout() {\n    if (!this._visibleSubmenu) {\n      return;\n    }\n    var isRootItemHovered = $(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\n    var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\n    var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\n    if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\n      this._visibleSubmenu.hide();\n    }\n  }\n  _getSubmenuByRootElement($rootItem) {\n    if (!$rootItem) {\n      return false;\n    }\n    var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\n    return $submenu.length && Submenu.getInstance($submenu);\n  }\n  getSubmenuPosition($rootItem) {\n    var isHorizontalMenu = this._isMenuHorizontal();\n    var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var submenuPosition = {\n      collision: \"flip\",\n      of: $rootItem\n    };\n    switch (submenuDirection) {\n      case \"leftortop\":\n        submenuPosition.at = \"left top\";\n        submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        break;\n      case \"rightorbottom\":\n        submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        submenuPosition.my = \"left top\";\n        break;\n      default:\n        if (isHorizontalMenu) {\n          submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        } else {\n          submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        }\n    }\n    return submenuPosition;\n  }\n  _renderBorderElement($item) {\n    $(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide();\n  }\n  _itemPointerDownHandler(e) {\n    var $target = $(e.target);\n    var $closestItem = $target.closest(this._itemElements());\n    if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\n      this.option(\"focusedElement\", null);\n      return;\n    }\n    super._itemPointerDownHandler(e);\n  }\n  _hoverStartHandler(e) {\n    var mouseMoveEventName = addNamespace(pointerEvents.move, this.NAME);\n    var $item = this._getItemElementByEventArgs(e);\n    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n    var isSelectionActive = isDefined(e.buttons) && 1 === e.buttons || !isDefined(e.buttons) && 1 === e.which;\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n    eventsEngine.off($item, mouseMoveEventName);\n    if (!this._hasChildren(node)) {\n      this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n      return;\n    }\n    if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\n      var submenu = this._getSubmenuByElement($item);\n      this._clearTimeouts();\n      if (!submenu.isOverlayVisible()) {\n        eventsEngine.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\n        this._showSubmenuTimer = this._getDelay(\"hide\");\n      }\n    }\n  }\n  _hoverEndHandler(eventArg) {\n    var $item = this._getItemElementByEventArgs(eventArg);\n    var relatedTarget = $(eventArg.relatedTarget);\n    super._hoverEndHandler(eventArg);\n    this._clearTimeouts();\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n    if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\n      return;\n    }\n    if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\n      this._hideSubmenuTimer = setTimeout(() => {\n        this._hideSubmenuAfterTimeout();\n      }, this._getDelay(\"hide\"));\n    }\n  }\n  _hideVisibleSubmenu() {\n    if (!this._visibleSubmenu) {\n      return false;\n    }\n    this._hideSubmenu(this._visibleSubmenu);\n    return true;\n  }\n  _showSubmenu($itemElement) {\n    var submenu = this._getSubmenuByElement($itemElement);\n    if (this._visibleSubmenu !== submenu) {\n      this._hideVisibleSubmenu();\n    }\n    if (submenu) {\n      this._clearTimeouts();\n      this.focus();\n      submenu.show();\n      this.option(\"focusedElement\", submenu.option(\"focusedElement\"));\n    }\n    this._visibleSubmenu = submenu;\n    this._hoveredRootItem = $itemElement;\n  }\n  _hideSubmenu(submenu) {\n    submenu && submenu.hide();\n    if (this._visibleSubmenu === submenu) {\n      this._visibleSubmenu = null;\n    }\n    this._hoveredRootItem = null;\n  }\n  _itemMouseMoveHandler(e) {\n    if (e.pointers && e.pointers.length) {\n      return;\n    }\n    var $item = $(e.currentTarget);\n    if (!isDefined(this._showSubmenuTimer)) {\n      return;\n    }\n    this._clearTimeouts();\n    this._showSubmenuTimer = setTimeout(() => {\n      var submenu = this._getSubmenuByElement($item);\n      if (submenu && !submenu.isOverlayVisible()) {\n        this._showSubmenu($item);\n      }\n    }, this._getDelay(\"show\"));\n  }\n  _clearTimeouts() {\n    clearTimeout(this._hideSubmenuTimer);\n    clearTimeout(this._showSubmenuTimer);\n  }\n  _getSubmenuByElement($itemElement, itemData) {\n    var submenu = this._getSubmenuByRootElement($itemElement);\n    if (submenu) {\n      return submenu;\n    } else {\n      itemData = itemData || this._getItemData($itemElement);\n      var node = this._dataAdapter.getNodeByItem(itemData);\n      return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement);\n    }\n  }\n  _updateSubmenuVisibilityOnClick(actionArgs) {\n    var args = actionArgs.args.length && actionArgs.args[0];\n    if (!args || this._disabledGetter(args.itemData)) {\n      return;\n    }\n    var $itemElement = $(args.itemElement);\n    var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\n    this._updateSelectedItemOnClick(actionArgs);\n    if (this._visibleSubmenu) {\n      if (this._visibleSubmenu === currentSubmenu) {\n        if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\n          this._hideSubmenu(this._visibleSubmenu);\n        }\n        return;\n      } else {\n        this._hideSubmenu(this._visibleSubmenu);\n      }\n    }\n    if (!currentSubmenu) {\n      return;\n    }\n    if (!currentSubmenu.isOverlayVisible()) {\n      this._showSubmenu($itemElement);\n      return;\n    }\n  }\n  _optionChanged(args) {\n    if (ACTIONS.indexOf(args.name) >= 0) {\n      this._initActions();\n      return;\n    }\n    switch (args.name) {\n      case \"orientation\":\n      case \"submenuDirection\":\n        this._invalidate();\n        break;\n      case \"showFirstSubmenuMode\":\n      case \"hideSubmenuOnMouseLeave\":\n        break;\n      case \"showSubmenuMode\":\n        this._changeSubmenusOption(args.name, args.value);\n        break;\n      case \"adaptivityEnabled\":\n        args.value ? this._initAdaptivity() : this._removeAdaptivity();\n        break;\n      case \"width\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(args.name, args.value);\n          this._overlay.option(args.name, args.value);\n        }\n        super._optionChanged(args);\n        this._dimensionChanged();\n        break;\n      case \"animation\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(\"animationEnabled\", !!args.value);\n        }\n        super._optionChanged(args);\n        break;\n      default:\n        if (this._isAdaptivityEnabled() && (args.name === args.fullName || \"items\" === args.name)) {\n          this._treeView.option(args.fullName, args.value);\n        }\n        super._optionChanged(args);\n    }\n  }\n  _changeSubmenusOption(name, value) {\n    each(this._submenus, (index, submenu) => {\n      submenu.option(name, value);\n    });\n  }\n  selectItem(itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n    super.selectItem(itemElement);\n  }\n  unselectItem(itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n    super.selectItem(itemElement);\n  }\n}\nregisterComponent(\"dxMenu\", Menu);\nexport default Menu;","map":{"version":3,"names":["getOuterWidth","$","eventsEngine","registerComponent","noop","getPublicElement","each","isPlainObject","isObject","isDefined","extend","getElementMaxHeightByWindow","addNamespace","pointerEvents","end","hoverEventEnd","MenuBase","Overlay","Submenu","Button","TreeView","DX_MENU_CLASS","DX_MENU_VERTICAL_CLASS","DX_MENU_HORIZONTAL_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_CONTEXT_MENU_CLASS","DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS","DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS","DX_SUBMENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_HOVER_CLASS","DX_STATE_ACTIVE_CLASS","DX_ADAPTIVE_MODE_CLASS","DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS","DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","SHOW_SUBMENU_OPERATION","NEXTITEM_OPERATION","PREVITEM_OPERATION","DEFAULT_DELAY","show","hide","ACTIONS","Menu","_getDefaultOptions","orientation","submenuDirection","showFirstSubmenuMode","name","delay","hideSubmenuOnMouseLeave","onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","adaptivityEnabled","_setOptionsByReference","_optionsByReference","animation","selectedItem","_itemElements","rootMenuElements","submenuElements","_submenuItemElements","add","elements","itemSelector","concat","currentSubmenu","_submenus","length","itemsContainer","find","_focusTarget","$element","_isMenuHorizontal","option","_moveFocus","location","$items","_getAvailableItems","isMenuHorizontal","$activeItem","_getActiveItem","argument","operation","navigationAction","$newTarget","_getItemsNavigationOperation","_getKeyboardNavigationAction","navOperation","action","hasClass","_showSubmenu","bind","_nextItem","_prevItem","_clean","clearTimeout","_resizeEventTimer","_visibilityChanged","visible","_menuItemsWidth","_updateItemsWidthCache","_dimensionChanged","_isAdaptivityEnabled","$menuItems","first","children","_getSummaryItemsWidth","containerWidth","_toggleAdaptiveMode","_init","_initActions","_actions","index","_createActionByOption","_initMarkup","_visibleSubmenu","addClass","_addCustomCssClass","setAria","_render","_initAdaptivity","_renderHamburgerButton","_hamburger","icon","activeStateEnabled","onClick","_toggleTreeView","state","_overlay","_toggleHamburgerActiveState","toggleClass","$menuItemsContainer","$adaptiveElements","_hideVisibleSubmenu","_treeView","collapseAll","toggle","_removeAdaptivity","_$adaptiveContainer","remove","_treeviewItemClickHandler","e","onItemClick","node","_getAdaptiveOverlayOptions","rtl","position","_ignoreFunctionValueDeprecation","maxHeight","deferRendering","shading","hideOnParentScroll","onHidden","height","hideOnOutsideClick","target","closest","collision","at","my","of","_getTreeViewOptions","menuOptions","_","actionName","dataSource","getDataSource","animationEnabled","onItemExpanded","repaint","onItemCollapsed","selectNodesRecursive","selectByClick","expandEvent","$hamburger","_createComponent","$content","append","$wrapper","_getDelay","delayType","_keyboardHandler","_renderContainer","appendTo","_renderSubmenuItems","$itemFrame","submenu","_createSubmenu","push","_renderBorderElement","_getKeyboardListeners","$rootItem","$submenuContainer","items","_getChildNodes","subMenu","_getSubmenuOptions","_dataAdapter","_parentKey","internalFields","key","onHoverStart","_clearTimeouts","getSubmenuPosition","_attachSubmenuHandlers","$submenuTarget","itemTemplate","selectionMode","cssClass","hoverStateEnabled","focusStateEnabled","showSubmenuMode","displayExpr","disabledExpr","selectedExpr","itemsExpr","onFocusedItemChanged","component","onSelectionChanged","_nestedItemOnSelectionChangedHandler","_nestedItemOnItemClickHandler","onItemRendered","_nestedItemOnItemRenderedHandler","onLeftFirstItem","_moveMainMenuFocus","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","_getShowFirstSubmenuMode","_isDesktopDevice","optionValue","direction","itemCount","$currentItem","filter","eq","itemIndex","_hideSubmenu","$newItem","args","addedItems","getInstance","element","_clearSelectionInSubmenus","_clearRootSelection","_setOptionWithoutOptionChange","item","targetSubmenu","cleanAllSubmenus","arguments","$submenu","_itemContainer","isOtherItem","is","$selectedItem","_selectedItemClass","removeClass","selectedItemData","_getItemData","selected","_clearSelectedItems","$prevSelectedItem","prevSelectedItemData","$submenuOverlayContent","getOverlayContent","submenus","submenuMouseLeaveName","NAME","onShowing","_submenuOnShowingHandler","onShown","_submenuOnShownHandler","onHiding","_submenuOnHidingHandler","_submenuOnHiddenHandler","off","on","_submenuMouseLeaveHandler","$border","rootItem","eventArgs","cancel","relatedTarget","parents","contextMenu","_getSubmenuByRootElement","setTimeout","_hideSubmenuAfterTimeout","isRootItemHovered","context","isSubmenuItemHovered","hoveredElementFromSubMenu","get","querySelector","isHorizontalMenu","toLowerCase","rtlEnabled","submenuPosition","$item","_itemPointerDownHandler","$target","$closestItem","_hoverStartHandler","mouseMoveEventName","move","_getItemElementByEventArgs","getNodeByItem","isSelectionActive","buttons","which","_isItemDisabled","_hasChildren","_showSubmenuTimer","_getSubmenuByElement","isOverlayVisible","_itemMouseMoveHandler","_hoverEndHandler","eventArg","_hideSubmenuTimer","$itemElement","focus","_hoveredRootItem","pointers","currentTarget","itemData","_updateSubmenuVisibilityOnClick","actionArgs","_disabledGetter","itemElement","_updateSelectedItemOnClick","_optionChanged","indexOf","_invalidate","_changeSubmenusOption","value","fullName","selectItem","unselectItem"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/devextreme/esm/ui/menu/ui.menu.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/menu/ui.menu.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isPlainObject,\r\n    isObject,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getElementMaxHeightByWindow\r\n} from \"../overlay/utils\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    end as hoverEventEnd\r\n} from \"../../events/hover\";\r\nimport MenuBase from \"../context_menu/ui.menu_base\";\r\nimport Overlay from \"../overlay/ui.overlay\";\r\nimport Submenu from \"./ui.submenu\";\r\nimport Button from \"../button\";\r\nimport TreeView from \"../tree_view\";\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\r\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\r\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\r\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\r\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\r\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\r\nvar NEXTITEM_OPERATION = \"nextItem\";\r\nvar PREVITEM_OPERATION = \"prevItem\";\r\nvar DEFAULT_DELAY = {\r\n    show: 50,\r\n    hide: 300\r\n};\r\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\r\nclass Menu extends MenuBase {\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            orientation: \"horizontal\",\r\n            submenuDirection: \"auto\",\r\n            showFirstSubmenuMode: {\r\n                name: \"onClick\",\r\n                delay: {\r\n                    show: 50,\r\n                    hide: 300\r\n                }\r\n            },\r\n            hideSubmenuOnMouseLeave: false,\r\n            onSubmenuShowing: null,\r\n            onSubmenuShown: null,\r\n            onSubmenuHiding: null,\r\n            onSubmenuHidden: null,\r\n            adaptivityEnabled: false\r\n        })\r\n    }\r\n    _setOptionsByReference() {\r\n        super._setOptionsByReference();\r\n        extend(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    }\r\n    _itemElements() {\r\n        var rootMenuElements = super._itemElements();\r\n        var submenuElements = this._submenuItemElements();\r\n        return rootMenuElements.add(submenuElements)\r\n    }\r\n    _submenuItemElements() {\r\n        var elements = [];\r\n        var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\r\n        var currentSubmenu = this._submenus.length && this._submenus[0];\r\n        if (currentSubmenu && currentSubmenu.itemsContainer()) {\r\n            elements = currentSubmenu.itemsContainer().find(itemSelector)\r\n        }\r\n        return elements\r\n    }\r\n    _focusTarget() {\r\n        return this.$element()\r\n    }\r\n    _isMenuHorizontal() {\r\n        return \"horizontal\" === this.option(\"orientation\")\r\n    }\r\n    _moveFocus(location) {\r\n        var $items = this._getAvailableItems();\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        var $activeItem = this._getActiveItem(true);\r\n        var argument;\r\n        var operation;\r\n        var navigationAction;\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_UP:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_DOWN:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_LEFT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            default:\r\n                return super._moveFocus(location)\r\n        }\r\n        if ($newTarget && 0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    }\r\n    _getItemsNavigationOperation(operation) {\r\n        var navOperation = operation;\r\n        if (this.option(\"rtlEnabled\")) {\r\n            navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION\r\n        }\r\n        return navOperation\r\n    }\r\n    _getKeyboardNavigationAction(operation, argument) {\r\n        var action = noop;\r\n        switch (operation) {\r\n            case SHOW_SUBMENU_OPERATION:\r\n                if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n                    action = this._showSubmenu.bind(this, argument)\r\n                }\r\n                break;\r\n            case NEXTITEM_OPERATION:\r\n                action = this._nextItem.bind(this, argument);\r\n                break;\r\n            case PREVITEM_OPERATION:\r\n                action = this._prevItem.bind(this, argument)\r\n        }\r\n        return action\r\n    }\r\n    _clean() {\r\n        super._clean();\r\n        this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer)\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            if (!this._menuItemsWidth) {\r\n                this._updateItemsWidthCache()\r\n            }\r\n            this._dimensionChanged()\r\n        }\r\n    }\r\n    _isAdaptivityEnabled() {\r\n        return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\")\r\n    }\r\n    _updateItemsWidthCache() {\r\n        var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\r\n        this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true)\r\n    }\r\n    _dimensionChanged() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        var containerWidth = getOuterWidth(this.$element());\r\n        this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth)\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this._submenus = []\r\n    }\r\n    _initActions() {\r\n        this._actions = {};\r\n        each(ACTIONS, (index, action) => {\r\n            this._actions[action] = this._createActionByOption(action)\r\n        })\r\n    }\r\n    _initMarkup() {\r\n        this._visibleSubmenu = null;\r\n        this.$element().addClass(DX_MENU_CLASS);\r\n        super._initMarkup();\r\n        this._addCustomCssClass(this.$element());\r\n        this.setAria(\"role\", \"menubar\")\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._initAdaptivity()\r\n    }\r\n    _renderHamburgerButton() {\r\n        this._hamburger = new Button($(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\r\n            icon: \"menu\",\r\n            activeStateEnabled: false,\r\n            onClick: this._toggleTreeView.bind(this)\r\n        });\r\n        return this._hamburger.$element()\r\n    }\r\n    _toggleTreeView(state) {\r\n        if (isPlainObject(state)) {\r\n            state = !this._overlay.option(\"visible\")\r\n        }\r\n        this._overlay.option(\"visible\", state);\r\n        this._toggleHamburgerActiveState(state)\r\n    }\r\n    _toggleHamburgerActiveState(state) {\r\n        this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state)\r\n    }\r\n    _toggleAdaptiveMode(state) {\r\n        var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\r\n        var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\r\n        if (state) {\r\n            this._hideVisibleSubmenu()\r\n        } else {\r\n            this._treeView && this._treeView.collapseAll();\r\n            this._overlay && this._toggleTreeView(state)\r\n        }\r\n        $menuItemsContainer.toggle(!state);\r\n        $adaptiveElements.toggle(state)\r\n    }\r\n    _removeAdaptivity() {\r\n        if (!this._$adaptiveContainer) {\r\n            return\r\n        }\r\n        this._toggleAdaptiveMode(false);\r\n        this._$adaptiveContainer.remove();\r\n        this._$adaptiveContainer = null;\r\n        this._treeView = null;\r\n        this._hamburger = null;\r\n        this._overlay = null\r\n    }\r\n    _treeviewItemClickHandler(e) {\r\n        this._actions.onItemClick(e);\r\n        if (!e.node.children.length) {\r\n            this._toggleTreeView(false)\r\n        }\r\n    }\r\n    _getAdaptiveOverlayOptions() {\r\n        var rtl = this.option(\"rtlEnabled\");\r\n        var position = rtl ? \"right\" : \"left\";\r\n        return {\r\n            _ignoreFunctionValueDeprecation: true,\r\n            maxHeight: () => getElementMaxHeightByWindow(this.$element()),\r\n            deferRendering: false,\r\n            shading: false,\r\n            animation: false,\r\n            hideOnParentScroll: true,\r\n            onHidden: () => {\r\n                this._toggleHamburgerActiveState(false)\r\n            },\r\n            height: \"auto\",\r\n            hideOnOutsideClick: e => !$(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length,\r\n            position: {\r\n                collision: \"flipfit\",\r\n                at: \"bottom \" + position,\r\n                my: \"top \" + position,\r\n                of: this._hamburger.$element()\r\n            }\r\n        }\r\n    }\r\n    _getTreeViewOptions() {\r\n        var menuOptions = {};\r\n        each([\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"], (_, option) => {\r\n            menuOptions[option] = this.option(option)\r\n        });\r\n        each([\"onItemContextMenu\", \"onSelectionChanged\", \"onItemRendered\"], (_, actionName) => {\r\n            menuOptions[actionName] = e => {\r\n                this._actions[actionName](e)\r\n            }\r\n        });\r\n        return extend(menuOptions, {\r\n            dataSource: this.getDataSource(),\r\n            animationEnabled: !!this.option(\"animation\"),\r\n            onItemClick: this._treeviewItemClickHandler.bind(this),\r\n            onItemExpanded: e => {\r\n                this._overlay.repaint();\r\n                this._actions.onSubmenuShown(e)\r\n            },\r\n            onItemCollapsed: e => {\r\n                this._overlay.repaint();\r\n                this._actions.onSubmenuHidden(e)\r\n            },\r\n            selectNodesRecursive: false,\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            expandEvent: \"click\"\r\n        })\r\n    }\r\n    _initAdaptivity() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        this._$adaptiveContainer = $(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\r\n        var $hamburger = this._renderHamburgerButton();\r\n        this._treeView = this._createComponent($(\"<div>\"), TreeView, this._getTreeViewOptions());\r\n        this._overlay = this._createComponent($(\"<div>\"), Overlay, this._getAdaptiveOverlayOptions());\r\n        this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\r\n        this._overlay.$wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\r\n        this._$adaptiveContainer.append($hamburger);\r\n        this._$adaptiveContainer.append(this._overlay.$element());\r\n        this.$element().append(this._$adaptiveContainer);\r\n        this._updateItemsWidthCache();\r\n        this._dimensionChanged()\r\n    }\r\n    _getDelay(delayType) {\r\n        var delay = this.option(\"showFirstSubmenuMode\").delay;\r\n        if (!isDefined(delay)) {\r\n            return DEFAULT_DELAY[delayType]\r\n        } else {\r\n            return isObject(delay) ? delay[delayType] : delay\r\n        }\r\n    }\r\n    _keyboardHandler(e) {\r\n        return super._keyboardHandler(e, !!this._visibleSubmenu)\r\n    }\r\n    _renderContainer() {\r\n        var $wrapper = $(\"<div>\");\r\n        $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\r\n        return super._renderContainer($wrapper)\r\n    }\r\n    _renderSubmenuItems(node, $itemFrame) {\r\n        var submenu = this._createSubmenu(node, $itemFrame);\r\n        this._submenus.push(submenu);\r\n        this._renderBorderElement($itemFrame);\r\n        return submenu\r\n    }\r\n    _getKeyboardListeners() {\r\n        return super._getKeyboardListeners().concat(this._visibleSubmenu)\r\n    }\r\n    _createSubmenu(node, $rootItem) {\r\n        var $submenuContainer = $(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\r\n        var items = this._getChildNodes(node);\r\n        var subMenu = this._createComponent($submenuContainer, Submenu, extend(this._getSubmenuOptions(), {\r\n            _dataAdapter: this._dataAdapter,\r\n            _parentKey: node.internalFields.key,\r\n            items: items,\r\n            onHoverStart: this._clearTimeouts.bind(this),\r\n            position: this.getSubmenuPosition($rootItem)\r\n        }));\r\n        this._attachSubmenuHandlers($rootItem, subMenu);\r\n        return subMenu\r\n    }\r\n    _getSubmenuOptions() {\r\n        var $submenuTarget = $(\"<div>\");\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        return {\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            target: $submenuTarget,\r\n            orientation: this.option(\"orientation\"),\r\n            selectionMode: this.option(\"selectionMode\"),\r\n            cssClass: this.option(\"cssClass\"),\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            activeStateEnabled: this.option(\"activeStateEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            showSubmenuMode: this.option(\"showSubmenuMode\"),\r\n            displayExpr: this.option(\"displayExpr\"),\r\n            disabledExpr: this.option(\"disabledExpr\"),\r\n            selectedExpr: this.option(\"selectedExpr\"),\r\n            itemsExpr: this.option(\"itemsExpr\"),\r\n            onFocusedItemChanged: e => {\r\n                if (!e.component.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.option(\"focusedElement\", e.component.option(\"focusedElement\"))\r\n            },\r\n            onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\r\n            onItemClick: this._nestedItemOnItemClickHandler.bind(this),\r\n            onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\r\n            onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\r\n            onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\r\n            onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\r\n            onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\r\n        }\r\n    }\r\n    _getShowFirstSubmenuMode() {\r\n        if (!this._isDesktopDevice()) {\r\n            return \"onClick\"\r\n        }\r\n        var optionValue = this.option(\"showFirstSubmenuMode\");\r\n        return isObject(optionValue) ? optionValue.name : optionValue\r\n    }\r\n    _moveMainMenuFocus(direction) {\r\n        var $items = this._getAvailableItems();\r\n        var itemCount = $items.length;\r\n        var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\r\n        var itemIndex = $items.index($currentItem);\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\r\n        if (itemIndex >= itemCount) {\r\n            itemIndex = 0\r\n        } else if (itemIndex < 0) {\r\n            itemIndex = itemCount - 1\r\n        }\r\n        var $newItem = $items.eq(itemIndex);\r\n        this.option(\"focusedElement\", getPublicElement($newItem))\r\n    }\r\n    _nestedItemOnSelectionChangedHandler(args) {\r\n        var selectedItem = args.addedItems.length && args.addedItems[0];\r\n        var submenu = Submenu.getInstance(args.element);\r\n        var onSelectionChanged = this._actions.onSelectionChanged;\r\n        onSelectionChanged(args);\r\n        selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\r\n        this._clearRootSelection();\r\n        this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem)\r\n    }\r\n    _clearSelectionInSubmenus(item, targetSubmenu) {\r\n        var cleanAllSubmenus = !arguments.length;\r\n        each(this._submenus, (index, submenu) => {\r\n            var $submenu = submenu._itemContainer();\r\n            var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\r\n            var $selectedItem = $submenu.find(\".\".concat(this._selectedItemClass()));\r\n            if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\r\n                $selectedItem.removeClass(this._selectedItemClass());\r\n                var selectedItemData = this._getItemData($selectedItem);\r\n                if (selectedItemData) {\r\n                    selectedItemData.selected = false\r\n                }\r\n                submenu._clearSelectedItems()\r\n            }\r\n        })\r\n    }\r\n    _clearRootSelection() {\r\n        var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\r\n        if ($prevSelectedItem.length) {\r\n            var prevSelectedItemData = this._getItemData($prevSelectedItem);\r\n            prevSelectedItemData.selected = false;\r\n            $prevSelectedItem.removeClass(this._selectedItemClass())\r\n        }\r\n    }\r\n    _nestedItemOnItemClickHandler(e) {\r\n        this._actions.onItemClick(e)\r\n    }\r\n    _nestedItemOnItemRenderedHandler(e) {\r\n        this._actions.onItemRendered(e)\r\n    }\r\n    _attachSubmenuHandlers($rootItem, submenu) {\r\n        var $submenuOverlayContent = submenu.getOverlayContent();\r\n        var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var submenuMouseLeaveName = addNamespace(hoverEventEnd, this.NAME + \"_submenu\");\r\n        submenu.option({\r\n            onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\r\n            onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\r\n            onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\r\n            onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\r\n        });\r\n        each(submenus, (index, submenu) => {\r\n            eventsEngine.off(submenu, submenuMouseLeaveName);\r\n            eventsEngine.on(submenu, submenuMouseLeaveName, null, this._submenuMouseLeaveHandler.bind(this, $rootItem))\r\n        })\r\n    }\r\n    _submenuOnShowingHandler($rootItem, submenu) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        this._actions.onSubmenuShowing({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        });\r\n        $border.show();\r\n        $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n    }\r\n    _submenuOnShownHandler($rootItem, submenu) {\r\n        this._actions.onSubmenuShown({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        })\r\n    }\r\n    _submenuOnHidingHandler($rootItem, submenu, eventArgs) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        var args = eventArgs;\r\n        args.rootItem = getPublicElement($rootItem);\r\n        args.submenu = submenu;\r\n        this._actions.onSubmenuHiding(args);\r\n        eventArgs = args;\r\n        if (!eventArgs.cancel) {\r\n            if (this._visibleSubmenu === submenu) {\r\n                this._visibleSubmenu = null\r\n            }\r\n            $border.hide();\r\n            $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n        }\r\n    }\r\n    _submenuOnHiddenHandler($rootItem, submenu) {\r\n        this._actions.onSubmenuHidden({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        })\r\n    }\r\n    _submenuMouseLeaveHandler($rootItem, eventArgs) {\r\n        var target = $(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\r\n        var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\r\n            this._clearTimeouts();\r\n            setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"))\r\n        }\r\n    }\r\n    _hideSubmenuAfterTimeout() {\r\n        if (!this._visibleSubmenu) {\r\n            return\r\n        }\r\n        var isRootItemHovered = $(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\r\n        var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\r\n        var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\r\n        if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\r\n            this._visibleSubmenu.hide()\r\n        }\r\n    }\r\n    _getSubmenuByRootElement($rootItem) {\r\n        if (!$rootItem) {\r\n            return false\r\n        }\r\n        var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\r\n        return $submenu.length && Submenu.getInstance($submenu)\r\n    }\r\n    getSubmenuPosition($rootItem) {\r\n        var isHorizontalMenu = this._isMenuHorizontal();\r\n        var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var submenuPosition = {\r\n            collision: \"flip\",\r\n            of: $rootItem\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"leftortop\":\r\n                submenuPosition.at = \"left top\";\r\n                submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                break;\r\n            case \"rightorbottom\":\r\n                submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                submenuPosition.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (isHorizontalMenu) {\r\n                    submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                } else {\r\n                    submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                }\r\n        }\r\n        return submenuPosition\r\n    }\r\n    _renderBorderElement($item) {\r\n        $(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide()\r\n    }\r\n    _itemPointerDownHandler(e) {\r\n        var $target = $(e.target);\r\n        var $closestItem = $target.closest(this._itemElements());\r\n        if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\r\n            this.option(\"focusedElement\", null);\r\n            return\r\n        }\r\n        super._itemPointerDownHandler(e)\r\n    }\r\n    _hoverStartHandler(e) {\r\n        var mouseMoveEventName = addNamespace(pointerEvents.move, this.NAME);\r\n        var $item = this._getItemElementByEventArgs(e);\r\n        var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        var isSelectionActive = isDefined(e.buttons) && 1 === e.buttons || !isDefined(e.buttons) && 1 === e.which;\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        eventsEngine.off($item, mouseMoveEventName);\r\n        if (!this._hasChildren(node)) {\r\n            this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\r\n            return\r\n        }\r\n        if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\r\n            var submenu = this._getSubmenuByElement($item);\r\n            this._clearTimeouts();\r\n            if (!submenu.isOverlayVisible()) {\r\n                eventsEngine.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\r\n                this._showSubmenuTimer = this._getDelay(\"hide\")\r\n            }\r\n        }\r\n    }\r\n    _hoverEndHandler(eventArg) {\r\n        var $item = this._getItemElementByEventArgs(eventArg);\r\n        var relatedTarget = $(eventArg.relatedTarget);\r\n        super._hoverEndHandler(eventArg);\r\n        this._clearTimeouts();\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\r\n            return\r\n        }\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\r\n            this._hideSubmenuTimer = setTimeout(() => {\r\n                this._hideSubmenuAfterTimeout()\r\n            }, this._getDelay(\"hide\"))\r\n        }\r\n    }\r\n    _hideVisibleSubmenu() {\r\n        if (!this._visibleSubmenu) {\r\n            return false\r\n        }\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        return true\r\n    }\r\n    _showSubmenu($itemElement) {\r\n        var submenu = this._getSubmenuByElement($itemElement);\r\n        if (this._visibleSubmenu !== submenu) {\r\n            this._hideVisibleSubmenu()\r\n        }\r\n        if (submenu) {\r\n            this._clearTimeouts();\r\n            this.focus();\r\n            submenu.show();\r\n            this.option(\"focusedElement\", submenu.option(\"focusedElement\"))\r\n        }\r\n        this._visibleSubmenu = submenu;\r\n        this._hoveredRootItem = $itemElement\r\n    }\r\n    _hideSubmenu(submenu) {\r\n        submenu && submenu.hide();\r\n        if (this._visibleSubmenu === submenu) {\r\n            this._visibleSubmenu = null\r\n        }\r\n        this._hoveredRootItem = null\r\n    }\r\n    _itemMouseMoveHandler(e) {\r\n        if (e.pointers && e.pointers.length) {\r\n            return\r\n        }\r\n        var $item = $(e.currentTarget);\r\n        if (!isDefined(this._showSubmenuTimer)) {\r\n            return\r\n        }\r\n        this._clearTimeouts();\r\n        this._showSubmenuTimer = setTimeout(() => {\r\n            var submenu = this._getSubmenuByElement($item);\r\n            if (submenu && !submenu.isOverlayVisible()) {\r\n                this._showSubmenu($item)\r\n            }\r\n        }, this._getDelay(\"show\"))\r\n    }\r\n    _clearTimeouts() {\r\n        clearTimeout(this._hideSubmenuTimer);\r\n        clearTimeout(this._showSubmenuTimer)\r\n    }\r\n    _getSubmenuByElement($itemElement, itemData) {\r\n        var submenu = this._getSubmenuByRootElement($itemElement);\r\n        if (submenu) {\r\n            return submenu\r\n        } else {\r\n            itemData = itemData || this._getItemData($itemElement);\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement)\r\n        }\r\n    }\r\n    _updateSubmenuVisibilityOnClick(actionArgs) {\r\n        var args = actionArgs.args.length && actionArgs.args[0];\r\n        if (!args || this._disabledGetter(args.itemData)) {\r\n            return\r\n        }\r\n        var $itemElement = $(args.itemElement);\r\n        var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        if (this._visibleSubmenu) {\r\n            if (this._visibleSubmenu === currentSubmenu) {\r\n                if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\r\n                    this._hideSubmenu(this._visibleSubmenu)\r\n                }\r\n                return\r\n            } else {\r\n                this._hideSubmenu(this._visibleSubmenu)\r\n            }\r\n        }\r\n        if (!currentSubmenu) {\r\n            return\r\n        }\r\n        if (!currentSubmenu.isOverlayVisible()) {\r\n            this._showSubmenu($itemElement);\r\n            return\r\n        }\r\n    }\r\n    _optionChanged(args) {\r\n        if (ACTIONS.indexOf(args.name) >= 0) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"orientation\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showFirstSubmenuMode\":\r\n            case \"hideSubmenuOnMouseLeave\":\r\n                break;\r\n            case \"showSubmenuMode\":\r\n                this._changeSubmenusOption(args.name, args.value);\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                args.value ? this._initAdaptivity() : this._removeAdaptivity();\r\n                break;\r\n            case \"width\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(args.name, args.value);\r\n                    this._overlay.option(args.name, args.value)\r\n                }\r\n                super._optionChanged(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animation\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(\"animationEnabled\", !!args.value)\r\n                }\r\n                super._optionChanged(args);\r\n                break;\r\n            default:\r\n                if (this._isAdaptivityEnabled() && (args.name === args.fullName || \"items\" === args.name)) {\r\n                    this._treeView.option(args.fullName, args.value)\r\n                }\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _changeSubmenusOption(name, value) {\r\n        each(this._submenus, (index, submenu) => {\r\n            submenu.option(name, value)\r\n        })\r\n    }\r\n    selectItem(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        super.selectItem(itemElement)\r\n    }\r\n    unselectItem(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        super.selectItem(itemElement)\r\n    }\r\n}\r\nregisterComponent(\"dxMenu\", Menu);\r\nexport default Menu;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,aAAa,QACV,uBAAuB;AAC9B,OAAOC,CAAC,MAAM,qBAAqB;AACnC,OAAOC,YAAY,MAAM,iCAAiC;AAC1D,OAAOC,iBAAiB,MAAM,kCAAkC;AAChE,SACIC,IAAI,QACD,yBAAyB;AAChC,SACIC,gBAAgB,QACb,oBAAoB;AAC3B,SACIC,IAAI,QACD,2BAA2B;AAClC,SACIC,aAAa,EACbC,QAAQ,EACRC,SAAS,QACN,uBAAuB;AAC9B,SACIC,MAAM,QACH,yBAAyB;AAChC,SACIC,2BAA2B,QACxB,kBAAkB;AACzB,SACIC,YAAY,QACT,0BAA0B;AACjC,OAAOC,aAAa,MAAM,sBAAsB;AAChD,SACIC,GAAG,IAAIC,aAAa,QACjB,oBAAoB;AAC3B,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,OAAO,MAAM,cAAc;AAClC,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,QAAQ,MAAM,cAAc;AACnC,IAAIC,aAAa,GAAG,SAAS;AAC7B,IAAIC,sBAAsB,GAAGD,aAAa,GAAG,WAAW;AACxD,IAAIE,wBAAwB,GAAGF,aAAa,GAAG,aAAa;AAC5D,IAAIG,kBAAkB,GAAGH,aAAa,GAAG,OAAO;AAChD,IAAII,6BAA6B,GAAGJ,aAAa,GAAG,kBAAkB;AACtE,IAAIK,2BAA2B,GAAGF,kBAAkB,GAAG,WAAW;AAClE,IAAIG,qBAAqB,GAAG,iBAAiB;AAC7C,IAAIC,sCAAsC,GAAGD,qBAAqB,GAAG,mBAAmB;AACxF,IAAIE,uCAAuC,GAAG,mCAAmC;AACjF,IAAIC,gBAAgB,GAAG,YAAY;AACnC,IAAIC,uBAAuB,GAAG,mBAAmB;AACjD,IAAIC,oBAAoB,GAAG,gBAAgB;AAC3C,IAAIC,qBAAqB,GAAG,iBAAiB;AAC7C,IAAIC,sBAAsB,GAAGb,aAAa,GAAG,gBAAgB;AAC7D,IAAIc,kCAAkC,GAAGd,aAAa,GAAG,mBAAmB;AAC5E,IAAIe,sCAAsC,GAAGF,sBAAsB,GAAG,kBAAkB;AACxF,IAAIG,QAAQ,GAAG,IAAI;AACnB,IAAIC,UAAU,GAAG,MAAM;AACvB,IAAIC,UAAU,GAAG,MAAM;AACvB,IAAIC,WAAW,GAAG,OAAO;AACzB,IAAIC,sBAAsB,GAAG,aAAa;AAC1C,IAAIC,kBAAkB,GAAG,UAAU;AACnC,IAAIC,kBAAkB,GAAG,UAAU;AACnC,IAAIC,aAAa,GAAG;EAChBC,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE;AACV,CAAC;AACD,IAAIC,OAAO,GAAG,CAAC,kBAAkB,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,aAAa,EAAE,oBAAoB,EAAE,gBAAgB,CAAC;AACtK,MAAMC,IAAI,SAAShC,QAAQ,CAAC;EACxBiC,kBAAkBA,CAAA,EAAG;IACjB,OAAOvC,MAAM,CAAC,KAAK,CAACuC,kBAAkB,CAAC,CAAC,EAAE;MACtCC,WAAW,EAAE,YAAY;MACzBC,gBAAgB,EAAE,MAAM;MACxBC,oBAAoB,EAAE;QAClBC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE;UACHT,IAAI,EAAE,EAAE;UACRC,IAAI,EAAE;QACV;MACJ,CAAC;MACDS,uBAAuB,EAAE,KAAK;MAC9BC,gBAAgB,EAAE,IAAI;MACtBC,cAAc,EAAE,IAAI;MACpBC,eAAe,EAAE,IAAI;MACrBC,eAAe,EAAE,IAAI;MACrBC,iBAAiB,EAAE;IACvB,CAAC,CAAC;EACN;EACAC,sBAAsBA,CAAA,EAAG;IACrB,KAAK,CAACA,sBAAsB,CAAC,CAAC;IAC9BnD,MAAM,CAAC,IAAI,CAACoD,mBAAmB,EAAE;MAC7BC,SAAS,EAAE,IAAI;MACfC,YAAY,EAAE;IAClB,CAAC,CAAC;EACN;EACAC,aAAaA,CAAA,EAAG;IACZ,IAAIC,gBAAgB,GAAG,KAAK,CAACD,aAAa,CAAC,CAAC;IAC5C,IAAIE,eAAe,GAAG,IAAI,CAACC,oBAAoB,CAAC,CAAC;IACjD,OAAOF,gBAAgB,CAACG,GAAG,CAACF,eAAe,CAAC;EAChD;EACAC,oBAAoBA,CAAA,EAAG;IACnB,IAAIE,QAAQ,GAAG,EAAE;IACjB,IAAIC,YAAY,GAAG,GAAG,CAACC,MAAM,CAAChD,kBAAkB,CAAC;IACjD,IAAIiD,cAAc,GAAG,IAAI,CAACC,SAAS,CAACC,MAAM,IAAI,IAAI,CAACD,SAAS,CAAC,CAAC,CAAC;IAC/D,IAAID,cAAc,IAAIA,cAAc,CAACG,cAAc,CAAC,CAAC,EAAE;MACnDN,QAAQ,GAAGG,cAAc,CAACG,cAAc,CAAC,CAAC,CAACC,IAAI,CAACN,YAAY,CAAC;IACjE;IACA,OAAOD,QAAQ;EACnB;EACAQ,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAACC,QAAQ,CAAC,CAAC;EAC1B;EACAC,iBAAiBA,CAAA,EAAG;IAChB,OAAO,YAAY,KAAK,IAAI,CAACC,MAAM,CAAC,aAAa,CAAC;EACtD;EACAC,UAAUA,CAACC,QAAQ,EAAE;IACjB,IAAIC,MAAM,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACtC,IAAIC,gBAAgB,GAAG,IAAI,CAACN,iBAAiB,CAAC,CAAC;IAC/C,IAAIO,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC,IAAI,CAAC;IAC3C,IAAIC,QAAQ;IACZ,IAAIC,SAAS;IACb,IAAIC,gBAAgB;IACpB,IAAIC,UAAU;IACd,QAAQT,QAAQ;MACZ,KAAK9C,QAAQ;QACTqD,SAAS,GAAGJ,gBAAgB,GAAG7C,sBAAsB,GAAG,IAAI,CAACoD,4BAA4B,CAAClD,kBAAkB,CAAC;QAC7G8C,QAAQ,GAAGH,gBAAgB,GAAGC,WAAW,GAAGH,MAAM;QAClDO,gBAAgB,GAAG,IAAI,CAACG,4BAA4B,CAACJ,SAAS,EAAED,QAAQ,CAAC;QACzEG,UAAU,GAAGD,gBAAgB,CAAC,CAAC;QAC/B;MACJ,KAAKrD,UAAU;QACXoD,SAAS,GAAGJ,gBAAgB,GAAG7C,sBAAsB,GAAG,IAAI,CAACoD,4BAA4B,CAACnD,kBAAkB,CAAC;QAC7G+C,QAAQ,GAAGH,gBAAgB,GAAGC,WAAW,GAAGH,MAAM;QAClDO,gBAAgB,GAAG,IAAI,CAACG,4BAA4B,CAACJ,SAAS,EAAED,QAAQ,CAAC;QACzEG,UAAU,GAAGD,gBAAgB,CAAC,CAAC;QAC/B;MACJ,KAAKnD,WAAW;QACZkD,SAAS,GAAGJ,gBAAgB,GAAG,IAAI,CAACO,4BAA4B,CAACnD,kBAAkB,CAAC,GAAGD,sBAAsB;QAC7GgD,QAAQ,GAAGH,gBAAgB,GAAGF,MAAM,GAAGG,WAAW;QAClDI,gBAAgB,GAAG,IAAI,CAACG,4BAA4B,CAACJ,SAAS,EAAED,QAAQ,CAAC;QACzEG,UAAU,GAAGD,gBAAgB,CAAC,CAAC;QAC/B;MACJ,KAAKpD,UAAU;QACXmD,SAAS,GAAGJ,gBAAgB,GAAG,IAAI,CAACO,4BAA4B,CAAClD,kBAAkB,CAAC,GAAGF,sBAAsB;QAC7GgD,QAAQ,GAAGH,gBAAgB,GAAGF,MAAM,GAAGG,WAAW;QAClDI,gBAAgB,GAAG,IAAI,CAACG,4BAA4B,CAACJ,SAAS,EAAED,QAAQ,CAAC;QACzEG,UAAU,GAAGD,gBAAgB,CAAC,CAAC;QAC/B;MACJ;QACI,OAAO,KAAK,CAACT,UAAU,CAACC,QAAQ,CAAC;IACzC;IACA,IAAIS,UAAU,IAAI,CAAC,KAAKA,UAAU,CAACjB,MAAM,EAAE;MACvC,IAAI,CAACM,MAAM,CAAC,gBAAgB,EAAE5E,gBAAgB,CAACuF,UAAU,CAAC,CAAC;IAC/D;EACJ;EACAC,4BAA4BA,CAACH,SAAS,EAAE;IACpC,IAAIK,YAAY,GAAGL,SAAS;IAC5B,IAAI,IAAI,CAACT,MAAM,CAAC,YAAY,CAAC,EAAE;MAC3Bc,YAAY,GAAGL,SAAS,KAAK/C,kBAAkB,GAAGD,kBAAkB,GAAGC,kBAAkB;IAC7F;IACA,OAAOoD,YAAY;EACvB;EACAD,4BAA4BA,CAACJ,SAAS,EAAED,QAAQ,EAAE;IAC9C,IAAIO,MAAM,GAAG5F,IAAI;IACjB,QAAQsF,SAAS;MACb,KAAKjD,sBAAsB;QACvB,IAAI,CAACgD,QAAQ,CAACQ,QAAQ,CAAClE,uBAAuB,CAAC,EAAE;UAC7CiE,MAAM,GAAG,IAAI,CAACE,YAAY,CAACC,IAAI,CAAC,IAAI,EAAEV,QAAQ,CAAC;QACnD;QACA;MACJ,KAAK/C,kBAAkB;QACnBsD,MAAM,GAAG,IAAI,CAACI,SAAS,CAACD,IAAI,CAAC,IAAI,EAAEV,QAAQ,CAAC;QAC5C;MACJ,KAAK9C,kBAAkB;QACnBqD,MAAM,GAAG,IAAI,CAACK,SAAS,CAACF,IAAI,CAAC,IAAI,EAAEV,QAAQ,CAAC;IACpD;IACA,OAAOO,MAAM;EACjB;EACAM,MAAMA,CAAA,EAAG;IACL,KAAK,CAACA,MAAM,CAAC,CAAC;IACd,IAAI,CAACrB,MAAM,CAAC,+BAA+B,CAAC,IAAIsB,YAAY,CAAC,IAAI,CAACC,iBAAiB,CAAC;EACxF;EACAC,kBAAkBA,CAACC,OAAO,EAAE;IACxB,IAAIA,OAAO,EAAE;MACT,IAAI,CAAC,IAAI,CAACC,eAAe,EAAE;QACvB,IAAI,CAACC,sBAAsB,CAAC,CAAC;MACjC;MACA,IAAI,CAACC,iBAAiB,CAAC,CAAC;IAC5B;EACJ;EACAC,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAAC7B,MAAM,CAAC,mBAAmB,CAAC,IAAI,YAAY,KAAK,IAAI,CAACA,MAAM,CAAC,aAAa,CAAC;EAC1F;EACA2B,sBAAsBA,CAAA,EAAG;IACrB,IAAIG,UAAU,GAAG,IAAI,CAAChC,QAAQ,CAAC,CAAC,CAACF,IAAI,CAAC,IAAI,CAAC,CAACmC,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC,CAACA,QAAQ,CAAC,GAAG,CAACzC,MAAM,CAAChD,kBAAkB,CAAC,CAAC;IAC3G,IAAI,CAACmF,eAAe,GAAG,IAAI,CAACO,qBAAqB,CAACH,UAAU,EAAE,IAAI,CAAC;EACvE;EACAF,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAAC,IAAI,CAACC,oBAAoB,CAAC,CAAC,EAAE;MAC9B;IACJ;IACA,IAAIK,cAAc,GAAGnH,aAAa,CAAC,IAAI,CAAC+E,QAAQ,CAAC,CAAC,CAAC;IACnD,IAAI,CAACqC,mBAAmB,CAAC,IAAI,CAACT,eAAe,GAAGQ,cAAc,CAAC;EACnE;EACAE,KAAKA,CAAA,EAAG;IACJ,KAAK,CAACA,KAAK,CAAC,CAAC;IACb,IAAI,CAAC3C,SAAS,GAAG,EAAE;EACvB;EACA4C,YAAYA,CAAA,EAAG;IACX,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IAClBjH,IAAI,CAACyC,OAAO,EAAE,CAACyE,KAAK,EAAExB,MAAM,KAAK;MAC7B,IAAI,CAACuB,QAAQ,CAACvB,MAAM,CAAC,GAAG,IAAI,CAACyB,qBAAqB,CAACzB,MAAM,CAAC;IAC9D,CAAC,CAAC;EACN;EACA0B,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAI,CAAC5C,QAAQ,CAAC,CAAC,CAAC6C,QAAQ,CAACvG,aAAa,CAAC;IACvC,KAAK,CAACqG,WAAW,CAAC,CAAC;IACnB,IAAI,CAACG,kBAAkB,CAAC,IAAI,CAAC9C,QAAQ,CAAC,CAAC,CAAC;IACxC,IAAI,CAAC+C,OAAO,CAAC,MAAM,EAAE,SAAS,CAAC;EACnC;EACAC,OAAOA,CAAA,EAAG;IACN,KAAK,CAACA,OAAO,CAAC,CAAC;IACf,IAAI,CAACC,eAAe,CAAC,CAAC;EAC1B;EACAC,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACC,UAAU,GAAG,IAAI/G,MAAM,CAAClB,CAAC,CAAC,OAAO,CAAC,CAAC2H,QAAQ,CAACzF,kCAAkC,CAAC,EAAE;MAClFgG,IAAI,EAAE,MAAM;MACZC,kBAAkB,EAAE,KAAK;MACzBC,OAAO,EAAE,IAAI,CAACC,eAAe,CAACnC,IAAI,CAAC,IAAI;IAC3C,CAAC,CAAC;IACF,OAAO,IAAI,CAAC+B,UAAU,CAACnD,QAAQ,CAAC,CAAC;EACrC;EACAuD,eAAeA,CAACC,KAAK,EAAE;IACnB,IAAIhI,aAAa,CAACgI,KAAK,CAAC,EAAE;MACtBA,KAAK,GAAG,CAAC,IAAI,CAACC,QAAQ,CAACvD,MAAM,CAAC,SAAS,CAAC;IAC5C;IACA,IAAI,CAACuD,QAAQ,CAACvD,MAAM,CAAC,SAAS,EAAEsD,KAAK,CAAC;IACtC,IAAI,CAACE,2BAA2B,CAACF,KAAK,CAAC;EAC3C;EACAE,2BAA2BA,CAACF,KAAK,EAAE;IAC/B,IAAI,CAACL,UAAU,IAAI,IAAI,CAACA,UAAU,CAACnD,QAAQ,CAAC,CAAC,CAAC2D,WAAW,CAACzG,qBAAqB,EAAEsG,KAAK,CAAC;EAC3F;EACAnB,mBAAmBA,CAACmB,KAAK,EAAE;IACvB,IAAII,mBAAmB,GAAG,IAAI,CAAC5D,QAAQ,CAAC,CAAC,CAACF,IAAI,CAAC,GAAG,CAACL,MAAM,CAACjD,wBAAwB,CAAC,CAAC;IACpF,IAAIqH,iBAAiB,GAAG,IAAI,CAAC7D,QAAQ,CAAC,CAAC,CAACF,IAAI,CAAC,GAAG,CAACL,MAAM,CAACtC,sBAAsB,CAAC,CAAC;IAChF,IAAIqG,KAAK,EAAE;MACP,IAAI,CAACM,mBAAmB,CAAC,CAAC;IAC9B,CAAC,MAAM;MACH,IAAI,CAACC,SAAS,IAAI,IAAI,CAACA,SAAS,CAACC,WAAW,CAAC,CAAC;MAC9C,IAAI,CAACP,QAAQ,IAAI,IAAI,CAACF,eAAe,CAACC,KAAK,CAAC;IAChD;IACAI,mBAAmB,CAACK,MAAM,CAAC,CAACT,KAAK,CAAC;IAClCK,iBAAiB,CAACI,MAAM,CAACT,KAAK,CAAC;EACnC;EACAU,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAAC,IAAI,CAACC,mBAAmB,EAAE;MAC3B;IACJ;IACA,IAAI,CAAC9B,mBAAmB,CAAC,KAAK,CAAC;IAC/B,IAAI,CAAC8B,mBAAmB,CAACC,MAAM,CAAC,CAAC;IACjC,IAAI,CAACD,mBAAmB,GAAG,IAAI;IAC/B,IAAI,CAACJ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACZ,UAAU,GAAG,IAAI;IACtB,IAAI,CAACM,QAAQ,GAAG,IAAI;EACxB;EACAY,yBAAyBA,CAACC,CAAC,EAAE;IACzB,IAAI,CAAC9B,QAAQ,CAAC+B,WAAW,CAACD,CAAC,CAAC;IAC5B,IAAI,CAACA,CAAC,CAACE,IAAI,CAACtC,QAAQ,CAACtC,MAAM,EAAE;MACzB,IAAI,CAAC2D,eAAe,CAAC,KAAK,CAAC;IAC/B;EACJ;EACAkB,0BAA0BA,CAAA,EAAG;IACzB,IAAIC,GAAG,GAAG,IAAI,CAACxE,MAAM,CAAC,YAAY,CAAC;IACnC,IAAIyE,QAAQ,GAAGD,GAAG,GAAG,OAAO,GAAG,MAAM;IACrC,OAAO;MACHE,+BAA+B,EAAE,IAAI;MACrCC,SAAS,EAAEA,CAAA,KAAMjJ,2BAA2B,CAAC,IAAI,CAACoE,QAAQ,CAAC,CAAC,CAAC;MAC7D8E,cAAc,EAAE,KAAK;MACrBC,OAAO,EAAE,KAAK;MACd/F,SAAS,EAAE,KAAK;MAChBgG,kBAAkB,EAAE,IAAI;MACxBC,QAAQ,EAAEA,CAAA,KAAM;QACZ,IAAI,CAACvB,2BAA2B,CAAC,KAAK,CAAC;MAC3C,CAAC;MACDwB,MAAM,EAAE,MAAM;MACdC,kBAAkB,EAAEb,CAAC,IAAI,CAACpJ,CAAC,CAACoJ,CAAC,CAACc,MAAM,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC5F,MAAM,CAACrC,kCAAkC,CAAC,CAAC,CAACwC,MAAM;MACpG+E,QAAQ,EAAE;QACNW,SAAS,EAAE,SAAS;QACpBC,EAAE,EAAE,SAAS,GAAGZ,QAAQ;QACxBa,EAAE,EAAE,MAAM,GAAGb,QAAQ;QACrBc,EAAE,EAAE,IAAI,CAACtC,UAAU,CAACnD,QAAQ,CAAC;MACjC;IACJ,CAAC;EACL;EACA0F,mBAAmBA,CAAA,EAAG;IAClB,IAAIC,WAAW,GAAG,CAAC,CAAC;IACpBpK,IAAI,CAAC,CAAC,YAAY,EAAE,OAAO,EAAE,WAAW,EAAE,oBAAoB,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,EAAE,aAAa,EAAE,aAAa,EAAE,mBAAmB,EAAE,MAAM,EAAE,mBAAmB,EAAE,WAAW,EAAE,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,eAAe,EAAE,UAAU,EAAE,SAAS,CAAC,EAAE,CAACqK,CAAC,EAAE1F,MAAM,KAAK;MACjSyF,WAAW,CAACzF,MAAM,CAAC,GAAG,IAAI,CAACA,MAAM,CAACA,MAAM,CAAC;IAC7C,CAAC,CAAC;IACF3E,IAAI,CAAC,CAAC,mBAAmB,EAAE,oBAAoB,EAAE,gBAAgB,CAAC,EAAE,CAACqK,CAAC,EAAEC,UAAU,KAAK;MACnFF,WAAW,CAACE,UAAU,CAAC,GAAGvB,CAAC,IAAI;QAC3B,IAAI,CAAC9B,QAAQ,CAACqD,UAAU,CAAC,CAACvB,CAAC,CAAC;MAChC,CAAC;IACL,CAAC,CAAC;IACF,OAAO3I,MAAM,CAACgK,WAAW,EAAE;MACvBG,UAAU,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MAChCC,gBAAgB,EAAE,CAAC,CAAC,IAAI,CAAC9F,MAAM,CAAC,WAAW,CAAC;MAC5CqE,WAAW,EAAE,IAAI,CAACF,yBAAyB,CAACjD,IAAI,CAAC,IAAI,CAAC;MACtD6E,cAAc,EAAE3B,CAAC,IAAI;QACjB,IAAI,CAACb,QAAQ,CAACyC,OAAO,CAAC,CAAC;QACvB,IAAI,CAAC1D,QAAQ,CAAC9D,cAAc,CAAC4F,CAAC,CAAC;MACnC,CAAC;MACD6B,eAAe,EAAE7B,CAAC,IAAI;QAClB,IAAI,CAACb,QAAQ,CAACyC,OAAO,CAAC,CAAC;QACvB,IAAI,CAAC1D,QAAQ,CAAC5D,eAAe,CAAC0F,CAAC,CAAC;MACpC,CAAC;MACD8B,oBAAoB,EAAE,KAAK;MAC3BC,aAAa,EAAE,IAAI,CAACnG,MAAM,CAAC,eAAe,CAAC;MAC3CoG,WAAW,EAAE;IACjB,CAAC,CAAC;EACN;EACArD,eAAeA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAAClB,oBAAoB,CAAC,CAAC,EAAE;MAC9B;IACJ;IACA,IAAI,CAACoC,mBAAmB,GAAGjJ,CAAC,CAAC,OAAO,CAAC,CAAC2H,QAAQ,CAAC1F,sBAAsB,CAAC;IACtE,IAAIoJ,UAAU,GAAG,IAAI,CAACrD,sBAAsB,CAAC,CAAC;IAC9C,IAAI,CAACa,SAAS,GAAG,IAAI,CAACyC,gBAAgB,CAACtL,CAAC,CAAC,OAAO,CAAC,EAAEmB,QAAQ,EAAE,IAAI,CAACqJ,mBAAmB,CAAC,CAAC,CAAC;IACxF,IAAI,CAACjC,QAAQ,GAAG,IAAI,CAAC+C,gBAAgB,CAACtL,CAAC,CAAC,OAAO,CAAC,EAAEgB,OAAO,EAAE,IAAI,CAACuI,0BAA0B,CAAC,CAAC,CAAC;IAC7F,IAAI,CAAChB,QAAQ,CAACgD,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,IAAI,CAAC3C,SAAS,CAAC/D,QAAQ,CAAC,CAAC,CAAC,CAAC6C,QAAQ,CAAC1F,sBAAsB,CAAC,CAAC0F,QAAQ,CAAC,IAAI,CAAC3C,MAAM,CAAC,UAAU,CAAC,CAAC;IAC7H,IAAI,CAACuD,QAAQ,CAACkD,QAAQ,CAAC,CAAC,CAAC9D,QAAQ,CAACxF,sCAAsC,CAAC;IACzE,IAAI,CAAC8G,mBAAmB,CAACuC,MAAM,CAACH,UAAU,CAAC;IAC3C,IAAI,CAACpC,mBAAmB,CAACuC,MAAM,CAAC,IAAI,CAACjD,QAAQ,CAACzD,QAAQ,CAAC,CAAC,CAAC;IACzD,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC0G,MAAM,CAAC,IAAI,CAACvC,mBAAmB,CAAC;IAChD,IAAI,CAACtC,sBAAsB,CAAC,CAAC;IAC7B,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC5B;EACA8E,SAASA,CAACC,SAAS,EAAE;IACjB,IAAItI,KAAK,GAAG,IAAI,CAAC2B,MAAM,CAAC,sBAAsB,CAAC,CAAC3B,KAAK;IACrD,IAAI,CAAC7C,SAAS,CAAC6C,KAAK,CAAC,EAAE;MACnB,OAAOV,aAAa,CAACgJ,SAAS,CAAC;IACnC,CAAC,MAAM;MACH,OAAOpL,QAAQ,CAAC8C,KAAK,CAAC,GAAGA,KAAK,CAACsI,SAAS,CAAC,GAAGtI,KAAK;IACrD;EACJ;EACAuI,gBAAgBA,CAACxC,CAAC,EAAE;IAChB,OAAO,KAAK,CAACwC,gBAAgB,CAACxC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC1B,eAAe,CAAC;EAC5D;EACAmE,gBAAgBA,CAAA,EAAG;IACf,IAAIJ,QAAQ,GAAGzL,CAAC,CAAC,OAAO,CAAC;IACzByL,QAAQ,CAACK,QAAQ,CAAC,IAAI,CAAChH,QAAQ,CAAC,CAAC,CAAC,CAAC6C,QAAQ,CAAC,IAAI,CAAC5C,iBAAiB,CAAC,CAAC,GAAGzD,wBAAwB,GAAGD,sBAAsB,CAAC;IACzH,OAAO,KAAK,CAACwK,gBAAgB,CAACJ,QAAQ,CAAC;EAC3C;EACAM,mBAAmBA,CAACzC,IAAI,EAAE0C,UAAU,EAAE;IAClC,IAAIC,OAAO,GAAG,IAAI,CAACC,cAAc,CAAC5C,IAAI,EAAE0C,UAAU,CAAC;IACnD,IAAI,CAACvH,SAAS,CAAC0H,IAAI,CAACF,OAAO,CAAC;IAC5B,IAAI,CAACG,oBAAoB,CAACJ,UAAU,CAAC;IACrC,OAAOC,OAAO;EAClB;EACAI,qBAAqBA,CAAA,EAAG;IACpB,OAAO,KAAK,CAACA,qBAAqB,CAAC,CAAC,CAAC9H,MAAM,CAAC,IAAI,CAACmD,eAAe,CAAC;EACrE;EACAwE,cAAcA,CAAC5C,IAAI,EAAEgD,SAAS,EAAE;IAC5B,IAAIC,iBAAiB,GAAGvM,CAAC,CAAC,OAAO,CAAC,CAAC2H,QAAQ,CAACjG,qBAAqB,CAAC,CAACoK,QAAQ,CAACQ,SAAS,CAAC;IACtF,IAAIE,KAAK,GAAG,IAAI,CAACC,cAAc,CAACnD,IAAI,CAAC;IACrC,IAAIoD,OAAO,GAAG,IAAI,CAACpB,gBAAgB,CAACiB,iBAAiB,EAAEtL,OAAO,EAAER,MAAM,CAAC,IAAI,CAACkM,kBAAkB,CAAC,CAAC,EAAE;MAC9FC,YAAY,EAAE,IAAI,CAACA,YAAY;MAC/BC,UAAU,EAAEvD,IAAI,CAACwD,cAAc,CAACC,GAAG;MACnCP,KAAK,EAAEA,KAAK;MACZQ,YAAY,EAAE,IAAI,CAACC,cAAc,CAAC/G,IAAI,CAAC,IAAI,CAAC;MAC5CuD,QAAQ,EAAE,IAAI,CAACyD,kBAAkB,CAACZ,SAAS;IAC/C,CAAC,CAAC,CAAC;IACH,IAAI,CAACa,sBAAsB,CAACb,SAAS,EAAEI,OAAO,CAAC;IAC/C,OAAOA,OAAO;EAClB;EACAC,kBAAkBA,CAAA,EAAG;IACjB,IAAIS,cAAc,GAAGpN,CAAC,CAAC,OAAO,CAAC;IAC/B,IAAIqF,gBAAgB,GAAG,IAAI,CAACN,iBAAiB,CAAC,CAAC;IAC/C,OAAO;MACHsI,YAAY,EAAE,IAAI,CAACrI,MAAM,CAAC,cAAc,CAAC;MACzCkF,MAAM,EAAEkD,cAAc;MACtBnK,WAAW,EAAE,IAAI,CAAC+B,MAAM,CAAC,aAAa,CAAC;MACvCsI,aAAa,EAAE,IAAI,CAACtI,MAAM,CAAC,eAAe,CAAC;MAC3CuI,QAAQ,EAAE,IAAI,CAACvI,MAAM,CAAC,UAAU,CAAC;MACjCmG,aAAa,EAAE,IAAI,CAACnG,MAAM,CAAC,eAAe,CAAC;MAC3CwI,iBAAiB,EAAE,IAAI,CAACxI,MAAM,CAAC,mBAAmB,CAAC;MACnDmD,kBAAkB,EAAE,IAAI,CAACnD,MAAM,CAAC,oBAAoB,CAAC;MACrDyI,iBAAiB,EAAE,IAAI,CAACzI,MAAM,CAAC,mBAAmB,CAAC;MACnDlB,SAAS,EAAE,IAAI,CAACkB,MAAM,CAAC,WAAW,CAAC;MACnC0I,eAAe,EAAE,IAAI,CAAC1I,MAAM,CAAC,iBAAiB,CAAC;MAC/C2I,WAAW,EAAE,IAAI,CAAC3I,MAAM,CAAC,aAAa,CAAC;MACvC4I,YAAY,EAAE,IAAI,CAAC5I,MAAM,CAAC,cAAc,CAAC;MACzC6I,YAAY,EAAE,IAAI,CAAC7I,MAAM,CAAC,cAAc,CAAC;MACzC8I,SAAS,EAAE,IAAI,CAAC9I,MAAM,CAAC,WAAW,CAAC;MACnC+I,oBAAoB,EAAE3E,CAAC,IAAI;QACvB,IAAI,CAACA,CAAC,CAAC4E,SAAS,CAAChJ,MAAM,CAAC,SAAS,CAAC,EAAE;UAChC;QACJ;QACA,IAAI,CAACA,MAAM,CAAC,gBAAgB,EAAEoE,CAAC,CAAC4E,SAAS,CAAChJ,MAAM,CAAC,gBAAgB,CAAC,CAAC;MACvE,CAAC;MACDiJ,kBAAkB,EAAE,IAAI,CAACC,oCAAoC,CAAChI,IAAI,CAAC,IAAI,CAAC;MACxEmD,WAAW,EAAE,IAAI,CAAC8E,6BAA6B,CAACjI,IAAI,CAAC,IAAI,CAAC;MAC1DkI,cAAc,EAAE,IAAI,CAACC,gCAAgC,CAACnI,IAAI,CAAC,IAAI,CAAC;MAChEoI,eAAe,EAAEjJ,gBAAgB,GAAG,IAAI,GAAG,IAAI,CAACkJ,kBAAkB,CAACrI,IAAI,CAAC,IAAI,EAAExD,kBAAkB,CAAC;MACjG8L,cAAc,EAAEnJ,gBAAgB,GAAG,IAAI,GAAG,IAAI,CAACkJ,kBAAkB,CAACrI,IAAI,CAAC,IAAI,EAAEzD,kBAAkB,CAAC;MAChGgM,kBAAkB,EAAE,IAAI,CAACF,kBAAkB,CAACrI,IAAI,CAAC,IAAI,EAAEb,gBAAgB,GAAG3C,kBAAkB,GAAG,IAAI,CAAC;MACpGgM,mBAAmB,EAAErJ,gBAAgB,GAAG,IAAI,CAACkJ,kBAAkB,CAACrI,IAAI,CAAC,IAAI,EAAEzD,kBAAkB,CAAC,GAAG;IACrG,CAAC;EACL;EACAkM,wBAAwBA,CAAA,EAAG;IACvB,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAC,CAAC,EAAE;MAC1B,OAAO,SAAS;IACpB;IACA,IAAIC,WAAW,GAAG,IAAI,CAAC7J,MAAM,CAAC,sBAAsB,CAAC;IACrD,OAAOzE,QAAQ,CAACsO,WAAW,CAAC,GAAGA,WAAW,CAACzL,IAAI,GAAGyL,WAAW;EACjE;EACAN,kBAAkBA,CAACO,SAAS,EAAE;IAC1B,IAAI3J,MAAM,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACtC,IAAI2J,SAAS,GAAG5J,MAAM,CAACT,MAAM;IAC7B,IAAIsK,YAAY,GAAG7J,MAAM,CAAC8J,MAAM,CAAC,GAAG,CAAC1K,MAAM,CAAC9C,2BAA2B,CAAC,CAAC,CAACyN,EAAE,CAAC,CAAC,CAAC;IAC/E,IAAIC,SAAS,GAAGhK,MAAM,CAACoC,KAAK,CAACyH,YAAY,CAAC;IAC1C,IAAI,CAACI,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;IACvCyH,SAAS,IAAIL,SAAS,KAAKpM,kBAAkB,GAAG,CAAC,CAAC,GAAG,CAAC;IACtD,IAAIyM,SAAS,IAAIJ,SAAS,EAAE;MACxBI,SAAS,GAAG,CAAC;IACjB,CAAC,MAAM,IAAIA,SAAS,GAAG,CAAC,EAAE;MACtBA,SAAS,GAAGJ,SAAS,GAAG,CAAC;IAC7B;IACA,IAAIM,QAAQ,GAAGlK,MAAM,CAAC+J,EAAE,CAACC,SAAS,CAAC;IACnC,IAAI,CAACnK,MAAM,CAAC,gBAAgB,EAAE5E,gBAAgB,CAACiP,QAAQ,CAAC,CAAC;EAC7D;EACAnB,oCAAoCA,CAACoB,IAAI,EAAE;IACvC,IAAIvL,YAAY,GAAGuL,IAAI,CAACC,UAAU,CAAC7K,MAAM,IAAI4K,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC;IAC/D,IAAItD,OAAO,GAAGhL,OAAO,CAACuO,WAAW,CAACF,IAAI,CAACG,OAAO,CAAC;IAC/C,IAAIxB,kBAAkB,GAAG,IAAI,CAAC3G,QAAQ,CAAC2G,kBAAkB;IACzDA,kBAAkB,CAACqB,IAAI,CAAC;IACxBvL,YAAY,IAAI,IAAI,CAAC2L,yBAAyB,CAAC3L,YAAY,CAAC,CAAC,CAAC,EAAEkI,OAAO,CAAC;IACxE,IAAI,CAAC0D,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACC,6BAA6B,CAAC,cAAc,EAAE7L,YAAY,CAAC;EACpE;EACA2L,yBAAyBA,CAACG,IAAI,EAAEC,aAAa,EAAE;IAC3C,IAAIC,gBAAgB,GAAG,CAACC,SAAS,CAACtL,MAAM;IACxCrE,IAAI,CAAC,IAAI,CAACoE,SAAS,EAAE,CAAC8C,KAAK,EAAE0E,OAAO,KAAK;MACrC,IAAIgE,QAAQ,GAAGhE,OAAO,CAACiE,cAAc,CAAC,CAAC;MACvC,IAAIC,WAAW,GAAG,CAACF,QAAQ,CAACG,EAAE,CAACN,aAAa,IAAIA,aAAa,CAACI,cAAc,CAAC,CAAC,CAAC;MAC/E,IAAIG,aAAa,GAAGJ,QAAQ,CAACrL,IAAI,CAAC,GAAG,CAACL,MAAM,CAAC,IAAI,CAAC+L,kBAAkB,CAAC,CAAC,CAAC,CAAC;MACxE,IAAIH,WAAW,IAAIE,aAAa,CAAC3L,MAAM,IAAIqL,gBAAgB,EAAE;QACzDM,aAAa,CAACE,WAAW,CAAC,IAAI,CAACD,kBAAkB,CAAC,CAAC,CAAC;QACpD,IAAIE,gBAAgB,GAAG,IAAI,CAACC,YAAY,CAACJ,aAAa,CAAC;QACvD,IAAIG,gBAAgB,EAAE;UAClBA,gBAAgB,CAACE,QAAQ,GAAG,KAAK;QACrC;QACAzE,OAAO,CAAC0E,mBAAmB,CAAC,CAAC;MACjC;IACJ,CAAC,CAAC;EACN;EACAhB,mBAAmBA,CAAA,EAAG;IAClB,IAAIiB,iBAAiB,GAAG,IAAI,CAAC9L,QAAQ,CAAC,CAAC,CAACF,IAAI,CAAC,GAAG,CAACL,MAAM,CAAC/C,6BAA6B,CAAC,CAAC,CAACuF,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAACiI,MAAM,CAAC,GAAG,CAAC1K,MAAM,CAAC,IAAI,CAAC+L,kBAAkB,CAAC,CAAC,CAAC,CAAC;IACnK,IAAIM,iBAAiB,CAAClM,MAAM,EAAE;MAC1B,IAAImM,oBAAoB,GAAG,IAAI,CAACJ,YAAY,CAACG,iBAAiB,CAAC;MAC/DC,oBAAoB,CAACH,QAAQ,GAAG,KAAK;MACrCE,iBAAiB,CAACL,WAAW,CAAC,IAAI,CAACD,kBAAkB,CAAC,CAAC,CAAC;IAC5D;EACJ;EACAnC,6BAA6BA,CAAC/E,CAAC,EAAE;IAC7B,IAAI,CAAC9B,QAAQ,CAAC+B,WAAW,CAACD,CAAC,CAAC;EAChC;EACAiF,gCAAgCA,CAACjF,CAAC,EAAE;IAChC,IAAI,CAAC9B,QAAQ,CAAC8G,cAAc,CAAChF,CAAC,CAAC;EACnC;EACA+D,sBAAsBA,CAACb,SAAS,EAAEL,OAAO,EAAE;IACvC,IAAI6E,sBAAsB,GAAG7E,OAAO,CAAC8E,iBAAiB,CAAC,CAAC;IACxD,IAAIC,QAAQ,GAAGF,sBAAsB,CAAClM,IAAI,CAAC,GAAG,CAACL,MAAM,CAAC1C,gBAAgB,CAAC,CAAC;IACxE,IAAIoP,qBAAqB,GAAGtQ,YAAY,CAACG,aAAa,EAAE,IAAI,CAACoQ,IAAI,GAAG,UAAU,CAAC;IAC/EjF,OAAO,CAACjH,MAAM,CAAC;MACXmM,SAAS,EAAE,IAAI,CAACC,wBAAwB,CAAClL,IAAI,CAAC,IAAI,EAAEoG,SAAS,EAAEL,OAAO,CAAC;MACvEoF,OAAO,EAAE,IAAI,CAACC,sBAAsB,CAACpL,IAAI,CAAC,IAAI,EAAEoG,SAAS,EAAEL,OAAO,CAAC;MACnEsF,QAAQ,EAAE,IAAI,CAACC,uBAAuB,CAACtL,IAAI,CAAC,IAAI,EAAEoG,SAAS,EAAEL,OAAO,CAAC;MACrElC,QAAQ,EAAE,IAAI,CAAC0H,uBAAuB,CAACvL,IAAI,CAAC,IAAI,EAAEoG,SAAS,EAAEL,OAAO;IACxE,CAAC,CAAC;IACF5L,IAAI,CAAC2Q,QAAQ,EAAE,CAACzJ,KAAK,EAAE0E,OAAO,KAAK;MAC/BhM,YAAY,CAACyR,GAAG,CAACzF,OAAO,EAAEgF,qBAAqB,CAAC;MAChDhR,YAAY,CAAC0R,EAAE,CAAC1F,OAAO,EAAEgF,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAACW,yBAAyB,CAAC1L,IAAI,CAAC,IAAI,EAAEoG,SAAS,CAAC,CAAC;IAC/G,CAAC,CAAC;EACN;EACA8E,wBAAwBA,CAAC9E,SAAS,EAAEL,OAAO,EAAE;IACzC,IAAI4F,OAAO,GAAGvF,SAAS,CAACtF,QAAQ,CAAC,GAAG,CAACzC,MAAM,CAAC5C,sCAAsC,CAAC,CAAC;IACpF,IAAI,CAAC2F,QAAQ,CAAC/D,gBAAgB,CAAC;MAC3BuO,QAAQ,EAAE1R,gBAAgB,CAACkM,SAAS,CAAC;MACrCL,OAAO,EAAEA;IACb,CAAC,CAAC;IACF4F,OAAO,CAACjP,IAAI,CAAC,CAAC;IACd0J,SAAS,CAAC3E,QAAQ,CAAClG,2BAA2B,CAAC;EACnD;EACA6P,sBAAsBA,CAAChF,SAAS,EAAEL,OAAO,EAAE;IACvC,IAAI,CAAC3E,QAAQ,CAAC9D,cAAc,CAAC;MACzBsO,QAAQ,EAAE1R,gBAAgB,CAACkM,SAAS,CAAC;MACrCL,OAAO,EAAEA;IACb,CAAC,CAAC;EACN;EACAuF,uBAAuBA,CAAClF,SAAS,EAAEL,OAAO,EAAE8F,SAAS,EAAE;IACnD,IAAIF,OAAO,GAAGvF,SAAS,CAACtF,QAAQ,CAAC,GAAG,CAACzC,MAAM,CAAC5C,sCAAsC,CAAC,CAAC;IACpF,IAAI2N,IAAI,GAAGyC,SAAS;IACpBzC,IAAI,CAACwC,QAAQ,GAAG1R,gBAAgB,CAACkM,SAAS,CAAC;IAC3CgD,IAAI,CAACrD,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC3E,QAAQ,CAAC7D,eAAe,CAAC6L,IAAI,CAAC;IACnCyC,SAAS,GAAGzC,IAAI;IAChB,IAAI,CAACyC,SAAS,CAACC,MAAM,EAAE;MACnB,IAAI,IAAI,CAACtK,eAAe,KAAKuE,OAAO,EAAE;QAClC,IAAI,CAACvE,eAAe,GAAG,IAAI;MAC/B;MACAmK,OAAO,CAAChP,IAAI,CAAC,CAAC;MACdyJ,SAAS,CAACiE,WAAW,CAAC9O,2BAA2B,CAAC;IACtD;EACJ;EACAgQ,uBAAuBA,CAACnF,SAAS,EAAEL,OAAO,EAAE;IACxC,IAAI,CAAC3E,QAAQ,CAAC5D,eAAe,CAAC;MAC1BoO,QAAQ,EAAE1R,gBAAgB,CAACkM,SAAS,CAAC;MACrCL,OAAO,EAAEA;IACb,CAAC,CAAC;EACN;EACA2F,yBAAyBA,CAACtF,SAAS,EAAEyF,SAAS,EAAE;IAC5C,IAAI7H,MAAM,GAAGlK,CAAC,CAAC+R,SAAS,CAACE,aAAa,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC3N,MAAM,CAAC7C,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;IACrF,IAAIyQ,WAAW,GAAG,IAAI,CAACC,wBAAwB,CAAC9F,SAAS,CAAC,CAACyE,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;IACjF,IAAI,IAAI,CAAC/L,MAAM,CAAC,yBAAyB,CAAC,IAAIkF,MAAM,KAAKiI,WAAW,EAAE;MAClE,IAAI,CAAClF,cAAc,CAAC,CAAC;MACrBoF,UAAU,CAAC,IAAI,CAACC,wBAAwB,CAACpM,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAACwF,SAAS,CAAC,MAAM,CAAC,CAAC;IAChF;EACJ;EACA4G,wBAAwBA,CAAA,EAAG;IACvB,IAAI,CAAC,IAAI,CAAC5K,eAAe,EAAE;MACvB;IACJ;IACA,IAAI6K,iBAAiB,GAAGvS,CAAC,CAAC,IAAI,CAAC0H,eAAe,CAAC5C,QAAQ,CAAC,CAAC,CAAC0N,OAAO,CAAC,CAACxM,QAAQ,CAACjE,oBAAoB,CAAC;IACjG,IAAI0Q,oBAAoB,GAAG,IAAI,CAAC/K,eAAe,CAACqJ,iBAAiB,CAAC,CAAC,CAACnM,IAAI,CAAC,GAAG,CAACL,MAAM,CAACxC,oBAAoB,CAAC,CAAC,CAAC2C,MAAM;IACjH,IAAIgO,yBAAyB,GAAG,IAAI,CAAChL,eAAe,CAACqJ,iBAAiB,CAAC,CAAC,CAAC4B,GAAG,CAAC,CAAC,CAAC,CAACC,aAAa,CAAC,QAAQ,CAAC;IACvG,IAAI,CAACF,yBAAyB,IAAI,CAACD,oBAAoB,IAAI,CAACF,iBAAiB,EAAE;MAC3E,IAAI,CAAC7K,eAAe,CAAC7E,IAAI,CAAC,CAAC;IAC/B;EACJ;EACAuP,wBAAwBA,CAAC9F,SAAS,EAAE;IAChC,IAAI,CAACA,SAAS,EAAE;MACZ,OAAO,KAAK;IAChB;IACA,IAAI2D,QAAQ,GAAG3D,SAAS,CAACtF,QAAQ,CAAC,GAAG,CAACzC,MAAM,CAAC7C,qBAAqB,CAAC,CAAC;IACpE,OAAOuO,QAAQ,CAACvL,MAAM,IAAIzD,OAAO,CAACuO,WAAW,CAACS,QAAQ,CAAC;EAC3D;EACA/C,kBAAkBA,CAACZ,SAAS,EAAE;IAC1B,IAAIuG,gBAAgB,GAAG,IAAI,CAAC9N,iBAAiB,CAAC,CAAC;IAC/C,IAAI7B,gBAAgB,GAAG,IAAI,CAAC8B,MAAM,CAAC,kBAAkB,CAAC,CAAC8N,WAAW,CAAC,CAAC;IACpE,IAAIC,UAAU,GAAG,IAAI,CAAC/N,MAAM,CAAC,YAAY,CAAC;IAC1C,IAAIgO,eAAe,GAAG;MAClB5I,SAAS,EAAE,MAAM;MACjBG,EAAE,EAAE+B;IACR,CAAC;IACD,QAAQpJ,gBAAgB;MACpB,KAAK,WAAW;QACZ8P,eAAe,CAAC3I,EAAE,GAAG,UAAU;QAC/B2I,eAAe,CAAC1I,EAAE,GAAGuI,gBAAgB,GAAG,aAAa,GAAG,WAAW;QACnE;MACJ,KAAK,eAAe;QAChBG,eAAe,CAAC3I,EAAE,GAAGwI,gBAAgB,GAAG,aAAa,GAAG,WAAW;QACnEG,eAAe,CAAC1I,EAAE,GAAG,UAAU;QAC/B;MACJ;QACI,IAAIuI,gBAAgB,EAAE;UAClBG,eAAe,CAAC3I,EAAE,GAAG0I,UAAU,GAAG,cAAc,GAAG,aAAa;UAChEC,eAAe,CAAC1I,EAAE,GAAGyI,UAAU,GAAG,WAAW,GAAG,UAAU;QAC9D,CAAC,MAAM;UACHC,eAAe,CAAC3I,EAAE,GAAG0I,UAAU,GAAG,UAAU,GAAG,WAAW;UAC1DC,eAAe,CAAC1I,EAAE,GAAGyI,UAAU,GAAG,WAAW,GAAG,UAAU;QAC9D;IACR;IACA,OAAOC,eAAe;EAC1B;EACA5G,oBAAoBA,CAAC6G,KAAK,EAAE;IACxBjT,CAAC,CAAC,OAAO,CAAC,CAAC8L,QAAQ,CAACmH,KAAK,CAAC,CAACtL,QAAQ,CAAChG,sCAAsC,CAAC,CAACkB,IAAI,CAAC,CAAC;EACtF;EACAqQ,uBAAuBA,CAAC9J,CAAC,EAAE;IACvB,IAAI+J,OAAO,GAAGnT,CAAC,CAACoJ,CAAC,CAACc,MAAM,CAAC;IACzB,IAAIkJ,YAAY,GAAGD,OAAO,CAAChJ,OAAO,CAAC,IAAI,CAACnG,aAAa,CAAC,CAAC,CAAC;IACxD,IAAIoP,YAAY,CAACpN,QAAQ,CAAC,0BAA0B,CAAC,EAAE;MACnD,IAAI,CAAChB,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;MACnC;IACJ;IACA,KAAK,CAACkO,uBAAuB,CAAC9J,CAAC,CAAC;EACpC;EACAiK,kBAAkBA,CAACjK,CAAC,EAAE;IAClB,IAAIkK,kBAAkB,GAAG3S,YAAY,CAACC,aAAa,CAAC2S,IAAI,EAAE,IAAI,CAACrC,IAAI,CAAC;IACpE,IAAI+B,KAAK,GAAG,IAAI,CAACO,0BAA0B,CAACpK,CAAC,CAAC;IAC9C,IAAIE,IAAI,GAAG,IAAI,CAACsD,YAAY,CAAC6G,aAAa,CAAC,IAAI,CAAChD,YAAY,CAACwC,KAAK,CAAC,CAAC;IACpE,IAAIS,iBAAiB,GAAGlT,SAAS,CAAC4I,CAAC,CAACuK,OAAO,CAAC,IAAI,CAAC,KAAKvK,CAAC,CAACuK,OAAO,IAAI,CAACnT,SAAS,CAAC4I,CAAC,CAACuK,OAAO,CAAC,IAAI,CAAC,KAAKvK,CAAC,CAACwK,KAAK;IACzG,IAAI,IAAI,CAACC,eAAe,CAACZ,KAAK,CAAC,EAAE;MAC7B;IACJ;IACAhT,YAAY,CAACyR,GAAG,CAACuB,KAAK,EAAEK,kBAAkB,CAAC;IAC3C,IAAI,CAAC,IAAI,CAACQ,YAAY,CAACxK,IAAI,CAAC,EAAE;MAC1B,IAAI,CAACyK,iBAAiB,GAAG1B,UAAU,CAAC,IAAI,CAACC,wBAAwB,CAACpM,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAACwF,SAAS,CAAC,MAAM,CAAC,CAAC;MACrG;IACJ;IACA,IAAI,SAAS,KAAK,IAAI,CAACiD,wBAAwB,CAAC,CAAC,IAAI,CAAC+E,iBAAiB,EAAE;MACrE,IAAIzH,OAAO,GAAG,IAAI,CAAC+H,oBAAoB,CAACf,KAAK,CAAC;MAC9C,IAAI,CAAChG,cAAc,CAAC,CAAC;MACrB,IAAI,CAAChB,OAAO,CAACgI,gBAAgB,CAAC,CAAC,EAAE;QAC7BhU,YAAY,CAAC0R,EAAE,CAACsB,KAAK,EAAEK,kBAAkB,EAAE,IAAI,CAACY,qBAAqB,CAAChO,IAAI,CAAC,IAAI,CAAC,CAAC;QACjF,IAAI,CAAC6N,iBAAiB,GAAG,IAAI,CAACrI,SAAS,CAAC,MAAM,CAAC;MACnD;IACJ;EACJ;EACAyI,gBAAgBA,CAACC,QAAQ,EAAE;IACvB,IAAInB,KAAK,GAAG,IAAI,CAACO,0BAA0B,CAACY,QAAQ,CAAC;IACrD,IAAInC,aAAa,GAAGjS,CAAC,CAACoU,QAAQ,CAACnC,aAAa,CAAC;IAC7C,KAAK,CAACkC,gBAAgB,CAACC,QAAQ,CAAC;IAChC,IAAI,CAACnH,cAAc,CAAC,CAAC;IACrB,IAAI,IAAI,CAAC4G,eAAe,CAACZ,KAAK,CAAC,EAAE;MAC7B;IACJ;IACA,IAAIhB,aAAa,CAACjM,QAAQ,CAACpE,uCAAuC,CAAC,EAAE;MACjE;IACJ;IACA,IAAI,IAAI,CAACoD,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAACiN,aAAa,CAACjM,QAAQ,CAACxE,6BAA6B,CAAC,EAAE;MAClG,IAAI,CAAC6S,iBAAiB,GAAGhC,UAAU,CAAC,MAAM;QACtC,IAAI,CAACC,wBAAwB,CAAC,CAAC;MACnC,CAAC,EAAE,IAAI,CAAC5G,SAAS,CAAC,MAAM,CAAC,CAAC;IAC9B;EACJ;EACA9C,mBAAmBA,CAAA,EAAG;IAClB,IAAI,CAAC,IAAI,CAAClB,eAAe,EAAE;MACvB,OAAO,KAAK;IAChB;IACA,IAAI,CAAC0H,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;IACvC,OAAO,IAAI;EACf;EACAzB,YAAYA,CAACqO,YAAY,EAAE;IACvB,IAAIrI,OAAO,GAAG,IAAI,CAAC+H,oBAAoB,CAACM,YAAY,CAAC;IACrD,IAAI,IAAI,CAAC5M,eAAe,KAAKuE,OAAO,EAAE;MAClC,IAAI,CAACrD,mBAAmB,CAAC,CAAC;IAC9B;IACA,IAAIqD,OAAO,EAAE;MACT,IAAI,CAACgB,cAAc,CAAC,CAAC;MACrB,IAAI,CAACsH,KAAK,CAAC,CAAC;MACZtI,OAAO,CAACrJ,IAAI,CAAC,CAAC;MACd,IAAI,CAACoC,MAAM,CAAC,gBAAgB,EAAEiH,OAAO,CAACjH,MAAM,CAAC,gBAAgB,CAAC,CAAC;IACnE;IACA,IAAI,CAAC0C,eAAe,GAAGuE,OAAO;IAC9B,IAAI,CAACuI,gBAAgB,GAAGF,YAAY;EACxC;EACAlF,YAAYA,CAACnD,OAAO,EAAE;IAClBA,OAAO,IAAIA,OAAO,CAACpJ,IAAI,CAAC,CAAC;IACzB,IAAI,IAAI,CAAC6E,eAAe,KAAKuE,OAAO,EAAE;MAClC,IAAI,CAACvE,eAAe,GAAG,IAAI;IAC/B;IACA,IAAI,CAAC8M,gBAAgB,GAAG,IAAI;EAChC;EACAN,qBAAqBA,CAAC9K,CAAC,EAAE;IACrB,IAAIA,CAAC,CAACqL,QAAQ,IAAIrL,CAAC,CAACqL,QAAQ,CAAC/P,MAAM,EAAE;MACjC;IACJ;IACA,IAAIuO,KAAK,GAAGjT,CAAC,CAACoJ,CAAC,CAACsL,aAAa,CAAC;IAC9B,IAAI,CAAClU,SAAS,CAAC,IAAI,CAACuT,iBAAiB,CAAC,EAAE;MACpC;IACJ;IACA,IAAI,CAAC9G,cAAc,CAAC,CAAC;IACrB,IAAI,CAAC8G,iBAAiB,GAAG1B,UAAU,CAAC,MAAM;MACtC,IAAIpG,OAAO,GAAG,IAAI,CAAC+H,oBAAoB,CAACf,KAAK,CAAC;MAC9C,IAAIhH,OAAO,IAAI,CAACA,OAAO,CAACgI,gBAAgB,CAAC,CAAC,EAAE;QACxC,IAAI,CAAChO,YAAY,CAACgN,KAAK,CAAC;MAC5B;IACJ,CAAC,EAAE,IAAI,CAACvH,SAAS,CAAC,MAAM,CAAC,CAAC;EAC9B;EACAuB,cAAcA,CAAA,EAAG;IACb3G,YAAY,CAAC,IAAI,CAAC+N,iBAAiB,CAAC;IACpC/N,YAAY,CAAC,IAAI,CAACyN,iBAAiB,CAAC;EACxC;EACAC,oBAAoBA,CAACM,YAAY,EAAEK,QAAQ,EAAE;IACzC,IAAI1I,OAAO,GAAG,IAAI,CAACmG,wBAAwB,CAACkC,YAAY,CAAC;IACzD,IAAIrI,OAAO,EAAE;MACT,OAAOA,OAAO;IAClB,CAAC,MAAM;MACH0I,QAAQ,GAAGA,QAAQ,IAAI,IAAI,CAAClE,YAAY,CAAC6D,YAAY,CAAC;MACtD,IAAIhL,IAAI,GAAG,IAAI,CAACsD,YAAY,CAAC6G,aAAa,CAACkB,QAAQ,CAAC;MACpD,OAAO,IAAI,CAACb,YAAY,CAACxK,IAAI,CAAC,IAAI,IAAI,CAACyC,mBAAmB,CAACzC,IAAI,EAAEgL,YAAY,CAAC;IAClF;EACJ;EACAM,+BAA+BA,CAACC,UAAU,EAAE;IACxC,IAAIvF,IAAI,GAAGuF,UAAU,CAACvF,IAAI,CAAC5K,MAAM,IAAImQ,UAAU,CAACvF,IAAI,CAAC,CAAC,CAAC;IACvD,IAAI,CAACA,IAAI,IAAI,IAAI,CAACwF,eAAe,CAACxF,IAAI,CAACqF,QAAQ,CAAC,EAAE;MAC9C;IACJ;IACA,IAAIL,YAAY,GAAGtU,CAAC,CAACsP,IAAI,CAACyF,WAAW,CAAC;IACtC,IAAIvQ,cAAc,GAAG,IAAI,CAACwP,oBAAoB,CAACM,YAAY,EAAEhF,IAAI,CAACqF,QAAQ,CAAC;IAC3E,IAAI,CAACK,0BAA0B,CAACH,UAAU,CAAC;IAC3C,IAAI,IAAI,CAACnN,eAAe,EAAE;MACtB,IAAI,IAAI,CAACA,eAAe,KAAKlD,cAAc,EAAE;QACzC,IAAI,SAAS,KAAK,IAAI,CAACQ,MAAM,CAAC,sBAAsB,CAAC,EAAE;UACnD,IAAI,CAACoK,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;QAC3C;QACA;MACJ,CAAC,MAAM;QACH,IAAI,CAAC0H,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;MAC3C;IACJ;IACA,IAAI,CAAClD,cAAc,EAAE;MACjB;IACJ;IACA,IAAI,CAACA,cAAc,CAACyP,gBAAgB,CAAC,CAAC,EAAE;MACpC,IAAI,CAAChO,YAAY,CAACqO,YAAY,CAAC;MAC/B;IACJ;EACJ;EACAW,cAAcA,CAAC3F,IAAI,EAAE;IACjB,IAAIxM,OAAO,CAACoS,OAAO,CAAC5F,IAAI,CAAClM,IAAI,CAAC,IAAI,CAAC,EAAE;MACjC,IAAI,CAACiE,YAAY,CAAC,CAAC;MACnB;IACJ;IACA,QAAQiI,IAAI,CAAClM,IAAI;MACb,KAAK,aAAa;MAClB,KAAK,kBAAkB;QACnB,IAAI,CAAC+R,WAAW,CAAC,CAAC;QAClB;MACJ,KAAK,sBAAsB;MAC3B,KAAK,yBAAyB;QAC1B;MACJ,KAAK,iBAAiB;QAClB,IAAI,CAACC,qBAAqB,CAAC9F,IAAI,CAAClM,IAAI,EAAEkM,IAAI,CAAC+F,KAAK,CAAC;QACjD;MACJ,KAAK,mBAAmB;QACpB/F,IAAI,CAAC+F,KAAK,GAAG,IAAI,CAACtN,eAAe,CAAC,CAAC,GAAG,IAAI,CAACiB,iBAAiB,CAAC,CAAC;QAC9D;MACJ,KAAK,OAAO;QACR,IAAI,IAAI,CAACnC,oBAAoB,CAAC,CAAC,EAAE;UAC7B,IAAI,CAACgC,SAAS,CAAC7D,MAAM,CAACsK,IAAI,CAAClM,IAAI,EAAEkM,IAAI,CAAC+F,KAAK,CAAC;UAC5C,IAAI,CAAC9M,QAAQ,CAACvD,MAAM,CAACsK,IAAI,CAAClM,IAAI,EAAEkM,IAAI,CAAC+F,KAAK,CAAC;QAC/C;QACA,KAAK,CAACJ,cAAc,CAAC3F,IAAI,CAAC;QAC1B,IAAI,CAAC1I,iBAAiB,CAAC,CAAC;QACxB;MACJ,KAAK,WAAW;QACZ,IAAI,IAAI,CAACC,oBAAoB,CAAC,CAAC,EAAE;UAC7B,IAAI,CAACgC,SAAS,CAAC7D,MAAM,CAAC,kBAAkB,EAAE,CAAC,CAACsK,IAAI,CAAC+F,KAAK,CAAC;QAC3D;QACA,KAAK,CAACJ,cAAc,CAAC3F,IAAI,CAAC;QAC1B;MACJ;QACI,IAAI,IAAI,CAACzI,oBAAoB,CAAC,CAAC,KAAKyI,IAAI,CAAClM,IAAI,KAAKkM,IAAI,CAACgG,QAAQ,IAAI,OAAO,KAAKhG,IAAI,CAAClM,IAAI,CAAC,EAAE;UACvF,IAAI,CAACyF,SAAS,CAAC7D,MAAM,CAACsK,IAAI,CAACgG,QAAQ,EAAEhG,IAAI,CAAC+F,KAAK,CAAC;QACpD;QACA,KAAK,CAACJ,cAAc,CAAC3F,IAAI,CAAC;IAClC;EACJ;EACA8F,qBAAqBA,CAAChS,IAAI,EAAEiS,KAAK,EAAE;IAC/BhV,IAAI,CAAC,IAAI,CAACoE,SAAS,EAAE,CAAC8C,KAAK,EAAE0E,OAAO,KAAK;MACrCA,OAAO,CAACjH,MAAM,CAAC5B,IAAI,EAAEiS,KAAK,CAAC;IAC/B,CAAC,CAAC;EACN;EACAE,UAAUA,CAACR,WAAW,EAAE;IACpB,IAAI,CAAC3F,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;IACvC,KAAK,CAAC6N,UAAU,CAACR,WAAW,CAAC;EACjC;EACAS,YAAYA,CAACT,WAAW,EAAE;IACtB,IAAI,CAAC3F,YAAY,CAAC,IAAI,CAAC1H,eAAe,CAAC;IACvC,KAAK,CAAC6N,UAAU,CAACR,WAAW,CAAC;EACjC;AACJ;AACA7U,iBAAiB,CAAC,QAAQ,EAAE6C,IAAI,CAAC;AACjC,eAAeA,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}