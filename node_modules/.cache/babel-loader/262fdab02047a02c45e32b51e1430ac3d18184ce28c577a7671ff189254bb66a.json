{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n  default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */function (_super) {\n  __extends(ColorPicker, _super);\n  function ColorPicker(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  ColorPicker.prototype.preRender = function () {\n    var ele = this.element;\n    this.formElement = closest(this.element, 'form');\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n    }\n    var localeText = {\n      Apply: 'Apply',\n      Cancel: 'Cancel',\n      ModeSwitcher: 'Switch Mode'\n    };\n    this.l10n = new L10n('colorpicker', localeText, this.locale);\n    if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n      ele.setAttribute('name', ele.id);\n    }\n  };\n  /**\n   * To Initialize the component rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  ColorPicker.prototype.render = function () {\n    this.initWrapper();\n    if (this.inline) {\n      this.createWidget();\n    } else {\n      this.createSplitBtn();\n    }\n    if (!this.enableOpacity) {\n      addClass([this.container.parentElement], HIDEOPACITY);\n    }\n    this.renderComplete();\n  };\n  ColorPicker.prototype.initWrapper = function () {\n    var wrapper = this.createElement('div', {\n      className: 'e-' + this.getModuleName() + '-wrapper'\n    });\n    this.element.parentNode.insertBefore(wrapper, this.element);\n    wrapper.appendChild(this.element);\n    attributes(this.element, {\n      'tabindex': '-1',\n      'spellcheck': 'false',\n      'aria-label': 'colorpicker'\n    });\n    this.container = this.createElement('div', {\n      className: CONTAINER\n    });\n    this.getWrapper().appendChild(this.container);\n    var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n    if (this.noColor && this.mode === 'Palette' && this.value === '') {\n      value = '';\n    }\n    var slicedValue = value.slice(0, 7);\n    if (isNullOrUndefined(this.initialInputValue)) {\n      this.initialInputValue = slicedValue;\n    }\n    this.element.value = slicedValue;\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': slicedValue\n      }, true);\n    }\n    if (this.enableRtl) {\n      wrapper.classList.add(RTL);\n    }\n    if (this.cssClass) {\n      addClass([wrapper], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    this.tileRipple = rippleEffect(this.container, {\n      selector: '.' + TILE\n    });\n    this.ctrlBtnRipple = rippleEffect(this.container, {\n      selector: '.e-btn'\n    });\n  };\n  ColorPicker.prototype.getWrapper = function () {\n    return this.element.parentElement;\n  };\n  ColorPicker.prototype.createWidget = function () {\n    if (this.mode === 'Palette') {\n      this.createPalette();\n      if (!this.inline) {\n        this.firstPaletteFocus();\n      }\n    } else {\n      this.createPicker();\n      if (!this.inline) {\n        this.getDragHandler().focus();\n      }\n    }\n    this.isRgb = true;\n    this.createInput();\n    this.createCtrlBtn();\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n    if (this.inline && this.disabled) {\n      this.toggleDisabled(true);\n    }\n    if (Browser.isDevice) {\n      this.refreshPopupPos();\n    }\n  };\n  ColorPicker.prototype.createSplitBtn = function () {\n    var _this = this;\n    var splitButton = this.createElement('button', {\n      className: 'e-split-colorpicker'\n    });\n    this.getWrapper().appendChild(splitButton);\n    this.splitBtn = new SplitButton({\n      iconCss: 'e-selected-color',\n      target: this.container,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      createPopupOnClick: this.createPopupOnClick,\n      open: this.onOpen.bind(this),\n      click: function () {\n        _this.trigger('change', {\n          currentValue: {\n            hex: _this.value.slice(0, 7),\n            rgba: _this.convertToRgbString(_this.hexToRgb(_this.value))\n          },\n          previousValue: {\n            hex: null,\n            rgba: null\n          },\n          value: _this.value\n        });\n      }\n    });\n    this.splitBtn.createElement = this.createElement;\n    this.splitBtn.appendTo(splitButton);\n    var preview = this.createElement('span', {\n      className: SPLITPREVIEW\n    });\n    select('.e-selected-color', splitButton).appendChild(preview);\n    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    var popupEle = this.getPopupEle();\n    addClass([popupEle], 'e-colorpicker-popup');\n    if (this.cssClass) {\n      addClass([popupEle], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    if (Browser.isDevice) {\n      var popupInst = this.getPopupInst();\n      popupInst.relateTo = document.body;\n      popupInst.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      popupInst.targetType = 'container';\n      popupInst.collision = {\n        X: 'fit',\n        Y: 'fit'\n      };\n      popupInst.offsetY = 4;\n      popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n    }\n    this.bindCallBackEvent();\n  };\n  ColorPicker.prototype.onOpen = function () {\n    this.trigger('open', {\n      element: this.container\n    });\n  };\n  ColorPicker.prototype.getPopupInst = function () {\n    return getInstance(this.getPopupEle(), Popup);\n  };\n  ColorPicker.prototype.bindCallBackEvent = function () {\n    var _this = this;\n    this.splitBtn.beforeOpen = function (args) {\n      var callBackPromise = new Deferred();\n      _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n        if (!observeOpenArgs.cancel) {\n          var popupEle = _this.getPopupEle();\n          popupEle.style.top = formatUnit(0 + pageYOffset);\n          popupEle.style.left = formatUnit(0 + pageXOffset);\n          popupEle.style.display = 'block';\n          _this.createWidget();\n          popupEle.style.display = '';\n          if (Browser.isDevice) {\n            _this.modal = _this.createElement('div');\n            _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n            _this.modal.style.display = 'none';\n            document.body.insertBefore(_this.modal, popupEle);\n            document.body.className += ' e-colorpicker-overflow';\n            _this.modal.style.display = 'block';\n            _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n          }\n        }\n        args.cancel = observeOpenArgs.cancel;\n        callBackPromise.resolve(observeOpenArgs);\n      });\n      return callBackPromise;\n    };\n    this.splitBtn.beforeClose = function (args) {\n      var callBackPromise = new Deferred();\n      if (!isNullOrUndefined(args.event)) {\n        var beforeCloseArgs = {\n          element: _this.container,\n          event: args.event,\n          cancel: false\n        };\n        _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n          if (Browser.isDevice && args.event.target === _this.modal) {\n            observedCloseArgs.cancel = true;\n          }\n          if (!observedCloseArgs.cancel) {\n            _this.onPopupClose();\n          }\n          args.cancel = observedCloseArgs.cancel;\n          callBackPromise.resolve(observedCloseArgs);\n        });\n      } else {\n        callBackPromise.resolve(args);\n      }\n      return callBackPromise;\n    };\n  };\n  ColorPicker.prototype.onPopupClose = function () {\n    this.unWireEvents();\n    this.destroyOtherComp();\n    this.container.style.width = '';\n    select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    this.container.innerHTML = '';\n    removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n    if (Browser.isDevice && this.modal) {\n      removeClass([document.body], 'e-colorpicker-overflow');\n      this.modal.style.display = 'none';\n      this.modal.outerHTML = '';\n      this.modal = null;\n    }\n  };\n  ColorPicker.prototype.createPalette = function () {\n    classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n    if (this.presetColors) {\n      var paletteGroup = this.createElement('div', {\n        className: 'e-custom-palette'\n      });\n      this.appendElement(paletteGroup);\n      var keys = Object.keys(this.presetColors);\n      if (keys.length === 1) {\n        this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n      } else {\n        for (var i = 0, len = keys.length; i < len; i++) {\n          this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n        }\n      }\n      if (selectAll('.e-row', paletteGroup).length > 10) {\n        addClass([paletteGroup], 'e-palette-group');\n      }\n    } else {\n      this.appendPalette(presets.default, 'default');\n    }\n    if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n      this.setNoColor();\n    }\n    var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n    this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n    this.rgb = this.hexToRgb(this.roundValue(this.value));\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n  };\n  ColorPicker.prototype.firstPaletteFocus = function () {\n    if (!select('.' + SELECT, this.container.children[0])) {\n      selectAll('.' + PALETTES, this.container)[0].focus();\n    }\n  };\n  ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n    var palette = this.createElement('div', {\n      className: PALETTES,\n      attrs: {\n        'tabindex': '0',\n        'role': 'grid'\n      }\n    });\n    if (refEle) {\n      refEle.appendChild(palette);\n    } else {\n      this.appendElement(palette);\n    }\n    var row;\n    var tile;\n    var roundedColor;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      if (i === 0 || i % this.columns === 0) {\n        row = this.createElement('div', {\n          className: 'e-row',\n          attrs: {\n            'role': 'row'\n          }\n        });\n        palette.appendChild(row);\n      }\n      roundedColor = this.roundValue(colors[i]).toLowerCase();\n      tile = this.createElement('span', {\n        className: TILE,\n        attrs: {\n          'role': 'gridcell',\n          'aria-label': roundedColor,\n          'aria-selected': 'false',\n          'tabindex': '0'\n        }\n      });\n      this.trigger('beforeTileRender', {\n        element: tile,\n        presetName: key,\n        value: colors[i]\n      });\n      row.appendChild(tile);\n      if (this.value === roundedColor) {\n        this.addTileSelection(tile);\n        palette.focus();\n      }\n      tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n    }\n  };\n  ColorPicker.prototype.setNoColor = function () {\n    var noColorEle = this.container.querySelector('.e-row').children[0];\n    noColorEle.classList.add(NOCOLOR);\n    if (!this.value) {\n      noColorEle.classList.add(SELECT);\n      closest(noColorEle, '.' + PALETTES).focus();\n    }\n    ['aria-selected', 'aria-label'].forEach(function (attr) {\n      noColorEle.removeAttribute(attr);\n    });\n    noColorEle.style.backgroundColor = '';\n  };\n  ColorPicker.prototype.appendElement = function (ele, insertPos) {\n    if (insertPos === void 0) {\n      insertPos = 0;\n    }\n    var refEle = this.container.children[insertPos];\n    if (refEle) {\n      this.container.insertBefore(ele, refEle);\n    } else {\n      this.container.appendChild(ele);\n    }\n  };\n  ColorPicker.prototype.addTileSelection = function (ele) {\n    ele.classList.add(SELECT);\n    ele.setAttribute('aria-selected', 'true');\n  };\n  ColorPicker.prototype.createPicker = function () {\n    classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n    var hsvContainer = this.createElement('div', {\n      className: HSVCONTAINER\n    });\n    this.appendElement(hsvContainer);\n    hsvContainer.appendChild(this.createElement('div', {\n      className: HSVAREA\n    }));\n    var dragHandler = this.createElement('span', {\n      className: HANDLER,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    hsvContainer.appendChild(dragHandler);\n    if (this.value === null || this.value === '') {\n      this.value = '#008000ff';\n    }\n    this.rgb = this.hexToRgb(this.value);\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    this.setHsvContainerBg();\n    this.setHandlerPosition();\n    this.createSlider();\n    this.createDragTooltip();\n  };\n  ColorPicker.prototype.setHsvContainerBg = function (h) {\n    if (h === void 0) {\n      h = this.hsv[0];\n    }\n    this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n  };\n  ColorPicker.prototype.getHsvContainer = function () {\n    return select('.' + HSVCONTAINER, this.container);\n  };\n  ColorPicker.prototype.setHandlerPosition = function () {\n    var dragHandler = this.getDragHandler();\n    var hsvArea = select('.' + HSVAREA, this.container);\n    if (this.enableRtl) {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n    } else {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n    }\n    dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n  };\n  ColorPicker.prototype.createSlider = function () {\n    var sliderPreviewWrapper = this.createElement('div', {\n      className: 'e-slider-preview'\n    });\n    this.appendElement(sliderPreviewWrapper, 1);\n    this.createPreview(sliderPreviewWrapper);\n    var sliderWrapper = this.createElement('div', {\n      className: 'e-colorpicker-slider'\n    });\n    sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n    var slider = this.createElement('div', {\n      className: 'e-hue-slider'\n    });\n    sliderWrapper.appendChild(slider);\n    this.hueSlider = new Slider({\n      value: this.hsv[0],\n      min: 0,\n      max: 359,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.hueChange.bind(this)\n    });\n    this.hueSlider.createElement = this.createElement;\n    this.hueSlider.appendTo(slider);\n    if (this.enableOpacity) {\n      slider = this.createElement('div', {\n        className: 'e-opacity-slider'\n      });\n      sliderWrapper.appendChild(slider);\n      this.createOpacitySlider(slider);\n    }\n  };\n  ColorPicker.prototype.createOpacitySlider = function (slider) {\n    this.opacitySlider = new Slider({\n      value: this.rgb[3] * 100,\n      min: 0,\n      max: 100,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.opacityChange.bind(this)\n    });\n    this.opacitySlider.createElement = this.createElement;\n    this.opacitySlider.appendTo(slider);\n    var opacityBgTrack = this.createElement('div', {\n      className: 'e-opacity-empty-track'\n    });\n    slider.appendChild(opacityBgTrack);\n    this.updateOpacitySliderBg();\n  };\n  ColorPicker.prototype.updateOpacitySliderBg = function () {\n    var direction = this.enableRtl ? 'to left' : 'to right';\n    var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n    if (opacityEle) {\n      opacityEle.style.background = 'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' + this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n    }\n  };\n  ColorPicker.prototype.hueChange = function (args) {\n    this.hsv[0] = args.value;\n    this.setHsvContainerBg();\n    this.convertToOtherFormat();\n  };\n  ColorPicker.prototype.opacityChange = function (args) {\n    var value = args.value;\n    var pValue = this.rgbToHex(this.rgb);\n    this.hsv[3] = value / 100;\n    this.rgb[3] = value / 100;\n    var cValue = this.rgbToHex(this.rgb);\n    this.updateOpacityInput(value);\n    var rgb = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgb);\n    this.triggerEvent(cValue, pValue, rgb);\n  };\n  ColorPicker.prototype.updateOpacityInput = function (value) {\n    if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n      var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n      opacityTextBoxInst.value = value;\n      opacityTextBoxInst.dataBind();\n    }\n  };\n  ColorPicker.prototype.createPreview = function (parentEle) {\n    var previewContainer = this.createElement('div', {\n      className: PREVIEW\n    });\n    parentEle.appendChild(previewContainer);\n    var preview = this.createElement('span', {\n      className: 'e-preview ' + CURRENT\n    });\n    previewContainer.appendChild(preview);\n    var colorValue = this.convertToRgbString(this.rgb);\n    preview.style.backgroundColor = colorValue;\n    preview = this.createElement('span', {\n      className: 'e-preview ' + PREVIOUS\n    });\n    previewContainer.appendChild(preview);\n    preview.style.backgroundColor = colorValue;\n  };\n  ColorPicker.prototype.isPicker = function () {\n    return !this.container.classList.contains(PALETTECONTENT);\n  };\n  ColorPicker.prototype.getPopupEle = function () {\n    return this.container.parentElement;\n  };\n  ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n    var _this = this;\n    var numericInput = new NumericTextBox({\n      value: value,\n      placeholder: label,\n      min: 0,\n      max: max,\n      format: '###.##',\n      showSpinButton: false,\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      readonly: this.isPicker() ? false : true,\n      change: function (args) {\n        if (args.event) {\n          _this.inputHandler(args.event);\n        }\n      }\n    });\n    numericInput.createElement = this.createElement;\n    numericInput.appendTo(element);\n  };\n  ColorPicker.prototype.createInput = function () {\n    var isPicker = this.isPicker();\n    var wrapper = this.getWrapper();\n    if (isPicker && !wrapper.classList.contains(HIDEVALUE) || !isPicker && wrapper.classList.contains(SHOWVALUE)) {\n      var inputWrap = this.createElement('div', {\n        className: INPUTWRAPPER\n      });\n      if (isPicker) {\n        this.appendElement(inputWrap, 2);\n      } else {\n        this.appendElement(inputWrap, 1);\n      }\n      var container = this.createElement('div', {\n        className: 'e-input-container'\n      });\n      inputWrap.appendChild(container);\n      if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n        this.appendValueSwitchBtn(inputWrap);\n      }\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        var hexInput = this.createElement('input', {\n          className: HEX,\n          attrs: {\n            'maxlength': '7',\n            'spellcheck': 'false',\n            'aria-label': 'HEX'\n          }\n        });\n        container.appendChild(hexInput);\n        Input.createInput({\n          element: hexInput,\n          floatLabelType: 'Always',\n          properties: {\n            placeholder: 'HEX',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true\n          }\n        }, this.createElement);\n        Input.setValue(this.value.slice(0, 7), hexInput);\n        hexInput.addEventListener('input', this.inputHandler.bind(this));\n      }\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        var label = void 0;\n        var value = void 0;\n        if (this.isRgb) {\n          label = 'RGB';\n          value = this.rgb;\n        } else {\n          label = 'HSV';\n          value = this.hsv;\n        }\n        var clsName = ['rh', 'gs', 'bv'];\n        for (var i = 0; i < 3; i++) {\n          this.createNumericInput(container.appendChild(this.createElement('input', {\n            className: 'e-' + clsName[i] + '-value'\n          })), value[i], label[i], 255);\n        }\n        if (this.enableOpacity) {\n          this.appendOpacityValue(container);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.appendOpacityValue = function (container) {\n    this.createNumericInput(container.appendChild(this.createElement('input', {\n      className: OPACITY\n    })), this.rgb[3] * 100, 'A', 100);\n  };\n  ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n    var valueSwitchBtn = this.createElement('button', {\n      className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH,\n      attrs: {\n        'title': 'Toggle format'\n      }\n    });\n    targetEle.appendChild(valueSwitchBtn);\n    if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n      valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n    }\n  };\n  ColorPicker.prototype.createCtrlBtn = function () {\n    if (this.modeSwitcher || this.showButtons) {\n      this.l10n.setLocale(this.locale);\n      var btnWrapper = this.createElement('div', {\n        className: CTRLSWITCH\n      });\n      this.container.appendChild(btnWrapper);\n      if (this.showButtons) {\n        var controlBtnWrapper = this.createElement('div', {\n          className: CTRLBTN\n        });\n        btnWrapper.appendChild(controlBtnWrapper);\n        var apply = this.l10n.getConstant('Apply');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: apply,\n          className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n          attrs: {\n            'title': apply\n          }\n        }));\n        var cancel = this.l10n.getConstant('Cancel');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: cancel,\n          className: 'e-btn e-css e-flat e-small ' + CANCEL,\n          attrs: {\n            'title': cancel\n          }\n        }));\n      }\n      if (this.modeSwitcher) {\n        this.appendModeSwitchBtn();\n      }\n    }\n  };\n  ColorPicker.prototype.appendModeSwitchBtn = function () {\n    var modeSwitcher = this.createElement('button', {\n      className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH,\n      attrs: {\n        title: this.l10n.getConstant('ModeSwitcher')\n      }\n    });\n    select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n  };\n  ColorPicker.prototype.createDragTooltip = function () {\n    var _this = this;\n    var tooltip = new Tooltip({\n      opensOn: 'Custom',\n      showTipPointer: false,\n      cssClass: 'e-color-picker-tooltip',\n      beforeOpen: function (args) {\n        _this.tooltipEle = args.element;\n      },\n      animation: {\n        open: {\n          effect: 'None'\n        },\n        close: {\n          effect: 'None'\n        }\n      }\n    });\n    tooltip.createElement = this.createElement;\n    tooltip.appendTo(this.container);\n    // eslint-disable-next-line\n    tooltip.open(this.container);\n    this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n    select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', {\n      className: 'e-tip-transparent'\n    }));\n  };\n  ColorPicker.prototype.getTooltipInst = function () {\n    return getInstance(this.container, Tooltip);\n  };\n  ColorPicker.prototype.setTooltipOffset = function (value) {\n    this.getTooltipInst().offsetY = value;\n  };\n  ColorPicker.prototype.toggleDisabled = function (enable) {\n    if (enable) {\n      this.getWrapper().classList.add(DISABLED);\n    } else {\n      this.getWrapper().classList.remove(DISABLED);\n    }\n    if (this.showButtons) {\n      [].slice.call(selectAll('.e-btn', this.container)).forEach(function (ele) {\n        if (enable) {\n          attributes(ele, {\n            'disabled': ''\n          });\n        } else {\n          ele.removeAttribute('disabled');\n        }\n      });\n    }\n  };\n  ColorPicker.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n  ColorPicker.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n  ColorPicker.prototype.updateHsv = function () {\n    this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n    this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n    this.setHandlerPosition();\n  };\n  ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.hsvToRgb.apply(this, this.hsv);\n    var cValue = this.rgbToHex(this.rgb);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.updateInput(cValue);\n    this.triggerEvent(cValue, pValue, rgba, isKey);\n  };\n  ColorPicker.prototype.updateInput = function (value) {\n    var wrapper = this.getWrapper();\n    if (!wrapper.classList.contains(HIDEVALUE)) {\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n      }\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        if (this.isRgb) {\n          this.updateValue(this.rgb, false);\n        } else {\n          this.updateValue(this.hsv, false);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.updatePreview = function (value) {\n    if (this.enableOpacity) {\n      this.updateOpacitySliderBg();\n    }\n    select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n  };\n  ColorPicker.prototype.getDragHandler = function () {\n    return select('.' + HANDLER, this.container);\n  };\n  ColorPicker.prototype.removeTileSelection = function () {\n    var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n    selectedEle.forEach(function (ele) {\n      ele.classList.remove(SELECT);\n      ele.setAttribute('aria-selected', 'false');\n    });\n  };\n  ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n  /**\n   * To get color value in specified type.\n   *\n   * @param {string} value - Specify the color value.\n   * @param {string} type - Specify the type to which the specified color needs to be converted.\n   * @method getValue\n   * @returns {string} - Color value\n   */\n  ColorPicker.prototype.getValue = function (value, type) {\n    if (!value) {\n      value = this.value;\n    }\n    type = !type ? 'hex' : type.toLowerCase();\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To show/hide ColorPicker popup based on current state of the SplitButton.\n   *\n   * @method toggle\n   * @returns {void}\n   */\n  ColorPicker.prototype.toggle = function () {\n    if (this.container.parentElement.classList.contains('e-popup-close')) {\n      this.splitBtn.toggle();\n    } else {\n      this.closePopup(null);\n    }\n  };\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n  ColorPicker.prototype.getModuleName = function () {\n    return 'colorpicker';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n  ColorPicker.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  ColorPicker.prototype.wireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n      var ctrlBtn = select('.' + CTRLBTN, this.container);\n      if (ctrlBtn) {\n        EventHandler.add(ctrlBtn, 'keydown', this.ctrlBtnKeyDown, this);\n      }\n      EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n      if (this.modeSwitcher || this.showButtons) {\n        this.addCtrlSwitchEvent();\n      }\n      EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n    } else {\n      EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n      EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n    }\n  };\n  ColorPicker.prototype.formResetHandler = function () {\n    this.value = this.initialInputValue;\n    attributes(this.element, {\n      'value': this.initialInputValue\n    });\n  };\n  ColorPicker.prototype.addCtrlSwitchEvent = function () {\n    var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n    if (ctrlSwitchBtn) {\n      EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n    }\n  };\n  ColorPicker.prototype.ctrlBtnKeyDown = function (e) {\n    if (e.keyCode === 13) {\n      var applyBtn = select('.' + APPLY, this.container);\n      if (applyBtn) {\n        var cValue = this.rgbToHex(this.rgb);\n        this.triggerChangeEvent(cValue);\n      }\n      this.splitBtn.element.focus();\n    }\n  };\n  ColorPicker.prototype.pickerKeyDown = function (e) {\n    switch (e.keyCode) {\n      case 39:\n        this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n        break;\n      case 37:\n        this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n        break;\n      case 38:\n        this.handlerDragPosition(2, 1, e);\n        break;\n      case 40:\n        this.handlerDragPosition(2, -1, e);\n        break;\n      case 13:\n        {\n          e.preventDefault();\n          var cValue = this.rgbToHex(this.rgb);\n          this.enterKeyHandler(cValue, e);\n        }\n    }\n  };\n  ColorPicker.prototype.enterKeyHandler = function (value, e) {\n    this.triggerChangeEvent(value);\n    if (!this.inline) {\n      this.splitBtn.element.focus();\n    }\n  };\n  ColorPicker.prototype.closePopup = function (e) {\n    var _this = this;\n    var beforeCloseArgs = {\n      element: this.container,\n      event: e,\n      cancel: false\n    };\n    this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n      if (!observedcloseArgs.cancel) {\n        _this.splitBtn.toggle();\n        _this.onPopupClose();\n      }\n    });\n  };\n  ColorPicker.prototype.triggerChangeEvent = function (value) {\n    var hex = value.slice(0, 7);\n    this.trigger('change', {\n      currentValue: {\n        hex: hex,\n        rgba: this.convertToRgbString(this.rgb)\n      },\n      previousValue: {\n        hex: this.value.slice(0, 7),\n        rgba: this.convertToRgbString(this.hexToRgb(this.value))\n      },\n      value: this.enableOpacity ? value : hex\n    });\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': hex\n      }, true);\n    }\n    this.element.value = hex ? hex : '#000000';\n  };\n  ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n    e.preventDefault();\n    this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n    if (this.hsv[prob] < 0) {\n      this.hsv[prob] = 0;\n    }\n    this.updateHsv();\n    this.convertToOtherFormat(true);\n  };\n  ColorPicker.prototype.handlerDown = function (e) {\n    e.preventDefault();\n    if (e.type === 'mousedown') {\n      this.clientX = Math.abs(e.pageX - pageXOffset);\n      this.clientY = Math.abs(e.pageY - pageYOffset);\n      this.setTooltipOffset(8);\n    } else {\n      this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n      this.setTooltipOffset(-8);\n    }\n    this.setHsv(this.clientX, this.clientY);\n    this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getDragHandler().focus();\n    EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n    EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n  };\n  ColorPicker.prototype.handlerMove = function (e) {\n    if (e.type !== 'touchmove') {\n      e.preventDefault();\n    }\n    var x;\n    var y;\n    if (e.type === 'mousemove') {\n      x = Math.abs(e.pageX - pageXOffset);\n      y = Math.abs(e.pageY - pageYOffset);\n    } else {\n      x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n    }\n    this.setHsv(x, y);\n    var dragHandler = this.getDragHandler();\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getTooltipInst().refresh(dragHandler);\n    if (!this.tooltipEle.style.transform) {\n      if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n        select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n        dragHandler.style.transition = 'none';\n        if (!this.inline) {\n          this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n        }\n        this.tooltipEle.style.transform = 'rotate(45deg)';\n        dragHandler.classList.add('e-hide-handler');\n      }\n    }\n  };\n  ColorPicker.prototype.setHsv = function (clientX, clientY) {\n    var ele = select('.' + HSVAREA, this.container);\n    var position = ele.getBoundingClientRect();\n    if (this.enableRtl) {\n      clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n    } else {\n      clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n    }\n    clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n    this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight - Math.max(0, Math.min(ele.offsetHeight, clientY - ele.offsetTop))) / ele.offsetHeight) * 10) / 10;\n    this.hsv[1] = Math.round(Number(100 * Math.max(0, Math.min(ele.offsetWidth, clientX - ele.offsetLeft)) / ele.offsetWidth) * 10) / 10;\n  };\n  ColorPicker.prototype.handlerEnd = function (e) {\n    if (e.type !== 'touchend') {\n      e.preventDefault();\n    }\n    EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n    EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n    var dragHandler = this.getDragHandler();\n    select('.' + HSVAREA, this.container).style.cursor = '';\n    if (this.tooltipEle.style.transform) {\n      this.tooltipEle.style.transform = '';\n      dragHandler.classList.remove('e-hide-handler');\n    }\n    if (!this.inline && !this.showButtons) {\n      this.closePopup(e);\n    }\n  };\n  ColorPicker.prototype.btnClickHandler = function (e) {\n    var target = e.target;\n    if (closest(target, '.' + MODESWITCH)) {\n      e.stopPropagation();\n      this.switchToPalette();\n    } else {\n      if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n        this.ctrlBtnClick(target, e);\n      }\n    }\n  };\n  ColorPicker.prototype.switchToPalette = function () {\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n    this.unWireEvents();\n    this.destroyOtherComp();\n    detach(select('.e-slider-preview', this.container));\n    if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n      remove(select('.' + INPUTWRAPPER, this.container));\n    }\n    detach(this.getHsvContainer());\n    this.createPalette();\n    this.firstPaletteFocus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n  };\n  ColorPicker.prototype.refreshPopupPos = function () {\n    if (!this.inline) {\n      var popupEle = this.getPopupEle();\n      popupEle.style.left = formatUnit(0 + pageXOffset);\n      popupEle.style.top = formatUnit(0 + pageYOffset);\n      this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n    }\n  };\n  ColorPicker.prototype.formatSwitchHandler = function () {\n    if (this.isRgb) {\n      this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n      this.isRgb = false;\n    } else {\n      this.updateValue(this.rgb, true, 2);\n      this.isRgb = true;\n    }\n  };\n  ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n    var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n    var inst;\n    for (var i = 0, len = clsName.length; i < len; i++) {\n      inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n      inst.value = Math.round(value[i]);\n      if (format) {\n        inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n        inst.max = max ? max[i] : 255;\n      }\n      inst.dataBind();\n    }\n  };\n  ColorPicker.prototype.previewHandler = function (e) {\n    var target = e.target;\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n    if (!this.rgb[3]) {\n      this.rgb[3] = 1;\n    }\n    var cValue = this.rgbToHex(this.rgb);\n    var hsv = this.rgbToHsv.apply(this, this.rgb);\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n    }\n    this.setHsvContainerBg(hsv[0]);\n    if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n      this.opacitySlider.setProperties({\n        'value': hsv[3] * 100\n      }, true);\n      this.opacitySlider.refresh();\n      this.updateOpacitySliderBg();\n    }\n    this.hsv = hsv;\n    this.setHandlerPosition();\n    this.updateInput(cValue);\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n    this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n  };\n  ColorPicker.prototype.paletteClickHandler = function (e) {\n    e.preventDefault();\n    var target = e.target;\n    if (target.classList.contains(TILE)) {\n      this.removeTileSelection();\n      this.addTileSelection(target);\n      if (target.classList.contains(NOCOLOR)) {\n        this.noColorTile();\n      } else {\n        var cValue = target.getAttribute('aria-label');\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hexToRgb(this.roundValue(cValue));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (this.getWrapper().classList.contains(SHOWVALUE)) {\n          this.updateInput(cValue);\n        }\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n      }\n      if (!this.inline && !this.showButtons) {\n        this.closePopup(e);\n      }\n    } else {\n      if (closest(target, '.' + MODESWITCH)) {\n        this.switchToPicker();\n      } else {\n        if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n          this.ctrlBtnClick(target, e);\n        } else {\n          if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n            this.formatSwitchHandler();\n          }\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.noColorTile = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = [];\n    this.hsv = [];\n    this.triggerEvent('', pValue, '', isKey);\n  };\n  ColorPicker.prototype.switchToPicker = function () {\n    var wrapper = this.getWrapper();\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n    this.unWireEvents();\n    [].slice.call(selectAll('.' + PALETTES, this.container)).forEach(function (ele) {\n      detach(ele);\n    });\n    if (wrapper.classList.contains(SHOWVALUE)) {\n      detach(select('.' + INPUTWRAPPER, this.container));\n    }\n    this.container.style.width = '';\n    var grpEle = select('.e-custom-palette', this.container);\n    if (this.presetColors) {\n      remove(grpEle);\n    }\n    this.createPicker();\n    this.getDragHandler().focus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n  };\n  ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n    if (ele.classList.contains(APPLY)) {\n      var cValue = this.rgbToHex(this.rgb);\n      this.triggerChangeEvent(cValue);\n    }\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    }\n  };\n  ColorPicker.prototype.paletteKeyDown = function (e) {\n    var target = e.target;\n    var selectedEle;\n    var idx;\n    var tiles = [].slice.call(selectAll('.' + TILE, target));\n    if ((target.classList.contains('e-palette') || target.classList.contains('e-tile')) && e.keyCode === 9 && !e.shiftKey) {\n      if (this.modeSwitcher || this.showButtons) {\n        this.getPopupEle().querySelector('.e-btn').focus();\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    } else if ((target.classList.contains('e-palette') || target.classList.contains('e-tile')) && e.keyCode === 9 && e.shiftKey) {\n      if (this.splitBtn) {\n        this.splitBtn.element.focus();\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n    var prevSelectedEle = tiles.filter(function (tile) {\n      return tile.classList.contains('e-selected');\n    }).pop();\n    switch (!e.altKey && e.keyCode) {\n      case 39:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)] : tiles[this.enableRtl ? tiles.length - 1 : 0];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 37:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)] : tiles[this.enableRtl ? 0 : tiles.length - 1];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 38:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n        selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 40:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n        if (tiles[idx]) {\n          selectedEle = tiles[idx];\n        } else {\n          idx %= tiles.length;\n          idx += tiles[tiles.length - 1].parentElement.childElementCount;\n          selectedEle = tiles[idx];\n        }\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 13:\n        e.preventDefault();\n        if (prevSelectedEle) {\n          var cValue = prevSelectedEle.getAttribute('aria-label');\n          this.enterKeyHandler(cValue ? cValue : '', e);\n        }\n    }\n  };\n  ColorPicker.prototype.keySelectionChanges = function (newEle) {\n    this.removeTileSelection();\n    this.addTileSelection(newEle);\n    if (newEle.classList.contains(NOCOLOR)) {\n      this.noColorTile(true);\n    } else {\n      var cValue = newEle.getAttribute('aria-label');\n      var pValue = this.rgbToHex(this.rgb);\n      this.rgb = this.hexToRgb(cValue);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      if (this.getWrapper().classList.contains(SHOWVALUE)) {\n        this.updateInput(cValue);\n      }\n      this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n    }\n  };\n  ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n    items = Array.prototype.slice.call(items);\n    var n = items.length;\n    var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n    var idx = items.indexOf(element);\n    idx += cIdx;\n    if (idx < 0) {\n      idx += n + emptyCount;\n    } else {\n      idx %= n + emptyCount;\n    }\n    return idx;\n  };\n  ColorPicker.prototype.inputHandler = function (e) {\n    var target = e.target;\n    if (!target.value.length) {\n      return;\n    }\n    var hsv;\n    var pValue;\n    var label = select('.e-float-text', target.parentElement).textContent;\n    switch (label) {\n      case 'HEX':\n        {\n          var value = '';\n          if (target.value[0] === '#' && target.value.length !== 5 || target.value[0] !== '#' && target.value.length !== 4) {\n            value = this.roundValue(target.value);\n          }\n          if (value.length === 9) {\n            pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(value + value.substr(-2));\n            this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n          } else {\n            return;\n          }\n          break;\n        }\n      case 'R':\n        if (this.rgb[0] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[0] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n        break;\n      case 'G':\n        if (this.rgb[1] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[1] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n        break;\n      case 'B':\n        if (this.rgb[2] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[2] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n        break;\n      case 'H':\n        this.hueSlider.value = Number(target.value);\n        break;\n      case 'S':\n        if (this.hsv[1] !== Number(target.value)) {\n          this.hsv[1] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n        break;\n      case 'V':\n        if (this.hsv[2] !== Number(target.value)) {\n          this.hsv[2] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n        break;\n      case 'A':\n        this.opacitySlider.value = Number(target.value);\n        break;\n    }\n  };\n  ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n      this.setHsvContainerBg(hsv[0]);\n    }\n    this.hsv = hsv;\n    var cValue = this.rgbToHex(this.rgb);\n    this.setHandlerPosition();\n    this.updateInput(value ? value : cValue);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.triggerEvent(cValue, pValue, rgba);\n  };\n  ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var hex = cValue.slice(0, 7);\n    if (!this.showButtons && !isKey) {\n      this.trigger('change', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: this.value.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(this.value))\n        },\n        value: cValue\n      });\n      if (this.enableOpacity) {\n        this.setProperties({\n          'value': cValue\n        }, true);\n      } else {\n        this.setProperties({\n          'value': hex\n        }, true);\n      }\n      this.element.value = hex ? hex : '#000000';\n    } else {\n      this.trigger('select', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: pValue.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(pValue))\n        }\n      });\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers.\n   * Also it maintains the initial input element from the DOM.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  ColorPicker.prototype.destroy = function () {\n    var _this = this;\n    var wrapper = this.getWrapper();\n    _super.prototype.destroy.call(this);\n    ['tabindex', 'spellcheck'].forEach(function (attr) {\n      _this.element.removeAttribute(attr);\n    });\n    if (this.inline) {\n      this.unWireEvents();\n      this.destroyOtherComp();\n    } else {\n      if (this.isPopupOpen()) {\n        this.unWireEvents();\n        this.destroyOtherComp();\n      }\n      this.splitBtn.destroy();\n      this.splitBtn = null;\n    }\n    this.tileRipple();\n    this.tileRipple = null;\n    this.ctrlBtnRipple();\n    this.ctrlBtnRipple = null;\n    if (this.element.nextElementSibling) {\n      detach(this.element.nextElementSibling);\n    }\n    if (wrapper) {\n      wrapper.parentElement.insertBefore(this.element, wrapper);\n      detach(wrapper);\n    }\n    this.container = null;\n    if (this.formElement) {\n      EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n    }\n  };\n  ColorPicker.prototype.destroyOtherComp = function () {\n    if (this.isPicker()) {\n      var popup = closest(this.hueSlider.element, '.e-color-picker');\n      var numericElemColl = popup.querySelectorAll('.e-numerictextbox');\n      for (var i = 0; i < numericElemColl.length; i++) {\n        getInstance(numericElemColl[i], NumericTextBox).destroy();\n      }\n      this.hueSlider.destroy();\n      if (this.enableOpacity) {\n        this.opacitySlider.destroy();\n        this.opacitySlider = null;\n      }\n      this.hueSlider = null;\n      var tooltipInst = this.getTooltipInst();\n      tooltipInst.close();\n      tooltipInst.destroy();\n      this.tooltipEle = null;\n    }\n  };\n  ColorPicker.prototype.isPopupOpen = function () {\n    return this.getPopupEle().classList.contains('e-popup-open');\n  };\n  ColorPicker.prototype.unWireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n      var ctrlBtn = select('.' + CTRLBTN, this.container);\n      if (ctrlBtn) {\n        EventHandler.remove(ctrlBtn, 'keydown', this.ctrlBtnKeyDown);\n      }\n      EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n      if (this.modeSwitcher || this.showButtons) {\n        EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n      }\n      EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n    } else {\n      EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n      EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n    }\n  };\n  ColorPicker.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n    var len = value.length;\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n    if (len === 5) {\n      var tempValue = '';\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n      value = '#' + tempValue;\n      len = 9;\n    }\n    if (len === 7) {\n      value += 'ff';\n    }\n    return value;\n  };\n  ColorPicker.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n    hex = hex.trim();\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n  ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n    if (this.rgb && !this.rgb.length) {\n      return [];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var v = max;\n    var d = max - min;\n    var s = max === 0 ? 0 : d / max;\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n    return hsv;\n  };\n  ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    s /= 100;\n    v /= 100;\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n    h /= 60;\n    var i = Math.floor(h);\n    var f = h - i;\n    var p = v * (1 - s);\n    var q = v * (1 - s * f);\n    var t = v * (1 - s * (1 - f));\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n    return rgb;\n  };\n  ColorPicker.prototype.rgbToHex = function (rgb) {\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n  ColorPicker.prototype.hex = function (x) {\n    return ('0' + x.toString(16)).slice(-2);\n  };\n  ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n    var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n    if (prop) {\n      if (ctrlSwitchWrapper) {\n        this.appendModeSwitchBtn();\n      } else {\n        this.createCtrlBtn();\n        if (this.isPicker() && !this.disabled) {\n          this.addCtrlSwitchEvent();\n        }\n      }\n    } else {\n      if (ctrlSwitchWrapper) {\n        if (this.showButtons) {\n          detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n        } else {\n          remove(ctrlSwitchWrapper);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.changeShowBtnProps = function (prop) {\n    var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n    if (prop) {\n      if (ctrlBtnWrapper) {\n        remove(ctrlBtnWrapper);\n      }\n      this.createCtrlBtn();\n      if (this.isPicker() && !this.disabled) {\n        this.addCtrlSwitchEvent();\n      }\n    } else {\n      if (this.modeSwitcher) {\n        detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n      } else {\n        remove(ctrlBtnWrapper);\n      }\n    }\n  };\n  ColorPicker.prototype.changeValueProp = function (newProp) {\n    if (this.isPicker()) {\n      this.rgb = this.hexToRgb(newProp);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      this.setHandlerPosition();\n      detach(closest(this.hueSlider.element, '.e-slider-preview'));\n      this.createSlider();\n      this.setHsvContainerBg();\n      this.updateInput(newProp);\n      if (this.rgb.length === 4) {\n        this.updateOpacityInput(this.rgb[3] * 100);\n      }\n    } else {\n      this.removeTileSelection();\n      var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n      if (ele) {\n        this.addTileSelection(ele);\n      }\n    }\n  };\n  ColorPicker.prototype.setInputEleProps = function () {\n    remove(select('.' + INPUTWRAPPER, this.container));\n    this.createInput();\n  };\n  ColorPicker.prototype.changeDisabledProp = function (newProp) {\n    if (this.isPicker()) {\n      this.hueSlider.enabled = !newProp;\n      this.opacitySlider.enabled = !newProp;\n      this.setInputEleProps();\n    }\n    if (newProp) {\n      this.toggleDisabled(true);\n      this.unWireEvents();\n    } else {\n      this.toggleDisabled(false);\n      this.wireEvents();\n    }\n  };\n  ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n    var wrapper = this.getWrapper();\n    var popupWrapper = this.getPopupEle();\n    if (oldProp) {\n      removeClass([wrapper, popupWrapper], oldProp.split(' '));\n    }\n    if (newProp) {\n      addClass([wrapper, popupWrapper], newProp.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n  };\n  ColorPicker.prototype.changeRtlProps = function (newProp) {\n    if (newProp) {\n      addClass([this.getWrapper()], 'e-rtl');\n    } else {\n      removeClass([this.getWrapper()], 'e-rtl');\n    }\n  };\n  ColorPicker.prototype.changePaletteProps = function () {\n    detach(this.container.children[0]);\n    this.container.style.width = '';\n    this.createPalette();\n  };\n  ColorPicker.prototype.changeOpacityProps = function (newProp) {\n    var wrapper = this.getWrapper();\n    if (newProp) {\n      removeClass([this.container.parentElement], HIDEOPACITY);\n      this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', {\n        className: 'e-opacity-slider'\n      })));\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        this.appendOpacityValue(select('.e-input-container', this.container));\n      }\n    } else {\n      addClass([this.container.parentElement], HIDEOPACITY);\n      this.opacitySlider.destroy();\n      remove(this.opacitySlider.element);\n      this.opacitySlider = null;\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        remove(select('.' + OPACITY, this.container).parentElement);\n      }\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {ColorPickerModel} newProp - Specifies new properties\n   * @param  {ColorPickerModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n  ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n    if (!isNullOrUndefined(newProp.value)) {\n      var value = this.roundValue(newProp.value);\n      if (value.length === 9) {\n        this.element.value = this.roundValue(value).slice(0, 7);\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n        if (preview) {\n          preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n        }\n      } else if (this.noColor && this.mode === 'Palette' && this.value === '') {\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n        preview.style.backgroundColor = '';\n      } else {\n        this.value = oldProp.value;\n      }\n    }\n    if (!this.inline && isNullOrUndefined(newProp.inline)) {\n      var otherCompModel = ['disabled', 'enableRtl'];\n      this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n      if (!this.isPopupOpen()) {\n        this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n        this.changeRtlProps(newProp.enableRtl);\n        return;\n      }\n    }\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'inline':\n          if (newProp.inline) {\n            this_1.getWrapper().appendChild(this_1.container);\n            this_1.splitBtn.destroy();\n            detach(this_1.element.nextElementSibling);\n            if (!this_1.container.children.length) {\n              this_1.createWidget();\n            }\n          } else {\n            this_1.destroyOtherComp();\n            this_1.unWireEvents();\n            this_1.container.innerHTML = '';\n            this_1.createSplitBtn();\n          }\n          break;\n        case 'cssClass':\n          {\n            this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n            var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n            props = props.reduce(function (a, b) {\n              if (a.indexOf(b) < 0) {\n                a.push(b);\n              }\n              return a;\n            }, []);\n            var count_1 = 0;\n            props.forEach(function (cls) {\n              if (count_1 === 0 && (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                if (inputWrap) {\n                  remove(select('.' + INPUTWRAPPER, _this.container));\n                }\n                _this.createInput();\n                count_1++;\n              }\n            });\n            break;\n          }\n        case 'enableRtl':\n          if (this_1.isPicker()) {\n            this_1.hueSlider.enableRtl = newProp.enableRtl;\n            if (this_1.enableOpacity) {\n              this_1.opacitySlider.enableRtl = newProp.enableRtl;\n            }\n            this_1.setInputEleProps();\n          }\n          this_1.changeRtlProps(newProp.enableRtl);\n          break;\n        case 'disabled':\n          this_1.changeDisabledProp(newProp.disabled);\n          break;\n        case 'value':\n          if (this_1.value !== oldProp.value) {\n            this_1.changeValueProp(newProp.value);\n          }\n          break;\n        case 'showButtons':\n          this_1.changeShowBtnProps(newProp.showButtons);\n          break;\n        case 'mode':\n          if (newProp.mode === 'Picker') {\n            this_1.switchToPicker();\n          } else {\n            this_1.switchToPalette();\n          }\n          break;\n        case 'modeSwitcher':\n          this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n          break;\n        case 'columns':\n        case 'presetColors':\n          if (!this_1.isPicker()) {\n            this_1.changePaletteProps();\n          }\n          break;\n        case 'noColor':\n          if (newProp.noColor) {\n            if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n              this_1.setNoColor();\n            }\n          } else {\n            this_1.changePaletteProps();\n          }\n          break;\n        case 'enableOpacity':\n          this_1.changeOpacityProps(newProp.enableOpacity);\n          break;\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      _loop_1(prop);\n    }\n  };\n  /**\n   * Sets the focus to Colorpicker\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n  ColorPicker.prototype.focusIn = function () {\n    this.element.parentElement.focus();\n  };\n  __decorate([Property('#008000ff')], ColorPicker.prototype, \"value\", void 0);\n  __decorate([Property('')], ColorPicker.prototype, \"cssClass\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"disabled\", void 0);\n  __decorate([Property('Picker')], ColorPicker.prototype, \"mode\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"modeSwitcher\", void 0);\n  __decorate([Property(null)], ColorPicker.prototype, \"presetColors\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"showButtons\", void 0);\n  __decorate([Property(10)], ColorPicker.prototype, \"columns\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"inline\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"noColor\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"enablePersistence\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"enableOpacity\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"select\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"change\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeTileRender\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeOpen\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"open\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeClose\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"onModeSwitch\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"created\", void 0);\n  ColorPicker = __decorate([NotifyPropertyChanges], ColorPicker);\n  return ColorPicker;\n}(Component);\nexport { ColorPicker };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Event","NotifyPropertyChanges","Property","Browser","closest","detach","EventHandler","getInstance","select","selectAll","formatUnit","addClass","attributes","classList","isNullOrUndefined","L10n","remove","removeClass","rippleEffect","SplitButton","getModel","Deferred","Tooltip","getZindexPartial","Popup","Input","NumericTextBox","Slider","APPLY","CANCEL","CURRENT","CONTAINER","CTRLBTN","CTRLSWITCH","DISABLED","FORMATSWITCH","HANDLER","HEX","HIDEHEX","HIDEOPACITY","HIDERGBA","HIDEVALUE","HIDEVALUESWITCH","HSVAREA","HSVCONTAINER","INPUTWRAPPER","MODESWITCH","NOCOLOR","OPACITY","PALETTES","PALETTECONTENT","PICKERCONTENT","PREVIEW","PREVIOUS","RTL","SHOWVALUE","SELECT","SPLITPREVIEW","TILE","presets","default","ColorPicker","_super","options","element","call","preRender","ele","formElement","add","formResetHandler","localeText","Apply","Cancel","ModeSwitcher","l10n","locale","getAttribute","setAttribute","id","render","initWrapper","inline","createWidget","createSplitBtn","enableOpacity","container","parentElement","renderComplete","wrapper","createElement","className","getModuleName","parentNode","insertBefore","appendChild","getWrapper","value","roundValue","toLowerCase","noColor","mode","slicedValue","slice","initialInputValue","setProperties","enableRtl","cssClass","replace","trim","split","tileRipple","selector","ctrlBtnRipple","createPalette","firstPaletteFocus","createPicker","getDragHandler","focus","isRgb","createInput","createCtrlBtn","disabled","wireEvents","toggleDisabled","isDevice","refreshPopupPos","_this","splitButton","splitBtn","iconCss","createPopupOnClick","open","onOpen","bind","click","trigger","currentValue","hex","rgba","convertToRgbString","hexToRgb","previousValue","appendTo","preview","style","backgroundColor","popupEle","getPopupEle","popupInst","getPopupInst","relateTo","document","body","position","X","Y","targetType","collision","offsetY","zIndex","toString","bindCallBackEvent","beforeOpen","args","callBackPromise","observeOpenArgs","cancel","top","pageYOffset","left","pageXOffset","display","modal","Number","resolve","beforeClose","event","beforeCloseArgs","observedCloseArgs","onPopupClose","unWireEvents","destroyOtherComp","width","innerHTML","outerHTML","presetColors","paletteGroup","appendElement","keys","appendPalette","len","modeSwitcher","setNoColor","parseInt","getComputedStyle","borderBottomWidth","children","offsetWidth","rgb","hsv","rgbToHsv","apply","colors","refEle","palette","attrs","row","tile","roundedColor","columns","presetName","addTileSelection","noColorEle","querySelector","forEach","attr","removeAttribute","insertPos","hsvContainer","dragHandler","setHsvContainerBg","setHandlerPosition","createSlider","createDragTooltip","h","getHsvContainer","hsvToRgb","hsvArea","Math","abs","offsetHeight","sliderPreviewWrapper","createPreview","sliderWrapper","slider","hueSlider","min","max","enabled","change","hueChange","createOpacitySlider","opacitySlider","opacityChange","opacityBgTrack","updateOpacitySliderBg","direction","opacityEle","background","convertToOtherFormat","pValue","rgbToHex","cValue","updateOpacityInput","updatePreview","triggerEvent","contains","opacityTextBoxInst","dataBind","parentEle","previewContainer","colorValue","isPicker","createNumericInput","label","numericInput","placeholder","format","showSpinButton","floatLabelType","readonly","inputHandler","inputWrap","appendValueSwitchBtn","hexInput","properties","setValue","addEventListener","clsName","appendOpacityValue","targetEle","valueSwitchBtn","formatSwitchHandler","showButtons","setLocale","btnWrapper","controlBtnWrapper","getConstant","appendModeSwitchBtn","title","tooltip","opensOn","showTipPointer","tooltipEle","animation","effect","close","getTooltipInst","setTooltipOffset","enable","join","convertToHsvString","updateHsv","isKey","updateInput","substr","updateValue","removeTileSelection","selectedEle","convertRgbToNumberArray","indexOf","map","n","parseFloat","getValue","type","toggle","closePopup","getPersistData","addOnPersist","pickerKeyDown","ctrlBtn","ctrlBtnKeyDown","handlerDown","addCtrlSwitchEvent","previewHandler","paletteClickHandler","paletteKeyDown","ctrlSwitchBtn","btnClickHandler","e","keyCode","applyBtn","triggerChangeEvent","handlerDragPosition","preventDefault","enterKeyHandler","observedcloseArgs","prob","ctrlKey","clientX","pageX","clientY","pageY","changedTouches","setHsv","transition","handlerMove","handlerEnd","x","y","refresh","transform","cursor","getBoundingClientRect","right","round","offsetTop","offsetLeft","stopPropagation","switchToPalette","ctrlBtnClick","refreshPosition","idx","inst","toUpperCase","noColorTile","switchToPicker","grpEle","tiles","shiftKey","prevSelectedEle","filter","pop","altKey","tilePosition","keySelectionChanges","childElementCount","newEle","items","cIdx","emptyCount","textContent","inputValueChange","destroy","isPopupOpen","nextElementSibling","popup","numericElemColl","querySelectorAll","tooltipInst","tempValue","len_1","charAt","opacity","toFixed","bigInt","push","g","v","s","floor","f","q","t","changeModeSwitcherProp","prop","ctrlSwitchWrapper","changeShowBtnProps","ctrlBtnWrapper","changeValueProp","newProp","setInputEleProps","changeDisabledProp","changeCssClassProps","oldProp","popupWrapper","changeRtlProps","changePaletteProps","changeOpacityProps","onPropertyChanged","otherCompModel","_loop_1","this_1","props","concat","reduce","a","count_1","cls","_i","_a","focusIn"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/@syncfusion/ej2-inputs/src/color-picker/color-picker.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n    default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b',\n        '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7',\n        '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4',\n        '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d',\n        '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176',\n        '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58',\n        '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835',\n        '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d',\n        '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825',\n        '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */ (function (_super) {\n    __extends(ColorPicker, _super);\n    function ColorPicker(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    ColorPicker.prototype.preRender = function () {\n        var ele = this.element;\n        this.formElement = closest(this.element, 'form');\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n        }\n        var localeText = { Apply: 'Apply', Cancel: 'Cancel', ModeSwitcher: 'Switch Mode' };\n        this.l10n = new L10n('colorpicker', localeText, this.locale);\n        if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n            ele.setAttribute('name', ele.id);\n        }\n    };\n    /**\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ColorPicker.prototype.render = function () {\n        this.initWrapper();\n        if (this.inline) {\n            this.createWidget();\n        }\n        else {\n            this.createSplitBtn();\n        }\n        if (!this.enableOpacity) {\n            addClass([this.container.parentElement], HIDEOPACITY);\n        }\n        this.renderComplete();\n    };\n    ColorPicker.prototype.initWrapper = function () {\n        var wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n        this.element.parentNode.insertBefore(wrapper, this.element);\n        wrapper.appendChild(this.element);\n        attributes(this.element, { 'tabindex': '-1', 'spellcheck': 'false', 'aria-label': 'colorpicker' });\n        this.container = this.createElement('div', { className: CONTAINER });\n        this.getWrapper().appendChild(this.container);\n        var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n        if (this.noColor && this.mode === 'Palette' && this.value === '') {\n            value = '';\n        }\n        var slicedValue = value.slice(0, 7);\n        if (isNullOrUndefined(this.initialInputValue)) {\n            this.initialInputValue = slicedValue;\n        }\n        this.element.value = slicedValue;\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': slicedValue }, true);\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        if (this.cssClass) {\n            addClass([wrapper], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        this.tileRipple = rippleEffect(this.container, { selector: '.' + TILE });\n        this.ctrlBtnRipple = rippleEffect(this.container, { selector: '.e-btn' });\n    };\n    ColorPicker.prototype.getWrapper = function () {\n        return this.element.parentElement;\n    };\n    ColorPicker.prototype.createWidget = function () {\n        if (this.mode === 'Palette') {\n            this.createPalette();\n            if (!this.inline) {\n                this.firstPaletteFocus();\n            }\n        }\n        else {\n            this.createPicker();\n            if (!this.inline) {\n                this.getDragHandler().focus();\n            }\n        }\n        this.isRgb = true;\n        this.createInput();\n        this.createCtrlBtn();\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        if (this.inline && this.disabled) {\n            this.toggleDisabled(true);\n        }\n        if (Browser.isDevice) {\n            this.refreshPopupPos();\n        }\n    };\n    ColorPicker.prototype.createSplitBtn = function () {\n        var _this = this;\n        var splitButton = this.createElement('button', { className: 'e-split-colorpicker' });\n        this.getWrapper().appendChild(splitButton);\n        this.splitBtn = new SplitButton({\n            iconCss: 'e-selected-color',\n            target: this.container,\n            disabled: this.disabled,\n            enableRtl: this.enableRtl,\n            createPopupOnClick: this.createPopupOnClick,\n            open: this.onOpen.bind(this),\n            click: function () {\n                _this.trigger('change', {\n                    currentValue: { hex: _this.value.slice(0, 7), rgba: _this.convertToRgbString(_this.hexToRgb(_this.value)) },\n                    previousValue: { hex: null, rgba: null }, value: _this.value\n                });\n            }\n        });\n        this.splitBtn.createElement = this.createElement;\n        this.splitBtn.appendTo(splitButton);\n        var preview = this.createElement('span', { className: SPLITPREVIEW });\n        select('.e-selected-color', splitButton).appendChild(preview);\n        preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n        var popupEle = this.getPopupEle();\n        addClass([popupEle], 'e-colorpicker-popup');\n        if (this.cssClass) {\n            addClass([popupEle], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (Browser.isDevice) {\n            var popupInst = this.getPopupInst();\n            popupInst.relateTo = document.body;\n            popupInst.position = { X: 'center', Y: 'center' };\n            popupInst.targetType = 'container';\n            popupInst.collision = { X: 'fit', Y: 'fit' };\n            popupInst.offsetY = 4;\n            popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n        }\n        this.bindCallBackEvent();\n    };\n    ColorPicker.prototype.onOpen = function () {\n        this.trigger('open', { element: this.container });\n    };\n    ColorPicker.prototype.getPopupInst = function () {\n        return getInstance(this.getPopupEle(), Popup);\n    };\n    ColorPicker.prototype.bindCallBackEvent = function () {\n        var _this = this;\n        this.splitBtn.beforeOpen = function (args) {\n            var callBackPromise = new Deferred();\n            _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n                if (!observeOpenArgs.cancel) {\n                    var popupEle = _this.getPopupEle();\n                    popupEle.style.top = formatUnit(0 + pageYOffset);\n                    popupEle.style.left = formatUnit(0 + pageXOffset);\n                    popupEle.style.display = 'block';\n                    _this.createWidget();\n                    popupEle.style.display = '';\n                    if (Browser.isDevice) {\n                        _this.modal = _this.createElement('div');\n                        _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n                        _this.modal.style.display = 'none';\n                        document.body.insertBefore(_this.modal, popupEle);\n                        document.body.className += ' e-colorpicker-overflow';\n                        _this.modal.style.display = 'block';\n                        _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n                    }\n                }\n                args.cancel = observeOpenArgs.cancel;\n                callBackPromise.resolve(observeOpenArgs);\n            });\n            return callBackPromise;\n        };\n        this.splitBtn.beforeClose = function (args) {\n            var callBackPromise = new Deferred();\n            if (!isNullOrUndefined(args.event)) {\n                var beforeCloseArgs = { element: _this.container, event: args.event, cancel: false };\n                _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n                    if (Browser.isDevice && args.event.target === _this.modal) {\n                        observedCloseArgs.cancel = true;\n                    }\n                    if (!observedCloseArgs.cancel) {\n                        _this.onPopupClose();\n                    }\n                    args.cancel = observedCloseArgs.cancel;\n                    callBackPromise.resolve(observedCloseArgs);\n                });\n            }\n            else {\n                callBackPromise.resolve(args);\n            }\n            return callBackPromise;\n        };\n    };\n    ColorPicker.prototype.onPopupClose = function () {\n        this.unWireEvents();\n        this.destroyOtherComp();\n        this.container.style.width = '';\n        select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n        this.container.innerHTML = '';\n        removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n        if (Browser.isDevice && this.modal) {\n            removeClass([document.body], 'e-colorpicker-overflow');\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    };\n    ColorPicker.prototype.createPalette = function () {\n        classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n        if (this.presetColors) {\n            var paletteGroup = this.createElement('div', { className: 'e-custom-palette' });\n            this.appendElement(paletteGroup);\n            var keys = Object.keys(this.presetColors);\n            if (keys.length === 1) {\n                this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n            }\n            else {\n                for (var i = 0, len = keys.length; i < len; i++) {\n                    this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n                }\n            }\n            if (selectAll('.e-row', paletteGroup).length > 10) {\n                addClass([paletteGroup], 'e-palette-group');\n            }\n        }\n        else {\n            this.appendPalette(presets.default, 'default');\n        }\n        if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n            this.setNoColor();\n        }\n        var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n        this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n        this.rgb = this.hexToRgb(this.roundValue(this.value));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    };\n    ColorPicker.prototype.firstPaletteFocus = function () {\n        if (!select('.' + SELECT, this.container.children[0])) {\n            selectAll('.' + PALETTES, this.container)[0].focus();\n        }\n    };\n    ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n        var palette = this.createElement('div', { className: PALETTES, attrs: { 'tabindex': '0', 'role': 'grid' } });\n        if (refEle) {\n            refEle.appendChild(palette);\n        }\n        else {\n            this.appendElement(palette);\n        }\n        var row;\n        var tile;\n        var roundedColor;\n        for (var i = 0, len = colors.length; i < len; i++) {\n            if (i === 0 || i % this.columns === 0) {\n                row = this.createElement('div', {\n                    className: 'e-row', attrs: { 'role': 'row' }\n                });\n                palette.appendChild(row);\n            }\n            roundedColor = this.roundValue(colors[i]).toLowerCase();\n            tile = this.createElement('span', {\n                className: TILE, attrs: { 'role': 'gridcell', 'aria-label': roundedColor, 'aria-selected': 'false', 'tabindex': '0' }\n            });\n            this.trigger('beforeTileRender', { element: tile, presetName: key, value: colors[i] });\n            row.appendChild(tile);\n            if (this.value === roundedColor) {\n                this.addTileSelection(tile);\n                palette.focus();\n            }\n            tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n        }\n    };\n    ColorPicker.prototype.setNoColor = function () {\n        var noColorEle = this.container.querySelector('.e-row').children[0];\n        noColorEle.classList.add(NOCOLOR);\n        if (!this.value) {\n            noColorEle.classList.add(SELECT);\n            closest(noColorEle, '.' + PALETTES).focus();\n        }\n        ['aria-selected', 'aria-label'].forEach(function (attr) { noColorEle.removeAttribute(attr); });\n        noColorEle.style.backgroundColor = '';\n    };\n    ColorPicker.prototype.appendElement = function (ele, insertPos) {\n        if (insertPos === void 0) { insertPos = 0; }\n        var refEle = this.container.children[insertPos];\n        if (refEle) {\n            this.container.insertBefore(ele, refEle);\n        }\n        else {\n            this.container.appendChild(ele);\n        }\n    };\n    ColorPicker.prototype.addTileSelection = function (ele) {\n        ele.classList.add(SELECT);\n        ele.setAttribute('aria-selected', 'true');\n    };\n    ColorPicker.prototype.createPicker = function () {\n        classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n        var hsvContainer = this.createElement('div', { className: HSVCONTAINER });\n        this.appendElement(hsvContainer);\n        hsvContainer.appendChild(this.createElement('div', { className: HSVAREA }));\n        var dragHandler = this.createElement('span', { className: HANDLER, attrs: { 'tabindex': '0' } });\n        hsvContainer.appendChild(dragHandler);\n        if (this.value === null || this.value === '') {\n            this.value = '#008000ff';\n        }\n        this.rgb = this.hexToRgb(this.value);\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        this.setHsvContainerBg();\n        this.setHandlerPosition();\n        this.createSlider();\n        this.createDragTooltip();\n    };\n    ColorPicker.prototype.setHsvContainerBg = function (h) {\n        if (h === void 0) { h = this.hsv[0]; }\n        this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n    };\n    ColorPicker.prototype.getHsvContainer = function () {\n        return select('.' + HSVCONTAINER, this.container);\n    };\n    ColorPicker.prototype.setHandlerPosition = function () {\n        var dragHandler = this.getDragHandler();\n        var hsvArea = select('.' + HSVAREA, this.container);\n        if (this.enableRtl) {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n        }\n        else {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n        }\n        dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n    };\n    ColorPicker.prototype.createSlider = function () {\n        var sliderPreviewWrapper = this.createElement('div', { className: 'e-slider-preview' });\n        this.appendElement(sliderPreviewWrapper, 1);\n        this.createPreview(sliderPreviewWrapper);\n        var sliderWrapper = this.createElement('div', { className: 'e-colorpicker-slider' });\n        sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n        var slider = this.createElement('div', { className: 'e-hue-slider' });\n        sliderWrapper.appendChild(slider);\n        this.hueSlider = new Slider({\n            value: this.hsv[0],\n            min: 0,\n            max: 359,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.hueChange.bind(this)\n        });\n        this.hueSlider.createElement = this.createElement;\n        this.hueSlider.appendTo(slider);\n        if (this.enableOpacity) {\n            slider = this.createElement('div', { className: 'e-opacity-slider' });\n            sliderWrapper.appendChild(slider);\n            this.createOpacitySlider(slider);\n        }\n    };\n    ColorPicker.prototype.createOpacitySlider = function (slider) {\n        this.opacitySlider = new Slider({\n            value: this.rgb[3] * 100,\n            min: 0,\n            max: 100,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.opacityChange.bind(this)\n        });\n        this.opacitySlider.createElement = this.createElement;\n        this.opacitySlider.appendTo(slider);\n        var opacityBgTrack = this.createElement('div', { className: 'e-opacity-empty-track' });\n        slider.appendChild(opacityBgTrack);\n        this.updateOpacitySliderBg();\n    };\n    ColorPicker.prototype.updateOpacitySliderBg = function () {\n        var direction = this.enableRtl ? 'to left' : 'to right';\n        var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n        if (opacityEle) {\n            opacityEle.style.background =\n                'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' +\n                    this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n        }\n    };\n    ColorPicker.prototype.hueChange = function (args) {\n        this.hsv[0] = args.value;\n        this.setHsvContainerBg();\n        this.convertToOtherFormat();\n    };\n    ColorPicker.prototype.opacityChange = function (args) {\n        var value = args.value;\n        var pValue = this.rgbToHex(this.rgb);\n        this.hsv[3] = value / 100;\n        this.rgb[3] = value / 100;\n        var cValue = this.rgbToHex(this.rgb);\n        this.updateOpacityInput(value);\n        var rgb = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgb);\n        this.triggerEvent(cValue, pValue, rgb);\n    };\n    ColorPicker.prototype.updateOpacityInput = function (value) {\n        if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n            var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n            opacityTextBoxInst.value = value;\n            opacityTextBoxInst.dataBind();\n        }\n    };\n    ColorPicker.prototype.createPreview = function (parentEle) {\n        var previewContainer = this.createElement('div', { className: PREVIEW });\n        parentEle.appendChild(previewContainer);\n        var preview = this.createElement('span', { className: 'e-preview ' + CURRENT });\n        previewContainer.appendChild(preview);\n        var colorValue = this.convertToRgbString(this.rgb);\n        preview.style.backgroundColor = colorValue;\n        preview = this.createElement('span', { className: 'e-preview ' + PREVIOUS });\n        previewContainer.appendChild(preview);\n        preview.style.backgroundColor = colorValue;\n    };\n    ColorPicker.prototype.isPicker = function () {\n        return !this.container.classList.contains(PALETTECONTENT);\n    };\n    ColorPicker.prototype.getPopupEle = function () {\n        return this.container.parentElement;\n    };\n    ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n        var _this = this;\n        var numericInput = new NumericTextBox({\n            value: value,\n            placeholder: label,\n            min: 0,\n            max: max,\n            format: '###.##',\n            showSpinButton: false,\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true,\n            change: function (args) {\n                if (args.event) {\n                    _this.inputHandler(args.event);\n                }\n            }\n        });\n        numericInput.createElement = this.createElement;\n        numericInput.appendTo(element);\n    };\n    ColorPicker.prototype.createInput = function () {\n        var isPicker = this.isPicker();\n        var wrapper = this.getWrapper();\n        if ((isPicker && !wrapper.classList.contains(HIDEVALUE)) || (!isPicker && wrapper.classList.contains(SHOWVALUE))) {\n            var inputWrap = this.createElement('div', { className: INPUTWRAPPER });\n            if (isPicker) {\n                this.appendElement(inputWrap, 2);\n            }\n            else {\n                this.appendElement(inputWrap, 1);\n            }\n            var container = this.createElement('div', { className: 'e-input-container' });\n            inputWrap.appendChild(container);\n            if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n                this.appendValueSwitchBtn(inputWrap);\n            }\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                var hexInput = this.createElement('input', {\n                    className: HEX,\n                    attrs: { 'maxlength': '7', 'spellcheck': 'false', 'aria-label': 'HEX' }\n                });\n                container.appendChild(hexInput);\n                Input.createInput({\n                    element: hexInput,\n                    floatLabelType: 'Always',\n                    properties: {\n                        placeholder: 'HEX',\n                        enableRtl: this.enableRtl,\n                        enabled: !this.disabled,\n                        readonly: this.isPicker() ? false : true\n                    }\n                }, this.createElement);\n                Input.setValue(this.value.slice(0, 7), hexInput);\n                hexInput.addEventListener('input', this.inputHandler.bind(this));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                var label = void 0;\n                var value = void 0;\n                if (this.isRgb) {\n                    label = 'RGB';\n                    value = this.rgb;\n                }\n                else {\n                    label = 'HSV';\n                    value = this.hsv;\n                }\n                var clsName = ['rh', 'gs', 'bv'];\n                for (var i = 0; i < 3; i++) {\n                    this.createNumericInput(container.appendChild(this.createElement('input', { className: 'e-' + clsName[i] + '-value' })), value[i], label[i], 255);\n                }\n                if (this.enableOpacity) {\n                    this.appendOpacityValue(container);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.appendOpacityValue = function (container) {\n        this.createNumericInput(container.appendChild(this.createElement('input', { className: OPACITY })), this.rgb[3] * 100, 'A', 100);\n    };\n    ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n        var valueSwitchBtn = this.createElement('button', {\n            className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH,\n            attrs: { 'title': 'Toggle format' }\n        });\n        targetEle.appendChild(valueSwitchBtn);\n        if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n            valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n        }\n    };\n    ColorPicker.prototype.createCtrlBtn = function () {\n        if (this.modeSwitcher || this.showButtons) {\n            this.l10n.setLocale(this.locale);\n            var btnWrapper = this.createElement('div', { className: CTRLSWITCH });\n            this.container.appendChild(btnWrapper);\n            if (this.showButtons) {\n                var controlBtnWrapper = this.createElement('div', { className: CTRLBTN });\n                btnWrapper.appendChild(controlBtnWrapper);\n                var apply = this.l10n.getConstant('Apply');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: apply,\n                    className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n                    attrs: { 'title': apply }\n                }));\n                var cancel = this.l10n.getConstant('Cancel');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: cancel,\n                    className: 'e-btn e-css e-flat e-small ' + CANCEL,\n                    attrs: { 'title': cancel }\n                }));\n            }\n            if (this.modeSwitcher) {\n                this.appendModeSwitchBtn();\n            }\n        }\n    };\n    ColorPicker.prototype.appendModeSwitchBtn = function () {\n        var modeSwitcher = this.createElement('button', {\n            className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH, attrs: { title: this.l10n.getConstant('ModeSwitcher') }\n        });\n        select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n    };\n    ColorPicker.prototype.createDragTooltip = function () {\n        var _this = this;\n        var tooltip = new Tooltip({\n            opensOn: 'Custom',\n            showTipPointer: false,\n            cssClass: 'e-color-picker-tooltip',\n            beforeOpen: function (args) {\n                _this.tooltipEle = args.element;\n            },\n            animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n        });\n        tooltip.createElement = this.createElement;\n        tooltip.appendTo(this.container);\n        // eslint-disable-next-line\n        tooltip.open(this.container);\n        this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n        select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', { className: 'e-tip-transparent' }));\n    };\n    ColorPicker.prototype.getTooltipInst = function () {\n        return getInstance(this.container, Tooltip);\n    };\n    ColorPicker.prototype.setTooltipOffset = function (value) {\n        this.getTooltipInst().offsetY = value;\n    };\n    ColorPicker.prototype.toggleDisabled = function (enable) {\n        if (enable) {\n            this.getWrapper().classList.add(DISABLED);\n        }\n        else {\n            this.getWrapper().classList.remove(DISABLED);\n        }\n        if (this.showButtons) {\n            ([].slice.call(selectAll('.e-btn', this.container))).forEach(function (ele) {\n                if (enable) {\n                    attributes(ele, { 'disabled': '' });\n                }\n                else {\n                    ele.removeAttribute('disabled');\n                }\n            });\n        }\n    };\n    ColorPicker.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    ColorPicker.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    ColorPicker.prototype.updateHsv = function () {\n        this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n        this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n        this.setHandlerPosition();\n    };\n    ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hsvToRgb.apply(this, this.hsv);\n        var cValue = this.rgbToHex(this.rgb);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.updateInput(cValue);\n        this.triggerEvent(cValue, pValue, rgba, isKey);\n    };\n    ColorPicker.prototype.updateInput = function (value) {\n        var wrapper = this.getWrapper();\n        if (!wrapper.classList.contains(HIDEVALUE)) {\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                if (this.isRgb) {\n                    this.updateValue(this.rgb, false);\n                }\n                else {\n                    this.updateValue(this.hsv, false);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.updatePreview = function (value) {\n        if (this.enableOpacity) {\n            this.updateOpacitySliderBg();\n        }\n        select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n    };\n    ColorPicker.prototype.getDragHandler = function () {\n        return select('.' + HANDLER, this.container);\n    };\n    ColorPicker.prototype.removeTileSelection = function () {\n        var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n        selectedEle.forEach(function (ele) {\n            ele.classList.remove(SELECT);\n            ele.setAttribute('aria-selected', 'false');\n        });\n    };\n    ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    /**\n     * To get color value in specified type.\n     *\n     * @param {string} value - Specify the color value.\n     * @param {string} type - Specify the type to which the specified color needs to be converted.\n     * @method getValue\n     * @returns {string} - Color value\n     */\n    ColorPicker.prototype.getValue = function (value, type) {\n        if (!value) {\n            value = this.value;\n        }\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To show/hide ColorPicker popup based on current state of the SplitButton.\n     *\n     * @method toggle\n     * @returns {void}\n     */\n    ColorPicker.prototype.toggle = function () {\n        if (this.container.parentElement.classList.contains('e-popup-close')) {\n            this.splitBtn.toggle();\n        }\n        else {\n            this.closePopup(null);\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ColorPicker.prototype.getModuleName = function () {\n        return 'colorpicker';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ColorPicker.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ColorPicker.prototype.wireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n            var ctrlBtn = select('.' + CTRLBTN, this.container);\n            if (ctrlBtn) {\n                EventHandler.add(ctrlBtn, 'keydown', this.ctrlBtnKeyDown, this);\n            }\n            EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n            if (this.modeSwitcher || this.showButtons) {\n                this.addCtrlSwitchEvent();\n            }\n            EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n        }\n        else {\n            EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n            EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n        }\n    };\n    ColorPicker.prototype.formResetHandler = function () {\n        this.value = this.initialInputValue;\n        attributes(this.element, { 'value': this.initialInputValue });\n    };\n    ColorPicker.prototype.addCtrlSwitchEvent = function () {\n        var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n        if (ctrlSwitchBtn) {\n            EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n        }\n    };\n    ColorPicker.prototype.ctrlBtnKeyDown = function (e) {\n        if (e.keyCode === 13) {\n            var applyBtn = select('.' + APPLY, this.container);\n            if (applyBtn) {\n                var cValue = this.rgbToHex(this.rgb);\n                this.triggerChangeEvent(cValue);\n            }\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.pickerKeyDown = function (e) {\n        switch (e.keyCode) {\n            case 39:\n                this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n                break;\n            case 37:\n                this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n                break;\n            case 38:\n                this.handlerDragPosition(2, 1, e);\n                break;\n            case 40:\n                this.handlerDragPosition(2, -1, e);\n                break;\n            case 13: {\n                e.preventDefault();\n                var cValue = this.rgbToHex(this.rgb);\n                this.enterKeyHandler(cValue, e);\n            }\n        }\n    };\n    ColorPicker.prototype.enterKeyHandler = function (value, e) {\n        this.triggerChangeEvent(value);\n        if (!this.inline) {\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.closePopup = function (e) {\n        var _this = this;\n        var beforeCloseArgs = { element: this.container, event: e, cancel: false };\n        this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n            if (!observedcloseArgs.cancel) {\n                _this.splitBtn.toggle();\n                _this.onPopupClose();\n            }\n        });\n    };\n    ColorPicker.prototype.triggerChangeEvent = function (value) {\n        var hex = value.slice(0, 7);\n        this.trigger('change', {\n            currentValue: { hex: hex, rgba: this.convertToRgbString(this.rgb) },\n            previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },\n            value: this.enableOpacity ? value : hex\n        });\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': hex }, true);\n        }\n        this.element.value = hex ? hex : '#000000';\n    };\n    ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n        e.preventDefault();\n        this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n        if (this.hsv[prob] < 0) {\n            this.hsv[prob] = 0;\n        }\n        this.updateHsv();\n        this.convertToOtherFormat(true);\n    };\n    ColorPicker.prototype.handlerDown = function (e) {\n        e.preventDefault();\n        if (e.type === 'mousedown') {\n            this.clientX = Math.abs(e.pageX - pageXOffset);\n            this.clientY = Math.abs(e.pageY - pageYOffset);\n            this.setTooltipOffset(8);\n        }\n        else {\n            this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n            this.setTooltipOffset(-8);\n        }\n        this.setHsv(this.clientX, this.clientY);\n        this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getDragHandler().focus();\n        EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n        EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n    };\n    ColorPicker.prototype.handlerMove = function (e) {\n        if (e.type !== 'touchmove') {\n            e.preventDefault();\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = Math.abs(e.pageX - pageXOffset);\n            y = Math.abs(e.pageY - pageYOffset);\n        }\n        else {\n            x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n        }\n        this.setHsv(x, y);\n        var dragHandler = this.getDragHandler();\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getTooltipInst().refresh(dragHandler);\n        if (!this.tooltipEle.style.transform) {\n            if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n                select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n                dragHandler.style.transition = 'none';\n                if (!this.inline) {\n                    this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n                }\n                this.tooltipEle.style.transform = 'rotate(45deg)';\n                dragHandler.classList.add('e-hide-handler');\n            }\n        }\n    };\n    ColorPicker.prototype.setHsv = function (clientX, clientY) {\n        var ele = select('.' + HSVAREA, this.container);\n        var position = ele.getBoundingClientRect();\n        if (this.enableRtl) {\n            clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n        }\n        else {\n            clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n        }\n        clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n        this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight -\n            Math.max(0, Math.min(ele.offsetHeight, (clientY - ele.offsetTop)))) / ele.offsetHeight) * 10) / 10;\n        this.hsv[1] =\n            Math.round(Number(100 * (Math.max(0, Math.min(ele.offsetWidth, (clientX - ele.offsetLeft)))) / ele.offsetWidth) * 10) / 10;\n    };\n    ColorPicker.prototype.handlerEnd = function (e) {\n        if (e.type !== 'touchend') {\n            e.preventDefault();\n        }\n        EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n        EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n        var dragHandler = this.getDragHandler();\n        select('.' + HSVAREA, this.container).style.cursor = '';\n        if (this.tooltipEle.style.transform) {\n            this.tooltipEle.style.transform = '';\n            dragHandler.classList.remove('e-hide-handler');\n        }\n        if (!this.inline && !this.showButtons) {\n            this.closePopup(e);\n        }\n    };\n    ColorPicker.prototype.btnClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.' + MODESWITCH)) {\n            e.stopPropagation();\n            this.switchToPalette();\n        }\n        else {\n            if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                this.ctrlBtnClick(target, e);\n            }\n        }\n    };\n    ColorPicker.prototype.switchToPalette = function () {\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Palette' });\n        this.unWireEvents();\n        this.destroyOtherComp();\n        detach(select('.e-slider-preview', this.container));\n        if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n            remove(select('.' + INPUTWRAPPER, this.container));\n        }\n        detach(this.getHsvContainer());\n        this.createPalette();\n        this.firstPaletteFocus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Palette' });\n    };\n    ColorPicker.prototype.refreshPopupPos = function () {\n        if (!this.inline) {\n            var popupEle = this.getPopupEle();\n            popupEle.style.left = formatUnit(0 + pageXOffset);\n            popupEle.style.top = formatUnit(0 + pageYOffset);\n            this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n        }\n    };\n    ColorPicker.prototype.formatSwitchHandler = function () {\n        if (this.isRgb) {\n            this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n            this.isRgb = false;\n        }\n        else {\n            this.updateValue(this.rgb, true, 2);\n            this.isRgb = true;\n        }\n    };\n    ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n        var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n        var inst;\n        for (var i = 0, len = clsName.length; i < len; i++) {\n            inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n            inst.value = Math.round(value[i]);\n            if (format) {\n                inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n                inst.max = max ? max[i] : 255;\n            }\n            inst.dataBind();\n        }\n    };\n    ColorPicker.prototype.previewHandler = function (e) {\n        var target = e.target;\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n        if (!this.rgb[3]) {\n            this.rgb[3] = 1;\n        }\n        var cValue = this.rgbToHex(this.rgb);\n        var hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n        }\n        this.setHsvContainerBg(hsv[0]);\n        if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n            this.opacitySlider.setProperties({ 'value': hsv[3] * 100 }, true);\n            this.opacitySlider.refresh();\n            this.updateOpacitySliderBg();\n        }\n        this.hsv = hsv;\n        this.setHandlerPosition();\n        this.updateInput(cValue);\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n    };\n    ColorPicker.prototype.paletteClickHandler = function (e) {\n        e.preventDefault();\n        var target = e.target;\n        if (target.classList.contains(TILE)) {\n            this.removeTileSelection();\n            this.addTileSelection(target);\n            if (target.classList.contains(NOCOLOR)) {\n                this.noColorTile();\n            }\n            else {\n                var cValue = target.getAttribute('aria-label');\n                var pValue = this.rgbToHex(this.rgb);\n                this.rgb = this.hexToRgb(this.roundValue(cValue));\n                this.hsv = this.rgbToHsv.apply(this, this.rgb);\n                if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                    this.updateInput(cValue);\n                }\n                this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n            }\n            if (!this.inline && !this.showButtons) {\n                this.closePopup(e);\n            }\n        }\n        else {\n            if (closest(target, '.' + MODESWITCH)) {\n                this.switchToPicker();\n            }\n            else {\n                if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                    this.ctrlBtnClick(target, e);\n                }\n                else {\n                    if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n                        this.formatSwitchHandler();\n                    }\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.noColorTile = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = [];\n        this.hsv = [];\n        this.triggerEvent('', pValue, '', isKey);\n    };\n    ColorPicker.prototype.switchToPicker = function () {\n        var wrapper = this.getWrapper();\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Picker' });\n        this.unWireEvents();\n        ([].slice.call(selectAll('.' + PALETTES, this.container))).forEach(function (ele) {\n            detach(ele);\n        });\n        if (wrapper.classList.contains(SHOWVALUE)) {\n            detach(select('.' + INPUTWRAPPER, this.container));\n        }\n        this.container.style.width = '';\n        var grpEle = select('.e-custom-palette', this.container);\n        if (this.presetColors) {\n            remove(grpEle);\n        }\n        this.createPicker();\n        this.getDragHandler().focus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Picker' });\n    };\n    ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n        if (ele.classList.contains(APPLY)) {\n            var cValue = this.rgbToHex(this.rgb);\n            this.triggerChangeEvent(cValue);\n        }\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.paletteKeyDown = function (e) {\n        var target = e.target;\n        var selectedEle;\n        var idx;\n        var tiles = [].slice.call(selectAll('.' + TILE, target));\n        if ((target.classList.contains('e-palette') || target.classList.contains('e-tile')) && (e.keyCode === 9 && !e.shiftKey)) {\n            if (this.modeSwitcher || this.showButtons) {\n                this.getPopupEle().querySelector('.e-btn').focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n        else if ((target.classList.contains('e-palette') || target.classList.contains('e-tile')) && (e.keyCode === 9 && e.shiftKey)) {\n            if (this.splitBtn) {\n                this.splitBtn.element.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n        var prevSelectedEle = (tiles.filter(function (tile) { return tile.classList.contains('e-selected'); })).pop();\n        switch (!e.altKey && e.keyCode) {\n            case 39:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)]\n                    : tiles[this.enableRtl ? tiles.length - 1 : 0];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 37:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)]\n                    : tiles[this.enableRtl ? 0 : tiles.length - 1];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 38:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n                selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 40:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n                if (tiles[idx]) {\n                    selectedEle = tiles[idx];\n                }\n                else {\n                    idx %= tiles.length;\n                    idx += tiles[tiles.length - 1].parentElement.childElementCount;\n                    selectedEle = tiles[idx];\n                }\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 13:\n                e.preventDefault();\n                if (prevSelectedEle) {\n                    var cValue = prevSelectedEle.getAttribute('aria-label');\n                    this.enterKeyHandler(cValue ? cValue : '', e);\n                }\n        }\n    };\n    ColorPicker.prototype.keySelectionChanges = function (newEle) {\n        this.removeTileSelection();\n        this.addTileSelection(newEle);\n        if (newEle.classList.contains(NOCOLOR)) {\n            this.noColorTile(true);\n        }\n        else {\n            var cValue = newEle.getAttribute('aria-label');\n            var pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(cValue);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                this.updateInput(cValue);\n            }\n            this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n        }\n    };\n    ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n        items = Array.prototype.slice.call(items);\n        var n = items.length;\n        var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n        var idx = items.indexOf(element);\n        idx += cIdx;\n        if (idx < 0) {\n            idx += n + emptyCount;\n        }\n        else {\n            idx %= n + emptyCount;\n        }\n        return idx;\n    };\n    ColorPicker.prototype.inputHandler = function (e) {\n        var target = e.target;\n        if (!target.value.length) {\n            return;\n        }\n        var hsv;\n        var pValue;\n        var label = select('.e-float-text', target.parentElement).textContent;\n        switch (label) {\n            case 'HEX': {\n                var value = '';\n                if ((target.value[0] === '#' && target.value.length !== 5) || (target.value[0] !== '#' && target.value.length !== 4)) {\n                    value = this.roundValue(target.value);\n                }\n                if (value.length === 9) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb = this.hexToRgb(value + value.substr(-2));\n                    this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n                }\n                else {\n                    return;\n                }\n                break;\n            }\n            case 'R':\n                if (this.rgb[0] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[0] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'G':\n                if (this.rgb[1] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[1] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'B':\n                if (this.rgb[2] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[2] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'H':\n                this.hueSlider.value = Number(target.value);\n                break;\n            case 'S':\n                if (this.hsv[1] !== Number(target.value)) {\n                    this.hsv[1] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'V':\n                if (this.hsv[2] !== Number(target.value)) {\n                    this.hsv[2] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'A':\n                this.opacitySlider.value = Number(target.value);\n                break;\n        }\n    };\n    ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n            this.setHsvContainerBg(hsv[0]);\n        }\n        this.hsv = hsv;\n        var cValue = this.rgbToHex(this.rgb);\n        this.setHandlerPosition();\n        this.updateInput(value ? value : cValue);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.triggerEvent(cValue, pValue, rgba);\n    };\n    ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var hex = cValue.slice(0, 7);\n        if (!this.showButtons && !isKey) {\n            this.trigger('change', { currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: cValue });\n            if (this.enableOpacity) {\n                this.setProperties({ 'value': cValue }, true);\n            }\n            else {\n                this.setProperties({ 'value': hex }, true);\n            }\n            this.element.value = hex ? hex : '#000000';\n        }\n        else {\n            this.trigger('select', {\n                currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: pValue.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(pValue)) }\n            });\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers.\n     * Also it maintains the initial input element from the DOM.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    ColorPicker.prototype.destroy = function () {\n        var _this = this;\n        var wrapper = this.getWrapper();\n        _super.prototype.destroy.call(this);\n        ['tabindex', 'spellcheck'].forEach(function (attr) { _this.element.removeAttribute(attr); });\n        if (this.inline) {\n            this.unWireEvents();\n            this.destroyOtherComp();\n        }\n        else {\n            if (this.isPopupOpen()) {\n                this.unWireEvents();\n                this.destroyOtherComp();\n            }\n            this.splitBtn.destroy();\n            this.splitBtn = null;\n        }\n        this.tileRipple();\n        this.tileRipple = null;\n        this.ctrlBtnRipple();\n        this.ctrlBtnRipple = null;\n        if (this.element.nextElementSibling) {\n            detach(this.element.nextElementSibling);\n        }\n        if (wrapper) {\n            wrapper.parentElement.insertBefore(this.element, wrapper);\n            detach(wrapper);\n        }\n        this.container = null;\n        if (this.formElement) {\n            EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n        }\n    };\n    ColorPicker.prototype.destroyOtherComp = function () {\n        if (this.isPicker()) {\n            var popup = closest(this.hueSlider.element, '.e-color-picker');\n            var numericElemColl = popup.querySelectorAll('.e-numerictextbox');\n            for (var i = 0; i < numericElemColl.length; i++) {\n                getInstance(numericElemColl[i], NumericTextBox).destroy();\n            }\n            this.hueSlider.destroy();\n            if (this.enableOpacity) {\n                this.opacitySlider.destroy();\n                this.opacitySlider = null;\n            }\n            this.hueSlider = null;\n            var tooltipInst = this.getTooltipInst();\n            tooltipInst.close();\n            tooltipInst.destroy();\n            this.tooltipEle = null;\n        }\n    };\n    ColorPicker.prototype.isPopupOpen = function () {\n        return this.getPopupEle().classList.contains('e-popup-open');\n    };\n    ColorPicker.prototype.unWireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n            var ctrlBtn = select('.' + CTRLBTN, this.container);\n            if (ctrlBtn) {\n                EventHandler.remove(ctrlBtn, 'keydown', this.ctrlBtnKeyDown);\n            }\n            EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n            if (this.modeSwitcher || this.showButtons) {\n                EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n            }\n            EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n        }\n        else {\n            EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n            EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n        }\n    };\n    ColorPicker.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    ColorPicker.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n        if (this.rgb && !this.rgb.length) {\n            return [];\n        }\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var v = max;\n        var d = max - min;\n        var s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        var i = Math.floor(h);\n        var f = h - i;\n        var p = v * (1 - s);\n        var q = v * (1 - s * f);\n        var t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    ColorPicker.prototype.rgbToHex = function (rgb) {\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    ColorPicker.prototype.hex = function (x) {\n        return ('0' + x.toString(16)).slice(-2);\n    };\n    ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n        var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlSwitchWrapper) {\n                this.appendModeSwitchBtn();\n            }\n            else {\n                this.createCtrlBtn();\n                if (this.isPicker() && !this.disabled) {\n                    this.addCtrlSwitchEvent();\n                }\n            }\n        }\n        else {\n            if (ctrlSwitchWrapper) {\n                if (this.showButtons) {\n                    detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n                }\n                else {\n                    remove(ctrlSwitchWrapper);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.changeShowBtnProps = function (prop) {\n        var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlBtnWrapper) {\n                remove(ctrlBtnWrapper);\n            }\n            this.createCtrlBtn();\n            if (this.isPicker() && !this.disabled) {\n                this.addCtrlSwitchEvent();\n            }\n        }\n        else {\n            if (this.modeSwitcher) {\n                detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n            }\n            else {\n                remove(ctrlBtnWrapper);\n            }\n        }\n    };\n    ColorPicker.prototype.changeValueProp = function (newProp) {\n        if (this.isPicker()) {\n            this.rgb = this.hexToRgb(newProp);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            this.setHandlerPosition();\n            detach(closest(this.hueSlider.element, '.e-slider-preview'));\n            this.createSlider();\n            this.setHsvContainerBg();\n            this.updateInput(newProp);\n            if (this.rgb.length === 4) {\n                this.updateOpacityInput(this.rgb[3] * 100);\n            }\n        }\n        else {\n            this.removeTileSelection();\n            var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n            if (ele) {\n                this.addTileSelection(ele);\n            }\n        }\n    };\n    ColorPicker.prototype.setInputEleProps = function () {\n        remove(select('.' + INPUTWRAPPER, this.container));\n        this.createInput();\n    };\n    ColorPicker.prototype.changeDisabledProp = function (newProp) {\n        if (this.isPicker()) {\n            this.hueSlider.enabled = !newProp;\n            this.opacitySlider.enabled = !newProp;\n            this.setInputEleProps();\n        }\n        if (newProp) {\n            this.toggleDisabled(true);\n            this.unWireEvents();\n        }\n        else {\n            this.toggleDisabled(false);\n            this.wireEvents();\n        }\n    };\n    ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n        var wrapper = this.getWrapper();\n        var popupWrapper = this.getPopupEle();\n        if (oldProp) {\n            removeClass([wrapper, popupWrapper], oldProp.split(' '));\n        }\n        if (newProp) {\n            addClass([wrapper, popupWrapper], newProp.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n    };\n    ColorPicker.prototype.changeRtlProps = function (newProp) {\n        if (newProp) {\n            addClass([this.getWrapper()], 'e-rtl');\n        }\n        else {\n            removeClass([this.getWrapper()], 'e-rtl');\n        }\n    };\n    ColorPicker.prototype.changePaletteProps = function () {\n        detach(this.container.children[0]);\n        this.container.style.width = '';\n        this.createPalette();\n    };\n    ColorPicker.prototype.changeOpacityProps = function (newProp) {\n        var wrapper = this.getWrapper();\n        if (newProp) {\n            removeClass([this.container.parentElement], HIDEOPACITY);\n            this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', { className: 'e-opacity-slider' })));\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                this.appendOpacityValue(select('.e-input-container', this.container));\n            }\n        }\n        else {\n            addClass([this.container.parentElement], HIDEOPACITY);\n            this.opacitySlider.destroy();\n            remove(this.opacitySlider.element);\n            this.opacitySlider = null;\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                remove(select('.' + OPACITY, this.container).parentElement);\n            }\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ColorPickerModel} newProp - Specifies new properties\n     * @param  {ColorPickerModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (!isNullOrUndefined(newProp.value)) {\n            var value = this.roundValue(newProp.value);\n            if (value.length === 9) {\n                this.element.value = this.roundValue(value).slice(0, 7);\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                if (preview) {\n                    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n                }\n            }\n            else if (this.noColor && this.mode === 'Palette' && this.value === '') {\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                preview.style.backgroundColor = '';\n            }\n            else {\n                this.value = oldProp.value;\n            }\n        }\n        if (!this.inline && isNullOrUndefined(newProp.inline)) {\n            var otherCompModel = ['disabled', 'enableRtl'];\n            this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n            if (!this.isPopupOpen()) {\n                this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                this.changeRtlProps(newProp.enableRtl);\n                return;\n            }\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'inline':\n                    if (newProp.inline) {\n                        this_1.getWrapper().appendChild(this_1.container);\n                        this_1.splitBtn.destroy();\n                        detach(this_1.element.nextElementSibling);\n                        if (!this_1.container.children.length) {\n                            this_1.createWidget();\n                        }\n                    }\n                    else {\n                        this_1.destroyOtherComp();\n                        this_1.unWireEvents();\n                        this_1.container.innerHTML = '';\n                        this_1.createSplitBtn();\n                    }\n                    break;\n                case 'cssClass': {\n                    this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                    var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n                    props = props.reduce(function (a, b) { if (a.indexOf(b) < 0) {\n                        a.push(b);\n                    } return a; }, []);\n                    var count_1 = 0;\n                    props.forEach(function (cls) {\n                        if (count_1 === 0 &&\n                            (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                            var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                            if (inputWrap) {\n                                remove(select('.' + INPUTWRAPPER, _this.container));\n                            }\n                            _this.createInput();\n                            count_1++;\n                        }\n                    });\n                    break;\n                }\n                case 'enableRtl':\n                    if (this_1.isPicker()) {\n                        this_1.hueSlider.enableRtl = newProp.enableRtl;\n                        if (this_1.enableOpacity) {\n                            this_1.opacitySlider.enableRtl = newProp.enableRtl;\n                        }\n                        this_1.setInputEleProps();\n                    }\n                    this_1.changeRtlProps(newProp.enableRtl);\n                    break;\n                case 'disabled':\n                    this_1.changeDisabledProp(newProp.disabled);\n                    break;\n                case 'value':\n                    if (this_1.value !== oldProp.value) {\n                        this_1.changeValueProp(newProp.value);\n                    }\n                    break;\n                case 'showButtons':\n                    this_1.changeShowBtnProps(newProp.showButtons);\n                    break;\n                case 'mode':\n                    if (newProp.mode === 'Picker') {\n                        this_1.switchToPicker();\n                    }\n                    else {\n                        this_1.switchToPalette();\n                    }\n                    break;\n                case 'modeSwitcher':\n                    this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n                    break;\n                case 'columns':\n                case 'presetColors':\n                    if (!this_1.isPicker()) {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'noColor':\n                    if (newProp.noColor) {\n                        if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n                            this_1.setNoColor();\n                        }\n                    }\n                    else {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'enableOpacity':\n                    this_1.changeOpacityProps(newProp.enableOpacity);\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    /**\n     * Sets the focus to Colorpicker\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    ColorPicker.prototype.focusIn = function () {\n        this.element.parentElement.focus();\n    };\n    __decorate([\n        Property('#008000ff')\n    ], ColorPicker.prototype, \"value\", void 0);\n    __decorate([\n        Property('')\n    ], ColorPicker.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('Picker')\n    ], ColorPicker.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"modeSwitcher\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorPicker.prototype, \"presetColors\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"showButtons\", void 0);\n    __decorate([\n        Property(10)\n    ], ColorPicker.prototype, \"columns\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"inline\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"noColor\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"enableOpacity\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeTileRender\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeClose\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"onModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"created\", void 0);\n    ColorPicker = __decorate([\n        NotifyPropertyChanges\n    ], ColorPicker);\n    return ColorPicker;\n}(Component));\nexport { ColorPicker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}