{"ast":null,"code":"/**\r\n * DevExtreme (esm/animation/fx.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport eventsEngine from \"../events/core/events_engine\";\nimport errors from \"../core/errors\";\nimport { getPublicElement } from \"../core/element\";\nimport { extend } from \"../core/utils/extend\";\nimport { isFunction, isPlainObject } from \"../core/utils/type\";\nimport { each, map } from \"../core/utils/iterator\";\nimport { getTranslateCss, parseTranslate, clearCache, locate, getTranslate } from \"./translator\";\nimport { convertTransitionTimingFuncToEasing, getEasing } from \"./easing\";\nimport { requestAnimationFrame, cancelAnimationFrame } from \"./frame\";\nimport { transitionEndEventName, transition } from \"../core/utils/support\";\nimport positionUtils from \"./position\";\nimport { removeEvent } from \"../events/remove\";\nimport { addNamespace } from \"../events/utils/index\";\nimport { when, Deferred } from \"../core/utils/deferred\";\nvar removeEventName = addNamespace(removeEvent, \"dxFX\");\nimport { noop } from \"../core/utils/common\";\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\nvar ANIM_DATA_KEY = \"dxAnimData\";\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\nvar TRANSFORM_PROP = \"transform\";\nvar TransitionAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"none\"\n    });\n    if (\"string\" === typeof config.from) {\n      $element.addClass(config.from);\n    } else {\n      setProps($element, config.from);\n    }\n    var that = this;\n    var deferred = new Deferred();\n    var cleanupWhen = config.cleanupWhen;\n    config.transitionAnimation = {\n      deferred: deferred,\n      finish: function () {\n        that._finishTransition($element);\n        if (cleanupWhen) {\n          when(deferred, cleanupWhen).always(function () {\n            that._cleanup($element, config);\n          });\n        } else {\n          that._cleanup($element, config);\n        }\n        deferred.resolveWith($element, [config, $element]);\n      }\n    };\n    this._completeAnimationCallback($element, config).done(function () {\n      config.transitionAnimation.finish();\n    }).fail(function () {\n      deferred.rejectWith($element, [config, $element]);\n    });\n    if (!config.duration) {\n      config.transitionAnimation.finish();\n    }\n    $element.css(\"transform\");\n  },\n  animate: function ($element, config) {\n    this._startAnimation($element, config);\n    return config.transitionAnimation.deferred.promise();\n  },\n  _completeAnimationCallback: function ($element, config) {\n    var that = this;\n    var startTime = Date.now() + config.delay;\n    var deferred = new Deferred();\n    var transitionEndFired = new Deferred();\n    var simulatedTransitionEndFired = new Deferred();\n    var simulatedEndEventTimer;\n    var transitionEndEventFullName = transitionEndEventName() + \".dxFX\";\n    config.transitionAnimation.cleanup = function () {\n      clearTimeout(simulatedEndEventTimer);\n      clearTimeout(waitForJSCompleteTimer);\n      eventsEngine.off($element, transitionEndEventFullName);\n      eventsEngine.off($element, removeEventName);\n    };\n    eventsEngine.one($element, transitionEndEventFullName, function () {\n      if (Date.now() - startTime >= config.duration) {\n        transitionEndFired.reject();\n      }\n    });\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      that.stop($element, config);\n      deferred.reject();\n    });\n    var waitForJSCompleteTimer = setTimeout(function () {\n      simulatedEndEventTimer = setTimeout(function () {\n        simulatedTransitionEndFired.reject();\n      }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\n      when(transitionEndFired, simulatedTransitionEndFired).fail(function () {\n        deferred.resolve();\n      }.bind(this));\n    });\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"all\",\n      transitionDelay: config.delay + \"ms\",\n      transitionDuration: config.duration + \"ms\",\n      transitionTimingFunction: config.easing\n    });\n    if (\"string\" === typeof config.to) {\n      $element[0].className += \" \" + config.to;\n    } else if (config.to) {\n      setProps($element, config.to);\n    }\n  },\n  _finishTransition: function ($element) {\n    $element.css(\"transition\", \"none\");\n  },\n  _cleanup: function ($element, config) {\n    config.transitionAnimation.cleanup();\n    if (\"string\" === typeof config.from) {\n      $element.removeClass(config.from);\n      $element.removeClass(config.to);\n    }\n  },\n  stop: function ($element, config, jumpToEnd) {\n    if (!config) {\n      return;\n    }\n    if (jumpToEnd) {\n      config.transitionAnimation.finish();\n    } else {\n      if (isPlainObject(config.to)) {\n        each(config.to, function (key) {\n          $element.css(key, $element.css(key));\n        });\n      }\n      this._finishTransition($element);\n      this._cleanup($element, config);\n    }\n  }\n};\nvar FrameAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    setProps($element, config.from);\n  },\n  animate: function ($element, config) {\n    var deferred = new Deferred();\n    var that = this;\n    if (!config) {\n      return deferred.reject().promise();\n    }\n    each(config.to, function (prop) {\n      if (void 0 === config.from[prop]) {\n        config.from[prop] = that._normalizeValue($element.css(prop));\n      }\n    });\n    if (config.to[TRANSFORM_PROP]) {\n      config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\n      config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP]);\n    }\n    config.frameAnimation = {\n      to: config.to,\n      from: config.from,\n      currentValue: config.from,\n      easing: convertTransitionTimingFuncToEasing(config.easing),\n      duration: config.duration,\n      startTime: new Date().valueOf(),\n      finish: function () {\n        this.currentValue = this.to;\n        this.draw();\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n        deferred.resolve();\n      },\n      draw: function () {\n        if (config.draw) {\n          config.draw(this.currentValue);\n          return;\n        }\n        var currentValue = extend({}, this.currentValue);\n        if (currentValue[TRANSFORM_PROP]) {\n          currentValue[TRANSFORM_PROP] = map(currentValue[TRANSFORM_PROP], function (value, prop) {\n            if (\"translate\" === prop) {\n              return getTranslateCss(value);\n            } else if (\"scale\" === prop) {\n              return \"scale(\" + value + \")\";\n            } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\n              return prop + \"(\" + value + \"deg)\";\n            }\n          }).join(\" \");\n        }\n        $element.css(currentValue);\n      }\n    };\n    if (config.delay) {\n      config.frameAnimation.startTime += config.delay;\n      config.frameAnimation.delayTimeout = setTimeout(function () {\n        that._startAnimation($element, config);\n      }, config.delay);\n    } else {\n      that._startAnimation($element, config);\n    }\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      if (config.frameAnimation) {\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n      }\n    });\n    this._animationStep($element, config);\n  },\n  _parseTransform: function (transformString) {\n    var result = {};\n    each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), function (i, part) {\n      var translateData = parseTranslate(part);\n      var scaleData = part.match(/scale\\((.+?)\\)/);\n      var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\n      if (translateData) {\n        result.translate = translateData;\n      }\n      if (scaleData && scaleData[1]) {\n        result.scale = parseFloat(scaleData[1]);\n      }\n      if (rotateData && rotateData[1]) {\n        result[rotateData[1]] = parseFloat(rotateData[2]);\n      }\n    });\n    return result;\n  },\n  stop: function ($element, config, jumpToEnd) {\n    var frameAnimation = config && config.frameAnimation;\n    if (!frameAnimation) {\n      return;\n    }\n    cancelAnimationFrame(frameAnimation.animationFrameId);\n    clearTimeout(frameAnimation.delayTimeout);\n    if (jumpToEnd) {\n      frameAnimation.finish();\n    }\n    delete config.frameAnimation;\n  },\n  _animationStep: function ($element, config) {\n    var frameAnimation = config && config.frameAnimation;\n    if (!frameAnimation) {\n      return;\n    }\n    var now = new Date().valueOf();\n    if (now >= frameAnimation.startTime + frameAnimation.duration) {\n      frameAnimation.finish();\n      return;\n    }\n    frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\n    frameAnimation.draw();\n    var that = this;\n    frameAnimation.animationFrameId = requestAnimationFrame(function () {\n      that._animationStep($element, config);\n    });\n  },\n  _calcStepValue: function (frameAnimation, currentDuration) {\n    return function calcValueRecursively(from, to) {\n      var result = Array.isArray(to) ? [] : {};\n      each(to, function (propName, endPropValue) {\n        if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue)) {\n          return true;\n        }\n        result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function (propName) {\n          var x = currentDuration / frameAnimation.duration;\n          var t = currentDuration;\n          var b = 1 * from[propName];\n          var c = to[propName] - from[propName];\n          var d = frameAnimation.duration;\n          return getEasing(frameAnimation.easing)(x, t, b, c, d);\n        }(propName);\n      });\n      return result;\n    }(frameAnimation.from, frameAnimation.to);\n  },\n  _normalizeValue: function (value) {\n    var numericValue = parseFloat(value);\n    if (false === numericValue) {\n      return value;\n    }\n    return numericValue;\n  }\n};\nvar FallbackToNoAnimationStrategy = {\n  initAnimation: function () {},\n  animate: function () {\n    return new Deferred().resolve().promise();\n  },\n  stop: noop,\n  isSynchronous: true\n};\nvar getAnimationStrategy = function (config) {\n  config = config || {};\n  var animationStrategies = {\n    transition: transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\n    frame: FrameAnimationStrategy,\n    noAnimation: FallbackToNoAnimationStrategy\n  };\n  var strategy = config.strategy || \"transition\";\n  if (\"css\" === config.type && !transition()) {\n    strategy = \"noAnimation\";\n  }\n  return animationStrategies[strategy];\n};\nvar baseConfigValidator = function (config, animationType, validate, typeMessage) {\n  each([\"from\", \"to\"], function () {\n    if (!validate(config[this])) {\n      throw errors.Error(\"E0010\", animationType, this, typeMessage);\n    }\n  });\n};\nvar isObjectConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return isPlainObject(target);\n  }, \"a plain object\");\n};\nvar isStringConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return \"string\" === typeof target;\n  }, \"a string\");\n};\nvar CustomAnimationConfigurator = {\n  setup: function () {}\n};\nvar CssAnimationConfigurator = {\n  validateConfig: function (config) {\n    isStringConfigValidator(config, \"css\");\n  },\n  setup: function () {}\n};\nvar positionAliases = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\"\n  }\n};\nvar SlideAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"slide\");\n  },\n  setup: function ($element, config) {\n    var location = locate($element);\n    if (\"slide\" !== config.type) {\n      var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\n      positioningConfig.position = extend({\n        of: window\n      }, positionAliases[config.direction]);\n      setupPosition($element, positioningConfig);\n    }\n    this._setUpConfig(location, config.from);\n    this._setUpConfig(location, config.to);\n    clearCache($element);\n  },\n  _setUpConfig: function (location, config) {\n    config.left = \"left\" in config ? config.left : \"+=0\";\n    config.top = \"top\" in config ? config.top : \"+=0\";\n    this._initNewPosition(location, config);\n  },\n  _initNewPosition: function (location, config) {\n    var position = {\n      left: config.left,\n      top: config.top\n    };\n    delete config.left;\n    delete config.top;\n    var relativeValue = this._getRelativeValue(position.left);\n    if (void 0 !== relativeValue) {\n      position.left = relativeValue + location.left;\n    } else {\n      config.left = 0;\n    }\n    relativeValue = this._getRelativeValue(position.top);\n    if (void 0 !== relativeValue) {\n      position.top = relativeValue + location.top;\n    } else {\n      config.top = 0;\n    }\n    config[TRANSFORM_PROP] = getTranslateCss({\n      x: position.left,\n      y: position.top\n    });\n  },\n  _getRelativeValue: function (value) {\n    var relativeValue;\n    if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\n      return parseInt(relativeValue[1] + \"1\") * relativeValue[2];\n    }\n  }\n};\nvar FadeAnimationConfigurator = {\n  setup: function ($element, config) {\n    var _from$opacity, _to$opacity;\n    var from = config.from;\n    var to = config.to;\n    var defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\n    var defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\n    var fromOpacity = isPlainObject(from) ? String(null !== (_from$opacity = from.opacity) && void 0 !== _from$opacity ? _from$opacity : defaultFromOpacity) : String(from);\n    var toOpacity = isPlainObject(to) ? String(null !== (_to$opacity = to.opacity) && void 0 !== _to$opacity ? _to$opacity : defaultToOpacity) : String(to);\n    if (!config.skipElementInitialStyles) {\n      fromOpacity = $element.css(\"opacity\");\n    }\n    switch (config.type) {\n      case \"fadeIn\":\n        toOpacity = 1;\n        break;\n      case \"fadeOut\":\n        toOpacity = 0;\n    }\n    config.from = {\n      visibility: \"visible\",\n      opacity: fromOpacity\n    };\n    config.to = {\n      opacity: toOpacity\n    };\n  }\n};\nvar PopAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"pop\");\n  },\n  setup: function ($element, config) {\n    var from = config.from;\n    var to = config.to;\n    var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\n    var toOpacity = \"opacity\" in to ? to.opacity : 1;\n    var fromScale = \"scale\" in from ? from.scale : 0;\n    var toScale = \"scale\" in to ? to.scale : 1;\n    config.from = {\n      opacity: fromOpacity\n    };\n    var translate = getTranslate($element);\n    config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\n    config.to = {\n      opacity: toOpacity\n    };\n    config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale);\n  },\n  _getCssTransform: function (translate, scale) {\n    return getTranslateCss(translate) + \"scale(\" + scale + \")\";\n  }\n};\nvar animationConfigurators = {\n  custom: CustomAnimationConfigurator,\n  slide: SlideAnimationConfigurator,\n  slideIn: SlideAnimationConfigurator,\n  slideOut: SlideAnimationConfigurator,\n  fade: FadeAnimationConfigurator,\n  fadeIn: FadeAnimationConfigurator,\n  fadeOut: FadeAnimationConfigurator,\n  pop: PopAnimationConfigurator,\n  css: CssAnimationConfigurator\n};\nvar getAnimationConfigurator = function (config) {\n  var result = animationConfigurators[config.type];\n  if (!result) {\n    throw errors.Error(\"E0011\", config.type);\n  }\n  return result;\n};\nvar defaultJSConfig = {\n  type: \"custom\",\n  from: {},\n  to: {},\n  duration: 400,\n  start: noop,\n  complete: noop,\n  easing: \"ease\",\n  delay: 0\n};\nvar defaultCssConfig = {\n  duration: 400,\n  easing: \"ease\",\n  delay: 0\n};\nfunction setupAnimationOnElement() {\n  var $element = this.element;\n  var config = this.config;\n  setupPosition($element, config.from);\n  setupPosition($element, config.to);\n  this.configurator.setup($element, config);\n  $element.data(ANIM_DATA_KEY, this);\n  if (fx.off) {\n    config.duration = 0;\n    config.delay = 0;\n  }\n  this.strategy.initAnimation($element, config);\n  if (config.start) {\n    var element = getPublicElement($element);\n    config.start.apply(this, [element, config]);\n  }\n}\nvar onElementAnimationComplete = function (animation) {\n  var $element = animation.element;\n  var config = animation.config;\n  $element.removeData(ANIM_DATA_KEY);\n  if (config.complete) {\n    var element = getPublicElement($element);\n    config.complete.apply(this, [element, config]);\n  }\n  animation.deferred.resolveWith(this, [$element, config]);\n};\nvar startAnimationOnElement = function () {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  animation.isStarted = true;\n  return animation.strategy.animate($element, config).done(function () {\n    onElementAnimationComplete(animation);\n  }).fail(function () {\n    animation.deferred.rejectWith(this, [$element, config]);\n  });\n};\nvar stopAnimationOnElement = function (jumpToEnd) {\n  var $element = this.element;\n  var config = this.config;\n  clearTimeout(this.startTimeout);\n  if (!this.isStarted) {\n    this.start();\n  }\n  this.strategy.stop($element, config, jumpToEnd);\n};\nvar scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\nvar subscribeToRemoveEvent = function (animation) {\n  eventsEngine.off(animation.element, scopedRemoveEvent);\n  eventsEngine.on(animation.element, scopedRemoveEvent, function () {\n    fx.stop(animation.element);\n  });\n  animation.deferred.always(function () {\n    eventsEngine.off(animation.element, scopedRemoveEvent);\n  });\n};\nvar createAnimation = function (element, initialConfig) {\n  var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\n  var config = extend(true, {}, defaultConfig, initialConfig);\n  var configurator = getAnimationConfigurator(config);\n  var strategy = getAnimationStrategy(config);\n  var animation = {\n    element: $(element),\n    config: config,\n    configurator: configurator,\n    strategy: strategy,\n    isSynchronous: strategy.isSynchronous,\n    setup: setupAnimationOnElement,\n    start: startAnimationOnElement,\n    stop: stopAnimationOnElement,\n    deferred: new Deferred()\n  };\n  if (isFunction(configurator.validateConfig)) {\n    configurator.validateConfig(config);\n  }\n  subscribeToRemoveEvent(animation);\n  return animation;\n};\nvar animate = function (element, config) {\n  var $element = $(element);\n  if (!$element.length) {\n    return new Deferred().resolve().promise();\n  }\n  var animation = createAnimation($element, config);\n  pushInAnimationQueue($element, animation);\n  return animation.deferred.promise();\n};\nfunction pushInAnimationQueue($element, animation) {\n  var queueData = getAnimQueueData($element);\n  writeAnimQueueData($element, queueData);\n  queueData.push(animation);\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n}\nfunction getAnimQueueData($element) {\n  return $element.data(ANIM_QUEUE_KEY) || [];\n}\nfunction writeAnimQueueData($element, queueData) {\n  $element.data(ANIM_QUEUE_KEY, queueData);\n}\nvar destroyAnimQueueData = function ($element) {\n  $element.removeData(ANIM_QUEUE_KEY);\n};\nfunction isAnimating($element) {\n  return !!$element.data(ANIM_DATA_KEY);\n}\nfunction shiftFromAnimationQueue($element, queueData) {\n  queueData = getAnimQueueData($element);\n  if (!queueData.length) {\n    return;\n  }\n  var animation = queueData.shift();\n  if (0 === queueData.length) {\n    destroyAnimQueueData($element);\n  }\n  executeAnimation(animation).done(function () {\n    if (!isAnimating($element)) {\n      shiftFromAnimationQueue($element);\n    }\n  });\n}\nfunction executeAnimation(animation) {\n  animation.setup();\n  if (fx.off || animation.isSynchronous) {\n    animation.start();\n  } else {\n    animation.startTimeout = setTimeout(function () {\n      animation.start();\n    });\n  }\n  return animation.deferred.promise();\n}\nfunction setupPosition($element, config) {\n  if (!config || !config.position) {\n    return;\n  }\n  var win = $(window);\n  var left = 0;\n  var top = 0;\n  var position = positionUtils.calculate($element, config.position);\n  var offset = $element.offset();\n  var currentPosition = $element.position();\n  if (currentPosition.top > offset.top) {\n    top = win.scrollTop();\n  }\n  if (currentPosition.left > offset.left) {\n    left = win.scrollLeft();\n  }\n  extend(config, {\n    left: position.h.location - offset.left + currentPosition.left - left,\n    top: position.v.location - offset.top + currentPosition.top - top\n  });\n  delete config.position;\n}\nfunction setProps($element, props) {\n  each(props, function (key, value) {\n    try {\n      $element.css(key, isFunction(value) ? value() : value);\n    } catch (e) {}\n  });\n}\nvar stop = function (element, jumpToEnd) {\n  var $element = $(element);\n  var queueData = getAnimQueueData($element);\n  each(queueData, function (_, animation) {\n    animation.config.delay = 0;\n    animation.config.duration = 0;\n    animation.isSynchronous = true;\n  });\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n  var animation = $element.data(ANIM_DATA_KEY);\n  if (animation) {\n    animation.stop(jumpToEnd);\n  }\n  $element.removeData(ANIM_DATA_KEY);\n  destroyAnimQueueData($element);\n};\nvar fx = {\n  off: false,\n  animationTypes: animationConfigurators,\n  animate: animate,\n  createAnimation: createAnimation,\n  isAnimating: isAnimating,\n  stop: stop,\n  _simulatedTransitionEndDelay: 100\n};\nexport default fx;","map":{"version":3,"names":["$","getWindow","window","eventsEngine","errors","getPublicElement","extend","isFunction","isPlainObject","each","map","getTranslateCss","parseTranslate","clearCache","locate","getTranslate","convertTransitionTimingFuncToEasing","getEasing","requestAnimationFrame","cancelAnimationFrame","transitionEndEventName","transition","positionUtils","removeEvent","addNamespace","when","Deferred","removeEventName","noop","RELATIVE_VALUE_REGEX","ANIM_DATA_KEY","ANIM_QUEUE_KEY","TRANSFORM_PROP","TransitionAnimationStrategy","initAnimation","$element","config","css","transitionProperty","from","addClass","setProps","that","deferred","cleanupWhen","transitionAnimation","finish","_finishTransition","always","_cleanup","resolveWith","_completeAnimationCallback","done","fail","rejectWith","duration","animate","_startAnimation","promise","startTime","Date","now","delay","transitionEndFired","simulatedTransitionEndFired","simulatedEndEventTimer","transitionEndEventFullName","cleanup","clearTimeout","waitForJSCompleteTimer","off","one","reject","on","stop","setTimeout","fx","_simulatedTransitionEndDelay","resolve","bind","transitionDelay","transitionDuration","transitionTimingFunction","easing","to","className","removeClass","jumpToEnd","key","FrameAnimationStrategy","prop","_normalizeValue","_parseTransform","frameAnimation","currentValue","valueOf","draw","animationFrameId","value","substr","length","join","delayTimeout","_animationStep","transformString","result","match","i","part","translateData","scaleData","rotateData","translate","scale","parseFloat","_calcStepValue","currentDuration","calcValueRecursively","Array","isArray","propName","endPropValue","x","t","b","c","d","numericValue","FallbackToNoAnimationStrategy","isSynchronous","getAnimationStrategy","animationStrategies","frame","noAnimation","strategy","type","baseConfigValidator","animationType","validate","typeMessage","Error","isObjectConfigValidator","target","isStringConfigValidator","CustomAnimationConfigurator","setup","CssAnimationConfigurator","validateConfig","positionAliases","top","my","at","bottom","right","left","SlideAnimationConfigurator","location","positioningConfig","position","of","direction","setupPosition","_setUpConfig","_initNewPosition","relativeValue","_getRelativeValue","y","exec","parseInt","FadeAnimationConfigurator","_from$opacity","_to$opacity","defaultFromOpacity","defaultToOpacity","fromOpacity","String","opacity","toOpacity","skipElementInitialStyles","visibility","PopAnimationConfigurator","fromScale","toScale","_getCssTransform","animationConfigurators","custom","slide","slideIn","slideOut","fade","fadeIn","fadeOut","pop","getAnimationConfigurator","defaultJSConfig","start","complete","defaultCssConfig","setupAnimationOnElement","element","configurator","data","apply","onElementAnimationComplete","animation","removeData","startAnimationOnElement","isStarted","stopAnimationOnElement","startTimeout","scopedRemoveEvent","subscribeToRemoveEvent","createAnimation","initialConfig","defaultConfig","pushInAnimationQueue","queueData","getAnimQueueData","writeAnimQueueData","push","isAnimating","shiftFromAnimationQueue","destroyAnimQueueData","shift","executeAnimation","win","calculate","offset","currentPosition","scrollTop","scrollLeft","h","v","props","e","_","animationTypes"],"sources":["C:/Users/ninad/OneDrive/Radna povrÅ¡ina/zavrsni/client/node_modules/devextreme/esm/animation/fx.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/animation/fx.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport errors from \"../core/errors\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    isFunction,\r\n    isPlainObject\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each,\r\n    map\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    getTranslateCss,\r\n    parseTranslate,\r\n    clearCache,\r\n    locate,\r\n    getTranslate\r\n} from \"./translator\";\r\nimport {\r\n    convertTransitionTimingFuncToEasing,\r\n    getEasing\r\n} from \"./easing\";\r\nimport {\r\n    requestAnimationFrame,\r\n    cancelAnimationFrame\r\n} from \"./frame\";\r\nimport {\r\n    transitionEndEventName,\r\n    transition\r\n} from \"../core/utils/support\";\r\nimport positionUtils from \"./position\";\r\nimport {\r\n    removeEvent\r\n} from \"../events/remove\";\r\nimport {\r\n    addNamespace\r\n} from \"../events/utils/index\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nvar removeEventName = addNamespace(removeEvent, \"dxFX\");\r\nimport {\r\n    noop\r\n} from \"../core/utils/common\";\r\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\r\nvar ANIM_DATA_KEY = \"dxAnimData\";\r\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\r\nvar TRANSFORM_PROP = \"transform\";\r\nvar TransitionAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"none\"\r\n        });\r\n        if (\"string\" === typeof config.from) {\r\n            $element.addClass(config.from)\r\n        } else {\r\n            setProps($element, config.from)\r\n        }\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var cleanupWhen = config.cleanupWhen;\r\n        config.transitionAnimation = {\r\n            deferred: deferred,\r\n            finish: function() {\r\n                that._finishTransition($element);\r\n                if (cleanupWhen) {\r\n                    when(deferred, cleanupWhen).always((function() {\r\n                        that._cleanup($element, config)\r\n                    }))\r\n                } else {\r\n                    that._cleanup($element, config)\r\n                }\r\n                deferred.resolveWith($element, [config, $element])\r\n            }\r\n        };\r\n        this._completeAnimationCallback($element, config).done((function() {\r\n            config.transitionAnimation.finish()\r\n        })).fail((function() {\r\n            deferred.rejectWith($element, [config, $element])\r\n        }));\r\n        if (!config.duration) {\r\n            config.transitionAnimation.finish()\r\n        }\r\n        $element.css(\"transform\")\r\n    },\r\n    animate: function($element, config) {\r\n        this._startAnimation($element, config);\r\n        return config.transitionAnimation.deferred.promise()\r\n    },\r\n    _completeAnimationCallback: function($element, config) {\r\n        var that = this;\r\n        var startTime = Date.now() + config.delay;\r\n        var deferred = new Deferred;\r\n        var transitionEndFired = new Deferred;\r\n        var simulatedTransitionEndFired = new Deferred;\r\n        var simulatedEndEventTimer;\r\n        var transitionEndEventFullName = transitionEndEventName() + \".dxFX\";\r\n        config.transitionAnimation.cleanup = function() {\r\n            clearTimeout(simulatedEndEventTimer);\r\n            clearTimeout(waitForJSCompleteTimer);\r\n            eventsEngine.off($element, transitionEndEventFullName);\r\n            eventsEngine.off($element, removeEventName)\r\n        };\r\n        eventsEngine.one($element, transitionEndEventFullName, (function() {\r\n            if (Date.now() - startTime >= config.duration) {\r\n                transitionEndFired.reject()\r\n            }\r\n        }));\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            that.stop($element, config);\r\n            deferred.reject()\r\n        }));\r\n        var waitForJSCompleteTimer = setTimeout((function() {\r\n            simulatedEndEventTimer = setTimeout((function() {\r\n                simulatedTransitionEndFired.reject()\r\n            }), config.duration + config.delay + fx._simulatedTransitionEndDelay);\r\n            when(transitionEndFired, simulatedTransitionEndFired).fail(function() {\r\n                deferred.resolve()\r\n            }.bind(this))\r\n        }));\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"all\",\r\n            transitionDelay: config.delay + \"ms\",\r\n            transitionDuration: config.duration + \"ms\",\r\n            transitionTimingFunction: config.easing\r\n        });\r\n        if (\"string\" === typeof config.to) {\r\n            $element[0].className += \" \" + config.to\r\n        } else if (config.to) {\r\n            setProps($element, config.to)\r\n        }\r\n    },\r\n    _finishTransition: function($element) {\r\n        $element.css(\"transition\", \"none\")\r\n    },\r\n    _cleanup: function($element, config) {\r\n        config.transitionAnimation.cleanup();\r\n        if (\"string\" === typeof config.from) {\r\n            $element.removeClass(config.from);\r\n            $element.removeClass(config.to)\r\n        }\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        if (!config) {\r\n            return\r\n        }\r\n        if (jumpToEnd) {\r\n            config.transitionAnimation.finish()\r\n        } else {\r\n            if (isPlainObject(config.to)) {\r\n                each(config.to, (function(key) {\r\n                    $element.css(key, $element.css(key))\r\n                }))\r\n            }\r\n            this._finishTransition($element);\r\n            this._cleanup($element, config)\r\n        }\r\n    }\r\n};\r\nvar FrameAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        setProps($element, config.from)\r\n    },\r\n    animate: function($element, config) {\r\n        var deferred = new Deferred;\r\n        var that = this;\r\n        if (!config) {\r\n            return deferred.reject().promise()\r\n        }\r\n        each(config.to, (function(prop) {\r\n            if (void 0 === config.from[prop]) {\r\n                config.from[prop] = that._normalizeValue($element.css(prop))\r\n            }\r\n        }));\r\n        if (config.to[TRANSFORM_PROP]) {\r\n            config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\r\n            config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP])\r\n        }\r\n        config.frameAnimation = {\r\n            to: config.to,\r\n            from: config.from,\r\n            currentValue: config.from,\r\n            easing: convertTransitionTimingFuncToEasing(config.easing),\r\n            duration: config.duration,\r\n            startTime: (new Date).valueOf(),\r\n            finish: function() {\r\n                this.currentValue = this.to;\r\n                this.draw();\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId);\r\n                deferred.resolve()\r\n            },\r\n            draw: function() {\r\n                if (config.draw) {\r\n                    config.draw(this.currentValue);\r\n                    return\r\n                }\r\n                var currentValue = extend({}, this.currentValue);\r\n                if (currentValue[TRANSFORM_PROP]) {\r\n                    currentValue[TRANSFORM_PROP] = map(currentValue[TRANSFORM_PROP], (function(value, prop) {\r\n                        if (\"translate\" === prop) {\r\n                            return getTranslateCss(value)\r\n                        } else if (\"scale\" === prop) {\r\n                            return \"scale(\" + value + \")\"\r\n                        } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\r\n                            return prop + \"(\" + value + \"deg)\"\r\n                        }\r\n                    })).join(\" \")\r\n                }\r\n                $element.css(currentValue)\r\n            }\r\n        };\r\n        if (config.delay) {\r\n            config.frameAnimation.startTime += config.delay;\r\n            config.frameAnimation.delayTimeout = setTimeout((function() {\r\n                that._startAnimation($element, config)\r\n            }), config.delay)\r\n        } else {\r\n            that._startAnimation($element, config)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            if (config.frameAnimation) {\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId)\r\n            }\r\n        }));\r\n        this._animationStep($element, config)\r\n    },\r\n    _parseTransform: function(transformString) {\r\n        var result = {};\r\n        each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), (function(i, part) {\r\n            var translateData = parseTranslate(part);\r\n            var scaleData = part.match(/scale\\((.+?)\\)/);\r\n            var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\r\n            if (translateData) {\r\n                result.translate = translateData\r\n            }\r\n            if (scaleData && scaleData[1]) {\r\n                result.scale = parseFloat(scaleData[1])\r\n            }\r\n            if (rotateData && rotateData[1]) {\r\n                result[rotateData[1]] = parseFloat(rotateData[2])\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        cancelAnimationFrame(frameAnimation.animationFrameId);\r\n        clearTimeout(frameAnimation.delayTimeout);\r\n        if (jumpToEnd) {\r\n            frameAnimation.finish()\r\n        }\r\n        delete config.frameAnimation\r\n    },\r\n    _animationStep: function($element, config) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        var now = (new Date).valueOf();\r\n        if (now >= frameAnimation.startTime + frameAnimation.duration) {\r\n            frameAnimation.finish();\r\n            return\r\n        }\r\n        frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\r\n        frameAnimation.draw();\r\n        var that = this;\r\n        frameAnimation.animationFrameId = requestAnimationFrame((function() {\r\n            that._animationStep($element, config)\r\n        }))\r\n    },\r\n    _calcStepValue: function(frameAnimation, currentDuration) {\r\n        return function calcValueRecursively(from, to) {\r\n            var result = Array.isArray(to) ? [] : {};\r\n            each(to, (function(propName, endPropValue) {\r\n                if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue)) {\r\n                    return true\r\n                }\r\n                result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function(propName) {\r\n                    var x = currentDuration / frameAnimation.duration;\r\n                    var t = currentDuration;\r\n                    var b = 1 * from[propName];\r\n                    var c = to[propName] - from[propName];\r\n                    var d = frameAnimation.duration;\r\n                    return getEasing(frameAnimation.easing)(x, t, b, c, d)\r\n                }(propName)\r\n            }));\r\n            return result\r\n        }(frameAnimation.from, frameAnimation.to)\r\n    },\r\n    _normalizeValue: function(value) {\r\n        var numericValue = parseFloat(value);\r\n        if (false === numericValue) {\r\n            return value\r\n        }\r\n        return numericValue\r\n    }\r\n};\r\nvar FallbackToNoAnimationStrategy = {\r\n    initAnimation: function() {},\r\n    animate: function() {\r\n        return (new Deferred).resolve().promise()\r\n    },\r\n    stop: noop,\r\n    isSynchronous: true\r\n};\r\nvar getAnimationStrategy = function(config) {\r\n    config = config || {};\r\n    var animationStrategies = {\r\n        transition: transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\r\n        frame: FrameAnimationStrategy,\r\n        noAnimation: FallbackToNoAnimationStrategy\r\n    };\r\n    var strategy = config.strategy || \"transition\";\r\n    if (\"css\" === config.type && !transition()) {\r\n        strategy = \"noAnimation\"\r\n    }\r\n    return animationStrategies[strategy]\r\n};\r\nvar baseConfigValidator = function(config, animationType, validate, typeMessage) {\r\n    each([\"from\", \"to\"], (function() {\r\n        if (!validate(config[this])) {\r\n            throw errors.Error(\"E0010\", animationType, this, typeMessage)\r\n        }\r\n    }))\r\n};\r\nvar isObjectConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return isPlainObject(target)\r\n    }), \"a plain object\")\r\n};\r\nvar isStringConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return \"string\" === typeof target\r\n    }), \"a string\")\r\n};\r\nvar CustomAnimationConfigurator = {\r\n    setup: function() {}\r\n};\r\nvar CssAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isStringConfigValidator(config, \"css\")\r\n    },\r\n    setup: function() {}\r\n};\r\nvar positionAliases = {\r\n    top: {\r\n        my: \"bottom center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"top center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"left center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"right center\",\r\n        at: \"left center\"\r\n    }\r\n};\r\nvar SlideAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"slide\")\r\n    },\r\n    setup: function($element, config) {\r\n        var location = locate($element);\r\n        if (\"slide\" !== config.type) {\r\n            var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\r\n            positioningConfig.position = extend({\r\n                of: window\r\n            }, positionAliases[config.direction]);\r\n            setupPosition($element, positioningConfig)\r\n        }\r\n        this._setUpConfig(location, config.from);\r\n        this._setUpConfig(location, config.to);\r\n        clearCache($element)\r\n    },\r\n    _setUpConfig: function(location, config) {\r\n        config.left = \"left\" in config ? config.left : \"+=0\";\r\n        config.top = \"top\" in config ? config.top : \"+=0\";\r\n        this._initNewPosition(location, config)\r\n    },\r\n    _initNewPosition: function(location, config) {\r\n        var position = {\r\n            left: config.left,\r\n            top: config.top\r\n        };\r\n        delete config.left;\r\n        delete config.top;\r\n        var relativeValue = this._getRelativeValue(position.left);\r\n        if (void 0 !== relativeValue) {\r\n            position.left = relativeValue + location.left\r\n        } else {\r\n            config.left = 0\r\n        }\r\n        relativeValue = this._getRelativeValue(position.top);\r\n        if (void 0 !== relativeValue) {\r\n            position.top = relativeValue + location.top\r\n        } else {\r\n            config.top = 0\r\n        }\r\n        config[TRANSFORM_PROP] = getTranslateCss({\r\n            x: position.left,\r\n            y: position.top\r\n        })\r\n    },\r\n    _getRelativeValue: function(value) {\r\n        var relativeValue;\r\n        if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\r\n            return parseInt(relativeValue[1] + \"1\") * relativeValue[2]\r\n        }\r\n    }\r\n};\r\nvar FadeAnimationConfigurator = {\r\n    setup: function($element, config) {\r\n        var _from$opacity, _to$opacity;\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\r\n        var defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\r\n        var fromOpacity = isPlainObject(from) ? String(null !== (_from$opacity = from.opacity) && void 0 !== _from$opacity ? _from$opacity : defaultFromOpacity) : String(from);\r\n        var toOpacity = isPlainObject(to) ? String(null !== (_to$opacity = to.opacity) && void 0 !== _to$opacity ? _to$opacity : defaultToOpacity) : String(to);\r\n        if (!config.skipElementInitialStyles) {\r\n            fromOpacity = $element.css(\"opacity\")\r\n        }\r\n        switch (config.type) {\r\n            case \"fadeIn\":\r\n                toOpacity = 1;\r\n                break;\r\n            case \"fadeOut\":\r\n                toOpacity = 0\r\n        }\r\n        config.from = {\r\n            visibility: \"visible\",\r\n            opacity: fromOpacity\r\n        };\r\n        config.to = {\r\n            opacity: toOpacity\r\n        }\r\n    }\r\n};\r\nvar PopAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"pop\")\r\n    },\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\r\n        var toOpacity = \"opacity\" in to ? to.opacity : 1;\r\n        var fromScale = \"scale\" in from ? from.scale : 0;\r\n        var toScale = \"scale\" in to ? to.scale : 1;\r\n        config.from = {\r\n            opacity: fromOpacity\r\n        };\r\n        var translate = getTranslate($element);\r\n        config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\r\n        config.to = {\r\n            opacity: toOpacity\r\n        };\r\n        config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale)\r\n    },\r\n    _getCssTransform: function(translate, scale) {\r\n        return getTranslateCss(translate) + \"scale(\" + scale + \")\"\r\n    }\r\n};\r\nvar animationConfigurators = {\r\n    custom: CustomAnimationConfigurator,\r\n    slide: SlideAnimationConfigurator,\r\n    slideIn: SlideAnimationConfigurator,\r\n    slideOut: SlideAnimationConfigurator,\r\n    fade: FadeAnimationConfigurator,\r\n    fadeIn: FadeAnimationConfigurator,\r\n    fadeOut: FadeAnimationConfigurator,\r\n    pop: PopAnimationConfigurator,\r\n    css: CssAnimationConfigurator\r\n};\r\nvar getAnimationConfigurator = function(config) {\r\n    var result = animationConfigurators[config.type];\r\n    if (!result) {\r\n        throw errors.Error(\"E0011\", config.type)\r\n    }\r\n    return result\r\n};\r\nvar defaultJSConfig = {\r\n    type: \"custom\",\r\n    from: {},\r\n    to: {},\r\n    duration: 400,\r\n    start: noop,\r\n    complete: noop,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nvar defaultCssConfig = {\r\n    duration: 400,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\n\r\nfunction setupAnimationOnElement() {\r\n    var $element = this.element;\r\n    var config = this.config;\r\n    setupPosition($element, config.from);\r\n    setupPosition($element, config.to);\r\n    this.configurator.setup($element, config);\r\n    $element.data(ANIM_DATA_KEY, this);\r\n    if (fx.off) {\r\n        config.duration = 0;\r\n        config.delay = 0\r\n    }\r\n    this.strategy.initAnimation($element, config);\r\n    if (config.start) {\r\n        var element = getPublicElement($element);\r\n        config.start.apply(this, [element, config])\r\n    }\r\n}\r\nvar onElementAnimationComplete = function(animation) {\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    if (config.complete) {\r\n        var element = getPublicElement($element);\r\n        config.complete.apply(this, [element, config])\r\n    }\r\n    animation.deferred.resolveWith(this, [$element, config])\r\n};\r\nvar startAnimationOnElement = function() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    animation.isStarted = true;\r\n    return animation.strategy.animate($element, config).done((function() {\r\n        onElementAnimationComplete(animation)\r\n    })).fail((function() {\r\n        animation.deferred.rejectWith(this, [$element, config])\r\n    }))\r\n};\r\nvar stopAnimationOnElement = function(jumpToEnd) {\r\n    var $element = this.element;\r\n    var config = this.config;\r\n    clearTimeout(this.startTimeout);\r\n    if (!this.isStarted) {\r\n        this.start()\r\n    }\r\n    this.strategy.stop($element, config, jumpToEnd)\r\n};\r\nvar scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\r\nvar subscribeToRemoveEvent = function(animation) {\r\n    eventsEngine.off(animation.element, scopedRemoveEvent);\r\n    eventsEngine.on(animation.element, scopedRemoveEvent, (function() {\r\n        fx.stop(animation.element)\r\n    }));\r\n    animation.deferred.always((function() {\r\n        eventsEngine.off(animation.element, scopedRemoveEvent)\r\n    }))\r\n};\r\nvar createAnimation = function(element, initialConfig) {\r\n    var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\r\n    var config = extend(true, {}, defaultConfig, initialConfig);\r\n    var configurator = getAnimationConfigurator(config);\r\n    var strategy = getAnimationStrategy(config);\r\n    var animation = {\r\n        element: $(element),\r\n        config: config,\r\n        configurator: configurator,\r\n        strategy: strategy,\r\n        isSynchronous: strategy.isSynchronous,\r\n        setup: setupAnimationOnElement,\r\n        start: startAnimationOnElement,\r\n        stop: stopAnimationOnElement,\r\n        deferred: new Deferred\r\n    };\r\n    if (isFunction(configurator.validateConfig)) {\r\n        configurator.validateConfig(config)\r\n    }\r\n    subscribeToRemoveEvent(animation);\r\n    return animation\r\n};\r\nvar animate = function(element, config) {\r\n    var $element = $(element);\r\n    if (!$element.length) {\r\n        return (new Deferred).resolve().promise()\r\n    }\r\n    var animation = createAnimation($element, config);\r\n    pushInAnimationQueue($element, animation);\r\n    return animation.deferred.promise()\r\n};\r\n\r\nfunction pushInAnimationQueue($element, animation) {\r\n    var queueData = getAnimQueueData($element);\r\n    writeAnimQueueData($element, queueData);\r\n    queueData.push(animation);\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n}\r\n\r\nfunction getAnimQueueData($element) {\r\n    return $element.data(ANIM_QUEUE_KEY) || []\r\n}\r\n\r\nfunction writeAnimQueueData($element, queueData) {\r\n    $element.data(ANIM_QUEUE_KEY, queueData)\r\n}\r\nvar destroyAnimQueueData = function($element) {\r\n    $element.removeData(ANIM_QUEUE_KEY)\r\n};\r\n\r\nfunction isAnimating($element) {\r\n    return !!$element.data(ANIM_DATA_KEY)\r\n}\r\n\r\nfunction shiftFromAnimationQueue($element, queueData) {\r\n    queueData = getAnimQueueData($element);\r\n    if (!queueData.length) {\r\n        return\r\n    }\r\n    var animation = queueData.shift();\r\n    if (0 === queueData.length) {\r\n        destroyAnimQueueData($element)\r\n    }\r\n    executeAnimation(animation).done((function() {\r\n        if (!isAnimating($element)) {\r\n            shiftFromAnimationQueue($element)\r\n        }\r\n    }))\r\n}\r\n\r\nfunction executeAnimation(animation) {\r\n    animation.setup();\r\n    if (fx.off || animation.isSynchronous) {\r\n        animation.start()\r\n    } else {\r\n        animation.startTimeout = setTimeout((function() {\r\n            animation.start()\r\n        }))\r\n    }\r\n    return animation.deferred.promise()\r\n}\r\n\r\nfunction setupPosition($element, config) {\r\n    if (!config || !config.position) {\r\n        return\r\n    }\r\n    var win = $(window);\r\n    var left = 0;\r\n    var top = 0;\r\n    var position = positionUtils.calculate($element, config.position);\r\n    var offset = $element.offset();\r\n    var currentPosition = $element.position();\r\n    if (currentPosition.top > offset.top) {\r\n        top = win.scrollTop()\r\n    }\r\n    if (currentPosition.left > offset.left) {\r\n        left = win.scrollLeft()\r\n    }\r\n    extend(config, {\r\n        left: position.h.location - offset.left + currentPosition.left - left,\r\n        top: position.v.location - offset.top + currentPosition.top - top\r\n    });\r\n    delete config.position\r\n}\r\n\r\nfunction setProps($element, props) {\r\n    each(props, (function(key, value) {\r\n        try {\r\n            $element.css(key, isFunction(value) ? value() : value)\r\n        } catch (e) {}\r\n    }))\r\n}\r\nvar stop = function(element, jumpToEnd) {\r\n    var $element = $(element);\r\n    var queueData = getAnimQueueData($element);\r\n    each(queueData, (function(_, animation) {\r\n        animation.config.delay = 0;\r\n        animation.config.duration = 0;\r\n        animation.isSynchronous = true\r\n    }));\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n    var animation = $element.data(ANIM_DATA_KEY);\r\n    if (animation) {\r\n        animation.stop(jumpToEnd)\r\n    }\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    destroyAnimQueueData($element)\r\n};\r\nvar fx = {\r\n    off: false,\r\n    animationTypes: animationConfigurators,\r\n    animate: animate,\r\n    createAnimation: createAnimation,\r\n    isAnimating: isAnimating,\r\n    stop: stop,\r\n    _simulatedTransitionEndDelay: 100\r\n};\r\nexport default fx;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}