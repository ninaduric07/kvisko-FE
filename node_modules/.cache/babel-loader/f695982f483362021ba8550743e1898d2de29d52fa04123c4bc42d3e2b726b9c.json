{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getHeight, getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { titleize } from \"../../core/utils/inflector\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport { each, map } from \"../../core/utils/iterator\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport { resetPosition, move, locate } from \"../../animation/translator\";\nimport Class from \"../../core/class\";\nimport Animator from \"./animator\";\nimport { isDxMouseWheelEvent, addNamespace as addEventNamespace, normalizeKeyName, isCommandKeyPressed } from \"../../events/utils/index\";\nimport { deferUpdate, deferUpdater, deferRender, deferRenderer, noop } from \"../../core/utils/common\";\nimport Scrollbar from \"./ui.scrollbar\";\nimport { when, Deferred } from \"../../core/utils/deferred\";\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\nvar VERTICAL = \"vertical\";\nvar HORIZONTAL = \"horizontal\";\nvar ACCELERATION = .92;\nvar OUT_BOUNDS_ACCELERATION = .5;\nvar MIN_VELOCITY_LIMIT = 1;\nvar FRAME_DURATION = Math.round(1e3 / 60);\nvar SCROLL_LINE_HEIGHT = 40;\nvar VALIDATE_WHEEL_TIMEOUT = 500;\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\nvar BOUNCE_DURATION = 400;\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\nvar KEY_CODES = {\n  PAGE_UP: \"pageUp\",\n  PAGE_DOWN: \"pageDown\",\n  END: \"end\",\n  HOME: \"home\",\n  LEFT: \"leftArrow\",\n  UP: \"upArrow\",\n  RIGHT: \"rightArrow\",\n  DOWN: \"downArrow\",\n  TAB: \"tab\"\n};\nvar InertiaAnimator = Animator.inherit({\n  ctor: function (scroller) {\n    this.callBase();\n    this.scroller = scroller;\n  },\n  VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT;\n  },\n  _step: function () {\n    this.scroller._scrollStep(this.scroller._velocity);\n    this.scroller._velocity *= this._acceleration();\n  },\n  _acceleration: function () {\n    return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._scrollComplete();\n  }\n});\nvar BounceAnimator = InertiaAnimator.inherit({\n  VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return this.scroller._crossBoundOnNextStep() || this.callBase();\n  },\n  _acceleration: function () {\n    return ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._move(this.scroller._bounceLocation);\n    this.callBase();\n  }\n});\nexport var Scroller = Class.inherit({\n  ctor: function (options) {\n    this._initOptions(options);\n    this._initAnimators();\n    this._initScrollbar();\n  },\n  _initOptions: function (options) {\n    this._location = 0;\n    this._topReached = false;\n    this._bottomReached = false;\n    this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\n    this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\n    this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\n    this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\n    each(options, (optionName, optionValue) => {\n      this[\"_\" + optionName] = optionValue;\n    });\n  },\n  _initAnimators: function () {\n    this._inertiaAnimator = new InertiaAnimator(this);\n    this._bounceAnimator = new BounceAnimator(this);\n  },\n  _initScrollbar: function () {\n    this._scrollbar = new Scrollbar($(\"<div>\").appendTo(this._$container), {\n      direction: this._direction,\n      visible: this._scrollByThumb,\n      visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\n      expandable: this._scrollByThumb\n    });\n    this._$scrollbar = this._scrollbar.$element();\n  },\n  _visibilityModeNormalize: function (mode) {\n    return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode;\n  },\n  _scrollStep: function (delta) {\n    var prevLocation = this._location;\n    this._location += delta;\n    this._suppressBounce();\n    this._move();\n    if (Math.abs(prevLocation - this._location) < 1) {\n      return;\n    }\n    eventsEngine.triggerHandler(this._$container, {\n      type: \"scroll\"\n    });\n  },\n  _suppressBounce: function () {\n    if (this._bounceEnabled || this._inBounds(this._location)) {\n      return;\n    }\n    this._velocity = 0;\n    this._location = this._boundLocation();\n  },\n  _boundLocation: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return Math.max(Math.min(location, this._maxOffset), this._minOffset);\n  },\n  _move: function (location) {\n    this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\n    this._moveContent();\n    this._moveScrollbar();\n  },\n  _moveContent: function () {\n    var location = this._location;\n    this._$container[this._scrollProp](-location / this._getScaleRatio());\n    this._moveContentByTranslator(location);\n  },\n  _getScaleRatio: function () {\n    if (hasWindow() && !this._scaleRatio) {\n      var element = this._$element.get(0);\n      var realDimension = this._getRealDimension(element, this._dimension);\n      var baseDimension = this._getBaseDimension(element, this._dimension);\n      this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100;\n    }\n    return this._scaleRatio || 1;\n  },\n  _getRealDimension: function (element, dimension) {\n    return Math.round(getBoundingRect(element)[dimension]);\n  },\n  _getBaseDimension: function (element, dimension) {\n    var dimensionName = \"offset\" + titleize(dimension);\n    return element[dimensionName];\n  },\n  _moveContentByTranslator: function (location) {\n    var translateOffset;\n    var minOffset = -this._maxScrollPropValue;\n    if (location > 0) {\n      translateOffset = location;\n    } else if (location <= minOffset) {\n      translateOffset = location - minOffset;\n    } else {\n      translateOffset = location % 1;\n    }\n    if (this._translateOffset === translateOffset) {\n      return;\n    }\n    var targetLocation = {};\n    targetLocation[this._prop] = translateOffset;\n    this._translateOffset = translateOffset;\n    if (0 === translateOffset) {\n      resetPosition(this._$content);\n      return;\n    }\n    move(this._$content, targetLocation);\n  },\n  _moveScrollbar: function () {\n    this._scrollbar.moveTo(this._location);\n  },\n  _scrollComplete: function () {\n    if (this._inBounds()) {\n      this._hideScrollbar();\n      if (this._completeDeferred) {\n        this._completeDeferred.resolve();\n      }\n    }\n    this._scrollToBounds();\n  },\n  _scrollToBounds: function () {\n    if (this._inBounds()) {\n      return;\n    }\n    this._bounceAction();\n    this._setupBounce();\n    this._bounceAnimator.start();\n  },\n  _setupBounce: function () {\n    var boundLocation = this._bounceLocation = this._boundLocation();\n    var bounceDistance = boundLocation - this._location;\n    this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM;\n  },\n  _inBounds: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return this._boundLocation(location) === location;\n  },\n  _crossBoundOnNextStep: function () {\n    var location = this._location;\n    var nextLocation = location + this._velocity;\n    return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset;\n  },\n  _initHandler: function (e) {\n    this._stopScrolling();\n    this._prepareThumbScrolling(e);\n  },\n  _stopScrolling: deferRenderer(function () {\n    this._hideScrollbar();\n    this._inertiaAnimator.stop();\n    this._bounceAnimator.stop();\n  }),\n  _prepareThumbScrolling: function (e) {\n    if (isDxMouseWheelEvent(e.originalEvent)) {\n      return;\n    }\n    var $target = $(e.originalEvent.target);\n    var scrollbarClicked = this._isScrollbar($target);\n    if (scrollbarClicked) {\n      this._moveToMouseLocation(e);\n    }\n    this._thumbScrolling = scrollbarClicked || this._isThumb($target);\n    this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\n    if (this._thumbScrolling) {\n      this._scrollbar.feedbackOn();\n    }\n  },\n  _isThumbScrollingHandler: function ($target) {\n    return this._isThumb($target);\n  },\n  _moveToMouseLocation: function (e) {\n    var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\n    var location = this._location + mouseLocation / this._containerToContentRatio() - getHeight(this._$container) / 2;\n    this._scrollStep(-Math.round(location));\n  },\n  _startHandler: function () {\n    this._showScrollbar();\n  },\n  _moveHandler: function (delta) {\n    if (this._crossThumbScrolling) {\n      return;\n    }\n    if (this._thumbScrolling) {\n      delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio());\n    }\n    this._scrollBy(delta);\n  },\n  _scrollBy: function (delta) {\n    delta = delta[this._axis];\n    if (!this._inBounds()) {\n      delta *= OUT_BOUNDS_ACCELERATION;\n    }\n    this._scrollStep(delta);\n  },\n  _scrollByHandler: function (delta) {\n    this._scrollBy(delta);\n    this._scrollComplete();\n  },\n  _containerToContentRatio: function () {\n    return this._scrollbar.containerToContentRatio();\n  },\n  _endHandler: function (velocity) {\n    this._completeDeferred = new Deferred();\n    this._velocity = velocity[this._axis];\n    this._inertiaHandler();\n    this._resetThumbScrolling();\n    return this._completeDeferred.promise();\n  },\n  _inertiaHandler: function () {\n    this._suppressInertia();\n    this._inertiaAnimator.start();\n  },\n  _suppressInertia: function () {\n    if (!this._inertiaEnabled || this._thumbScrolling) {\n      this._velocity = 0;\n    }\n  },\n  _resetThumbScrolling: function () {\n    this._thumbScrolling = false;\n    this._crossThumbScrolling = false;\n  },\n  _stopHandler: function () {\n    if (this._thumbScrolling) {\n      this._scrollComplete();\n    }\n    this._resetThumbScrolling();\n    this._scrollToBounds();\n  },\n  _disposeHandler: function () {\n    this._stopScrolling();\n    this._$scrollbar.remove();\n  },\n  _updateHandler: function () {\n    this._update();\n    this._moveToBounds();\n  },\n  _update: function () {\n    this._stopScrolling();\n    return deferUpdate(() => {\n      this._resetScaleRatio();\n      this._updateLocation();\n      this._updateBounds();\n      this._updateScrollbar();\n      deferRender(() => {\n        this._moveScrollbar();\n        this._scrollbar.update();\n      });\n    });\n  },\n  _resetScaleRatio: function () {\n    this._scaleRatio = null;\n  },\n  _updateLocation: function () {\n    this._location = (locate(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio();\n  },\n  _updateBounds: function () {\n    this._maxOffset = this._getMaxOffset();\n    this._minOffset = this._getMinOffset();\n  },\n  _getMaxOffset: function () {\n    return 0;\n  },\n  _getMinOffset: function () {\n    this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\n    return -this._maxScrollPropValue;\n  },\n  _updateScrollbar: deferUpdater(function () {\n    var containerSize = this._containerSize();\n    var contentSize = this._contentSize();\n    var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\n    var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\n    deferRender(() => {\n      this._scrollbar.option({\n        containerSize: containerSize,\n        contentSize: contentSize,\n        baseContainerSize: baseContainerSize,\n        baseContentSize: baseContentSize,\n        scaleRatio: this._getScaleRatio()\n      });\n    });\n  }),\n  _moveToBounds: deferRenderer(deferUpdater(deferRenderer(function () {\n    var location = this._boundLocation();\n    var locationChanged = location !== this._location;\n    this._location = location;\n    this._move();\n    if (locationChanged) {\n      this._scrollAction();\n    }\n  }))),\n  _createActionsHandler: function (actions) {\n    this._scrollAction = actions.scroll;\n    this._bounceAction = actions.bounce;\n  },\n  _showScrollbar: function () {\n    this._scrollbar.option(\"visible\", true);\n  },\n  _hideScrollbar: function () {\n    this._scrollbar.option(\"visible\", false);\n  },\n  _containerSize: function () {\n    return this._getRealDimension(this._$container.get(0), this._dimension);\n  },\n  _contentSize: function () {\n    var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\n    var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\n    if (!isOverflowHidden) {\n      var containerScrollSize = this._$content[0][\"scroll\" + titleize(this._dimension)] * this._getScaleRatio();\n      contentSize = Math.max(containerScrollSize, contentSize);\n    }\n    return contentSize;\n  },\n  _validateEvent: function (e) {\n    var $target = $(e.originalEvent.target);\n    return this._isThumb($target) || this._isScrollbar($target);\n  },\n  _isThumb: function ($element) {\n    return this._scrollByThumb && this._scrollbar.isThumb($element);\n  },\n  _isScrollbar: function ($element) {\n    return this._scrollByThumb && $element && $element.is(this._$scrollbar);\n  },\n  _reachedMin: function () {\n    return Math.round(this._location - this._minOffset) <= 0;\n  },\n  _reachedMax: function () {\n    return Math.round(this._location - this._maxOffset) >= 0;\n  },\n  _cursorEnterHandler: function () {\n    this._resetScaleRatio();\n    this._updateScrollbar();\n    this._scrollbar.cursorEnter();\n  },\n  _cursorLeaveHandler: function () {\n    this._scrollbar.cursorLeave();\n  },\n  dispose: noop\n});\nvar hoveredScrollable;\nvar activeScrollable;\nexport var SimulatedStrategy = Class.inherit({\n  ctor: function (scrollable) {\n    this._init(scrollable);\n  },\n  _init: function (scrollable) {\n    this._component = scrollable;\n    this._$element = scrollable.$element();\n    this._$container = $(scrollable.container());\n    this._$wrapper = scrollable._$wrapper;\n    this._$content = scrollable.$content();\n    this.option = scrollable.option.bind(scrollable);\n    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\n    this._isLocked = scrollable._isLocked.bind(scrollable);\n    this._isDirection = scrollable._isDirection.bind(scrollable);\n    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\n    this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable);\n  },\n  render: function () {\n    this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\n    this._createScrollers();\n    if (this.option(\"useKeyboard\")) {\n      this._$container.prop(\"tabIndex\", 0);\n    }\n    this._attachKeyboardHandler();\n    this._attachCursorHandlers();\n  },\n  _createScrollers: function () {\n    this._scrollers = {};\n    if (this._isDirection(HORIZONTAL)) {\n      this._createScroller(HORIZONTAL);\n    }\n    if (this._isDirection(VERTICAL)) {\n      this._createScroller(VERTICAL);\n    }\n    this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"));\n  },\n  _createScroller: function (direction) {\n    this._scrollers[direction] = new Scroller(this._scrollerOptions(direction));\n  },\n  _scrollerOptions: function (direction) {\n    return {\n      direction: direction,\n      $content: this._$content,\n      $container: this._$container,\n      $wrapper: this._$wrapper,\n      $element: this._$element,\n      scrollByThumb: this.option(\"scrollByThumb\"),\n      scrollbarVisible: this.option(\"showScrollbar\"),\n      bounceEnabled: this.option(\"bounceEnabled\"),\n      inertiaEnabled: this.option(\"inertiaEnabled\"),\n      isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\n    };\n  },\n  _applyScaleRatio: function (targetLocation) {\n    for (var direction in this._scrollers) {\n      var prop = this._getPropByDirection(direction);\n      if (isDefined(targetLocation[prop])) {\n        var scroller = this._scrollers[direction];\n        targetLocation[prop] *= scroller._getScaleRatio();\n      }\n    }\n    return targetLocation;\n  },\n  _isAnyThumbScrolling: function ($target) {\n    var result = false;\n    this._eventHandler(\"isThumbScrolling\", $target).done(function (isThumbScrollingVertical, isThumbScrollingHorizontal) {\n      result = isThumbScrollingVertical || isThumbScrollingHorizontal;\n    });\n    return result;\n  },\n  handleInit: function (e) {\n    this._suppressDirections(e);\n    this._eventForUserAction = e;\n    this._eventHandler(\"init\", e);\n  },\n  _suppressDirections: function (e) {\n    if (isDxMouseWheelEvent(e.originalEvent)) {\n      this._prepareDirections(true);\n      return;\n    }\n    this._prepareDirections();\n    this._eachScroller(function (scroller, direction) {\n      var $target = $(e.originalEvent.target);\n      var isValid = scroller._validateEvent(e) || this.option(\"scrollByContent\") && this._isContent($target);\n      this._validDirections[direction] = isValid;\n    });\n  },\n  _isContent: function ($element) {\n    return !!$element.closest(this._$element).length;\n  },\n  _prepareDirections: function (value) {\n    value = value || false;\n    this._validDirections = {};\n    this._validDirections[HORIZONTAL] = value;\n    this._validDirections[VERTICAL] = value;\n  },\n  _eachScroller: function (callback) {\n    callback = callback.bind(this);\n    each(this._scrollers, function (direction, scroller) {\n      callback(scroller, direction);\n    });\n  },\n  handleStart: function (e) {\n    this._eventForUserAction = e;\n    this._eventHandler(\"start\").done(this._startAction);\n  },\n  _saveActive: function () {\n    activeScrollable = this;\n  },\n  _resetActive: function () {\n    if (activeScrollable === this) {\n      activeScrollable = null;\n    }\n  },\n  handleMove: function (e) {\n    if (this._isLocked()) {\n      e.cancel = true;\n      this._resetActive();\n      return;\n    }\n    this._saveActive();\n    e.preventDefault && e.preventDefault();\n    this._adjustDistance(e, e.delta);\n    this._eventForUserAction = e;\n    this._eventHandler(\"move\", e.delta);\n  },\n  _adjustDistance: function (e, distance) {\n    distance.x *= this._validDirections[HORIZONTAL];\n    distance.y *= this._validDirections[VERTICAL];\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n    if (devicePixelRatio && isDxMouseWheelEvent(e.originalEvent)) {\n      distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\n      distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100;\n    }\n  },\n  _tryGetDevicePixelRatio: function () {\n    if (hasWindow()) {\n      return getWindow().devicePixelRatio;\n    }\n  },\n  handleEnd: function (e) {\n    this._resetActive();\n    this._refreshCursorState(e.originalEvent && e.originalEvent.target);\n    this._adjustDistance(e, e.velocity);\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", e.velocity).done(this._endAction);\n  },\n  handleCancel: function (e) {\n    this._resetActive();\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", {\n      x: 0,\n      y: 0\n    });\n  },\n  handleStop: function () {\n    this._resetActive();\n    this._eventHandler(\"stop\");\n  },\n  handleScroll: function () {\n    this._updateRtlConfig();\n    this._scrollAction();\n  },\n  _attachKeyboardHandler: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n    if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\n      eventsEngine.on(this._$element, addEventNamespace(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this));\n    }\n  },\n  _keyDownHandler: function (e) {\n    clearTimeout(this._updateHandlerTimeout);\n    this._updateHandlerTimeout = setTimeout(() => {\n      if (normalizeKeyName(e) === KEY_CODES.TAB) {\n        this._eachScroller(scroller => {\n          scroller._updateHandler();\n        });\n      }\n    });\n    if (!this._$container.is(domAdapter.getActiveElement(this._$container.get(0)))) {\n      return;\n    }\n    var handled = true;\n    switch (normalizeKeyName(e)) {\n      case KEY_CODES.DOWN:\n        this._scrollByLine({\n          y: 1\n        });\n        break;\n      case KEY_CODES.UP:\n        this._scrollByLine({\n          y: -1\n        });\n        break;\n      case KEY_CODES.RIGHT:\n        this._scrollByLine({\n          x: 1\n        });\n        break;\n      case KEY_CODES.LEFT:\n        this._scrollByLine({\n          x: -1\n        });\n        break;\n      case KEY_CODES.PAGE_DOWN:\n        this._scrollByPage(1);\n        break;\n      case KEY_CODES.PAGE_UP:\n        this._scrollByPage(-1);\n        break;\n      case KEY_CODES.HOME:\n        this._scrollToHome();\n        break;\n      case KEY_CODES.END:\n        this._scrollToEnd();\n        break;\n      default:\n        handled = false;\n    }\n    if (handled) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  },\n  _scrollByLine: function (lines) {\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n    var scrollOffset = SCROLL_LINE_HEIGHT;\n    if (devicePixelRatio) {\n      scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100;\n    }\n    this.scrollBy({\n      top: (lines.y || 0) * -scrollOffset,\n      left: (lines.x || 0) * -scrollOffset\n    });\n  },\n  _scrollByPage: function (page) {\n    var prop = this._wheelProp();\n    var dimension = this._dimensionByProp(prop);\n    var distance = {};\n    var getter = \"width\" === dimension ? getWidth : getHeight;\n    distance[prop] = page * -getter(this._$container);\n    this.scrollBy(distance);\n  },\n  _dimensionByProp: function (prop) {\n    return \"left\" === prop ? \"width\" : \"height\";\n  },\n  _getPropByDirection: function (direction) {\n    return direction === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _scrollToHome: function () {\n    var prop = this._wheelProp();\n    var distance = {};\n    distance[prop] = 0;\n    this._component.scrollTo(distance);\n  },\n  _scrollToEnd: function () {\n    var prop = this._wheelProp();\n    var dimension = this._dimensionByProp(prop);\n    var distance = {};\n    var getter = \"width\" === dimension ? getWidth : getHeight;\n    distance[prop] = getter(this._$content) - getter(this._$container);\n    this._component.scrollTo(distance);\n  },\n  createActions: function () {\n    this._startAction = this._createActionHandler(\"onStart\");\n    this._endAction = this._createActionHandler(\"onEnd\");\n    this._updateAction = this._createActionHandler(\"onUpdated\");\n    this._createScrollerActions();\n  },\n  _createScrollerActions: function () {\n    this._scrollAction = this._createActionHandler(\"onScroll\");\n    this._bounceAction = this._createActionHandler(\"onBounce\");\n    this._eventHandler(\"createActions\", {\n      scroll: this._scrollAction,\n      bounce: this._bounceAction\n    });\n  },\n  _createActionHandler: function (optionName) {\n    var actionHandler = this._createActionByOption(optionName);\n    return () => {\n      actionHandler(extend(this._createActionArgs(), arguments));\n    };\n  },\n  _createActionArgs: function () {\n    var {\n      horizontal: scrollerX,\n      vertical: scrollerY\n    } = this._scrollers;\n    var offset = this._getScrollOffset();\n    this._scrollOffset = {\n      top: scrollerY && offset.top,\n      left: scrollerX && offset.left\n    };\n    return {\n      event: this._eventForUserAction,\n      scrollOffset: this._scrollOffset,\n      reachedLeft: scrollerX && scrollerX._reachedMax(),\n      reachedRight: scrollerX && scrollerX._reachedMin(),\n      reachedTop: scrollerY && scrollerY._reachedMax(),\n      reachedBottom: scrollerY && scrollerY._reachedMin()\n    };\n  },\n  _getScrollOffset() {\n    return {\n      top: -this.location().top,\n      left: -this.location().left\n    };\n  },\n  _eventHandler: function (eventName) {\n    var args = [].slice.call(arguments).slice(1);\n    var deferreds = map(this._scrollers, scroller => scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args));\n    return when.apply($, deferreds).promise();\n  },\n  location: function () {\n    var location = locate(this._$content);\n    location.top -= this._$container.scrollTop();\n    location.left -= this._$container.scrollLeft();\n    return location;\n  },\n  disabledChanged: function () {\n    this._attachCursorHandlers();\n  },\n  _attachCursorHandlers: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n    if (!this.option(\"disabled\") && this._isHoverMode()) {\n      eventsEngine.on(this._$element, addEventNamespace(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\n      eventsEngine.on(this._$element, addEventNamespace(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this));\n    }\n  },\n  _isHoverMode: function () {\n    return \"onHover\" === this.option(\"showScrollbar\");\n  },\n  _cursorEnterHandler: function (e) {\n    e = e || {};\n    e.originalEvent = e.originalEvent || {};\n    if (activeScrollable || e.originalEvent._hoverHandled) {\n      return;\n    }\n    if (hoveredScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n    hoveredScrollable = this;\n    this._eventHandler(\"cursorEnter\");\n    e.originalEvent._hoverHandled = true;\n  },\n  _cursorLeaveHandler: function (e) {\n    if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\n      return;\n    }\n    this._eventHandler(\"cursorLeave\");\n    hoveredScrollable = null;\n    this._refreshCursorState(e && e.relatedTarget);\n  },\n  _refreshCursorState: function (target) {\n    if (!this._isHoverMode() && (!target || activeScrollable)) {\n      return;\n    }\n    var $target = $(target);\n    var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\n    var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\n    if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n    if (targetScrollable) {\n      targetScrollable._cursorEnterHandler();\n    }\n  },\n  update: function () {\n    var result = this._eventHandler(\"update\").done(this._updateAction);\n    return when(result, deferUpdate(() => {\n      var allowedDirections = this._allowedDirections();\n      deferRender(() => {\n        var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\n        touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\n        touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\n        this._$container.css(\"touchAction\", touchDirection);\n      });\n      return when().promise();\n    }));\n  },\n  _allowedDirections: function () {\n    var bounceEnabled = this.option(\"bounceEnabled\");\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n    return {\n      vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\n      horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\n    };\n  },\n  _updateBounds: function () {\n    this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds();\n  },\n  _isHorizontalAndRtlEnabled: function () {\n    return this.option(\"rtlEnabled\") && this.option(\"direction\") !== VERTICAL;\n  },\n  updateRtlPosition: function (needInitializeRtlConfig) {\n    if (needInitializeRtlConfig) {\n      this._rtlConfig = {\n        scrollRight: 0,\n        clientWidth: this._$container.get(0).clientWidth,\n        windowPixelRatio: this._getWindowDevicePixelRatio()\n      };\n    }\n    this._updateBounds();\n    if (this._isHorizontalAndRtlEnabled()) {\n      var scrollLeft = this._getMaxOffset().left - this._rtlConfig.scrollRight;\n      if (scrollLeft <= 0) {\n        scrollLeft = 0;\n        this._rtlConfig.scrollRight = this._getMaxOffset().left;\n      }\n      if (this._getScrollOffset().left !== scrollLeft) {\n        this._rtlConfig.skipUpdating = true;\n        this._component.scrollTo({\n          left: scrollLeft\n        });\n        this._rtlConfig.skipUpdating = false;\n      }\n    }\n  },\n  _updateRtlConfig: function () {\n    if (this._isHorizontalAndRtlEnabled() && !this._rtlConfig.skipUpdating) {\n      var {\n        clientWidth: clientWidth,\n        scrollLeft: scrollLeft\n      } = this._$container.get(0);\n      var windowPixelRatio = this._getWindowDevicePixelRatio();\n      if (this._rtlConfig.windowPixelRatio === windowPixelRatio && this._rtlConfig.clientWidth === clientWidth) {\n        this._rtlConfig.scrollRight = this._getMaxOffset().left - scrollLeft;\n      }\n      this._rtlConfig.clientWidth = clientWidth;\n      this._rtlConfig.windowPixelRatio = windowPixelRatio;\n    }\n  },\n  _getWindowDevicePixelRatio: function () {\n    return hasWindow() ? getWindow().devicePixelRatio : 1;\n  },\n  scrollBy: function (distance) {\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n    if (verticalScroller) {\n      distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location;\n    }\n    if (horizontalScroller) {\n      distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location;\n    }\n    this._prepareDirections(true);\n    this._startAction();\n    this._eventHandler(\"scrollBy\", {\n      x: distance.left,\n      y: distance.top\n    });\n    this._endAction();\n    this._updateRtlConfig();\n  },\n  validate: function (e) {\n    if (isDxMouseWheelEvent(e) && isCommandKeyPressed(e)) {\n      return false;\n    }\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n    if (this.option(\"bounceEnabled\")) {\n      return true;\n    }\n    return isDxMouseWheelEvent(e) ? this._validateWheel(e) : this._validateMove(e);\n  },\n  _validateWheel: function (e) {\n    var scroller = this._scrollers[this._wheelDirection(e)];\n    var reachedMin = scroller._reachedMin();\n    var reachedMax = scroller._reachedMax();\n    var contentGreaterThanContainer = !reachedMin || !reachedMax;\n    var locatedNotAtBound = !reachedMin && !reachedMax;\n    var scrollFromMin = reachedMin && e.delta > 0;\n    var scrollFromMax = reachedMax && e.delta < 0;\n    var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\n    validated = validated || void 0 !== this._validateWheelTimer;\n    if (validated) {\n      clearTimeout(this._validateWheelTimer);\n      this._validateWheelTimer = setTimeout(() => {\n        this._validateWheelTimer = void 0;\n      }, VALIDATE_WHEEL_TIMEOUT);\n    }\n    return validated;\n  },\n  _validateMove: function (e) {\n    if (!this.option(\"scrollByContent\") && !$(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\n      return false;\n    }\n    return this._allowedDirection();\n  },\n  getDirection: function (e) {\n    return isDxMouseWheelEvent(e) ? this._wheelDirection(e) : this._allowedDirection();\n  },\n  _wheelProp: function () {\n    return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _wheelDirection: function (e) {\n    switch (this.option(\"direction\")) {\n      case HORIZONTAL:\n        return HORIZONTAL;\n      case VERTICAL:\n        return VERTICAL;\n      default:\n        return e && e.shiftKey ? HORIZONTAL : VERTICAL;\n    }\n  },\n  dispose: function () {\n    this._resetActive();\n    if (hoveredScrollable === this) {\n      hoveredScrollable = null;\n    }\n    this._eventHandler(\"dispose\");\n    this._detachEventHandlers();\n    this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\n    this._eventForUserAction = null;\n    clearTimeout(this._validateWheelTimer);\n    clearTimeout(this._updateHandlerTimeout);\n  },\n  _detachEventHandlers: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n    eventsEngine.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n  }\n});","map":{"version":3,"names":["getHeight","getWidth","$","domAdapter","eventsEngine","titleize","extend","getWindow","hasWindow","each","map","isDefined","getBoundingRect","resetPosition","move","locate","Class","Animator","isDxMouseWheelEvent","addNamespace","addEventNamespace","normalizeKeyName","isCommandKeyPressed","deferUpdate","deferUpdater","deferRender","deferRenderer","noop","Scrollbar","when","Deferred","SCROLLABLE_SIMULATED","SCROLLABLE_STRATEGY","SCROLLABLE_SIMULATED_CURSOR","SCROLLABLE_SIMULATED_KEYBOARD","SCROLLABLE_SIMULATED_CLASS","SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE","SCROLLABLE_SCROLLBAR_CLASS","VERTICAL","HORIZONTAL","ACCELERATION","OUT_BOUNDS_ACCELERATION","MIN_VELOCITY_LIMIT","FRAME_DURATION","Math","round","SCROLL_LINE_HEIGHT","VALIDATE_WHEEL_TIMEOUT","BOUNCE_MIN_VELOCITY_LIMIT","BOUNCE_DURATION","BOUNCE_FRAMES","BOUNCE_ACCELERATION_SUM","pow","KEY_CODES","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","TAB","InertiaAnimator","inherit","ctor","scroller","callBase","VELOCITY_LIMIT","_isFinished","abs","_velocity","_step","_scrollStep","_acceleration","_inBounds","_complete","_scrollComplete","BounceAnimator","_crossBoundOnNextStep","_move","_bounceLocation","Scroller","options","_initOptions","_initAnimators","_initScrollbar","_location","_topReached","_bottomReached","_axis","direction","_prop","_dimension","_scrollProp","optionName","optionValue","_inertiaAnimator","_bounceAnimator","_scrollbar","appendTo","_$container","_direction","visible","_scrollByThumb","visibilityMode","_visibilityModeNormalize","_scrollbarVisible","expandable","_$scrollbar","$element","mode","delta","prevLocation","_suppressBounce","triggerHandler","type","_bounceEnabled","_boundLocation","location","max","min","_maxOffset","_minOffset","_getScaleRatio","_moveContent","_moveScrollbar","_moveContentByTranslator","_scaleRatio","element","_$element","get","realDimension","_getRealDimension","baseDimension","_getBaseDimension","dimension","dimensionName","translateOffset","minOffset","_maxScrollPropValue","_translateOffset","targetLocation","_$content","moveTo","_hideScrollbar","_completeDeferred","resolve","_scrollToBounds","_bounceAction","_setupBounce","start","boundLocation","bounceDistance","nextLocation","_initHandler","e","_stopScrolling","_prepareThumbScrolling","stop","originalEvent","$target","target","scrollbarClicked","_isScrollbar","_moveToMouseLocation","_thumbScrolling","_isThumb","_crossThumbScrolling","_isAnyThumbScrolling","feedbackOn","_isThumbScrollingHandler","mouseLocation","toUpperCase","offset","_containerToContentRatio","_startHandler","_showScrollbar","_moveHandler","_scrollBy","_scrollByHandler","containerToContentRatio","_endHandler","velocity","_inertiaHandler","_resetThumbScrolling","promise","_suppressInertia","_inertiaEnabled","_stopHandler","_disposeHandler","remove","_updateHandler","_update","_moveToBounds","_resetScaleRatio","_updateLocation","_updateBounds","_updateScrollbar","update","_getMaxOffset","_getMinOffset","_contentSize","_containerSize","containerSize","contentSize","baseContainerSize","baseContentSize","option","scaleRatio","locationChanged","_scrollAction","_createActionsHandler","actions","scroll","bounce","isOverflowHidden","css","containerScrollSize","_validateEvent","isThumb","is","_reachedMin","_reachedMax","_cursorEnterHandler","cursorEnter","_cursorLeaveHandler","cursorLeave","dispose","hoveredScrollable","activeScrollable","SimulatedStrategy","scrollable","_init","_component","container","_$wrapper","$content","bind","_createActionByOption","_isLocked","_isDirection","_allowedDirection","render","addClass","_createScrollers","prop","_attachKeyboardHandler","_attachCursorHandlers","_scrollers","_createScroller","toggleClass","_scrollerOptions","$container","$wrapper","scrollByThumb","scrollbarVisible","bounceEnabled","inertiaEnabled","isAnyThumbScrolling","_applyScaleRatio","_getPropByDirection","result","_eventHandler","done","isThumbScrollingVertical","isThumbScrollingHorizontal","handleInit","_suppressDirections","_eventForUserAction","_prepareDirections","_eachScroller","isValid","_isContent","_validDirections","closest","length","value","callback","handleStart","_startAction","_saveActive","_resetActive","handleMove","cancel","preventDefault","_adjustDistance","distance","x","y","devicePixelRatio","_tryGetDevicePixelRatio","handleEnd","_refreshCursorState","_endAction","handleCancel","handleStop","handleScroll","_updateRtlConfig","off","concat","on","_keyDownHandler","clearTimeout","_updateHandlerTimeout","setTimeout","getActiveElement","handled","_scrollByLine","_scrollByPage","_scrollToHome","_scrollToEnd","stopPropagation","lines","scrollOffset","scrollBy","top","left","page","_wheelProp","_dimensionByProp","getter","scrollTo","createActions","_createActionHandler","_updateAction","_createScrollerActions","actionHandler","_createActionArgs","arguments","horizontal","scrollerX","vertical","scrollerY","_getScrollOffset","_scrollOffset","event","reachedLeft","reachedRight","reachedTop","reachedBottom","eventName","args","slice","call","deferreds","apply","scrollTop","scrollLeft","disabledChanged","_isHoverMode","_hoverHandled","relatedTarget","$scrollable","targetScrollable","data","allowedDirections","_allowedDirections","touchDirection","verticalScroller","horizontalScroller","_isHorizontalAndRtlEnabled","updateRtlPosition","needInitializeRtlConfig","_rtlConfig","scrollRight","clientWidth","windowPixelRatio","_getWindowDevicePixelRatio","skipUpdating","validate","_validateWheel","_validateMove","_wheelDirection","reachedMin","reachedMax","contentGreaterThanContainer","locatedNotAtBound","scrollFromMin","scrollFromMax","validated","_validateWheelTimer","getDirection","shiftKey","_detachEventHandlers","removeClass"],"sources":["C:/Users/ninad/OneDrive/Radna povr≈°ina/zavrsni/client/node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.simulated.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getHeight,\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    titleize\r\n} from \"../../core/utils/inflector\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport {\r\n    each,\r\n    map\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport {\r\n    resetPosition,\r\n    move,\r\n    locate\r\n} from \"../../animation/translator\";\r\nimport Class from \"../../core/class\";\r\nimport Animator from \"./animator\";\r\nimport {\r\n    isDxMouseWheelEvent,\r\n    addNamespace as addEventNamespace,\r\n    normalizeKeyName,\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    deferUpdate,\r\n    deferUpdater,\r\n    deferRender,\r\n    deferRenderer,\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport Scrollbar from \"./ui.scrollbar\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\r\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\r\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\r\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\r\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\r\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\r\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\r\nvar VERTICAL = \"vertical\";\r\nvar HORIZONTAL = \"horizontal\";\r\nvar ACCELERATION = .92;\r\nvar OUT_BOUNDS_ACCELERATION = .5;\r\nvar MIN_VELOCITY_LIMIT = 1;\r\nvar FRAME_DURATION = Math.round(1e3 / 60);\r\nvar SCROLL_LINE_HEIGHT = 40;\r\nvar VALIDATE_WHEEL_TIMEOUT = 500;\r\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\r\nvar BOUNCE_DURATION = 400;\r\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\r\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\r\nvar KEY_CODES = {\r\n    PAGE_UP: \"pageUp\",\r\n    PAGE_DOWN: \"pageDown\",\r\n    END: \"end\",\r\n    HOME: \"home\",\r\n    LEFT: \"leftArrow\",\r\n    UP: \"upArrow\",\r\n    RIGHT: \"rightArrow\",\r\n    DOWN: \"downArrow\",\r\n    TAB: \"tab\"\r\n};\r\nvar InertiaAnimator = Animator.inherit({\r\n    ctor: function(scroller) {\r\n        this.callBase();\r\n        this.scroller = scroller\r\n    },\r\n    VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT\r\n    },\r\n    _step: function() {\r\n        this.scroller._scrollStep(this.scroller._velocity);\r\n        this.scroller._velocity *= this._acceleration()\r\n    },\r\n    _acceleration: function() {\r\n        return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._scrollComplete()\r\n    }\r\n});\r\nvar BounceAnimator = InertiaAnimator.inherit({\r\n    VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return this.scroller._crossBoundOnNextStep() || this.callBase()\r\n    },\r\n    _acceleration: function() {\r\n        return ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._move(this.scroller._bounceLocation);\r\n        this.callBase()\r\n    }\r\n});\r\nexport var Scroller = Class.inherit({\r\n    ctor: function(options) {\r\n        this._initOptions(options);\r\n        this._initAnimators();\r\n        this._initScrollbar()\r\n    },\r\n    _initOptions: function(options) {\r\n        this._location = 0;\r\n        this._topReached = false;\r\n        this._bottomReached = false;\r\n        this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\r\n        this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\r\n        this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\r\n        this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\r\n        each(options, (optionName, optionValue) => {\r\n            this[\"_\" + optionName] = optionValue\r\n        })\r\n    },\r\n    _initAnimators: function() {\r\n        this._inertiaAnimator = new InertiaAnimator(this);\r\n        this._bounceAnimator = new BounceAnimator(this)\r\n    },\r\n    _initScrollbar: function() {\r\n        this._scrollbar = new Scrollbar($(\"<div>\").appendTo(this._$container), {\r\n            direction: this._direction,\r\n            visible: this._scrollByThumb,\r\n            visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\r\n            expandable: this._scrollByThumb\r\n        });\r\n        this._$scrollbar = this._scrollbar.$element()\r\n    },\r\n    _visibilityModeNormalize: function(mode) {\r\n        return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode\r\n    },\r\n    _scrollStep: function(delta) {\r\n        var prevLocation = this._location;\r\n        this._location += delta;\r\n        this._suppressBounce();\r\n        this._move();\r\n        if (Math.abs(prevLocation - this._location) < 1) {\r\n            return\r\n        }\r\n        eventsEngine.triggerHandler(this._$container, {\r\n            type: \"scroll\"\r\n        })\r\n    },\r\n    _suppressBounce: function() {\r\n        if (this._bounceEnabled || this._inBounds(this._location)) {\r\n            return\r\n        }\r\n        this._velocity = 0;\r\n        this._location = this._boundLocation()\r\n    },\r\n    _boundLocation: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return Math.max(Math.min(location, this._maxOffset), this._minOffset)\r\n    },\r\n    _move: function(location) {\r\n        this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\r\n        this._moveContent();\r\n        this._moveScrollbar()\r\n    },\r\n    _moveContent: function() {\r\n        var location = this._location;\r\n        this._$container[this._scrollProp](-location / this._getScaleRatio());\r\n        this._moveContentByTranslator(location)\r\n    },\r\n    _getScaleRatio: function() {\r\n        if (hasWindow() && !this._scaleRatio) {\r\n            var element = this._$element.get(0);\r\n            var realDimension = this._getRealDimension(element, this._dimension);\r\n            var baseDimension = this._getBaseDimension(element, this._dimension);\r\n            this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100\r\n        }\r\n        return this._scaleRatio || 1\r\n    },\r\n    _getRealDimension: function(element, dimension) {\r\n        return Math.round(getBoundingRect(element)[dimension])\r\n    },\r\n    _getBaseDimension: function(element, dimension) {\r\n        var dimensionName = \"offset\" + titleize(dimension);\r\n        return element[dimensionName]\r\n    },\r\n    _moveContentByTranslator: function(location) {\r\n        var translateOffset;\r\n        var minOffset = -this._maxScrollPropValue;\r\n        if (location > 0) {\r\n            translateOffset = location\r\n        } else if (location <= minOffset) {\r\n            translateOffset = location - minOffset\r\n        } else {\r\n            translateOffset = location % 1\r\n        }\r\n        if (this._translateOffset === translateOffset) {\r\n            return\r\n        }\r\n        var targetLocation = {};\r\n        targetLocation[this._prop] = translateOffset;\r\n        this._translateOffset = translateOffset;\r\n        if (0 === translateOffset) {\r\n            resetPosition(this._$content);\r\n            return\r\n        }\r\n        move(this._$content, targetLocation)\r\n    },\r\n    _moveScrollbar: function() {\r\n        this._scrollbar.moveTo(this._location)\r\n    },\r\n    _scrollComplete: function() {\r\n        if (this._inBounds()) {\r\n            this._hideScrollbar();\r\n            if (this._completeDeferred) {\r\n                this._completeDeferred.resolve()\r\n            }\r\n        }\r\n        this._scrollToBounds()\r\n    },\r\n    _scrollToBounds: function() {\r\n        if (this._inBounds()) {\r\n            return\r\n        }\r\n        this._bounceAction();\r\n        this._setupBounce();\r\n        this._bounceAnimator.start()\r\n    },\r\n    _setupBounce: function() {\r\n        var boundLocation = this._bounceLocation = this._boundLocation();\r\n        var bounceDistance = boundLocation - this._location;\r\n        this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM\r\n    },\r\n    _inBounds: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return this._boundLocation(location) === location\r\n    },\r\n    _crossBoundOnNextStep: function() {\r\n        var location = this._location;\r\n        var nextLocation = location + this._velocity;\r\n        return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset\r\n    },\r\n    _initHandler: function(e) {\r\n        this._stopScrolling();\r\n        this._prepareThumbScrolling(e)\r\n    },\r\n    _stopScrolling: deferRenderer((function() {\r\n        this._hideScrollbar();\r\n        this._inertiaAnimator.stop();\r\n        this._bounceAnimator.stop()\r\n    })),\r\n    _prepareThumbScrolling: function(e) {\r\n        if (isDxMouseWheelEvent(e.originalEvent)) {\r\n            return\r\n        }\r\n        var $target = $(e.originalEvent.target);\r\n        var scrollbarClicked = this._isScrollbar($target);\r\n        if (scrollbarClicked) {\r\n            this._moveToMouseLocation(e)\r\n        }\r\n        this._thumbScrolling = scrollbarClicked || this._isThumb($target);\r\n        this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\r\n        if (this._thumbScrolling) {\r\n            this._scrollbar.feedbackOn()\r\n        }\r\n    },\r\n    _isThumbScrollingHandler: function($target) {\r\n        return this._isThumb($target)\r\n    },\r\n    _moveToMouseLocation: function(e) {\r\n        var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\r\n        var location = this._location + mouseLocation / this._containerToContentRatio() - getHeight(this._$container) / 2;\r\n        this._scrollStep(-Math.round(location))\r\n    },\r\n    _startHandler: function() {\r\n        this._showScrollbar()\r\n    },\r\n    _moveHandler: function(delta) {\r\n        if (this._crossThumbScrolling) {\r\n            return\r\n        }\r\n        if (this._thumbScrolling) {\r\n            delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio())\r\n        }\r\n        this._scrollBy(delta)\r\n    },\r\n    _scrollBy: function(delta) {\r\n        delta = delta[this._axis];\r\n        if (!this._inBounds()) {\r\n            delta *= OUT_BOUNDS_ACCELERATION\r\n        }\r\n        this._scrollStep(delta)\r\n    },\r\n    _scrollByHandler: function(delta) {\r\n        this._scrollBy(delta);\r\n        this._scrollComplete()\r\n    },\r\n    _containerToContentRatio: function() {\r\n        return this._scrollbar.containerToContentRatio()\r\n    },\r\n    _endHandler: function(velocity) {\r\n        this._completeDeferred = new Deferred;\r\n        this._velocity = velocity[this._axis];\r\n        this._inertiaHandler();\r\n        this._resetThumbScrolling();\r\n        return this._completeDeferred.promise()\r\n    },\r\n    _inertiaHandler: function() {\r\n        this._suppressInertia();\r\n        this._inertiaAnimator.start()\r\n    },\r\n    _suppressInertia: function() {\r\n        if (!this._inertiaEnabled || this._thumbScrolling) {\r\n            this._velocity = 0\r\n        }\r\n    },\r\n    _resetThumbScrolling: function() {\r\n        this._thumbScrolling = false;\r\n        this._crossThumbScrolling = false\r\n    },\r\n    _stopHandler: function() {\r\n        if (this._thumbScrolling) {\r\n            this._scrollComplete()\r\n        }\r\n        this._resetThumbScrolling();\r\n        this._scrollToBounds()\r\n    },\r\n    _disposeHandler: function() {\r\n        this._stopScrolling();\r\n        this._$scrollbar.remove()\r\n    },\r\n    _updateHandler: function() {\r\n        this._update();\r\n        this._moveToBounds()\r\n    },\r\n    _update: function() {\r\n        this._stopScrolling();\r\n        return deferUpdate(() => {\r\n            this._resetScaleRatio();\r\n            this._updateLocation();\r\n            this._updateBounds();\r\n            this._updateScrollbar();\r\n            deferRender(() => {\r\n                this._moveScrollbar();\r\n                this._scrollbar.update()\r\n            })\r\n        })\r\n    },\r\n    _resetScaleRatio: function() {\r\n        this._scaleRatio = null\r\n    },\r\n    _updateLocation: function() {\r\n        this._location = (locate(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio()\r\n    },\r\n    _updateBounds: function() {\r\n        this._maxOffset = this._getMaxOffset();\r\n        this._minOffset = this._getMinOffset()\r\n    },\r\n    _getMaxOffset: function() {\r\n        return 0\r\n    },\r\n    _getMinOffset: function() {\r\n        this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\r\n        return -this._maxScrollPropValue\r\n    },\r\n    _updateScrollbar: deferUpdater((function() {\r\n        var containerSize = this._containerSize();\r\n        var contentSize = this._contentSize();\r\n        var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\r\n        var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\r\n        deferRender(() => {\r\n            this._scrollbar.option({\r\n                containerSize: containerSize,\r\n                contentSize: contentSize,\r\n                baseContainerSize: baseContainerSize,\r\n                baseContentSize: baseContentSize,\r\n                scaleRatio: this._getScaleRatio()\r\n            })\r\n        })\r\n    })),\r\n    _moveToBounds: deferRenderer(deferUpdater(deferRenderer((function() {\r\n        var location = this._boundLocation();\r\n        var locationChanged = location !== this._location;\r\n        this._location = location;\r\n        this._move();\r\n        if (locationChanged) {\r\n            this._scrollAction()\r\n        }\r\n    })))),\r\n    _createActionsHandler: function(actions) {\r\n        this._scrollAction = actions.scroll;\r\n        this._bounceAction = actions.bounce\r\n    },\r\n    _showScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", true)\r\n    },\r\n    _hideScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", false)\r\n    },\r\n    _containerSize: function() {\r\n        return this._getRealDimension(this._$container.get(0), this._dimension)\r\n    },\r\n    _contentSize: function() {\r\n        var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\r\n        var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\r\n        if (!isOverflowHidden) {\r\n            var containerScrollSize = this._$content[0][\"scroll\" + titleize(this._dimension)] * this._getScaleRatio();\r\n            contentSize = Math.max(containerScrollSize, contentSize)\r\n        }\r\n        return contentSize\r\n    },\r\n    _validateEvent: function(e) {\r\n        var $target = $(e.originalEvent.target);\r\n        return this._isThumb($target) || this._isScrollbar($target)\r\n    },\r\n    _isThumb: function($element) {\r\n        return this._scrollByThumb && this._scrollbar.isThumb($element)\r\n    },\r\n    _isScrollbar: function($element) {\r\n        return this._scrollByThumb && $element && $element.is(this._$scrollbar)\r\n    },\r\n    _reachedMin: function() {\r\n        return Math.round(this._location - this._minOffset) <= 0\r\n    },\r\n    _reachedMax: function() {\r\n        return Math.round(this._location - this._maxOffset) >= 0\r\n    },\r\n    _cursorEnterHandler: function() {\r\n        this._resetScaleRatio();\r\n        this._updateScrollbar();\r\n        this._scrollbar.cursorEnter()\r\n    },\r\n    _cursorLeaveHandler: function() {\r\n        this._scrollbar.cursorLeave()\r\n    },\r\n    dispose: noop\r\n});\r\nvar hoveredScrollable;\r\nvar activeScrollable;\r\nexport var SimulatedStrategy = Class.inherit({\r\n    ctor: function(scrollable) {\r\n        this._init(scrollable)\r\n    },\r\n    _init: function(scrollable) {\r\n        this._component = scrollable;\r\n        this._$element = scrollable.$element();\r\n        this._$container = $(scrollable.container());\r\n        this._$wrapper = scrollable._$wrapper;\r\n        this._$content = scrollable.$content();\r\n        this.option = scrollable.option.bind(scrollable);\r\n        this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\r\n        this._isLocked = scrollable._isLocked.bind(scrollable);\r\n        this._isDirection = scrollable._isDirection.bind(scrollable);\r\n        this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\r\n        this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable)\r\n    },\r\n    render: function() {\r\n        this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._createScrollers();\r\n        if (this.option(\"useKeyboard\")) {\r\n            this._$container.prop(\"tabIndex\", 0)\r\n        }\r\n        this._attachKeyboardHandler();\r\n        this._attachCursorHandlers()\r\n    },\r\n    _createScrollers: function() {\r\n        this._scrollers = {};\r\n        if (this._isDirection(HORIZONTAL)) {\r\n            this._createScroller(HORIZONTAL)\r\n        }\r\n        if (this._isDirection(VERTICAL)) {\r\n            this._createScroller(VERTICAL)\r\n        }\r\n        this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"))\r\n    },\r\n    _createScroller: function(direction) {\r\n        this._scrollers[direction] = new Scroller(this._scrollerOptions(direction))\r\n    },\r\n    _scrollerOptions: function(direction) {\r\n        return {\r\n            direction: direction,\r\n            $content: this._$content,\r\n            $container: this._$container,\r\n            $wrapper: this._$wrapper,\r\n            $element: this._$element,\r\n            scrollByThumb: this.option(\"scrollByThumb\"),\r\n            scrollbarVisible: this.option(\"showScrollbar\"),\r\n            bounceEnabled: this.option(\"bounceEnabled\"),\r\n            inertiaEnabled: this.option(\"inertiaEnabled\"),\r\n            isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\r\n        }\r\n    },\r\n    _applyScaleRatio: function(targetLocation) {\r\n        for (var direction in this._scrollers) {\r\n            var prop = this._getPropByDirection(direction);\r\n            if (isDefined(targetLocation[prop])) {\r\n                var scroller = this._scrollers[direction];\r\n                targetLocation[prop] *= scroller._getScaleRatio()\r\n            }\r\n        }\r\n        return targetLocation\r\n    },\r\n    _isAnyThumbScrolling: function($target) {\r\n        var result = false;\r\n        this._eventHandler(\"isThumbScrolling\", $target).done((function(isThumbScrollingVertical, isThumbScrollingHorizontal) {\r\n            result = isThumbScrollingVertical || isThumbScrollingHorizontal\r\n        }));\r\n        return result\r\n    },\r\n    handleInit: function(e) {\r\n        this._suppressDirections(e);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"init\", e)\r\n    },\r\n    _suppressDirections: function(e) {\r\n        if (isDxMouseWheelEvent(e.originalEvent)) {\r\n            this._prepareDirections(true);\r\n            return\r\n        }\r\n        this._prepareDirections();\r\n        this._eachScroller((function(scroller, direction) {\r\n            var $target = $(e.originalEvent.target);\r\n            var isValid = scroller._validateEvent(e) || this.option(\"scrollByContent\") && this._isContent($target);\r\n            this._validDirections[direction] = isValid\r\n        }))\r\n    },\r\n    _isContent: function($element) {\r\n        return !!$element.closest(this._$element).length\r\n    },\r\n    _prepareDirections: function(value) {\r\n        value = value || false;\r\n        this._validDirections = {};\r\n        this._validDirections[HORIZONTAL] = value;\r\n        this._validDirections[VERTICAL] = value\r\n    },\r\n    _eachScroller: function(callback) {\r\n        callback = callback.bind(this);\r\n        each(this._scrollers, (function(direction, scroller) {\r\n            callback(scroller, direction)\r\n        }))\r\n    },\r\n    handleStart: function(e) {\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"start\").done(this._startAction)\r\n    },\r\n    _saveActive: function() {\r\n        activeScrollable = this\r\n    },\r\n    _resetActive: function() {\r\n        if (activeScrollable === this) {\r\n            activeScrollable = null\r\n        }\r\n    },\r\n    handleMove: function(e) {\r\n        if (this._isLocked()) {\r\n            e.cancel = true;\r\n            this._resetActive();\r\n            return\r\n        }\r\n        this._saveActive();\r\n        e.preventDefault && e.preventDefault();\r\n        this._adjustDistance(e, e.delta);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"move\", e.delta)\r\n    },\r\n    _adjustDistance: function(e, distance) {\r\n        distance.x *= this._validDirections[HORIZONTAL];\r\n        distance.y *= this._validDirections[VERTICAL];\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        if (devicePixelRatio && isDxMouseWheelEvent(e.originalEvent)) {\r\n            distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\r\n            distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100\r\n        }\r\n    },\r\n    _tryGetDevicePixelRatio: function() {\r\n        if (hasWindow()) {\r\n            return getWindow().devicePixelRatio\r\n        }\r\n    },\r\n    handleEnd: function(e) {\r\n        this._resetActive();\r\n        this._refreshCursorState(e.originalEvent && e.originalEvent.target);\r\n        this._adjustDistance(e, e.velocity);\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", e.velocity).done(this._endAction)\r\n    },\r\n    handleCancel: function(e) {\r\n        this._resetActive();\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", {\r\n            x: 0,\r\n            y: 0\r\n        })\r\n    },\r\n    handleStop: function() {\r\n        this._resetActive();\r\n        this._eventHandler(\"stop\")\r\n    },\r\n    handleScroll: function() {\r\n        this._updateRtlConfig();\r\n        this._scrollAction()\r\n    },\r\n    _attachKeyboardHandler: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\r\n        if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\r\n            eventsEngine.on(this._$element, addEventNamespace(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this))\r\n        }\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        clearTimeout(this._updateHandlerTimeout);\r\n        this._updateHandlerTimeout = setTimeout(() => {\r\n            if (normalizeKeyName(e) === KEY_CODES.TAB) {\r\n                this._eachScroller(scroller => {\r\n                    scroller._updateHandler()\r\n                })\r\n            }\r\n        });\r\n        if (!this._$container.is(domAdapter.getActiveElement(this._$container.get(0)))) {\r\n            return\r\n        }\r\n        var handled = true;\r\n        switch (normalizeKeyName(e)) {\r\n            case KEY_CODES.DOWN:\r\n                this._scrollByLine({\r\n                    y: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.UP:\r\n                this._scrollByLine({\r\n                    y: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.RIGHT:\r\n                this._scrollByLine({\r\n                    x: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.LEFT:\r\n                this._scrollByLine({\r\n                    x: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.PAGE_DOWN:\r\n                this._scrollByPage(1);\r\n                break;\r\n            case KEY_CODES.PAGE_UP:\r\n                this._scrollByPage(-1);\r\n                break;\r\n            case KEY_CODES.HOME:\r\n                this._scrollToHome();\r\n                break;\r\n            case KEY_CODES.END:\r\n                this._scrollToEnd();\r\n                break;\r\n            default:\r\n                handled = false\r\n        }\r\n        if (handled) {\r\n            e.stopPropagation();\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _scrollByLine: function(lines) {\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        var scrollOffset = SCROLL_LINE_HEIGHT;\r\n        if (devicePixelRatio) {\r\n            scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100\r\n        }\r\n        this.scrollBy({\r\n            top: (lines.y || 0) * -scrollOffset,\r\n            left: (lines.x || 0) * -scrollOffset\r\n        })\r\n    },\r\n    _scrollByPage: function(page) {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        var getter = \"width\" === dimension ? getWidth : getHeight;\r\n        distance[prop] = page * -getter(this._$container);\r\n        this.scrollBy(distance)\r\n    },\r\n    _dimensionByProp: function(prop) {\r\n        return \"left\" === prop ? \"width\" : \"height\"\r\n    },\r\n    _getPropByDirection: function(direction) {\r\n        return direction === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _scrollToHome: function() {\r\n        var prop = this._wheelProp();\r\n        var distance = {};\r\n        distance[prop] = 0;\r\n        this._component.scrollTo(distance)\r\n    },\r\n    _scrollToEnd: function() {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        var getter = \"width\" === dimension ? getWidth : getHeight;\r\n        distance[prop] = getter(this._$content) - getter(this._$container);\r\n        this._component.scrollTo(distance)\r\n    },\r\n    createActions: function() {\r\n        this._startAction = this._createActionHandler(\"onStart\");\r\n        this._endAction = this._createActionHandler(\"onEnd\");\r\n        this._updateAction = this._createActionHandler(\"onUpdated\");\r\n        this._createScrollerActions()\r\n    },\r\n    _createScrollerActions: function() {\r\n        this._scrollAction = this._createActionHandler(\"onScroll\");\r\n        this._bounceAction = this._createActionHandler(\"onBounce\");\r\n        this._eventHandler(\"createActions\", {\r\n            scroll: this._scrollAction,\r\n            bounce: this._bounceAction\r\n        })\r\n    },\r\n    _createActionHandler: function(optionName) {\r\n        var actionHandler = this._createActionByOption(optionName);\r\n        return () => {\r\n            actionHandler(extend(this._createActionArgs(), arguments))\r\n        }\r\n    },\r\n    _createActionArgs: function() {\r\n        var {\r\n            horizontal: scrollerX,\r\n            vertical: scrollerY\r\n        } = this._scrollers;\r\n        var offset = this._getScrollOffset();\r\n        this._scrollOffset = {\r\n            top: scrollerY && offset.top,\r\n            left: scrollerX && offset.left\r\n        };\r\n        return {\r\n            event: this._eventForUserAction,\r\n            scrollOffset: this._scrollOffset,\r\n            reachedLeft: scrollerX && scrollerX._reachedMax(),\r\n            reachedRight: scrollerX && scrollerX._reachedMin(),\r\n            reachedTop: scrollerY && scrollerY._reachedMax(),\r\n            reachedBottom: scrollerY && scrollerY._reachedMin()\r\n        }\r\n    },\r\n    _getScrollOffset() {\r\n        return {\r\n            top: -this.location().top,\r\n            left: -this.location().left\r\n        }\r\n    },\r\n    _eventHandler: function(eventName) {\r\n        var args = [].slice.call(arguments).slice(1);\r\n        var deferreds = map(this._scrollers, scroller => scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args));\r\n        return when.apply($, deferreds).promise()\r\n    },\r\n    location: function() {\r\n        var location = locate(this._$content);\r\n        location.top -= this._$container.scrollTop();\r\n        location.left -= this._$container.scrollLeft();\r\n        return location\r\n    },\r\n    disabledChanged: function() {\r\n        this._attachCursorHandlers()\r\n    },\r\n    _attachCursorHandlers: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        if (!this.option(\"disabled\") && this._isHoverMode()) {\r\n            eventsEngine.on(this._$element, addEventNamespace(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\r\n            eventsEngine.on(this._$element, addEventNamespace(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this))\r\n        }\r\n    },\r\n    _isHoverMode: function() {\r\n        return \"onHover\" === this.option(\"showScrollbar\")\r\n    },\r\n    _cursorEnterHandler: function(e) {\r\n        e = e || {};\r\n        e.originalEvent = e.originalEvent || {};\r\n        if (activeScrollable || e.originalEvent._hoverHandled) {\r\n            return\r\n        }\r\n        if (hoveredScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        hoveredScrollable = this;\r\n        this._eventHandler(\"cursorEnter\");\r\n        e.originalEvent._hoverHandled = true\r\n    },\r\n    _cursorLeaveHandler: function(e) {\r\n        if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\r\n            return\r\n        }\r\n        this._eventHandler(\"cursorLeave\");\r\n        hoveredScrollable = null;\r\n        this._refreshCursorState(e && e.relatedTarget)\r\n    },\r\n    _refreshCursorState: function(target) {\r\n        if (!this._isHoverMode() && (!target || activeScrollable)) {\r\n            return\r\n        }\r\n        var $target = $(target);\r\n        var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\r\n        var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\r\n        if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        if (targetScrollable) {\r\n            targetScrollable._cursorEnterHandler()\r\n        }\r\n    },\r\n    update: function() {\r\n        var result = this._eventHandler(\"update\").done(this._updateAction);\r\n        return when(result, deferUpdate(() => {\r\n            var allowedDirections = this._allowedDirections();\r\n            deferRender(() => {\r\n                var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\r\n                touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\r\n                touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\r\n                this._$container.css(\"touchAction\", touchDirection)\r\n            });\r\n            return when().promise()\r\n        }))\r\n    },\r\n    _allowedDirections: function() {\r\n        var bounceEnabled = this.option(\"bounceEnabled\");\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        return {\r\n            vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\r\n            horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\r\n        }\r\n    },\r\n    _updateBounds: function() {\r\n        this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds()\r\n    },\r\n    _isHorizontalAndRtlEnabled: function() {\r\n        return this.option(\"rtlEnabled\") && this.option(\"direction\") !== VERTICAL\r\n    },\r\n    updateRtlPosition: function(needInitializeRtlConfig) {\r\n        if (needInitializeRtlConfig) {\r\n            this._rtlConfig = {\r\n                scrollRight: 0,\r\n                clientWidth: this._$container.get(0).clientWidth,\r\n                windowPixelRatio: this._getWindowDevicePixelRatio()\r\n            }\r\n        }\r\n        this._updateBounds();\r\n        if (this._isHorizontalAndRtlEnabled()) {\r\n            var scrollLeft = this._getMaxOffset().left - this._rtlConfig.scrollRight;\r\n            if (scrollLeft <= 0) {\r\n                scrollLeft = 0;\r\n                this._rtlConfig.scrollRight = this._getMaxOffset().left\r\n            }\r\n            if (this._getScrollOffset().left !== scrollLeft) {\r\n                this._rtlConfig.skipUpdating = true;\r\n                this._component.scrollTo({\r\n                    left: scrollLeft\r\n                });\r\n                this._rtlConfig.skipUpdating = false\r\n            }\r\n        }\r\n    },\r\n    _updateRtlConfig: function() {\r\n        if (this._isHorizontalAndRtlEnabled() && !this._rtlConfig.skipUpdating) {\r\n            var {\r\n                clientWidth: clientWidth,\r\n                scrollLeft: scrollLeft\r\n            } = this._$container.get(0);\r\n            var windowPixelRatio = this._getWindowDevicePixelRatio();\r\n            if (this._rtlConfig.windowPixelRatio === windowPixelRatio && this._rtlConfig.clientWidth === clientWidth) {\r\n                this._rtlConfig.scrollRight = this._getMaxOffset().left - scrollLeft\r\n            }\r\n            this._rtlConfig.clientWidth = clientWidth;\r\n            this._rtlConfig.windowPixelRatio = windowPixelRatio\r\n        }\r\n    },\r\n    _getWindowDevicePixelRatio: function() {\r\n        return hasWindow() ? getWindow().devicePixelRatio : 1\r\n    },\r\n    scrollBy: function(distance) {\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        if (verticalScroller) {\r\n            distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location\r\n        }\r\n        if (horizontalScroller) {\r\n            distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location\r\n        }\r\n        this._prepareDirections(true);\r\n        this._startAction();\r\n        this._eventHandler(\"scrollBy\", {\r\n            x: distance.left,\r\n            y: distance.top\r\n        });\r\n        this._endAction();\r\n        this._updateRtlConfig()\r\n    },\r\n    validate: function(e) {\r\n        if (isDxMouseWheelEvent(e) && isCommandKeyPressed(e)) {\r\n            return false\r\n        }\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"bounceEnabled\")) {\r\n            return true\r\n        }\r\n        return isDxMouseWheelEvent(e) ? this._validateWheel(e) : this._validateMove(e)\r\n    },\r\n    _validateWheel: function(e) {\r\n        var scroller = this._scrollers[this._wheelDirection(e)];\r\n        var reachedMin = scroller._reachedMin();\r\n        var reachedMax = scroller._reachedMax();\r\n        var contentGreaterThanContainer = !reachedMin || !reachedMax;\r\n        var locatedNotAtBound = !reachedMin && !reachedMax;\r\n        var scrollFromMin = reachedMin && e.delta > 0;\r\n        var scrollFromMax = reachedMax && e.delta < 0;\r\n        var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\r\n        validated = validated || void 0 !== this._validateWheelTimer;\r\n        if (validated) {\r\n            clearTimeout(this._validateWheelTimer);\r\n            this._validateWheelTimer = setTimeout(() => {\r\n                this._validateWheelTimer = void 0\r\n            }, VALIDATE_WHEEL_TIMEOUT)\r\n        }\r\n        return validated\r\n    },\r\n    _validateMove: function(e) {\r\n        if (!this.option(\"scrollByContent\") && !$(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\r\n            return false\r\n        }\r\n        return this._allowedDirection()\r\n    },\r\n    getDirection: function(e) {\r\n        return isDxMouseWheelEvent(e) ? this._wheelDirection(e) : this._allowedDirection()\r\n    },\r\n    _wheelProp: function() {\r\n        return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _wheelDirection: function(e) {\r\n        switch (this.option(\"direction\")) {\r\n            case HORIZONTAL:\r\n                return HORIZONTAL;\r\n            case VERTICAL:\r\n                return VERTICAL;\r\n            default:\r\n                return e && e.shiftKey ? HORIZONTAL : VERTICAL\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._resetActive();\r\n        if (hoveredScrollable === this) {\r\n            hoveredScrollable = null\r\n        }\r\n        this._eventHandler(\"dispose\");\r\n        this._detachEventHandlers();\r\n        this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._eventForUserAction = null;\r\n        clearTimeout(this._validateWheelTimer);\r\n        clearTimeout(this._updateHandlerTimeout)\r\n    },\r\n    _detachEventHandlers: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        eventsEngine.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD))\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}