{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.live_update.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport CollectionWidget from \"./ui.collection_widget.edit\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { update, insert, indexByKey } from \"../../data/array_utils\";\nimport { keysEqual } from \"../../data/utils\";\nimport { when } from \"../../core/utils/deferred\";\nimport { findChanges } from \"../../core/utils/array_compare\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { noop } from \"../../core/utils/common\";\nvar PRIVATE_KEY_FIELD = \"__dx_key__\";\nexport default CollectionWidget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      repaintChangesOnly: false\n    });\n  },\n  ctor: function () {\n    var _this$_dataController;\n    this.callBase.apply(this, arguments);\n    this._customizeStoreLoadOptions = e => {\n      var dataController = this._dataController;\n      if (dataController.getDataSource() && !this._dataController.isLoaded()) {\n        this._correctionIndex = 0;\n      }\n      if (this._correctionIndex && e.storeLoadOptions) {\n        e.storeLoadOptions.skip += this._correctionIndex;\n      }\n    }, null === (_this$_dataController = this._dataController) || void 0 === _this$_dataController ? void 0 : _this$_dataController.on(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\n  },\n  reload: function () {\n    this._correctionIndex = 0;\n  },\n  _init: function () {\n    this.callBase();\n    this._refreshItemsCache();\n    this._correctionIndex = 0;\n  },\n  _findItemElementByKey: function (key) {\n    var result = $();\n    var keyExpr = this.key();\n    this.itemElements().each((_, item) => {\n      var $item = $(item);\n      var itemData = this._getItemData($item);\n      if (keyExpr ? keysEqual(keyExpr, this.keyOf(itemData), key) : this._isItemEquals(itemData, key)) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _dataSourceChangedHandler: function (newItems, e) {\n    if (null !== e && void 0 !== e && e.changes) {\n      this._modifyByChanges(e.changes);\n    } else {\n      this.callBase(newItems, e);\n      this._refreshItemsCache();\n    }\n  },\n  _isItemEquals: function (item1, item2) {\n    if (item1 && item1[PRIVATE_KEY_FIELD]) {\n      item1 = item1.data;\n    }\n    try {\n      return JSON.stringify(item1) === JSON.stringify(item2);\n    } catch (e) {\n      return item1 === item2;\n    }\n  },\n  _isItemStrictEquals: function (item1, item2) {\n    return this._isItemEquals(item1, item2);\n  },\n  _shouldAddNewGroup: function (changes, items) {\n    var result = false;\n    if (this.option(\"grouped\")) {\n      if (!changes.length) {\n        result = true;\n      }\n      each(changes, (i, change) => {\n        if (\"insert\" === change.type) {\n          result = true;\n          each(items, (_, item) => {\n            if (void 0 !== change.data.key && change.data.key === item.key) {\n              result = false;\n              return false;\n            }\n          });\n        }\n      });\n    }\n    return result;\n  },\n  _partialRefresh: function () {\n    if (this.option(\"repaintChangesOnly\")) {\n      var result = findChanges(this._itemsCache, this._editStrategy.itemsGetter(), data => {\n        if (data && void 0 !== data[PRIVATE_KEY_FIELD]) {\n          return data[PRIVATE_KEY_FIELD];\n        }\n        return this.keyOf(data);\n      }, this._isItemStrictEquals.bind(this));\n      if (result && this._itemsCache.length && !this._shouldAddNewGroup(result, this._itemsCache)) {\n        this._modifyByChanges(result, true);\n        this._renderEmptyMessage();\n        return true;\n      } else {\n        this._refreshItemsCache();\n      }\n    }\n    return false;\n  },\n  _refreshItemsCache: function () {\n    if (this.option(\"repaintChangesOnly\")) {\n      var items = this._editStrategy.itemsGetter();\n      try {\n        this._itemsCache = extend(true, [], items);\n        if (!this.key()) {\n          this._itemsCache = this._itemsCache.map((itemCache, index) => ({\n            [PRIVATE_KEY_FIELD]: items[index],\n            data: itemCache\n          }));\n        }\n      } catch (e) {\n        this._itemsCache = extend([], items);\n      }\n    }\n  },\n  _dispose: function () {\n    this._dataController.off(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\n    this.callBase();\n  },\n  _updateByChange: function (keyInfo, items, change, isPartialRefresh) {\n    if (isPartialRefresh) {\n      this._renderItem(change.index, change.data, null, this._findItemElementByKey(change.key));\n    } else {\n      var changedItem = items[indexByKey(keyInfo, items, change.key)];\n      if (changedItem) {\n        update(keyInfo, items, change.key, change.data).done(() => {\n          this._renderItem(items.indexOf(changedItem), changedItem, null, this._findItemElementByKey(change.key));\n        });\n      }\n    }\n  },\n  _insertByChange: function (keyInfo, items, change, isPartialRefresh) {\n    when(isPartialRefresh || insert(keyInfo, items, change.data, change.index)).done(() => {\n      var _change$index;\n      this._beforeItemElementInserted(change);\n      var $itemContainer = this._getItemContainer(change.data);\n      this._renderItem(null !== (_change$index = change.index) && void 0 !== _change$index ? _change$index : items.length, change.data, $itemContainer);\n      this._afterItemElementInserted();\n      this._correctionIndex++;\n    });\n  },\n  _getItemContainer: function (changeData) {\n    return this._itemContainer();\n  },\n  _updateSelectionAfterRemoveByChange: function (removeIndex) {\n    var selectedIndex = this.option(\"selectedIndex\");\n    if (selectedIndex > removeIndex) {\n      this.option(\"selectedIndex\", selectedIndex - 1);\n    } else if (selectedIndex === removeIndex && 1 === this.option(\"selectedItems\").length) {\n      this.option(\"selectedItems\", []);\n    } else {\n      this._normalizeSelectedItems();\n    }\n  },\n  _beforeItemElementInserted: function (change) {\n    var selectedIndex = this.option(\"selectedIndex\");\n    if (change.index <= selectedIndex) {\n      this.option(\"selectedIndex\", selectedIndex + 1);\n    }\n  },\n  _afterItemElementInserted: noop,\n  _removeByChange: function (keyInfo, items, change, isPartialRefresh) {\n    var index = isPartialRefresh ? change.index : indexByKey(keyInfo, items, change.key);\n    var removedItem = isPartialRefresh ? change.oldItem : items[index];\n    if (removedItem) {\n      var $removedItemElement = this._findItemElementByKey(change.key);\n      var deletedActionArgs = this._extendActionArgs($removedItemElement);\n      this._waitDeletingPrepare($removedItemElement).done(() => {\n        if (isPartialRefresh) {\n          this._updateIndicesAfterIndex(index - 1);\n          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\n          this._updateSelectionAfterRemoveByChange(index);\n        } else {\n          this._deleteItemElementByIndex(index);\n          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\n        }\n      });\n      this._correctionIndex--;\n    }\n  },\n  _modifyByChanges: function (changes, isPartialRefresh) {\n    var items = this._editStrategy.itemsGetter();\n    var keyInfo = {\n      key: this.key.bind(this),\n      keyOf: this.keyOf.bind(this)\n    };\n    var dataController = this._dataController;\n    var paginate = dataController.paginate();\n    var group = dataController.group();\n    if (paginate || group) {\n      changes = changes.filter(item => \"insert\" !== item.type || void 0 !== item.index);\n    }\n    changes.forEach(change => this[\"_\".concat(change.type, \"ByChange\")](keyInfo, items, change, isPartialRefresh));\n    this._renderedItemsCount = items.length;\n    this._refreshItemsCache();\n    this._fireContentReadyAction();\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    var nextSiblingElement = $container.children(this._itemSelector()).get(index);\n    domAdapter.insertElement($container.get(0), $itemFrame.get(0), nextSiblingElement);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"items\":\n        var isItemsUpdated = this._partialRefresh(args.value);\n        if (!isItemsUpdated) {\n          this.callBase(args);\n        }\n        break;\n      case \"dataSource\":\n        if (!this.option(\"repaintChangesOnly\") || !args.value) {\n          this.option(\"items\", []);\n        }\n        this.callBase(args);\n        break;\n      case \"repaintChangesOnly\":\n        break;\n      default:\n        this.callBase(args);\n    }\n  }\n});","map":{"version":3,"names":["$","CollectionWidget","extend","each","update","insert","indexByKey","keysEqual","when","findChanges","domAdapter","noop","PRIVATE_KEY_FIELD","inherit","_getDefaultOptions","callBase","repaintChangesOnly","ctor","_this$_dataController","apply","arguments","_customizeStoreLoadOptions","e","dataController","_dataController","getDataSource","isLoaded","_correctionIndex","storeLoadOptions","skip","on","reload","_init","_refreshItemsCache","_findItemElementByKey","key","result","keyExpr","itemElements","_","item","$item","itemData","_getItemData","keyOf","_isItemEquals","_dataSourceChangedHandler","newItems","changes","_modifyByChanges","item1","item2","data","JSON","stringify","_isItemStrictEquals","_shouldAddNewGroup","items","option","length","i","change","type","_partialRefresh","_itemsCache","_editStrategy","itemsGetter","bind","_renderEmptyMessage","map","itemCache","index","_dispose","off","_updateByChange","keyInfo","isPartialRefresh","_renderItem","changedItem","done","indexOf","_insertByChange","_change$index","_beforeItemElementInserted","$itemContainer","_getItemContainer","_afterItemElementInserted","changeData","_itemContainer","_updateSelectionAfterRemoveByChange","removeIndex","selectedIndex","_normalizeSelectedItems","_removeByChange","removedItem","oldItem","$removedItemElement","deletedActionArgs","_extendActionArgs","_waitDeletingPrepare","_updateIndicesAfterIndex","_afterItemElementDeleted","_deleteItemElementByIndex","paginate","group","filter","forEach","concat","_renderedItemsCount","_fireContentReadyAction","_appendItemToContainer","$container","$itemFrame","nextSiblingElement","children","_itemSelector","get","insertElement","_optionChanged","args","name","isItemsUpdated","value"],"sources":["C:/Users/ninad/OneDrive/Radna površina/zavrsni/client/node_modules/devextreme/esm/ui/collection/ui.collection_widget.live_update.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.live_update.js)\r\n * Version: 22.2.6\r\n * Build date: Tue Apr 18 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport CollectionWidget from \"./ui.collection_widget.edit\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    update,\r\n    insert,\r\n    indexByKey\r\n} from \"../../data/array_utils\";\r\nimport {\r\n    keysEqual\r\n} from \"../../data/utils\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    findChanges\r\n} from \"../../core/utils/array_compare\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nvar PRIVATE_KEY_FIELD = \"__dx_key__\";\r\nexport default CollectionWidget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            repaintChangesOnly: false\r\n        })\r\n    },\r\n    ctor: function() {\r\n        var _this$_dataController;\r\n        this.callBase.apply(this, arguments);\r\n        this._customizeStoreLoadOptions = e => {\r\n            var dataController = this._dataController;\r\n            if (dataController.getDataSource() && !this._dataController.isLoaded()) {\r\n                this._correctionIndex = 0\r\n            }\r\n            if (this._correctionIndex && e.storeLoadOptions) {\r\n                e.storeLoadOptions.skip += this._correctionIndex\r\n            }\r\n        }, null === (_this$_dataController = this._dataController) || void 0 === _this$_dataController ? void 0 : _this$_dataController.on(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions)\r\n    },\r\n    reload: function() {\r\n        this._correctionIndex = 0\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._refreshItemsCache();\r\n        this._correctionIndex = 0\r\n    },\r\n    _findItemElementByKey: function(key) {\r\n        var result = $();\r\n        var keyExpr = this.key();\r\n        this.itemElements().each((_, item) => {\r\n            var $item = $(item);\r\n            var itemData = this._getItemData($item);\r\n            if (keyExpr ? keysEqual(keyExpr, this.keyOf(itemData), key) : this._isItemEquals(itemData, key)) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _dataSourceChangedHandler: function(newItems, e) {\r\n        if (null !== e && void 0 !== e && e.changes) {\r\n            this._modifyByChanges(e.changes)\r\n        } else {\r\n            this.callBase(newItems, e);\r\n            this._refreshItemsCache()\r\n        }\r\n    },\r\n    _isItemEquals: function(item1, item2) {\r\n        if (item1 && item1[PRIVATE_KEY_FIELD]) {\r\n            item1 = item1.data\r\n        }\r\n        try {\r\n            return JSON.stringify(item1) === JSON.stringify(item2)\r\n        } catch (e) {\r\n            return item1 === item2\r\n        }\r\n    },\r\n    _isItemStrictEquals: function(item1, item2) {\r\n        return this._isItemEquals(item1, item2)\r\n    },\r\n    _shouldAddNewGroup: function(changes, items) {\r\n        var result = false;\r\n        if (this.option(\"grouped\")) {\r\n            if (!changes.length) {\r\n                result = true\r\n            }\r\n            each(changes, (i, change) => {\r\n                if (\"insert\" === change.type) {\r\n                    result = true;\r\n                    each(items, (_, item) => {\r\n                        if (void 0 !== change.data.key && change.data.key === item.key) {\r\n                            result = false;\r\n                            return false\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _partialRefresh: function() {\r\n        if (this.option(\"repaintChangesOnly\")) {\r\n            var result = findChanges(this._itemsCache, this._editStrategy.itemsGetter(), data => {\r\n                if (data && void 0 !== data[PRIVATE_KEY_FIELD]) {\r\n                    return data[PRIVATE_KEY_FIELD]\r\n                }\r\n                return this.keyOf(data)\r\n            }, this._isItemStrictEquals.bind(this));\r\n            if (result && this._itemsCache.length && !this._shouldAddNewGroup(result, this._itemsCache)) {\r\n                this._modifyByChanges(result, true);\r\n                this._renderEmptyMessage();\r\n                return true\r\n            } else {\r\n                this._refreshItemsCache()\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _refreshItemsCache: function() {\r\n        if (this.option(\"repaintChangesOnly\")) {\r\n            var items = this._editStrategy.itemsGetter();\r\n            try {\r\n                this._itemsCache = extend(true, [], items);\r\n                if (!this.key()) {\r\n                    this._itemsCache = this._itemsCache.map((itemCache, index) => ({\r\n                        [PRIVATE_KEY_FIELD]: items[index],\r\n                        data: itemCache\r\n                    }))\r\n                }\r\n            } catch (e) {\r\n                this._itemsCache = extend([], items)\r\n            }\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._dataController.off(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\r\n        this.callBase()\r\n    },\r\n    _updateByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        if (isPartialRefresh) {\r\n            this._renderItem(change.index, change.data, null, this._findItemElementByKey(change.key))\r\n        } else {\r\n            var changedItem = items[indexByKey(keyInfo, items, change.key)];\r\n            if (changedItem) {\r\n                update(keyInfo, items, change.key, change.data).done(() => {\r\n                    this._renderItem(items.indexOf(changedItem), changedItem, null, this._findItemElementByKey(change.key))\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _insertByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        when(isPartialRefresh || insert(keyInfo, items, change.data, change.index)).done(() => {\r\n            var _change$index;\r\n            this._beforeItemElementInserted(change);\r\n            var $itemContainer = this._getItemContainer(change.data);\r\n            this._renderItem(null !== (_change$index = change.index) && void 0 !== _change$index ? _change$index : items.length, change.data, $itemContainer);\r\n            this._afterItemElementInserted();\r\n            this._correctionIndex++\r\n        })\r\n    },\r\n    _getItemContainer: function(changeData) {\r\n        return this._itemContainer()\r\n    },\r\n    _updateSelectionAfterRemoveByChange: function(removeIndex) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        if (selectedIndex > removeIndex) {\r\n            this.option(\"selectedIndex\", selectedIndex - 1)\r\n        } else if (selectedIndex === removeIndex && 1 === this.option(\"selectedItems\").length) {\r\n            this.option(\"selectedItems\", [])\r\n        } else {\r\n            this._normalizeSelectedItems()\r\n        }\r\n    },\r\n    _beforeItemElementInserted: function(change) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        if (change.index <= selectedIndex) {\r\n            this.option(\"selectedIndex\", selectedIndex + 1)\r\n        }\r\n    },\r\n    _afterItemElementInserted: noop,\r\n    _removeByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        var index = isPartialRefresh ? change.index : indexByKey(keyInfo, items, change.key);\r\n        var removedItem = isPartialRefresh ? change.oldItem : items[index];\r\n        if (removedItem) {\r\n            var $removedItemElement = this._findItemElementByKey(change.key);\r\n            var deletedActionArgs = this._extendActionArgs($removedItemElement);\r\n            this._waitDeletingPrepare($removedItemElement).done(() => {\r\n                if (isPartialRefresh) {\r\n                    this._updateIndicesAfterIndex(index - 1);\r\n                    this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\r\n                    this._updateSelectionAfterRemoveByChange(index)\r\n                } else {\r\n                    this._deleteItemElementByIndex(index);\r\n                    this._afterItemElementDeleted($removedItemElement, deletedActionArgs)\r\n                }\r\n            });\r\n            this._correctionIndex--\r\n        }\r\n    },\r\n    _modifyByChanges: function(changes, isPartialRefresh) {\r\n        var items = this._editStrategy.itemsGetter();\r\n        var keyInfo = {\r\n            key: this.key.bind(this),\r\n            keyOf: this.keyOf.bind(this)\r\n        };\r\n        var dataController = this._dataController;\r\n        var paginate = dataController.paginate();\r\n        var group = dataController.group();\r\n        if (paginate || group) {\r\n            changes = changes.filter(item => \"insert\" !== item.type || void 0 !== item.index)\r\n        }\r\n        changes.forEach(change => this[\"_\".concat(change.type, \"ByChange\")](keyInfo, items, change, isPartialRefresh));\r\n        this._renderedItemsCount = items.length;\r\n        this._refreshItemsCache();\r\n        this._fireContentReadyAction()\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        var nextSiblingElement = $container.children(this._itemSelector()).get(index);\r\n        domAdapter.insertElement($container.get(0), $itemFrame.get(0), nextSiblingElement)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"items\":\r\n                var isItemsUpdated = this._partialRefresh(args.value);\r\n                if (!isItemsUpdated) {\r\n                    this.callBase(args)\r\n                }\r\n                break;\r\n            case \"dataSource\":\r\n                if (!this.option(\"repaintChangesOnly\") || !args.value) {\r\n                    this.option(\"items\", [])\r\n                }\r\n                this.callBase(args);\r\n                break;\r\n            case \"repaintChangesOnly\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}